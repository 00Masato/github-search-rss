{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49767.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1959594919\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49767\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49767/hovercard\" href=\"https://github.com/rails/rails/issues/49767\">#49767</a>.</p>\n<p dir=\"auto\">All other enum-related methods are already reloading type map.<br>\nI am not sure are tests needed for this?</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/ghiculescu/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ghiculescu\">@ghiculescu</a> (as implementor of the PostgreSQL <code class=\"notranslate\">enum</code>)</p>",
            "url": "https://github.com/rails/rails/pull/49772",
            "title": "Reload type map when creating or dropping PostgreSQL enums",
            "date_modified": "2023-10-24T20:37:15.000Z",
            "date_published": "2023-10-24T20:33:09.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8122246?u=2dbe607a66a7616297b78647eeb4e0dbff657c3a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><ul dir=\"auto\">\n<li>\n<h3 dir=\"auto\">Context</h3>\n<p dir=\"auto\">The Tagged Logging functionality has been a source of a few issues over the years, especially when combined with the broadcasting feature. Initializating a Tagged Logger was also not very intuitive:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"logger = Logger.new(STDOUT) tagged_logger = ActiveSupport::TaggedLogging.new(logger)\n# Would expect the `tagged_logger` to be an instance of `AS::TaggedLogging` \n# but it's a clone of the `logger`.\n\ntagged_logger.formatter = -&gt;(_, _, _, message) do\n  { message: message }\nend\n# Modifies the formatter to output JSON formatted logs.\n# This breaks tagged logging.\"><pre class=\"notranslate\"><span class=\"pl-s1\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDOUT</span><span class=\"pl-kos\">)</span> <span class=\"pl-s1\">tagged_logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-v\">TaggedLogging</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">logger</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\"># Would expect the `tagged_logger` to be an instance of `AS::TaggedLogging` </span>\n<span class=\"pl-c\"># but it's a clone of the `logger`.</span>\n\n<span class=\"pl-s1\">tagged_logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">formatter</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">-&gt;</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">_</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">_</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">_</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">message</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">message</span>: <span class=\"pl-s1\">message</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-k\">end</span>\n<span class=\"pl-c\"># Modifies the formatter to output JSON formatted logs.</span>\n<span class=\"pl-c\"># This breaks tagged logging.</span></pre></div>\n<p dir=\"auto\">I believe the main reason of those issues is because tagged logging is implemented at the wrong level.</p>\n<h3 dir=\"auto\">Solution</h3>\n<p dir=\"auto\">I made a proposal on the Ruby logger upstream in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1790019942\" data-permission-text=\"Title is private\" data-url=\"https://github.com/ruby/logger/issues/90\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/ruby/logger/pull/90/hovercard\" href=\"https://github.com/ruby/logger/pull/90\">ruby/logger#90</a> to help solve this but it hasn't been reviewed yet. So I thought about adding it here for now. The TL;DR is to decouple formatting and adding extra information to logs (which is what tagged logging does).</p>\n<h3 dir=\"auto\">Deprecation</h3>\n<p dir=\"auto\">Since TaggedLogging will no longer access the formatter, there is a few things I'd like to deprecate such as setting a default formatter </p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/d68e43922bc11829c52ad9f736ad5549fc97631b/activesupport/lib/active_support/tagged_logging.rb#L124\">rails/activesupport/lib/active_support/tagged_logging.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 124\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/d68e43922bc11829c52ad9f736ad5549fc97631b\">d68e439</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L124\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"124\"></td>\n          <td id=\"LC124\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">formatter</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-v\">Logger</span>::<span class=\"pl-v\">SimpleFormatter</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n but doing so in this PR would increase the size of the diff significantly and would maybe distract for PR reviews.<p></p>\n<p dir=\"auto\">Another thing that I believe should be deprecated is <code class=\"notranslate\">ActiveSupport::TaggedLogging.new</code>. Adding tagging functionality to a logger should be done using a more ruby approach such as <code class=\"notranslate\">logger.extend(AS::TaggedLogging)</code>.</p>\n</li>\n</ul>\n<hr>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49757.\">Fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1958722861\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49757\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49757/hovercard\" href=\"https://github.com/rails/rails/issues/49757\">#49757</a><br>\n<span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49745.\">Fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1956771268\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49745\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49745/hovercard\" href=\"https://github.com/rails/rails/issues/49745\">#49745</a><br>\n<span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #46084.\">Fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1379588419\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46084\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46084/hovercard\" href=\"https://github.com/rails/rails/issues/46084\">#46084</a><br>\n<span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #44668.\">Fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1167130613\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/44668\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/44668/hovercard\" href=\"https://github.com/rails/rails/issues/44668\">#44668</a></p>",
            "url": "https://github.com/rails/rails/pull/49771",
            "title": "Reimplement TaggedLogging:",
            "date_modified": "2023-10-24T21:10:38.000Z",
            "date_published": "2023-10-24T17:24:15.000Z",
            "author": {
                "name": "Edouard-chin",
                "url": "https://github.com/Edouard-chin"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/148003?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation</h3>\n<p dir=\"auto\">This Pull Request has been created since <code class=\"notranslate\">named_variants</code> can be <code class=\"notranslate\">nil</code> and some code doesn't respect it.</p>\n<p dir=\"auto\">Admittedly I can only trigger the code path with a somewhat contrived example, namely creating an <code class=\"notranslate\">ActiveRecord::Attachment</code> manually without declaring a <code class=\"notranslate\">has_one_attached</code> or similar:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User &lt; ActiveRecord::Base; end\n\nuser = User.create!\n\nblob = ActiveStorage::Blob.create_and_upload!(\n  io: StringIO.new('xxx'),\n  filename: 'some_filename'\n)\n\nActiveStorage::Attachment.create(\n  name: 'test',\n  blob: blob,\n  record: user\n)\n\n# =&gt; NoMethodError: undefined method `each' for nil:NilClass\n# /.../activestorage/app/models/active_storage/attachment.rb:134:in `transform_variants_later'\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">;</span> <span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span>\n\n<span class=\"pl-s1\">blob</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">Blob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create_and_upload!</span><span class=\"pl-kos\">(</span>\n  <span class=\"pl-pds\">io</span>: <span class=\"pl-v\">StringIO</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'xxx'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-pds\">filename</span>: <span class=\"pl-s\">'some_filename'</span>\n<span class=\"pl-kos\">)</span>\n\n<span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">Attachment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span>\n  <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">'test'</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-pds\">blob</span>: <span class=\"pl-s1\">blob</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-pds\">record</span>: <span class=\"pl-s1\">user</span>\n<span class=\"pl-kos\">)</span>\n\n<span class=\"pl-c\"># =&gt; NoMethodError: undefined method `each' for nil:NilClass</span>\n<span class=\"pl-c\"># /.../activestorage/app/models/active_storage/attachment.rb:134:in `transform_variants_later'</span></pre></div>\n<h3 dir=\"auto\">Reproduction template</h3>\n<p dir=\"auto\">You can reproduce it yourself with this template:</p>\n<details><summary>Full reproduction template</summary>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# frozen_string_literal: true\n\nrequire 'bundler/inline'\n\ngemfile(true) do\n  source 'https://rubygems.org'\n\n  git_source(:github) { |repo| &quot;https://github.com/#{repo}.git&quot; }\n\n  gem 'rails', github: 'rails/rails', branch: 'main'\n  gem 'sqlite3'\nend\n\nrequire 'active_record/railtie'\nrequire 'active_storage/engine'\nrequire 'tmpdir'\n\nclass TestApp &lt; Rails::Application\n  config.root = __dir__\n  config.hosts &lt;&lt; 'example.org'\n  config.eager_load = false\n  config.session_store :cookie_store, key: 'cookie_store_key'\n  config.secret_key_base = 'secret_key_base'\n\n  config.logger = Logger.new($stdout)\n  Rails.logger  = config.logger\n\n  config.active_storage.service = :local\n  config.active_storage.service_configurations = {\n    local: {\n      root: Dir.tmpdir,\n      service: 'Disk'\n    }\n  }\nend\n\nENV['DATABASE_URL'] = 'sqlite3::memory:'\n\nRails.application.initialize!\n\nrequire ActiveStorage::Engine.root.join('db/migrate/20170806125915_create_active_storage_tables.rb').to_s\n\nActiveRecord::Schema.define do\n  CreateActiveStorageTables.new.change\n\n  create_table :users, force: true\nend\n\nclass User &lt; ActiveRecord::Base\n  has_one_attached :profile\nend\n\nrequire 'minitest/autorun'\n\nclass BugTest &lt; Minitest::Test\n  def test_upload_and_download\n    user = User.create!\n\n    blob = ActiveStorage::Blob.create_and_upload!(\n      io: StringIO.new('xxx'),\n      filename: 'some_filename'\n    )\n\n    ActiveStorage::Attachment.create(\n      name: 'test',\n      blob: blob,\n      record: user\n    )\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># frozen_string_literal: true</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">'bundler/inline'</span>\n\n<span class=\"pl-en\">gemfile</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">source</span> <span class=\"pl-s\">'https://rubygems.org'</span>\n\n  <span class=\"pl-en\">git_source</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:github</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">repo</span>| <span class=\"pl-s\">\"https://github.com/<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">repo</span><span class=\"pl-kos\">}</span></span>.git\"</span> <span class=\"pl-kos\">}</span>\n\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">'rails'</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">github</span>: <span class=\"pl-s\">'rails/rails'</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">branch</span>: <span class=\"pl-s\">'main'</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">'sqlite3'</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">'active_record/railtie'</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">'active_storage/engine'</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">'tmpdir'</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">TestApp</span> &lt; <span class=\"pl-v\">Rails</span>::<span class=\"pl-v\">Application</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">root</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">__dir__</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">hosts</span> &lt;&lt; <span class=\"pl-s\">'example.org'</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">eager_load</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">false</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">session_store</span> <span class=\"pl-pds\">:cookie_store</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">key</span>: <span class=\"pl-s\">'cookie_store_key'</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">secret_key_base</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'secret_key_base'</span>\n\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span>$stdout<span class=\"pl-kos\">)</span>\n  <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span>  <span class=\"pl-c1\">=</span> <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span>\n\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_storage</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">service</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:local</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_storage</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">service_configurations</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span>\n    <span class=\"pl-pds\">local</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-pds\">root</span>: <span class=\"pl-v\">Dir</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">tmpdir</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-pds\">service</span>: <span class=\"pl-s\">'Disk'</span>\n    <span class=\"pl-kos\">}</span>\n  <span class=\"pl-kos\">}</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-c1\">ENV</span><span class=\"pl-kos\">[</span><span class=\"pl-s\">'DATABASE_URL'</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'sqlite3::memory:'</span>\n\n<span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">initialize!</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">Engine</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">root</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">join</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'db/migrate/20170806125915_create_active_storage_tables.rb'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_s</span>\n\n<span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Schema</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">define</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-v\">CreateActiveStorageTables</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">change</span>\n\n  <span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:users</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">has_one_attached</span> <span class=\"pl-pds\">:profile</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">'minitest/autorun'</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">BugTest</span> &lt; <span class=\"pl-v\">Minitest</span>::<span class=\"pl-v\">Test</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_upload_and_download</span>\n    <span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span>\n\n    <span class=\"pl-s1\">blob</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">Blob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create_and_upload!</span><span class=\"pl-kos\">(</span>\n      <span class=\"pl-pds\">io</span>: <span class=\"pl-v\">StringIO</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'xxx'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-pds\">filename</span>: <span class=\"pl-s\">'some_filename'</span>\n    <span class=\"pl-kos\">)</span>\n\n    <span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">Attachment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span>\n      <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">'test'</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-pds\">blob</span>: <span class=\"pl-s1\">blob</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-pds\">record</span>: <span class=\"pl-s1\">user</span>\n    <span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n</details>\n<h3 dir=\"auto\">Background</h3>\n<p dir=\"auto\">I'm doing something like above in an app and I'm not sure if this is even an intended use case.</p>\n<p dir=\"auto\">Though even if not, maybe it could still be merged since <code class=\"notranslate\">#named_variants</code> itself already considers the case where the reflection is <code class=\"notranslate\">nil</code>:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"    # app/models/active_storage/attachment.rb:147\n    def named_variants\n      record.attachment_reflections[name]&amp;.named_variants\n    end\"><pre class=\"notranslate\">    <span class=\"pl-c\"># app/models/active_storage/attachment.rb:147</span>\n    <span class=\"pl-k\">def</span> <span class=\"pl-en\">named_variants</span>\n      <span class=\"pl-en\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attachment_reflections</span><span class=\"pl-kos\">[</span><span class=\"pl-en\">name</span><span class=\"pl-kos\">]</span>&amp;.<span class=\"pl-en\">named_variants</span>\n    <span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">So at least it is consistent that other methods using <code class=\"notranslate\">#named_variants</code> can now deal with that possible <code class=\"notranslate\">nil</code>.</p>\n<p dir=\"auto\">For reference: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1596229744\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47473\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47473/hovercard\" href=\"https://github.com/rails/rails/pull/47473\">#47473</a> introduced the code that fails in this example.</p>\n<h3 dir=\"auto\">Test</h3>\n<p dir=\"auto\">I didn't add any test for this. If you think this is merge-worthy and needs tests I can do so, please give me a ping. Thanks!</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49770",
            "title": "respect that `named_variants` can be `nil`",
            "date_modified": "2023-10-24T16:59:28.000Z",
            "date_published": "2023-10-24T16:59:24.000Z",
            "author": {
                "name": "doits",
                "url": "https://github.com/doits"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39735028?u=91330295c614cf3cec0b64bf242a14fc2ceb358f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49707.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1953127535\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49707\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49707/hovercard\" href=\"https://github.com/rails/rails/issues/49707\">#49707</a></p>\n<p dir=\"auto\">This Pull Request has been created because we noticed that <code class=\"notranslate\">ActiveRecord::Core#inspect</code> was taking &gt;9s to run for some large objects in production. This is because the parameter filter is be executed for every attribute.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request introduces configuration for <code class=\"notranslate\">ActiveRecord::Core#inspect</code>. By default, <code class=\"notranslate\">inspect</code> just returns the object with its id (eg <code class=\"notranslate\">#&lt;Post id: 1&gt;</code>. The attributes to include can be configured with <code class=\"notranslate\">Post.attributes_to_inspect=</code>. If you want to full output with all the attributes you can call <code class=\"notranslate\">Post.full_inspect</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">In my first draft I had a config to disable this, if you just always want to use <code class=\"notranslate\">full_inspect</code>. But it seems easy enough just to do <code class=\"notranslate\">alias_method :inspect, :full_inspect</code> on the model, or in <code class=\"notranslate\">ApplicationRecord</code> if you want to disable it globally. So the config didn't seem worth it to me.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49765",
            "title": "Make the output of `ActiveRecord::Core#inspect` configurable.",
            "date_modified": "2023-10-24T20:05:41.000Z",
            "date_published": "2023-10-24T14:20:10.000Z",
            "author": {
                "name": "andrewn617",
                "url": "https://github.com/andrewn617"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1100970?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background + Detail</h3>\n<p dir=\"auto\">Currently, the default option for <code class=\"notranslate\">order</code> is <code class=\"notranslate\">asc</code> and can also be set to <code class=\"notranslate\">desc</code> or passed an array with those values. This works great in most cases, however sometimes forcing the <code class=\"notranslate\">ORDER</code> clause for the primary key can result into a sort + heap scan in Postgresql, by passing an index lookup and may cause a performance tax and in those situations where we don't care about order, it'd be lovely to continue using <code class=\"notranslate\">in_batches</code> with no order instead of having to write custom SQL. Example usage</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Event\n  .where(story_run_id: ids)\n  .lock(&quot;FOR UPDATE SKIP LOCKED&quot;)\n  .in_batches(of: 1000, order: nil, &amp;:delete_all)\"><pre class=\"notranslate\"><span class=\"pl-v\">Event</span>\n  <span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">story_run_id</span>: <span class=\"pl-en\">ids</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-kos\">.</span><span class=\"pl-en\">lock</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"FOR UPDATE SKIP LOCKED\"</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-kos\">.</span><span class=\"pl-en\">in_batches</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">of</span>: <span class=\"pl-c1\">1000</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">order</span>: <span class=\"pl-c1\">nil</span><span class=\"pl-kos\">,</span> &amp;<span class=\"pl-pds\">:delete_all</span><span class=\"pl-kos\">)</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Chose to support <code class=\"notranslate\">nil</code> for the <code class=\"notranslate\">order</code> option over coming up with a new function like <code class=\"notranslate\">find_in_unordered_batches</code> or similar.</p>\n<p dir=\"auto\">Curious to hear more. For instance, this works for when <code class=\"notranslate\">delete_all</code> is passed, but may not work as expected if <code class=\"notranslate\">order: nil</code>, in any other case because the offset would be off?</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49764",
            "title": "Support the ability to run find_each/find_in_batches queries without order",
            "date_modified": "2023-10-24T15:16:51.000Z",
            "date_published": "2023-10-24T13:28:48.000Z",
            "author": {
                "name": "shayonj",
                "url": "https://github.com/shayonj"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22231095?u=fc75f9764434943effe06d6c1dc48d40a5003b0c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Italian translation is not accessible.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request removes the broken italian translation reference from rails guide.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49760",
            "title": "Remove broken external guide translation reference [ci skip]",
            "date_modified": "2023-10-24T13:05:18.000Z",
            "date_published": "2023-10-24T10:55:17.000Z",
            "author": {
                "name": "akhilgkrishnan",
                "url": "https://github.com/akhilgkrishnan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><code class=\"notranslate\">STATS_DIRECTORIES</code> is used by third parties to add directories to the statistics output. It's a global constant defined in a Rake file, that gets loaded anytime a rails command is executed.</p>\n<p dir=\"auto\">To remove the dependency on Rake and avoid a global constant we can move<br>\nthe constant to the Rails.application.configuration.</p>\n<p dir=\"auto\"><code class=\"notranslate\">deprecate_constant</code> couldn't be used here as that doesn't seem to work for the root namespace.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49759",
            "title": "Deprecate `STATS_DIRECTORIES` in favor of `config.code_statistics.directories`",
            "date_modified": "2023-10-24T18:37:20.000Z",
            "date_published": "2023-10-24T08:59:21.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/15084146?u=a691f2bcbb0260c6796bac4880c3035b08231ce8&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because the action-mailbox incineration feature's description is a little vague.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the description of how the incineration is invoked to be more clearly.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49743",
            "title": "Improve docs for the action-mail box incineration",
            "date_modified": "2023-10-23T00:09:33.000Z",
            "date_published": "2023-10-22T14:15:19.000Z",
            "author": {
                "name": "yoshixi",
                "url": "https://github.com/yoshixi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/17356208?u=043419e36e1fe090120ca8fe325038946c9dd1e8&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Dockerfile generated by <code class=\"notranslate\">rails new</code> sets the default user and group by name instead of UID:GID.<br>\nWhen run in a kubernetes pod with <code class=\"notranslate\">runAsNonRoot: true</code> security context:</p>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"apiVersion: v1\nkind: Pod\nmetadata:\n  name: rails-rootless\n  labels:\n    name: rails-rootless\n    namespace: default\nspec:\n  containers:\n    - name: rails-rootless\n      image: rails-rootless\n  securityContext:\n    runAsNonRoot: true\"><pre class=\"notranslate\"><span class=\"pl-ent\">apiVersion</span>: <span class=\"pl-c1\">v1</span>\n<span class=\"pl-ent\">kind</span>: <span class=\"pl-s\">Pod</span>\n<span class=\"pl-ent\">metadata</span>:\n  <span class=\"pl-ent\">name</span>: <span class=\"pl-s\">rails-rootless</span>\n  <span class=\"pl-ent\">labels</span>:\n    <span class=\"pl-ent\">name</span>: <span class=\"pl-s\">rails-rootless</span>\n    <span class=\"pl-ent\">namespace</span>: <span class=\"pl-s\">default</span>\n<span class=\"pl-ent\">spec</span>:\n  <span class=\"pl-ent\">containers</span>:\n    - <span class=\"pl-ent\">name</span>: <span class=\"pl-s\">rails-rootless</span>\n      <span class=\"pl-ent\">image</span>: <span class=\"pl-s\">rails-rootless</span>\n  <span class=\"pl-ent\">securityContext</span>:\n    <span class=\"pl-ent\">runAsNonRoot</span>: <span class=\"pl-c1\">true</span></pre></div>\n<p dir=\"auto\">Kubernetes produces an error: <code class=\"notranslate\">container has runAsNonRoot and image has non-numeric user (rails), cannot verify user is non-root</code></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request fixes the issue by using numeric UID:GID, optionally customizable at build time with RAILS_UID and RAILS_GID build args. Default values, 1000:1000, are set to keep current behavior intact.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49742",
            "title": "Use numeric UID and GID in Dockerfile template",
            "date_modified": "2023-10-22T11:08:35.000Z",
            "date_published": "2023-10-22T09:56:11.000Z",
            "author": {
                "name": "ivanfed0t0v",
                "url": "https://github.com/ivanfed0t0v"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6050683?u=ab8a6db7059eec8f83246b7f136f55c31b852b09&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The introduction of <a href=\"https://github.com/rails/rails/pull/37400\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/37400/hovercard\">\"strict loading\" associations in Ruby on Rails 6.1</a> was a significant enhancement towards solving the common N+1 query problem faced by beginners. Despite its utility, this feature is not yet widely adopted in the development community. One way to promote its usage could be by integrating it more prominently within the sample app. By doing so, it could serve as a practical example for developers.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This adds comments to development.rb in the sample app generator template</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49741",
            "title": "add strict loading config comments to sample app generator",
            "date_modified": "2023-10-22T08:55:09.000Z",
            "date_published": "2023-10-22T08:55:06.000Z",
            "author": {
                "name": "uurcank",
                "url": "https://github.com/uurcank"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/139634?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This allows Resque::DirtyExit exceptions to be handled in the same way as other exceptions in ActiveJobs.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This adds an <code class=\"notranslate\">on_failure</code> hook to the Resque JobWrapper class so that when a job is detected as having been killed (via prune_dead_workers) standard ActiveJob retry logic can be used to determine what to do next.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">Because the Resque::DirtyExit exception is generated in the thread that sees that another worker has died (ie. the pruning thread) it's not visible to existing exception handling code in ActiveJob - it requires resque specific code to detect that this has happened and trigger the exception hand;er.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[?] Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49735",
            "title": "Catch and handle Resque::DirtyExit exceptions in ActiveJob",
            "date_modified": "2023-10-21T19:31:11.000Z",
            "date_published": "2023-10-21T19:31:07.000Z",
            "author": {
                "name": "geoffyoungs",
                "url": "https://github.com/geoffyoungs"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/7480?u=7e61e73cc5bdaed0e4c654b640f3d02956e280a1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I would like to be able to serve precompiled and compressed WASM files with ActionDispatch::Static.</p>\n<p dir=\"auto\">This Pull Request has been created because I currently don't see how to customize the list of <code class=\"notranslate\">compressible_content_types</code> without monkey-patching the middleware. The PR simply adds <code class=\"notranslate\">application/wasm</code> to the matched content types.</p>\n<p dir=\"auto\">I was wondering if this simple approach is good enough or if you see a better way to support his. If yes I am happy to add a test with a <code class=\"notranslate\">.wasm</code> file-fixture.</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49719",
            "title": "Add application/wasm to the compressible content types",
            "date_modified": "2023-10-20T10:51:05.000Z",
            "date_published": "2023-10-20T10:46:35.000Z",
            "author": {
                "name": "haberbyte",
                "url": "https://github.com/haberbyte"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1753245?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">SQLite is becoming a more capable database and there are more companies using it in production. It's really good for self-hosted/small environments where you don't want to boot a separate server for the DB. There's no more need to discourage his usage via a warning.</p>\n<p dir=\"auto\">See <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1943103461\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49633\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49633/hovercard\" href=\"https://github.com/rails/rails/pull/49633\">#49633</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49715",
            "title": "Remove SQLite production warning",
            "date_modified": "2023-10-24T21:09:13.000Z",
            "date_published": "2023-10-20T07:33:22.000Z",
            "author": {
                "name": "intrip",
                "url": "https://github.com/intrip"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/20938712?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49656.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1946035487\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49656\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49656/hovercard\" href=\"https://github.com/rails/rails/issues/49656\">#49656</a></p>\n<p dir=\"auto\">Unlike controllers, mailers can't infer the protocol from the request, so users need to specify it.</p>",
            "url": "https://github.com/rails/rails/pull/49712",
            "title": "[ci skip] Update Action Mailer guide on how to add images",
            "date_modified": "2023-10-24T18:04:10.000Z",
            "date_published": "2023-10-20T02:18:34.000Z",
            "author": {
                "name": "MatheusRich",
                "url": "https://github.com/MatheusRich"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/96156234?u=9ced8d6ac6128a8dea78e7f0d9233669ff0ffecf&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This fix allows the <code class=\"notranslate\">polymorphic_method</code> in the <code class=\"notranslate\">HelperMethodBuilder</code> class in <code class=\"notranslate\">polymorphic_routes.rb</code> to discern whether or not a singular resource is being passed into it.  If it finds a singular resource it will pass in <code class=\"notranslate\">format: nil</code> to the options(if it doesn't already have a format set) so that we can have an edited object using the patch method get sent to the proper URL  instead of appending a period and number to the end.</p>\n<p dir=\"auto\">This is trying to make the method a little smarter as suggested in the Issue thread so we can render urls properly.</p>\n<p dir=\"auto\">The current bug behavior in 7.1:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Started PATCH &quot;/author.1&quot; for ::1 at 2023-10-12 15:03:31 -0400\"><pre class=\"notranslate\"><span class=\"pl-en\">Started</span> <span class=\"pl-c1\">PATCH</span> <span class=\"pl-s\">\"/author.1\"</span> <span class=\"pl-k\">for</span> ::<span class=\"pl-c1\">1</span> <span class=\"pl-en\">at</span> <span class=\"pl-c1\">2023</span>-<span class=\"pl-c1\">10</span>-<span class=\"pl-c1\">12</span> <span class=\"pl-c1\">15</span><span class=\"pl-pds\">:03</span><span class=\"pl-pds\">:31</span> -<span class=\"pl-c1\">0400</span></pre></div>\n<p dir=\"auto\">This fix corrects this to:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Started PATCH &quot;/author&quot; for ::1 at 2023-10-12 15:03:31 -0400\"><pre class=\"notranslate\"><span class=\"pl-en\">Started</span> <span class=\"pl-c1\">PATCH</span> <span class=\"pl-s\">\"/author\"</span> <span class=\"pl-k\">for</span> ::<span class=\"pl-c1\">1</span> <span class=\"pl-en\">at</span> <span class=\"pl-c1\">2023</span>-<span class=\"pl-c1\">10</span>-<span class=\"pl-c1\">12</span> <span class=\"pl-c1\">15</span><span class=\"pl-pds\">:03</span><span class=\"pl-pds\">:31</span> -<span class=\"pl-c1\">0400</span></pre></div>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49604.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1940028753\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49604\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49604/hovercard\" href=\"https://github.com/rails/rails/issues/49604\">#49604</a></p>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because [REPLACE ME]</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes [REPLACE ME]</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49705",
            "title": "Render proper URLs for singular resource routes",
            "date_modified": "2023-10-21T16:51:08.000Z",
            "date_published": "2023-10-19T19:28:11.000Z",
            "author": {
                "name": "paulreece",
                "url": "https://github.com/paulreece"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2651240?u=97e6903620ef2874e2231cee9eb2654b7811d750&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">It is a very common pattern to replace the title in other views, I find myself doing it on every single new project I create.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49702",
            "title": "Use content_for for titles in the application layout",
            "date_modified": "2023-10-20T15:46:42.000Z",
            "date_published": "2023-10-19T17:04:29.000Z",
            "author": {
                "name": "lazaronixon",
                "url": "https://github.com/lazaronixon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Add documentation for <code class=\"notranslate\">ActionText::RichText#to_s</code> and <code class=\"notranslate\">ActionText::Content#to_s</code> that demonstrates Action Text's ability to sanitize and scrub its content.</p>",
            "url": "https://github.com/rails/rails/pull/49696",
            "title": "Document Action Text Sanitization",
            "date_modified": "2023-10-23T17:50:39.000Z",
            "date_published": "2023-10-19T13:56:51.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/248174?u=679698ae9aa6ac1cd046737efadd767c154326c6&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">We often use <code class=\"notranslate\">dig</code> with credentials and custom configurations, but the method<br>\nreturns <code class=\"notranslate\">nil</code> instead of an error if a non-existent key is specified by a typo.</p>\n<p dir=\"auto\">It is possible to write without dig to quickly notice a wrong key, but this is tedious.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Before\nRails.application.credentials.fetch(:aws).fetch(:access_key_id)\nRails.application.config_for(:example).fetch(:foo).fetch(:bar)\"><pre class=\"notranslate\"><span class=\"pl-c\"># Before</span>\n<span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">credentials</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fetch</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:aws</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fetch</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:access_key_id</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">config_for</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:example</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fetch</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:foo</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fetch</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:bar</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">To make this simple to write, this commit adds a bang version method.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# After\nRails.application.credentials.dig!(:aws, :access_key_id)\nRails.application.config_for(:example).dig!(:foo, :bar)\"><pre class=\"notranslate\"><span class=\"pl-c\"># After</span>\n<span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">credentials</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">dig!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:aws</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:access_key_id</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">config_for</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:example</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">dig!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:foo</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:bar</span><span class=\"pl-kos\">)</span></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request implements <code class=\"notranslate\">OrderedOptions#dig!</code> to raise an exception if a non-existent key is specified.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">There was discussion about a similar feature in Ruby, but it was last updated a year ago.</p>\n<ul dir=\"auto\">\n<li><a href=\"https://bugs.ruby-lang.org/issues/14602\" rel=\"nofollow\">Version of dig that raises error if a key is not present</a></li>\n<li><a href=\"https://bugs.ruby-lang.org/issues/15563\" rel=\"nofollow\">#dig that throws an exception if a key doesn't exist</a></li>\n</ul>\n<p dir=\"auto\">In my use case, <code class=\"notranslate\">OrderedOptions#dig!</code> is sufficient, so I avoided <code class=\"notranslate\">Hash#dig!</code> which has a large impact.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49693",
            "title": "Implement `OrderedOptions#dig!`",
            "date_modified": "2023-10-24T15:22:07.000Z",
            "date_published": "2023-10-19T09:51:43.000Z",
            "author": {
                "name": "sinsoku",
                "url": "https://github.com/sinsoku"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/99301559?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created in order to fix issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1946043368\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49657\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49657/hovercard\" href=\"https://github.com/rails/rails/issues/49657\">#49657</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the logic of the insert method in database_statements.rb such that if a list of returning columns is specified, a list of values corresponding to the columns will be returned. Previously, it was possible for an integer to be returned even if the list of returning columns was not nil.</p>\n<p dir=\"auto\">A test file create_new_entry.rb is provided to ensure the correct functionality of the insert method.</p>\n<p dir=\"auto\">The sample code provided by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/nicoco007/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nicoco007\">@nicoco007</a> is now functioning correctly.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49692",
            "title": "Fix issue with wrong argument type when using prefetch_primary_key?",
            "date_modified": "2023-10-19T16:44:45.000Z",
            "date_published": "2023-10-18T23:09:03.000Z",
            "author": {
                "name": "mguan2020",
                "url": "https://github.com/mguan2020"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8397222?u=cf1686c0219f38bb87d552ea5131863c43992f1a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">A recent PR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1907831891\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49349\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49349/hovercard\" href=\"https://github.com/rails/rails/pull/49349\">#49349</a> introduced a number of SQLite optimizations to improve database performance.</p>\n<p dir=\"auto\">Those optimizations were hard coded in the SQLite adapter which left developers in the same position they were before - that if they wanted to configure SQLite beyond that default configuration, they still needed to rely on monkey patching the adapter.</p>\n<p dir=\"auto\">Hard coding those parameters also introduce the potential for breakage.   For example, the write ahead log is now the default journal mode.  The side effect of this is that SQLite will use three files instead of one for the database which may break any operational scripts (e.g. the backup strategy must change).</p>\n<p dir=\"auto\">Another issue is that WAL mode is an optimization for writing to databases, and now with Rails 7.1 it makes a false assumption that you'll always want to write to any SQLite database.</p>\n<p dir=\"auto\">Rails 7.1 now throws an error connecting to read-only sqlite database that isn't already in WAL mode.</p>\n<p dir=\"auto\">A use case where that is problematic. Let's say on each build of my application I embed the latest version of a Zipcode database that we receive from a 3rd party.  The database, since it is readonly, has the correct file permissions (readonly) and is embedded with journal mode turned off (no -shm or -wal files).   7.1 will throw an error now since it can't change the database to use WAL.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request moves those performance optimizations into the database configuration file.   Developers will now have the option to tune their SQLite configurations by specifying PRAGMA values along with the rest of their database configuration, in <code class=\"notranslate\">config/database.yml</code>.</p>\n<p dir=\"auto\">The defaults that were introduced in 7.1 have been moved to the database.yml generator so new applications can benefit from them while existing applications upgrading 7.1+ won't be impacted side effects.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49691",
            "title": "Move SQLite pragma configuration to the database configuration file",
            "date_modified": "2023-10-19T18:33:57.000Z",
            "date_published": "2023-10-18T18:59:05.000Z",
            "author": {
                "name": "suwyn",
                "url": "https://github.com/suwyn"
            }
        }
    ]
}