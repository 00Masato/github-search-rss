{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/44903779?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">There is a pretty old issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"27180722\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/13971\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/13971/hovercard\" href=\"https://github.com/rails/rails/issues/13971\">#13971</a><br>\n<a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/dhh/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dhh\">@dhh</a> offered to make such contributions in <a href=\"https://github.com/rails/rails/issues/13971#issuecomment-282989242\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/13971/hovercard\">2017</a><br>\nBut opened MR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"838110510\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/41730\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/41730/hovercard\" href=\"https://github.com/rails/rails/pull/41730\">#41730</a> was not maintained since 2021<br>\nI tried to take into account the comments in that code review</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds <code class=\"notranslate\">:validate</code> option for enums</p>\n<p dir=\"auto\">If you want the enum value to be validated before saving, use the option <code class=\"notranslate\">:validate</code>:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Conversation &lt; ApplicationRecord\n  enum :status, %i[active archived], validate: true\nend\n\nconversation = Conversation.new\n\nconversation.status = :unknown\nconversation.valid? # =&gt; false\n\nconversation.status = nil\nconversation.valid? # =&gt; false\n\nconversation.status = :active\nconversation.valid? # =&gt; true\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Conversation</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">enum</span> <span class=\"pl-pds\">:status</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">%i[</span><span class=\"pl-pds\">active</span> <span class=\"pl-pds\">archived</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">validate</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">conversation</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">status</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:unknown</span>\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valid?</span> <span class=\"pl-c\"># =&gt; false</span>\n\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">status</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">nil</span>\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valid?</span> <span class=\"pl-c\"># =&gt; false</span>\n\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">status</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:active</span>\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valid?</span> <span class=\"pl-c\"># =&gt; true</span></pre></div>\n<p dir=\"auto\">It is also possible to pass additional validation options:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Conversation &lt; ApplicationRecord\n  enum :status, %i[active archived], validate: { allow_nil: true }\nend\n\nconversation = Conversation.new\n\nconversation.status = :unknown\nconversation.valid? # =&gt; false\n\nconversation.status = nil\nconversation.valid? # =&gt; true\n\nconversation.status = :active\nconversation.valid? # =&gt; true\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Conversation</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">enum</span> <span class=\"pl-pds\">:status</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">%i[</span><span class=\"pl-pds\">active</span> <span class=\"pl-pds\">archived</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">validate</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">allow_nil</span>: <span class=\"pl-c1\">true</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">conversation</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">status</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:unknown</span>\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valid?</span> <span class=\"pl-c\"># =&gt; false</span>\n\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">status</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">nil</span>\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valid?</span> <span class=\"pl-c\"># =&gt; true</span>\n\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">status</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:active</span>\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valid?</span> <span class=\"pl-c\"># =&gt; true</span></pre></div>\n<p dir=\"auto\">Otherwise <code class=\"notranslate\">ArgumentError</code> will raise (standard current behavior):</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Conversation &lt; ApplicationRecord\n  enum :status, %i[active archived]\nend\n\nconversation = Conversation.new\n\nconversation.status = :unknown # 'unknown' is not a valid status (ArgumentError)\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Conversation</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">enum</span> <span class=\"pl-pds\">:status</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">%i[</span><span class=\"pl-pds\">active</span> <span class=\"pl-pds\">archived</span><span class=\"pl-kos\">]</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">conversation</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n\n<span class=\"pl-s1\">conversation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">status</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:unknown</span> <span class=\"pl-c\"># 'unknown' is not a valid status (ArgumentError)</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This was intended as non-breaking change</p>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49100",
            "title": "Make enums validatable without raising error",
            "date_modified": "2023-09-01T03:01:38.000Z",
            "date_published": "2023-09-01T01:35:09.000Z",
            "author": {
                "name": "mechnicov",
                "url": "https://github.com/mechnicov"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/15172605?u=c9831ccf188358c7be46eb4c634002b47ebb1068&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1185054594\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/44792\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/44792/hovercard\" href=\"https://github.com/rails/rails/issues/44792\">#44792</a> was originally filed as a bug but ultimately is unavoidable as the ongoing behavior moving forward. <code class=\"notranslate\">scope</code> can start a new clean chain against the model it is defined on. Class methods will never support this behavior.</p>\n<p dir=\"auto\">This PR documents that behavior in a public place to help with awareness.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #44792.\">Closes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1185054594\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/44792\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/44792/hovercard\" href=\"https://github.com/rails/rails/issues/44792\">#44792</a></p>",
            "url": "https://github.com/rails/rails/pull/49096",
            "title": "Document clean chain behavior for ActiveRecord scope",
            "date_modified": "2023-08-31T12:36:01.000Z",
            "date_published": "2023-08-31T12:35:57.000Z",
            "author": {
                "name": "abaldwin88",
                "url": "https://github.com/abaldwin88"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">There were a few 6.1 migration compatibility fixes in <a href=\"https://github.com/rails/rails/commit/c2f838e80c76c9a3407e1e7af1ecbd738511fd72\">previous</a> <a href=\"https://github.com/rails/rails/commit/9b07b2d6ca2ee9854cd986da0bf914b9ace9d547\">commits</a>. Most importantly, those commits reorganized some of the compatibility tests to ensure that the tests would run against every Migration version. To continue the effort of improving test coverage for Migration compatibility, this commit converts tests for create_table and change_column setting the correct precision on datetime columns.</p>\n<p dir=\"auto\">While the create_table tests all pass, the change_column test did not pass for 7.0 versioned Migrations on sqlite. This was due to the sqlite adapter not using new_column_definition to set the options on the new column (new_column_definition is where precision: 6 gets set if no precision is specified). This happens because columns can't be modified in place in sqlite and instead the whole table must be recreated and the data copied. Before this commit, change_column would use the options of the existing column as a base and merge in the exact options (and type) passed to change_column.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit changes the change_column method to replace the existing column without using the existing options. This ensures that precision: 6 is set consistently across adapters when change_column is used to create a datetime column.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">If this is backport worthy I can make another PR since the tests will not cherry-pick cleanly onto 7-0-stable.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49090",
            "title": "Fix change_column not setting precision for sqlite",
            "date_modified": "2023-08-30T23:21:59.000Z",
            "date_published": "2023-08-30T23:21:56.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/646693?u=62e1fec459de18a2ba098b8f90dba89c9d74fa72&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">In case of mail delivery errors, the old ActionMailer::LogSubscriber erroneously logged a \"Delivered mail ...\" line.<br>\nWith this change it checks the passed exception object and logs a \"Failed delivery of mail\" line instead.</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> <del>CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</del></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49083",
            "title": "Log delivery errors in ActionMailer::LogSubscriber",
            "date_modified": "2023-08-31T07:02:57.000Z",
            "date_published": "2023-08-30T11:14:34.000Z",
            "author": {
                "name": "1st8",
                "url": "https://github.com/1st8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/96156234?u=9ced8d6ac6128a8dea78e7f0d9233669ff0ffecf&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">By transforming the values hash and adding in the type from the table it's being added to it ensures that the correct Type is used for the table.  This enables a user to make sure the specified type is used if one is set in the model.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul dir=\"auto\">\n<li>[ X] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li>[ X] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[ X] Tests are added or updated if you fix a bug or add a feature.</li>\n<li>[ X] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49079",
            "title": "Makes sure values have the correct type in _update_record. Fixes #49009.",
            "date_modified": "2023-08-29T18:06:18.000Z",
            "date_published": "2023-08-29T16:47:38.000Z",
            "author": {
                "name": "paulreece",
                "url": "https://github.com/paulreece"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">If <code class=\"notranslate\">ActiveRecord::Encryption.config.support_unencrypted_data == true</code>, this allows you to do:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User &lt; ActiveRecord::Base\n  encrypts :name, deterministic: true, support_unencrypted_data: false\n  encrypts :email, deterministic: true\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">encrypts</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">deterministic</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">support_unencrypted_data</span>: <span class=\"pl-c1\">false</span>\n  <span class=\"pl-en\">encrypts</span> <span class=\"pl-pds\">:email</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">deterministic</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Now only the <code class=\"notranslate\">email</code> column will allow unencrypted data (and if <code class=\"notranslate\">extend_queries</code> is true, only <code class=\"notranslate\">email</code> queries will get extended). <a href=\"https://github.com/rails/rails/pull/49072#issuecomment-1697170252\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49072/hovercard\">Here</a> is some back story on why you might want this.</p>",
            "url": "https://github.com/rails/rails/pull/49072",
            "title": "Encryption: support `support_unencrypted_data` at a per-attribute level",
            "date_modified": "2023-09-01T02:04:42.000Z",
            "date_published": "2023-08-29T00:57:39.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Ruby 3.3 <a href=\"https://github.com/ruby/ruby/pull/8312\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/ruby/ruby/pull/8312/hovercard\">allows passing</a> a list of characters to<br>\n<code class=\"notranslate\">SecureRandom.alphanumeric</code>. For <code class=\"notranslate\">SecureRandom.base36</code> using <code class=\"notranslate\">choose</code> is<br>\nfaster than the current implementation. For <code class=\"notranslate\">SecureRandom.base58</code> it is<br>\na bit slower.</p>\n<p dir=\"auto\">I've also added a test to make sure passing nil as the length defaults it to 16.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\"><strong>Benchmark</strong></p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# frozen_string_literal: true\n\nrequire &quot;bundler/inline&quot;\n\ngemfile(true) do\n  source &quot;https://rubygems.org&quot;\n\n  git_source(:github) { |repo| &quot;https://github.com/#{repo}.git&quot; }\n\n  gem &quot;rails&quot;, github: &quot;rails/rails&quot;, branch: &quot;main&quot;\n  gem &quot;benchmark-ips&quot;\nend\n\nrequire &quot;active_support&quot;\nrequire &quot;active_support/core_ext/securerandom&quot;\n\nmodule SecureRandom\n  def self.fast_base36(n)\n    n = n ? n.to_int : 16\n    choose(BASE36_ALPHABET, n)\n  end\nend\n\n[10, 100, 1000, 10000].each do |length|\n  puts\n  puts &quot; #{length} &quot;.center(80, &quot;=&quot;)\n  puts\n\n  Benchmark.ips do |x|\n    x.report(&quot;base36&quot;)      { SecureRandom.base36(length) }\n    x.report(&quot;fast_base36&quot;) { SecureRandom.fast_base36(length) }\n    x.compare!\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># frozen_string_literal: true</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"bundler/inline\"</span>\n\n<span class=\"pl-en\">gemfile</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">source</span> <span class=\"pl-s\">\"https://rubygems.org\"</span>\n\n  <span class=\"pl-en\">git_source</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:github</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">repo</span>| <span class=\"pl-s\">\"https://github.com/<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">repo</span><span class=\"pl-kos\">}</span></span>.git\"</span> <span class=\"pl-kos\">}</span>\n\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">github</span>: <span class=\"pl-s\">\"rails/rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">branch</span>: <span class=\"pl-s\">\"main\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"benchmark-ips\"</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support/core_ext/securerandom\"</span>\n\n<span class=\"pl-k\">module</span> <span class=\"pl-v\">SecureRandom</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fast_base36</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">n</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-s1\">n</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">n</span> ? <span class=\"pl-s1\">n</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_int</span> : <span class=\"pl-c1\">16</span>\n    <span class=\"pl-en\">choose</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">BASE36_ALPHABET</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">n</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-kos\">[</span><span class=\"pl-c1\">10</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">100</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">1000</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">10000</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">length</span>|\n  <span class=\"pl-en\">puts</span>\n  <span class=\"pl-en\">puts</span> <span class=\"pl-s\">\" <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">length</span><span class=\"pl-kos\">}</span></span> \"</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">center</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">80</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"=\"</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-en\">puts</span>\n\n  <span class=\"pl-v\">Benchmark</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ips</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">x</span>|\n    <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"base36\"</span><span class=\"pl-kos\">)</span>      <span class=\"pl-kos\">{</span> <span class=\"pl-v\">SecureRandom</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">base36</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">length</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span>\n    <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"fast_base36\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> <span class=\"pl-v\">SecureRandom</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fast_base36</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">length</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span>\n    <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">compare!</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\"><strong>Results for base36</strong></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"  ====================================== 10 ======================================\n\n  Warming up --------------------------------------\n                base36    20.513k i/100ms\n           fast_base36    24.843k i/100ms\n  Calculating -------------------------------------\n                base36    200.940k (±13.8%) i/s -    984.624k in   5.060203s\n           fast_base36    235.531k (± 5.7%) i/s -      1.192M in   5.080574s\n\n  Comparison:\n           fast_base36:   235530.9 i/s\n                base36:   200939.9 i/s - same-ish: difference falls within error\n\n  ===================================== 100 ======================================\n\n  Warming up --------------------------------------\n                base36     2.746k i/100ms\n           fast_base36     2.995k i/100ms\n  Calculating -------------------------------------\n                base36     25.559k (± 8.5%) i/s -    129.062k in   5.087961s\n           fast_base36     30.265k (± 6.6%) i/s -    152.745k in   5.070263s\n\n  Comparison:\n           fast_base36:    30264.7 i/s\n                base36:    25558.8 i/s - 1.18x  slower\n\n  ===================================== 1000 =====================================\n\n  Warming up --------------------------------------\n                base36   278.000  i/100ms\n           fast_base36   308.000  i/100ms\n  Calculating -------------------------------------\n                base36      2.595k (±11.6%) i/s -     12.788k in   5.007921s\n           fast_base36      3.133k (± 6.1%) i/s -     15.708k in   5.033310s\n\n  Comparison:\n           fast_base36:     3132.6 i/s\n                base36:     2594.9 i/s - 1.21x  slower\n\n  ==================================== 10000 =====================================\n\n  Warming up --------------------------------------\n                base36    24.000  i/100ms\n           fast_base36    34.000  i/100ms\n  Calculating -------------------------------------\n                base36    256.601  (± 8.6%) i/s -      1.296k in   5.089604s\n           fast_base36    322.119  (± 6.5%) i/s -      1.632k in   5.089614s\n\n  Comparison:\n           fast_base36:      322.1 i/s\n                base36:      256.6 i/s - 1.26x  slower\"><pre class=\"notranslate\"><code class=\"notranslate\">  ====================================== 10 ======================================\n\n  Warming up --------------------------------------\n                base36    20.513k i/100ms\n           fast_base36    24.843k i/100ms\n  Calculating -------------------------------------\n                base36    200.940k (±13.8%) i/s -    984.624k in   5.060203s\n           fast_base36    235.531k (± 5.7%) i/s -      1.192M in   5.080574s\n\n  Comparison:\n           fast_base36:   235530.9 i/s\n                base36:   200939.9 i/s - same-ish: difference falls within error\n\n  ===================================== 100 ======================================\n\n  Warming up --------------------------------------\n                base36     2.746k i/100ms\n           fast_base36     2.995k i/100ms\n  Calculating -------------------------------------\n                base36     25.559k (± 8.5%) i/s -    129.062k in   5.087961s\n           fast_base36     30.265k (± 6.6%) i/s -    152.745k in   5.070263s\n\n  Comparison:\n           fast_base36:    30264.7 i/s\n                base36:    25558.8 i/s - 1.18x  slower\n\n  ===================================== 1000 =====================================\n\n  Warming up --------------------------------------\n                base36   278.000  i/100ms\n           fast_base36   308.000  i/100ms\n  Calculating -------------------------------------\n                base36      2.595k (±11.6%) i/s -     12.788k in   5.007921s\n           fast_base36      3.133k (± 6.1%) i/s -     15.708k in   5.033310s\n\n  Comparison:\n           fast_base36:     3132.6 i/s\n                base36:     2594.9 i/s - 1.21x  slower\n\n  ==================================== 10000 =====================================\n\n  Warming up --------------------------------------\n                base36    24.000  i/100ms\n           fast_base36    34.000  i/100ms\n  Calculating -------------------------------------\n                base36    256.601  (± 8.6%) i/s -      1.296k in   5.089604s\n           fast_base36    322.119  (± 6.5%) i/s -      1.632k in   5.089614s\n\n  Comparison:\n           fast_base36:      322.1 i/s\n                base36:      256.6 i/s - 1.26x  slower\n</code></pre></div>\n<p dir=\"auto\"><strong>Results for base58</strong></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"  ====================================== 10 ======================================\n\n  Warming up --------------------------------------\n                base58    33.181k i/100ms\n           fast_base58    24.859k i/100ms\n  Calculating -------------------------------------\n                base58    333.202k (± 6.7%) i/s -      1.659M in   5.002939s\n           fast_base58    243.700k (±10.2%) i/s -      1.218M in   5.058493s\n\n  Comparison:\n                base58:   333201.6 i/s\n           fast_base58:   243700.5 i/s - 1.37x  slower\n\n  ===================================== 100 ======================================\n\n  Warming up --------------------------------------\n                base58     4.703k i/100ms\n           fast_base58     2.957k i/100ms\n  Calculating -------------------------------------\n                base58     45.411k (±11.3%) i/s -    225.744k in   5.046111s\n           fast_base58     27.600k (± 8.6%) i/s -    138.979k in   5.077366s\n\n  Comparison:\n                base58:    45410.8 i/s\n           fast_base58:    27599.7 i/s - 1.65x  slower\n\n  ===================================== 1000 =====================================\n\n  Warming up --------------------------------------\n                base58   571.000  i/100ms\n           fast_base58   295.000  i/100ms\n  Calculating -------------------------------------\n                base58      5.268k (± 9.5%) i/s -     26.266k in   5.036386s\n           fast_base58      2.854k (± 8.7%) i/s -     14.160k in   5.000566s\n\n  Comparison:\n                base58:     5267.5 i/s\n           fast_base58:     2854.4 i/s - 1.85x  slower\n\n  ==================================== 10000 =====================================\n\n  Warming up --------------------------------------\n                base58    52.000  i/100ms\n           fast_base58    31.000  i/100ms\n  Calculating -------------------------------------\n                base58    521.886  (±10.2%) i/s -      2.600k in   5.045054s\n           fast_base58    294.473  (± 9.8%) i/s -      1.457k in   5.002835s\n\n  Comparison:\n                base58:      521.9 i/s\n           fast_base58:      294.5 i/s - 1.77x  slower\"><pre class=\"notranslate\"><code class=\"notranslate\">  ====================================== 10 ======================================\n\n  Warming up --------------------------------------\n                base58    33.181k i/100ms\n           fast_base58    24.859k i/100ms\n  Calculating -------------------------------------\n                base58    333.202k (± 6.7%) i/s -      1.659M in   5.002939s\n           fast_base58    243.700k (±10.2%) i/s -      1.218M in   5.058493s\n\n  Comparison:\n                base58:   333201.6 i/s\n           fast_base58:   243700.5 i/s - 1.37x  slower\n\n  ===================================== 100 ======================================\n\n  Warming up --------------------------------------\n                base58     4.703k i/100ms\n           fast_base58     2.957k i/100ms\n  Calculating -------------------------------------\n                base58     45.411k (±11.3%) i/s -    225.744k in   5.046111s\n           fast_base58     27.600k (± 8.6%) i/s -    138.979k in   5.077366s\n\n  Comparison:\n                base58:    45410.8 i/s\n           fast_base58:    27599.7 i/s - 1.65x  slower\n\n  ===================================== 1000 =====================================\n\n  Warming up --------------------------------------\n                base58   571.000  i/100ms\n           fast_base58   295.000  i/100ms\n  Calculating -------------------------------------\n                base58      5.268k (± 9.5%) i/s -     26.266k in   5.036386s\n           fast_base58      2.854k (± 8.7%) i/s -     14.160k in   5.000566s\n\n  Comparison:\n                base58:     5267.5 i/s\n           fast_base58:     2854.4 i/s - 1.85x  slower\n\n  ==================================== 10000 =====================================\n\n  Warming up --------------------------------------\n                base58    52.000  i/100ms\n           fast_base58    31.000  i/100ms\n  Calculating -------------------------------------\n                base58    521.886  (±10.2%) i/s -      2.600k in   5.045054s\n           fast_base58    294.473  (± 9.8%) i/s -      1.457k in   5.002835s\n\n  Comparison:\n                base58:      521.9 i/s\n           fast_base58:      294.5 i/s - 1.77x  slower\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49067",
            "title": "Use SecureRandom.alphanumeric for SecureRandom.base36/base58",
            "date_modified": "2023-08-31T10:34:20.000Z",
            "date_published": "2023-08-28T18:44:43.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/97001540?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because <code class=\"notranslate\">ActiveModel::Conversion._to_partial_path</code> ignores the information provided by a model's <code class=\"notranslate\">model_name</code>.</p>\n<p dir=\"auto\">The partial path currently is composed of two bits, <code class=\"notranslate\">collection</code> and <code class=\"notranslate\">element</code> which are also fields provided by <code class=\"notranslate\">ActiveModel::Name</code>. <code class=\"notranslate\">_to_partial_path</code> derives these fields the same way as <code class=\"notranslate\">ActiveModel::Name#initialize</code>.</p>\n<p dir=\"auto\">This works for all standard cases, but not (necessarily) for models that provide a non-standard <code class=\"notranslate\">model_name</code>. While users can define <code class=\"notranslate\">MyModel#to_partial_path</code> to fix this on their end, I feel like this is something Rails should handle implicitly.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">ActiveModel::Conversion._to_partial_path</code> to use the information provided by <code class=\"notranslate\">model_name</code> if <code class=\"notranslate\">self</code> responds to <code class=\"notranslate\">model_name</code>. If not, it falls back to the existing implementation.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">To conform with the existing helicopter test case, this change tests if <code class=\"notranslate\">self</code> responds to <code class=\"notranslate\">model_name</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49065",
            "title": "Fix ActiveModel::Conversion._to_partial_path not using a model's model_name.",
            "date_modified": "2023-08-29T06:15:51.000Z",
            "date_published": "2023-08-28T14:23:29.000Z",
            "author": {
                "name": "RuhmUndAnsehen",
                "url": "https://github.com/RuhmUndAnsehen"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49055.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1869073918\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49055\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49055/hovercard\" href=\"https://github.com/rails/rails/issues/49055\">#49055</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">ActiveRecord::NestedAttributes#accepts_nested_attributes_for</code> to raise an <code class=\"notranslate\">ArgumentError</code> when it has already been declared for an association <strong>in the same class</strong>. There is a use case for overriding this in subclasses, that functionality is unchanged.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49056",
            "title": "[Fix #49055] Raise an `ArgumentError` when `#accepts_nested_attributes_for` is redeclared for an association",
            "date_modified": "2023-08-30T13:07:18.000Z",
            "date_published": "2023-08-28T06:38:38.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/42195321?u=810b1a1449a94590f2ff9e2f189d4c37f90691b3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This PR addresses the issues <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1766266191\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48535\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48535/hovercard\" href=\"https://github.com/rails/rails/issues/48535\">#48535</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1685480928\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48072\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48072/hovercard\" href=\"https://github.com/rails/rails/issues/48072\">#48072</a>.</p>\n<p dir=\"auto\">With the introduction of PR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"782710170\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/41068\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/41068/hovercard\" href=\"https://github.com/rails/rails/pull/41068\">#41068</a>, an unintended behavior surfaced, causing the <code class=\"notranslate\">proc_for_binds</code> to apply casting to attributes that were already casted. Consequently, this led to the malfunctioning of queries, as noted in the referenced issues.</p>\n<p dir=\"auto\">My proposed solution revolves around the incorporation of a new attribute \"type\" named <code class=\"notranslate\">BindAttribute</code>. This type facilitates the desired functionality within the <code class=\"notranslate\">proc_for_binds</code> implementation, while abstaining from unnecessary casting, given that the values are already casted. This correction has obviated the need for changes such as \"Fix deterministic queries that were broken after <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"782710170\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/41068\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/41068/hovercard\" href=\"https://github.com/rails/rails/pull/41068\">#41068</a>,\" as detailed in <a href=\"https://github.com/wbotelhos/rails/commit/37361bfb4222c5d210f11e48ecee46b05ea7d50e\">this commit</a>. These changes had inadvertently caused the tests initially intended for <code class=\"notranslate\">proc_for_binds</code> within <code class=\"notranslate\">HomogeneousIn</code> to erroneously evaluate the <code class=\"notranslate\">proc_for_binds</code> within <code class=\"notranslate\">InWithAdditionalValues</code>. This resulted in false positives whenever adjustments were made to the <code class=\"notranslate\">proc_for_binds</code> within <code class=\"notranslate\">HomogeneousIn</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49050",
            "title": "[Fix #48535]: fix behavior of `proc_for_binds` in `Arel::Nodes::HomogenousIn`",
            "date_modified": "2023-08-27T14:57:11.000Z",
            "date_published": "2023-08-27T14:57:07.000Z",
            "author": {
                "name": "JohnAnon9771",
                "url": "https://github.com/JohnAnon9771"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39473?u=36a63ee4b4b6c19de5d4ddcb7947b09bb2447fff&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I noticed and confirmed with others that rails console was omitting expected backtrace lines as seen here:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ cat app/models/user.rb\nclass User &lt; ApplicationRecord\n\n  def foo\n    bar\n  end\n\n  def bar\n    baz\n  end\n\n  def baz\n    raise\n  end\nend\n\n$  rc\nLoading development environment (Rails 7.0.7)\n3.1.4 :001 &gt; User.new.foo\n/Users/jsharpe/railsapp/app/models/user.rb:12:in `baz': unhandled exception\n(irb):1:in `&lt;main&gt;\"><pre class=\"notranslate\"><code class=\"notranslate\">$ cat app/models/user.rb\nclass User &lt; ApplicationRecord\n\n  def foo\n    bar\n  end\n\n  def bar\n    baz\n  end\n\n  def baz\n    raise\n  end\nend\n\n$  rc\nLoading development environment (Rails 7.0.7)\n3.1.4 :001 &gt; User.new.foo\n/Users/jsharpe/railsapp/app/models/user.rb:12:in `baz': unhandled exception\n(irb):1:in `&lt;main&gt;\n</code></pre></div>\n<p dir=\"auto\">I believe this is caused by irb itself prefixing backtrace lines with the string: <code class=\"notranslate\">\\tfrom </code> as seen here:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"√ (9:21:40 PM) ~ irb\n3.0.4 :001 &gt; class Foo\n3.0.4 :002 &gt; def foo\n3.0.4 :003 &gt; bar\n3.0.4 :004 &gt; end\n3.0.4 :005 &gt; def bar\n3.0.4 :006 &gt; baz\n3.0.4 :007 &gt; end\n3.0.4 :008 &gt; def baz\n3.0.4 :009 &gt; raise\n3.0.4 :010 &gt; end\n3.0.4 :011 &gt; end\n =&gt; :baz\n3.0.4 :012 &gt;\n3.0.4 :013 &gt; Foo.new.foo\n(irb):9:in `baz': unhandled exception\n\tfrom (irb):6:in `bar'\n\tfrom (irb):3:in `foo'\n\tfrom (irb):13:in `&lt;main&gt;'\n\tfrom /Users/jsharpe/.rvm/gems/ruby-3.0.4/gems/irb-1.7.4/exe/irb:9:in `&lt;top (required)&gt;'\n\tfrom /Users/jsharpe/.rvm/gems/ruby-3.0.4/bin/irb:25:in `load'\n\tfrom /Users/jsharpe/.rvm/gems/ruby-3.0.4/bin/irb:25:in `&lt;main&gt;'\n\tfrom /Users/jsharpe/.rvm/gems/ruby-3.0.4/bin/ruby_executable_hooks:22:in `eval'\n\tfrom /Users/jsharpe/.rvm/gems/ruby-3.0.4/bin/ruby_executable_hooks:22:in `&lt;main&gt;'\"><pre class=\"notranslate\"><code class=\"notranslate\">√ (9:21:40 PM) ~ irb\n3.0.4 :001 &gt; class Foo\n3.0.4 :002 &gt; def foo\n3.0.4 :003 &gt; bar\n3.0.4 :004 &gt; end\n3.0.4 :005 &gt; def bar\n3.0.4 :006 &gt; baz\n3.0.4 :007 &gt; end\n3.0.4 :008 &gt; def baz\n3.0.4 :009 &gt; raise\n3.0.4 :010 &gt; end\n3.0.4 :011 &gt; end\n =&gt; :baz\n3.0.4 :012 &gt;\n3.0.4 :013 &gt; Foo.new.foo\n(irb):9:in `baz': unhandled exception\n\tfrom (irb):6:in `bar'\n\tfrom (irb):3:in `foo'\n\tfrom (irb):13:in `&lt;main&gt;'\n\tfrom /Users/jsharpe/.rvm/gems/ruby-3.0.4/gems/irb-1.7.4/exe/irb:9:in `&lt;top (required)&gt;'\n\tfrom /Users/jsharpe/.rvm/gems/ruby-3.0.4/bin/irb:25:in `load'\n\tfrom /Users/jsharpe/.rvm/gems/ruby-3.0.4/bin/irb:25:in `&lt;main&gt;'\n\tfrom /Users/jsharpe/.rvm/gems/ruby-3.0.4/bin/ruby_executable_hooks:22:in `eval'\n\tfrom /Users/jsharpe/.rvm/gems/ruby-3.0.4/bin/ruby_executable_hooks:22:in `&lt;main&gt;'\n</code></pre></div>\n<p dir=\"auto\">This causes rails console to mistakenly filter lines that would otherwise match <code class=\"notranslate\">Rails::BacktraceCleaner::APP_DIRS_PATTERN</code> because that regex hasn't anticipated the prefix.<br>\nThis patch filters <code class=\"notranslate\">\\tfrom </code> if it exists which then allows the filter using <code class=\"notranslate\">APP_DIRS_PATTERN</code> below to work correctly:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ rc\nLoading development environment (Rails 7.0.7)\n3.1.4 :001 &gt; User.new.foo\n/Users/jsharpe/railsapp/app/models/user.rb:12:in `baz': unhandled exception\napp/models/user.rb:8:in `bar'\napp/models/user.rb:4:in `foo'\n(irb):1:in `&lt;main&gt;'\"><pre class=\"notranslate\"><code class=\"notranslate\">$ rc\nLoading development environment (Rails 7.0.7)\n3.1.4 :001 &gt; User.new.foo\n/Users/jsharpe/railsapp/app/models/user.rb:12:in `baz': unhandled exception\napp/models/user.rb:8:in `bar'\napp/models/user.rb:4:in `foo'\n(irb):1:in `&lt;main&gt;'\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49049",
            "title": "fixes issue where rails console filters lines that match 'APP_DIRS_PATTERN' because they are prefixed with 'from'",
            "date_modified": "2023-08-31T19:44:58.000Z",
            "date_published": "2023-08-27T01:29:32.000Z",
            "author": {
                "name": "josh-m-sharpe",
                "url": "https://github.com/josh-m-sharpe"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/96156234?u=9ced8d6ac6128a8dea78e7f0d9233669ff0ffecf&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Since <code class=\"notranslate\">aliased_table_for</code> is called later on in the stack as to make the <code class=\"notranslate\">missing</code> and <code class=\"notranslate\">associated</code> methods have no awareness of aliasing taking place, I decided to make a similar data structure available within both.  By adding <code class=\"notranslate\">@scope.table_name</code>, and  any <code class=\"notranslate\">joins</code> <code class=\"notranslate\">table_names</code> to an array, I am offering up a similar object that the <code class=\"notranslate\">alias_tracker.aliases</code> hash would contain.  I used an array instead of a hash because in this case we don't need to check the values of the keys like <code class=\"notranslate\">aliased_table_for</code> does.  By building this array it gives these methods an awareness of what aliasing might take place further on in the stack so that it can take the correct course of action when building the where clause.</p>\n<p dir=\"auto\">This adds an <code class=\"notranslate\">alias_prediction</code> method which implements the behavior noted above:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"        def alias_prediction\n          alias_table_names = []\n          alias_table_names.push(@scope.table_name)\n          if @scope.values[:joins]\n            @scope.values[:joins].each do |join|\n              current_join = scope_association_reflection(join)\n              alias_table_names.push(current_join.table_name)\n            end\n          end\n          alias_table_names\n        end\"><pre class=\"notranslate\">        <span class=\"pl-k\">def</span> <span class=\"pl-en\">alias_prediction</span>\n          <span class=\"pl-s1\">alias_table_names</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span>\n          <span class=\"pl-s1\">alias_table_names</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">push</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">@scope</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">table_name</span><span class=\"pl-kos\">)</span>\n          <span class=\"pl-k\">if</span> <span class=\"pl-c1\">@scope</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">values</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:joins</span><span class=\"pl-kos\">]</span>\n            <span class=\"pl-c1\">@scope</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">values</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:joins</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">join</span>|\n              <span class=\"pl-s1\">current_join</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">scope_association_reflection</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">join</span><span class=\"pl-kos\">)</span>\n              <span class=\"pl-s1\">alias_table_names</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">push</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">current_join</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">table_name</span><span class=\"pl-kos\">)</span>\n            <span class=\"pl-k\">end</span>\n          <span class=\"pl-k\">end</span>\n          <span class=\"pl-s1\">alias_table_names</span>\n        <span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Note: The initial <code class=\"notranslate\">reflection.options[:class_name]</code> check is still necessary to avoid false positives.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because a bug report was raised. <a href=\"https://github.com/rails/rails/issues/48945\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48945/hovercard\">48945</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49047",
            "title": "This allows Users to merge the actual model to an already aliased/scoped model when using the missing or associated methods. Fixes #48945. ",
            "date_modified": "2023-08-29T18:26:11.000Z",
            "date_published": "2023-08-26T23:23:49.000Z",
            "author": {
                "name": "paulreece",
                "url": "https://github.com/paulreece"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1724355?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Fixes incorrect typecasting that occurred when there were duplicate column names returned from PostgreSQL which is always the case when calculations/aggregates are use multiple times when no aliases are used. The <code class=\"notranslate\">column_type</code> method was moved from private to public, and the typecasting logic was updated.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48946.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1852020901\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48946\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48946/hovercard\" href=\"https://github.com/rails/rails/issues/48946\">#48946</a>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">There are several other places where the <code class=\"notranslate\">ActiveRecord::Result#column_type</code> is used directly, but I'm not sure if accessing the column_type via index would be correct/possible there. To me it seems these places are even incorrect since <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1330834921\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/45783\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/45783/hovercard\" href=\"https://github.com/rails/rails/pull/45783\">#45783</a> because the the <code class=\"notranslate\">types</code>/<code class=\"notranslate\">column_types</code> potentially not only contains columns by name but also by index.</p>\n<ul dir=\"auto\">\n<li><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/f6b987d521b9ad3f9938b40f039fbdda78058a06/activerecord/lib/active_record/querying.rb#L66-L66\">rails/activerecord/lib/active_record/querying.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 66\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/f6b987d521b9ad3f9938b40f039fbdda78058a06\">f6b987d</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L66\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"66\"></td>\n          <td id=\"LC66\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">column_types</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">result_set</span><span class=\"pl-kos\">.</span><span class=\"pl-s1\">column_types</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</li>\n<li><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/f6b987d521b9ad3f9938b40f039fbdda78058a06/activerecord/lib/active_record/associations/join_dependency.rb#L127-L127\">rails/activerecord/lib/active_record/associations/join_dependency.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 127\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/f6b987d521b9ad3f9938b40f039fbdda78058a06\">f6b987d</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L127\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"127\"></td>\n          <td id=\"LC127\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">column_types</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">result_set</span><span class=\"pl-kos\">.</span><span class=\"pl-s1\">column_types</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</li>\n<li><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/f6b987d521b9ad3f9938b40f039fbdda78058a06/activerecord/lib/active_record/relation/calculations.rb#L508-L508\">rails/activerecord/lib/active_record/relation/calculations.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 508\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/f6b987d521b9ad3f9938b40f039fbdda78058a06\">f6b987d</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L508\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"508\"></td>\n          <td id=\"LC508\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">calculated_data</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">column_types</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fetch</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">aliaz</span><span class=\"pl-kos\">,</span> <span class=\"pl-v\">Type</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">default_value</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</li>\n</ul>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49043",
            "title": "Fix column typecasting with duplicate column names for PostgreSQL",
            "date_modified": "2023-08-27T07:01:18.000Z",
            "date_published": "2023-08-26T17:30:53.000Z",
            "author": {
                "name": "Flixt",
                "url": "https://github.com/Flixt"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/722037?u=d152fb740fcbc6bcf101ebc9852fc058a1438eee&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">ActionText uses a separate table to store HTML data. WIth advanced RDBMS like Postgres, it's not necessary as the database optimization engine will manage storage of columns with large data on its own.</p>\n\n<p dir=\"auto\">This PR introduces the possibility of using ActionText with only a 'string' column in the model table itself as storage.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a new feature to ActionText, without any change to the existing ones. Code not explicitly choosing to use the new feature won't be affected in any way.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49036",
            "title": "ActionText now supports storage in text column instead of separate table",
            "date_modified": "2023-08-27T13:03:00.000Z",
            "date_published": "2023-08-25T14:02:19.000Z",
            "author": {
                "name": "brunoenten",
                "url": "https://github.com/brunoenten"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/7149034?u=708524166a9954da5c702cfa180ee3ff4551c189&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h1 dir=\"auto\">Introducing fixture scenarios</h1>\n<p dir=\"auto\">This pull request proposes a new feature: Fixture Scenarios via a new TestCase method, <code class=\"notranslate\">#load_scenario</code>. This concept aims to improve test data management by introducing situational fixtures known as \"scenarios.\" The primary goal is to enable the creation of manageable sets of fixtures with complex associations within a single file.</p>\n<p dir=\"auto\">Your feedback on this proposal would be highly appreciated! :)</p>\n<h2 dir=\"auto\">Problem Statement</h2>\n<p dir=\"auto\">The current approach to managing throwaway scenarios with fixtures has limitations. Fixtures accumulate in various files, often leading to confusion about their original intent. On-the-fly records or using FactoryBot can result in unnecessary records creation and does not adequately manage associations between records.</p>\n<h2 dir=\"auto\">Solution Overview</h2>\n<p dir=\"auto\">By grouping fixtures per scenario or purpose instead of types, fixture scenarios offer an alternative to loading sets of records for each test. They provide the following benefits:</p>\n<ul dir=\"auto\">\n<li>Utilize familiar features like ERB, <code class=\"notranslate\">_fixture</code> configuration, associations, and table access.</li>\n<li>Manage all records' relationships within a single file, which is particularly useful for testing scenarios with complex associations.</li>\n<li>Load scenarios only when explicitly specified, ensuring the flexibility to use permanent fixtures when needed.</li>\n</ul>\n<p dir=\"auto\">This can be useful to snapshot a set of records when reproducing a bug or a complex state without bloating the test setup with method calls that are irrelevant to the thing tested. A dev could build records manually once and snapshot their state in a scenario instead of building that state every time the test runs on a pipeline.</p>\n<h2 dir=\"auto\">Scenario Example</h2>\n<p dir=\"auto\">Here's an example of how a scenario could look:</p>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# test/scenarios/organisation_with_author_and_posts.yml\norganizations:\n  _fixture:\n    model_class: Organization\n\n  code_monkeys:\n    name: The code monkeys\n\nposts:\n  &lt;% 1.upto(5) do |i| %&gt;\n  alex_post&lt;%= i %&gt;:\n    author: alex\n    title: Alex post &lt;%= i %&gt;\n    body: Such a lovely day\n    type: Post\n  &lt;% end %&gt;\n\nauthors:\n  alex:\n    name: Alex\n    author_address_id: 100\n    organization: code_monkeys\n\n  nsa_author:\n    name: NSA Author\n    author_address_id: 100\n    organization: nsa\n\nauthor_addresses:\n  alex_address:\n    id: 100\n\"><pre class=\"notranslate\"><span class=\"pl-c\"><span class=\"pl-c\">#</span> test/scenarios/organisation_with_author_and_posts.yml</span>\n<span class=\"pl-ent\">organizations</span>:\n  <span class=\"pl-ent\">_fixture</span>:\n    <span class=\"pl-ent\">model_class</span>: <span class=\"pl-s\">Organization</span>\n\n  <span class=\"pl-ent\">code_monkeys</span>:\n    <span class=\"pl-ent\">name</span>: <span class=\"pl-s\">The code monkeys</span>\n\n<span class=\"pl-ent\">posts</span>:\n  <span class=\"pl-s\">&lt;% 1.upto(5) do |i| %&gt;</span>\n  <span class=\"pl-ent\">alex_post&lt;%= i %&gt;</span>:\n    <span class=\"pl-ent\">author</span>: <span class=\"pl-s\">alex</span>\n    <span class=\"pl-ent\">title</span>: <span class=\"pl-s\">Alex post &lt;%= i %&gt;</span>\n    <span class=\"pl-ent\">body</span>: <span class=\"pl-s\">Such a lovely day</span>\n    <span class=\"pl-ent\">type</span>: <span class=\"pl-s\">Post</span>\n  &lt;%<span class=\"pl-s1\"> end </span><span class=\"pl-s1\">%</span>&gt;\n\n<span class=\"pl-ent\">authors</span>:\n  <span class=\"pl-ent\">alex</span>:\n    <span class=\"pl-ent\">name</span>: <span class=\"pl-s\">Alex</span>\n    <span class=\"pl-ent\">author_address_id</span>: <span class=\"pl-c1\">100</span>\n    <span class=\"pl-ent\">organization</span>: <span class=\"pl-s\">code_monkeys</span>\n\n  <span class=\"pl-ent\">nsa_author</span>:\n    <span class=\"pl-ent\">name</span>: <span class=\"pl-s\">NSA Author</span>\n    <span class=\"pl-ent\">author_address_id</span>: <span class=\"pl-c1\">100</span>\n    <span class=\"pl-ent\">organization</span>: <span class=\"pl-s\">nsa</span>\n\n<span class=\"pl-ent\">author_addresses</span>:\n  <span class=\"pl-ent\">alex_address</span>:\n    <span class=\"pl-ent\">id</span>: <span class=\"pl-c1\">100</span>\n</pre></div>\n<h3 dir=\"auto\">Usage</h3>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"require &quot;test_helper&quot;\n\nclass TestLoadScenario &lt; ActiveRecord::TestCase\n  def test_create_scenario\n    load_scenario(SCENARIOS_ROOT + &quot;/organisation_with_author_and_posts.yml&quot;)\n\n    author = authors(:alex)\n\n    assert author.author_address\n    assert_equal &quot;The Code Monkeys&quot;, author.organization.name\n    assert_equal 5, author.posts.count\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">require</span> <span class=\"pl-s\">\"test_helper\"</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">TestLoadScenario</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">TestCase</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_create_scenario</span>\n    <span class=\"pl-en\">load_scenario</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">SCENARIOS_ROOT</span> + <span class=\"pl-s\">\"/organisation_with_author_and_posts.yml\"</span><span class=\"pl-kos\">)</span>\n\n    <span class=\"pl-s1\">author</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">authors</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:alex</span><span class=\"pl-kos\">)</span>\n\n    <span class=\"pl-en\">assert</span> <span class=\"pl-s1\">author</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">author_address</span>\n    <span class=\"pl-en\">assert_equal</span> <span class=\"pl-s\">\"The Code Monkeys\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">author</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">organization</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span>\n    <span class=\"pl-en\">assert_equal</span> <span class=\"pl-c1\">5</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">author</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">posts</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">count</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h2 dir=\"auto\">Implemented Rules</h2>\n<p dir=\"auto\">This PR is a POC with the following rules governing scenario fixtures:</p>\n<ul dir=\"auto\">\n<li>They are not loaded by default.</li>\n<li>They do not delete existing fixtures.</li>\n<li>They can reference existing fixtures.</li>\n<li>They can reference other existing scenario fixtures.</li>\n<li>They cannot override existing fixtures.</li>\n<li>They cannot override existing scenario fixtures.</li>\n<li>They allow ERB for dynamic data generation.</li>\n<li>They allow _fixture configuration.</li>\n<li>They are accessible through table access.</li>\n</ul>\n<h2 dir=\"auto\">Caveats</h2>\n<p dir=\"auto\">One of the caveats is that managing records of the same type across multiple files can become challenging with schema changes unless shared defaults are established. This caveat likely applies to normal fixtures as well.</p>",
            "url": "https://github.com/rails/rails/pull/49025",
            "title": "[Feature Request] Fixture scenarios for complex associations",
            "date_modified": "2023-08-24T20:40:28.000Z",
            "date_published": "2023-08-24T10:13:33.000Z",
            "author": {
                "name": "AlexB52",
                "url": "https://github.com/AlexB52"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/740289?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Based on an idea by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a> in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"806889240\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/41420\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/41420/hovercard?comment_id=1686745412&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/issues/41420#issuecomment-1686745412\">#41420 (comment)</a>.</p>\n<p dir=\"auto\">While BCrypt may be the desirable default password hashing algorithm in Rails for the foreseeable future, making the mechanism for hashing and verifying passwords in <code class=\"notranslate\">has_secure_password</code> extendable/modular is valuable.</p>\n<p dir=\"auto\">Developers may opt for different hashing algorithms and can now extend or plug in their own alongside BCrypt in a clean and maintainable way. From the referenced thread, there is discourse amongst people on what should be the <em>de facto</em> password algorithm and disagreement on whether Argon2 should be it. Rails should make it easier for the community to progress on best password hashing practices.</p>\n<p dir=\"auto\">This also unlocks Rails shipping with more than BCrypt as an available hashing algorithm.</p>\n<p dir=\"auto\">I <em>could</em> see a world where Rails offers PBKDF2 (for those wanting FIPS 140 compliance), BCrypt (the safe default), and Argon2 (since OWASP recommends it).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR takes BCrypt-specific code in <code class=\"notranslate\">ActiveModel::SecurePassword</code> and extracts it out into an object <code class=\"notranslate\">ActiveModel::SecurePassword::BCrypt</code>. The object adheres to a simple interface (<code class=\"notranslate\">ActiveModel::SecurePassword::Base</code>) so developers can supplement with different algorithms (or different libraries of the same underlying algo).</p>\n<p dir=\"auto\">A user of the Rails framework uses the newly added <code class=\"notranslate\">:algorithm</code> option in <code class=\"notranslate\">has_secure_password</code> to declare what password hashing algo should be used on a given attribute.</p>\n<p dir=\"auto\">Developers can write libraries or even initializers to add different password hashing algorithm support following a very clean interface.</p>\n<p dir=\"auto\">Below is an example of someone opting to use Argon2 using <code class=\"notranslate\">ruby-argon2</code>:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# config/initializers/add_argon2_to_activemodel_securepassword.rb\n\nrequire &quot;active_model/secure_password/base&quot;\n\nmodule ActiveModel\n  module SecurePassword\n    class Argon2id &lt; Base\n      def initialize\n        require &quot;argon2&quot;\n      rescue LoadError\n        warn &quot;You don't have argon2 installed in your application. Please add it to your Gemfile and run bundle install.&quot;\n        raise\n      end\n\n      def self.algorithm_name\n        :argon2id\n      end\n\n      def hash_password(unencrypted_password, options = {})\n        if options[:min_cost]\n          hasher = Argon2::Password.new(t_cost: 1, m_cost: 3, p_cost: 1)\n        else\n          hasher = Argon2::Password.new(t_cost: 2, m_cost: 19, p_cost: 1)  # Latest OWASP recommended values\n        end\n        hasher.create(unencrypted_password)\n      end\n\n      def verify_password(password, digest)\n        Argon2::Password.verify_password(password, digest)\n      end\n\n      def password_salt(digest)\n        Argon2::HashFormat.new(digest).salt\n      end\n    end\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># config/initializers/add_argon2_to_activemodel_securepassword.rb</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_model/secure_password/base\"</span>\n\n<span class=\"pl-k\">module</span> <span class=\"pl-v\">ActiveModel</span>\n  <span class=\"pl-k\">module</span> <span class=\"pl-v\">SecurePassword</span>\n    <span class=\"pl-k\">class</span> <span class=\"pl-v\">Argon2id</span> &lt; <span class=\"pl-v\">Base</span>\n      <span class=\"pl-k\">def</span> <span class=\"pl-en\">initialize</span>\n        <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"argon2\"</span>\n      <span class=\"pl-k\">rescue</span> <span class=\"pl-v\">LoadError</span>\n        <span class=\"pl-en\">warn</span> <span class=\"pl-s\">\"You don't have argon2 installed in your application. Please add it to your Gemfile and run bundle install.\"</span>\n        <span class=\"pl-en\">raise</span>\n      <span class=\"pl-k\">end</span>\n\n      <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">algorithm_name</span>\n        <span class=\"pl-pds\">:argon2id</span>\n      <span class=\"pl-k\">end</span>\n\n      <span class=\"pl-k\">def</span> <span class=\"pl-en\">hash_password</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">unencrypted_password</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">options</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">if</span> <span class=\"pl-s1\">options</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:min_cost</span><span class=\"pl-kos\">]</span>\n          <span class=\"pl-s1\">hasher</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Argon2</span>::<span class=\"pl-v\">Password</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">t_cost</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">m_cost</span>: <span class=\"pl-c1\">3</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">p_cost</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">else</span>\n          <span class=\"pl-s1\">hasher</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Argon2</span>::<span class=\"pl-v\">Password</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">t_cost</span>: <span class=\"pl-c1\">2</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">m_cost</span>: <span class=\"pl-c1\">19</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">p_cost</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span>  <span class=\"pl-c\"># Latest OWASP recommended values</span>\n        <span class=\"pl-k\">end</span>\n        <span class=\"pl-s1\">hasher</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">unencrypted_password</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-k\">end</span>\n\n      <span class=\"pl-k\">def</span> <span class=\"pl-en\">verify_password</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">password</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">digest</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-v\">Argon2</span>::<span class=\"pl-v\">Password</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">verify_password</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">password</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">digest</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-k\">end</span>\n\n      <span class=\"pl-k\">def</span> <span class=\"pl-en\">password_salt</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">digest</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-v\">Argon2</span>::<span class=\"pl-v\">HashFormat</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">digest</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">salt</span>\n      <span class=\"pl-k\">end</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# app/models/user.rb\n\nclass User &lt; ActiveRecord::Base\n  has_secure_password :password, algorithm: :argon2\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># app/models/user.rb</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">has_secure_password</span> <span class=\"pl-pds\">:password</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">algorithm</span>: <span class=\"pl-pds\">:argon2</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I'm a bit of a novice when it comes to making Rails aware of different files and how to \"register\" a series of subclasses (some of which could be defined in libraries or the initializers folder) to a part of Rails. Open to whatever pattern is the most appropriate.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48993",
            "title": "Make `has_secure_password` pluginable/extendable with different password hashing algorithms",
            "date_modified": "2023-08-28T09:00:56.000Z",
            "date_published": "2023-08-21T21:01:57.000Z",
            "author": {
                "name": "f3ndot",
                "url": "https://github.com/f3ndot"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #46509.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1451643704\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46509\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46509/hovercard\" href=\"https://github.com/rails/rails/issues/46509\">#46509</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes association autosave logic to decouple validation and save conditions, so that validations are always run (still taking into consideration options like <code class=\"notranslate\">:validate</code>) regardless of whether or not the record is changing. This makes autosave validations consistent with direct persistence methods like <code class=\"notranslate\">save</code>, as shown in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1451643704\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46509\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46509/hovercard?comment_id=1322641993&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/issues/46509#issuecomment-1322641993\">#46509 (comment)</a> and the test I've added in this PR.</p>\n<p dir=\"auto\">This approach was inspired by the comments in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1551379967\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47088\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47088/hovercard\" href=\"https://github.com/rails/rails/pull/47088\">#47088</a>, which was an alternate approach to fixing the linked issue.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">Failing one edge case test, see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1857928799\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48986\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48986/hovercard?comment_id=1685203599&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/pull/48986#issuecomment-1685203599\">#48986 (comment)</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48986",
            "title": "[Fix #46509] Run autosave validations regardless of changes",
            "date_modified": "2023-08-30T20:17:56.000Z",
            "date_published": "2023-08-20T02:25:41.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1709692?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48326.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1730003454\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48326\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48326/hovercard\" href=\"https://github.com/rails/rails/issues/48326\">#48326</a></p>\n<p dir=\"auto\">This Pull Request has been created to fix an issue where syntax errors generated inside an eval method cause an Internal Server Error due to a TypeError.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">In order to display the extraced source of a syntax error, we try to locate the node id for the backtrace location. The call to RubyVM::AbstractSyntaxTree.node_id_for_backtrace_location is expecting a Thread::Backtrace::Location object, but we are passing a SourceMapLocation instead.</p>\n<p dir=\"auto\">Once this is fixed, another issue then appears. The first location of the backtrace for an eval error does not include the filename of where eval is called, so we can't extract the source. This means that the development view fails to show the extracted source because it is hard-coded to show the source extracted for the first location.</p>\n<p dir=\"auto\">This commit does two things:</p>\n<ol dir=\"auto\">\n<li>it addresses the issue by making sure that we are always passing a Thread::Backtrace::Location instead</li>\n<li>it allows the development view to show the extracted source fragment by ensuring the first location of the backtrace for a syntax error coming from eval includes the name of the file where eval is called</li>\n</ol>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I have tried to keep the changes consistent with the approach introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1393581431\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46171\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46171/hovercard\" href=\"https://github.com/rails/rails/pull/46171\">#46171</a>.</p>",
            "url": "https://github.com/rails/rails/pull/48957",
            "title": "Better handle SyntaxError in Action View",
            "date_modified": "2023-08-28T13:21:07.000Z",
            "date_published": "2023-08-16T20:32:54.000Z",
            "author": {
                "name": "cmaruz",
                "url": "https://github.com/cmaruz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1518299?u=d3dda61ebb16317ded64f166b59e35e1e160b9b1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1723197770\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48287\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48287/hovercard\" href=\"https://github.com/rails/rails/pull/48287\">#48287</a> introduced auto loading fixtures in engines. All engines present in the root folder of the rails app would have their fixtures auto loaded. This caused tests to fail when gems were vendorized, because fixtures from the internal rails test suite would be loaded.</p>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1729552267\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48323\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48323/hovercard\" href=\"https://github.com/rails/rails/pull/48323\">#48323</a> Added a check to exclude the vendor folder.</p>\n<p dir=\"auto\">This PR extends the check introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1729552267\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48323\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48323/hovercard\" href=\"https://github.com/rails/rails/pull/48323\">#48323</a> to prevent loading fixtures from gem paths instead of just the vendor folder.</p>\n<p dir=\"auto\">Some tools like devenv install gems in the root of the app, but outside of the vendor folder (<code class=\"notranslate\">.devenv/state</code>).</p>\n<p dir=\"auto\">This change prevents automatically loading fixtures from gems instead of the vendor folder.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I run rails using devenv and after updating rails, my test suite started to complain about fixtures from rails internal tests.<br>\nThe current check doesn't fix the issue for all situations. This new check <em>should</em>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48933",
            "title": "Fix a regression preventing vendorizing gems outside of the vendor folder",
            "date_modified": "2023-08-19T23:04:06.000Z",
            "date_published": "2023-08-13T04:24:10.000Z",
            "author": {
                "name": "JoeDupuis",
                "url": "https://github.com/JoeDupuis"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/96156234?u=9ced8d6ac6128a8dea78e7f0d9233669ff0ffecf&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This branch allows a user to set <code class=\"notranslate\">self.table_alias</code> in the model to custom set a table alias.  It then accounts for the SQL needed for this in the AST.  It addresses <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1814805867\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48775\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48775/hovercard\" href=\"https://github.com/rails/rails/issues/48775\">#48775</a>.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This was motivated by the behavior shown in <a href=\"https://github.com/rails/rails/issues/48775\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48775/hovercard\">48775</a> and by a suggestion to implement it by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request allows a user to set a SQL <code class=\"notranslate\">table_alias</code> in the model by using <code class=\"notranslate\">self.table_alias = \"alias\"</code>.  Once this is done it gets added to the <code class=\"notranslate\">Alias</code> node in the AST.  In order to account for this in the SQL created by the AST I have the <code class=\"notranslate\">Insert</code> statement using the original table name instead of the <code class=\"notranslate\">table_alias</code> when a <code class=\"notranslate\">table_alias</code> is present so that the SQL INSERT will function.</p>\n<p dir=\"auto\">With the <code class=\"notranslate\">Update</code> and <code class=\"notranslate\">Delete</code> methods I changed the default behavior of <code class=\"notranslate\">visit_Arel_Table</code> to use <code class=\"notranslate\">AS</code> when a <code class=\"notranslate\">table_alias</code> is present, <code class=\"notranslate\">table AS t</code> vs <code class=\"notranslate\">table t</code>.  One last adjustment was necessary in the <code class=\"notranslate\">Delete</code> method.  In order for MySQL to use the alias in the delete method I needed to add the <code class=\"notranslate\">table_alias</code> after <code class=\"notranslate\">DELETE </code>.  So the code checks for MySQL and if the Node is using a <code class=\"notranslate\">table_alias</code> it will then insert the alias  after <code class=\"notranslate\">DELETE </code>, <code class=\"notranslate\">DELETE t FROM table AS t</code> vs <code class=\"notranslate\">DELETE FROM table AS t</code>.</p>\n<p dir=\"auto\">With these adjustments in place one can now successfully use a <code class=\"notranslate\">table_alias</code> set from the model with the Public API.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48932",
            "title": "This branch allows a user to set self.table_alias in the model",
            "date_modified": "2023-08-25T01:25:49.000Z",
            "date_published": "2023-08-13T02:50:09.000Z",
            "author": {
                "name": "paulreece",
                "url": "https://github.com/paulreece"
            }
        }
    ]
}