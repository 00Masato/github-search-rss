{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/97030518?u=44f65a79575affbfae38d5a4e75393694efa9d6c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">With the current automatically generated Dockerfile, if you try to build an image you'll get the following warning:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"2 warnings found (use --debug to expand):\n - FromAsCasing: 'as' and 'FROM' keywords' casing do not match (line 5)\n - FromAsCasing: 'as' and 'FROM' keywords' casing do not match (line 18)\"><pre class=\"notranslate\"><code class=\"notranslate\">2 warnings found (use --debug to expand):\n - FromAsCasing: 'as' and 'FROM' keywords' casing do not match (line 5)\n - FromAsCasing: 'as' and 'FROM' keywords' casing do not match (line 18)\n</code></pre></div>\n<p dir=\"auto\">Here's a screenshot from my local machine:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/97030518/341757301-af1bb5fb-15aa-4d61-8309-db14a3ba96a6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTg5NzUyNzYsIm5iZiI6MTcxODk3NDk3NiwicGF0aCI6Ii85NzAzMDUxOC8zNDE3NTczMDEtYWYxYmI1ZmItMTVhYS00ZDYxLTgzMDktZGIxNGEzYmE5NmE2LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA2MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNjIxVDEzMDI1NlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTJhOThhZDRlYjY2Y2Y4MWQ0MzNhZDdlMWUwOTZmNTZkNzYxODM0OWQwYjdkY2Y3MzVjMzM2MTc3MmMzMTc5NmUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.GUE943HGJ5HVtc_MUYt7URuXgap8cJ5JeaS7zkWdDiM\"><img src=\"https://private-user-images.githubusercontent.com/97030518/341757301-af1bb5fb-15aa-4d61-8309-db14a3ba96a6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTg5NzUyNzYsIm5iZiI6MTcxODk3NDk3NiwicGF0aCI6Ii85NzAzMDUxOC8zNDE3NTczMDEtYWYxYmI1ZmItMTVhYS00ZDYxLTgzMDktZGIxNGEzYmE5NmE2LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA2MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNjIxVDEzMDI1NlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTJhOThhZDRlYjY2Y2Y4MWQ0MzNhZDdlMWUwOTZmNTZkNzYxODM0OWQwYjdkY2Y3MzVjMzM2MTc3MmMzMTc5NmUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.GUE943HGJ5HVtc_MUYt7URuXgap8cJ5JeaS7zkWdDiM\" alt=\"Screenshot 2024-06-21 at 14 09 25\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">The obvious problem is that in the automatically generated Dockerfile the <code class=\"notranslate\">FROM</code> and <code class=\"notranslate\">as</code> case isn't matching, thus Docker outputs the above-mentioned warning.</p>\n<p dir=\"auto\">Additional details can be found in the official <a href=\"https://docs.docker.com/reference/build-checks/from-as-casing/\" rel=\"nofollow\">Docker build check reference</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request makes the <code class=\"notranslate\">FROM</code> and <code class=\"notranslate\">as</code> cases consistent in the template Dockerfile.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52179",
            "title": "Fix `FromAsCasing` offense while building a Dockerfile",
            "date_modified": "2024-06-21T12:14:56.000Z",
            "date_published": "2024-06-21T12:12:23.000Z",
            "author": {
                "name": "Uaitt",
                "url": "https://github.com/Uaitt"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This reverts commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/be197368cf7f2b555ff82cb4a5815d384de61896/hovercard\" href=\"https://github.com/rails/rails/commit/be197368cf7f2b555ff82cb4a5815d384de61896\"><tt>be19736</tt></a>.</p>\n<p dir=\"auto\">The same as <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2366242303\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52177\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52177/hovercard\" href=\"https://github.com/rails/rails/pull/52177\">#52177</a> but for <code class=\"notranslate\">6-1-stable</code>, as the build is completely blocked in it's current state.</p>",
            "url": "https://github.com/rails/rails/pull/52178",
            "title": "[6-1-stable] Revert \"Merge pull request #47789 from yahonda/7-0-stable_ruby33\"",
            "date_modified": "2024-06-21T11:02:18.000Z",
            "date_published": "2024-06-21T10:59:19.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This reverts commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/960feca7637d12a2366d6acaf200eb3189959e2a/hovercard\" href=\"https://github.com/rails/rails/commit/960feca7637d12a2366d6acaf200eb3189959e2a\"><tt>960feca</tt></a>.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Git error: command `git clone --bare --no-hardlinks --quiet --no-tags --depth 1 --single-branch -- https://github.com/yahonda/cookiejar.git\n/home/zzak/.rbenv/versions/3.3.3/lib/ruby/gems/3.3.0/cache/bundler/git/cookiejar-38795cdcc6037257d1ca77793676561412e0ea2f` in directory\n/home/zzak/.rbenv/versions/3.3.3/lib/ruby/gems/3.3.0/cache/bundler/git/cookiejar-38795cdcc6037257d1ca77793676561412e0ea2f has failed.\nERROR: Repository not found.\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\nand the repository exists.\"><pre class=\"notranslate\"><code class=\"notranslate\">Git error: command `git clone --bare --no-hardlinks --quiet --no-tags --depth 1 --single-branch -- https://github.com/yahonda/cookiejar.git\n/home/zzak/.rbenv/versions/3.3.3/lib/ruby/gems/3.3.0/cache/bundler/git/cookiejar-38795cdcc6037257d1ca77793676561412e0ea2f` in directory\n/home/zzak/.rbenv/versions/3.3.3/lib/ruby/gems/3.3.0/cache/bundler/git/cookiejar-38795cdcc6037257d1ca77793676561412e0ea2f has failed.\nERROR: Repository not found.\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\nand the repository exists.\n</code></pre></div>\n<p dir=\"auto\">It also seems like the fix for Ruby 3.3 was applied and released: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/dwaite/cookiejar/commit/36332870693334ad9fb51dbfebc398b46bb1427a/hovercard\" href=\"https://github.com/dwaite/cookiejar/commit/36332870693334ad9fb51dbfebc398b46bb1427a\">dwaite/cookiejar@<tt>3633287</tt></a></p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/yahonda/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yahonda\">@yahonda</a></p>",
            "url": "https://github.com/rails/rails/pull/52177",
            "title": "Revert \"Make `bundle exec blade build` success with Ruby 3.3.0dev at 7-0-stable",
            "date_modified": "2024-06-21T10:47:55.000Z",
            "date_published": "2024-06-21T10:30:30.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This backports <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2365503252\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52172\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52172/hovercard\" href=\"https://github.com/rails/rails/pull/52172\">#52172</a> to <code class=\"notranslate\">7-0-stable</code> via <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/41844df3d60ff62c63d3fa48b182abacba56b021/hovercard\" href=\"https://github.com/rails/rails/commit/41844df3d60ff62c63d3fa48b182abacba56b021\"><tt>41844df</tt></a> and <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/ec3faa63a8760e9d9c9da67eb1a32725e0b52d12/hovercard\" href=\"https://github.com/rails/rails/commit/ec3faa63a8760e9d9c9da67eb1a32725e0b52d12\"><tt>ec3faa6</tt></a>.</p>\n<p dir=\"auto\">If it's not failing yet eventually it will, so why not backport this to prevent that from happening?</p>",
            "url": "https://github.com/rails/rails/pull/52176",
            "title": "[7-0-stable] Support selenium-webdriver 4.22.0 that enables CDP in Firefox by default",
            "date_modified": "2024-06-21T10:26:07.000Z",
            "date_published": "2024-06-21T10:26:02.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/987638?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Currently, <code class=\"notranslate\">devcontainer</code> command sets an adapter name, but <code class=\"notranslate\">DevcontainerGenerator</code> requires a database name.<br>\n</p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/16d8b82d5e2aca4780c5d10b1fe9a90b33a0e84e/railties/lib/rails/generators/rails/devcontainer/devcontainer_generator.rb#L11\">rails/railties/lib/rails/generators/rails/devcontainer/devcontainer_generator.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 11\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/16d8b82d5e2aca4780c5d10b1fe9a90b33a0e84e\">16d8b82</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L11\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"11\"></td>\n          <td id=\"LC11\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-en\">class_option</span> <span class=\"pl-pds\">:database</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">enum</span>: <span class=\"pl-v\">Database</span>::<span class=\"pl-c1\">DATABASES</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">type</span>: <span class=\"pl-pds\">:string</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-s\">\"sqlite3\"</span><span class=\"pl-kos\">,</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n <div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/16d8b82d5e2aca4780c5d10b1fe9a90b33a0e84e/railties/lib/rails/generators/database.rb#L6\">rails/railties/lib/rails/generators/database.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 6\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/16d8b82d5e2aca4780c5d10b1fe9a90b33a0e84e\">16d8b82</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L6\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"6\"></td>\n          <td id=\"LC6\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c1\">DATABASES</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">%w(</span> <span class=\"pl-s\">mysql</span> <span class=\"pl-s\">trilogy</span> <span class=\"pl-s\">postgresql</span> <span class=\"pl-s\">sqlite3</span> <span class=\"pl-kos\">)</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">So the <code class=\"notranslate\">devcontainer</code> command doesn't generate the setting for MySQL. This fixes to generate the correct setting.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52175",
            "title": "Correctly generate Devcontainer setting for applications that using mysql2 gem",
            "date_modified": "2024-06-21T08:16:51.000Z",
            "date_published": "2024-06-21T08:13:15.000Z",
            "author": {
                "name": "y-yagi",
                "url": "https://github.com/y-yagi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">During a recent incident, I was trying to clean up some data in a production console via an <code class=\"notranslate\">update_all</code>. The query raised (due to a lock timeout), and I noticed something very surprising in the backtrace - a call to <code class=\"notranslate\">exec_delete</code>!</p>\n<p dir=\"auto\">It turns out that these methods are aliases because they both have a very simple and identical implementation. But I didn't know this at a time and so my heart skipped a beat.</p>\n<p dir=\"auto\">I am proposing we avoid aliasing for the sake of avoid confusion in backtraces. If you call <code class=\"notranslate\">update</code>, I think we should avoid showing any other SQL verbs in your backtrace.</p>\n<p dir=\"auto\">(I realise this is a super nitpicky change so I won't be upset if it gets rejected/ignored.)</p>",
            "url": "https://github.com/rails/rails/pull/52173",
            "title": "Avoid aliasing `exec_update` and `exec_delete`",
            "date_modified": "2024-06-21T02:39:38.000Z",
            "date_published": "2024-06-21T01:25:22.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/30030?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Rails currently does not have a nice route helper for HTTP/1 and HTTP/2 WebSockets.</p>\n<p dir=\"auto\">HTTP/1 uses <code class=\"notranslate\">GET</code> with the <code class=\"notranslate\">upgrade</code> header, while HTTP/2+ uses <code class=\"notranslate\">CONNECT</code> with the <code class=\"notranslate\">:protocol</code> pseudo-header. Users should not need to know the difference.</p>\n<p dir=\"auto\">Currently you'd need to write something like this:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"match &quot;home/index&quot;, to: &quot;home#index&quot;, via: [:get, :connect]\"><pre class=\"notranslate\"><span class=\"pl-en\">match</span> <span class=\"pl-s\">\"home/index\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">to</span>: <span class=\"pl-s\">\"home#index\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">via</span>: <span class=\"pl-kos\">[</span><span class=\"pl-pds\">:get</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:connect</span><span class=\"pl-kos\">]</span></pre></div>\n<p dir=\"auto\">With this change, we can write:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"websocket &quot;home/index&quot;\"><pre class=\"notranslate\"><span class=\"pl-en\">websocket</span> <span class=\"pl-s\">\"home/index\"</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52169",
            "title": "Add route helper for websockets.",
            "date_modified": "2024-06-20T11:28:05.000Z",
            "date_published": "2024-06-20T11:28:00.000Z",
            "author": {
                "name": "ioquatix",
                "url": "https://github.com/ioquatix"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/249125?u=13c581de8d23f79c307d8a9ce71beb43c4b04194&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">As can be seen in the code example below (and also in the API documentation for <code class=\"notranslate\">ActiveRecord::DelegatedType</code>), the \"subclasses\" do not need to inherit (on the Ruby level) from the \"superclass\" - in contrast to STI.</p>\n<p dir=\"auto\">Maybe we can find a better name for these concepts instead, to avoid the confusion?</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52166",
            "title": "Correction: Delegated types do not require inheritance [ci skip]",
            "date_modified": "2024-06-21T12:13:37.000Z",
            "date_published": "2024-06-20T08:05:23.000Z",
            "author": {
                "name": "franzliedke",
                "url": "https://github.com/franzliedke"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/47554?u=7f919feee43d319ec01c7b135f4d1868a31bddc3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because I learned that <a href=\"https://github.com/rails/rails/blob/4bb73233413f30fd7217bd7f08af44963f5832b1/actionview/lib/action_view/template.rb#L439-L444\"><code class=\"notranslate\">local_assigns</code> is undefined</a> (<a href=\"https://github.com/rails/rails/pull/45602\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/45602/hovercard\">PR</a>) when using Strict Locals and I struggled to find a replacement for variables that shadow Ruby reserved keywords. I wanted to document this for others.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52162",
            "title": "Docs: Explain `local_assigns` is undefined when using Strict Locals and workaround for reserved keywords",
            "date_modified": "2024-06-20T12:21:05.000Z",
            "date_published": "2024-06-19T22:53:39.000Z",
            "author": {
                "name": "bensheldon",
                "url": "https://github.com/bensheldon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/43910713?u=f4f81369eab5538bbd348769fcba04da77eddfa3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because when creating an engine in an existing Rails codebase, we want to bypass the duplicate plugin name condition.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a flag \"duplicate_option\" that allows to skip the invalid plugin name error.</p>\n<p dir=\"auto\">Use case:<br>\nIn a rails monolith, when creating rails engines to better encapsulate code, the module name most likely already exists before creating the engine (as in, when not starting from scratch) so the <code class=\"notranslate\">valid_const?</code> would throw an error even though it shouldn't.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52160",
            "title": "Add option to allow for duplicate plugins names generated",
            "date_modified": "2024-06-21T02:07:24.000Z",
            "date_published": "2024-06-19T20:20:19.000Z",
            "author": {
                "name": "ehasrouni",
                "url": "https://github.com/ehasrouni"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Digging deeper is a large section. We can move the performance, security and error reporting guides to a separate section.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52154",
            "title": "Move production guides to separate section [ci-skip]",
            "date_modified": "2024-06-19T17:14:35.000Z",
            "date_published": "2024-06-19T13:00:08.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14007?u=7d74620cf38d2057b13e9cbb7ee8c6ae35c1d019&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52081.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2344500235\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52081\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52081/hovercard\" href=\"https://github.com/rails/rails/issues/52081\">#52081</a></p>\n<p dir=\"auto\">This fixes a situation where a join table is missing in the SQL statement for a has/through relationship that utilizes a scope. It can occur when using <code class=\"notranslate\">joins</code> in the scope with no where clauses (e.g. <code class=\"notranslate\">joins(:post).where(posts: {name: \"foo\"})</code> vs <code class=\"notranslate\">joins(:post).merge(Post.foo)</code>). The \"chain\" is cutoff and the join is left behind.</p>\n<p dir=\"auto\">I'm guessing this bug has lingered because the majority of <code class=\"notranslate\">joins</code> also utilize/chain a where clause.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52150",
            "title": "In association scope, always merge the joins (regardless of references_values)",
            "date_modified": "2024-06-18T22:47:14.000Z",
            "date_published": "2024-06-18T22:28:38.000Z",
            "author": {
                "name": "justinko",
                "url": "https://github.com/justinko"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52125.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2353216899\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52125\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52125/hovercard\" href=\"https://github.com/rails/rails/issues/52125\">#52125</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Starting in Rack 3.1, rack.input is optional, so <code class=\"notranslate\">read_body_stream</code> (used by <code class=\"notranslate\">raw_post</code>) can no longer call <code class=\"notranslate\">read</code> unconditionally.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52138",
            "title": "Fix raw_post raising when rack.input is nil",
            "date_modified": "2024-06-20T11:18:41.000Z",
            "date_published": "2024-06-16T18:10:58.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/3410507?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In order to generate an HTML datalist element with Rails I needed the following code:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"&lt;%= content_tag(:datalist, nil, id: :payees_datalist, 'data-autocomplete-input-target' =&gt; :datalist) do %&gt;\n  &lt;% @payees.each do |payee| %&gt;\n    &lt;%=\n      content_tag(\n        :option,\n        nil,\n        value: payee.name,\n        data: { id: payee.id },\n        'data-autocomplete-input-target' =&gt; 'datalistOption'\n      )\n    %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\"><pre class=\"notranslate\">&lt;%= <span class=\"pl-en\">content_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:datalist</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">nil</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">id</span>: <span class=\"pl-pds\">:payees_datalist</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">'data-autocomplete-input-target'</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-pds\">:datalist</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span> <span class=\"pl-s\">%&gt;</span>\n<span class=\"pl-s\">  &lt;% @payees.each do |payee| %&gt;</span>\n    &lt;%=\n      <span class=\"pl-en\">content_tag</span><span class=\"pl-kos\">(</span>\n        <span class=\"pl-pds\">:option</span><span class=\"pl-kos\">,</span>\n        <span class=\"pl-c1\">nil</span><span class=\"pl-kos\">,</span>\n        <span class=\"pl-pds\">value</span>: <span class=\"pl-en\">payee</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span><span class=\"pl-kos\">,</span>\n        <span class=\"pl-pds\">data</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">id</span>: <span class=\"pl-en\">payee</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">id</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span>\n        <span class=\"pl-s\">'data-autocomplete-input-target'</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-s\">'datalistOption'</span>\n      <span class=\"pl-kos\">)</span>\n    <span class=\"pl-s\">%&gt;</span>\n<span class=\"pl-s\">  &lt;% end %&gt;</span><span class=\"pl-en\"></span>\n&lt;<span class=\"pl-s\">% end </span><span class=\"pl-s\">%&gt;</span></pre></div>\n<p dir=\"auto\">It would be great to have a simple way to do that.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds <code class=\"notranslate\">datalist_tag</code>:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  datalist_tag('countries_datalist', ['Argentina', ['Brazil', { class: 'brazilian_option' }],\n               ['Chile', 'CL', { disabled: true }]], { class: 'sa-countries-sample' })\n\n  =&gt; &lt;datalist id=&quot;countries_datalist&quot; class=&quot;sa-countries-sample&quot;&gt;\n       &lt;option value=&quot;Argentina&quot;&gt;Argentina&lt;/option&gt;\n       &lt;option value=&quot;Brazil&quot; class=&quot;brazilian_option&quot;&gt;Brazil&lt;/option&gt;\n       &lt;option value=&quot;CL&quot; disabled=&quot;disabled&quot;&gt;Chile&lt;/option&gt;\n     &lt;/datalist&gt;\"><pre class=\"notranslate\">  <span class=\"pl-en\">datalist_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'countries_datalist'</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">[</span><span class=\"pl-s\">'Argentina'</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">[</span><span class=\"pl-s\">'Brazil'</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">class</span>: <span class=\"pl-s\">'brazilian_option'</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n               <span class=\"pl-kos\">[</span><span class=\"pl-s\">'Chile'</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">'CL'</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">disabled</span>: <span class=\"pl-c1\">true</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">class</span>: <span class=\"pl-s\">'sa-countries-sample'</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n\n  <span class=\"pl-c1\">=&gt;</span> &lt;<span class=\"pl-en\">datalist</span> <span class=\"pl-s1\">id</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\"countries_datalist\"</span> <span class=\"pl-en\">class</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\"sa-countries-sample\"</span>&gt;\n       &lt;<span class=\"pl-en\">option</span> <span class=\"pl-s1\">value</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\"Argentina\"</span>&gt;<span class=\"pl-v\">Argentina</span>&lt;<span class=\"pl-sr\">/option&gt;</span>\n<span class=\"pl-sr\">       &lt;option value=\"Brazil\" class=\"brazilian_option\"&gt;Brazil&lt;/option</span>&gt;\n       &lt;<span class=\"pl-en\">option</span> <span class=\"pl-s1\">value</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\"CL\"</span> <span class=\"pl-s1\">disabled</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\"disabled\"</span>&gt;<span class=\"pl-v\">Chile</span>&lt;<span class=\"pl-sr\">/option&gt;</span>\n<span class=\"pl-sr\">     &lt;/datalist</span>&gt;<span class=\"pl-en\"></span></pre></div>",
            "url": "https://github.com/rails/rails/pull/52137",
            "title": "Add datalist_tag to create datalist form elements",
            "date_modified": "2024-06-21T10:15:00.000Z",
            "date_published": "2024-06-16T13:25:03.000Z",
            "author": {
                "name": "willianveiga",
                "url": "https://github.com/willianveiga"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/67181453?u=afd083d46441d8e8c2f420552d39c5248ed1afff&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Description</h3>\n<p dir=\"auto\">This pull request introduces a new ParallelQuery module to the ActiveRecord library, specifically designed to enhance query performance for PostgreSQL databases by leveraging parallel execution capabilities.</p>\n<h3 dir=\"auto\">Motivation</h3>\n<p dir=\"auto\">Modern databases, including PostgreSQL, support parallel query execution to utilize multiple CPU cores for faster data retrieval. However, Rails' ActiveRecord does not natively configure these parallel settings, potentially missing out on significant performance improvements for complex queries. This module aims to bridge that gap by dynamically configuring PostgreSQL settings to enable and optimize parallel execution.</p>\n<h4 dir=\"auto\">Why This Feature Is Important</h4>\n<p dir=\"auto\"><strong>Performance Improvement:</strong> Parallel queries can drastically reduce execution times for large and complex queries, especially those involving heavy computational operations or large datasets.<br>\n<strong>Resource Utilization:</strong> Makes better use of modern multi-core processors by distributing query execution across multiple CPU cores.<br>\n<strong>Scalability:</strong> Enhances the scalability of Rails applications by improving the database layer's efficiency, which is often a bottleneck in high-load scenarios.</p>\n<h3 dir=\"auto\">Key Changes</h3>\n<h4 dir=\"auto\">Introduction of ParallelQuery Module:</h4>\n<p dir=\"auto\">A new module, ActiveRecord::ParallelQuery, is added. This module provides a parallel_query method that configures the PostgreSQL settings for parallel execution before executing the provided block of code.<br>\nDynamic Configuration of PostgreSQL Settings:</p>\n<p dir=\"auto\">The parallel_query method sets several PostgreSQL parameters to optimize parallel execution:<br>\n<strong>max_parallel_workers_per_gather</strong>: Sets the maximum number of workers that can be used for parallel execution.<br>\n<strong>work_mem</strong>: Increases the memory available for internal operations to avoid disk I/O.<br>\n<strong>parallel_setup_cost</strong> and <strong>parallel_tuple_cost</strong>: Lowers the costs to make parallel execution more attractive to the query planner.<br>\n<strong>min_parallel_table_scan_size</strong> and <strong>min_parallel_index_scan_size</strong>: Ensures even small scans are considered for parallel execution.<br>\n<strong>Resetting Settings Post-Execution:</strong></p>\n<p dir=\"auto\">After executing the query block, the method ensures that all PostgreSQL settings are reset to their original values to avoid unintended side effects on subsequent queries.</p>\n<p dir=\"auto\"><strong>Compatibility with Other Adapters:</strong></p>\n<p dir=\"auto\">The module includes a conditional check to ensure that it only applies these settings to PostgreSQL adapters. For other adapters (e.g., MySQL, SQLite, SQL Server), the query block is executed without modification, there we can add the changes if in future those adapters supports this functionalities.</p>\n<h4 dir=\"auto\">Detailed Code Changes</h4>\n<p dir=\"auto\"><strong>Module Definition:</strong><br>\nAdded lib/active_record/parallel_query.rb with the new ParallelQuery module.<br>\nIntegration with ActiveRecord:<br>\nIncluded the ParallelQuery module in ActiveRecord::Base to make the parallel_query method available to all models.</p>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52134",
            "title": "Add ParallelQuery module to support parallel query execution in Postg…",
            "date_modified": "2024-06-20T04:46:18.000Z",
            "date_published": "2024-06-16T05:22:08.000Z",
            "author": {
                "name": "janarthanan-shanmugam",
                "url": "https://github.com/janarthanan-shanmugam"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The Logger severity predicates have existed since the <a href=\"https://github.com/ruby/logger/commit/525b58d97eb7dd1375f59dec6e4f34ebff0c0ecb\">introduction of Logger</a>. However, these methods only looked at the <code class=\"notranslate\">level</code> instance variable, so they did not work with the <a href=\"https://github.com/rails/rails/commit/629efb605728b31ad9644f6f0acaf3760b641a29\">thread safe implementation</a> of temporary log levels in Rails.</p>\n<p dir=\"auto\">Since then, the Logger severity predicates were <a href=\"https://github.com/ruby/logger/commit/7365c995bfde6cc52ad6c481e4c6fff32780025c\">updated</a> to use the <code class=\"notranslate\">level</code> method instead of the instance variable, making Rails' severity predicate overrides obsolete.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit removes Rails' custom severity predicates in favor of Logger's implementation, since the new implementation was released in Logger 1.4.2 and came bundled with Ruby 2.7.0.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<p dir=\"auto\">This change only touches undocumented, internal methods so a CHANGELOG entry doesn't seem necessary.</p>",
            "url": "https://github.com/rails/rails/pull/52132",
            "title": "Remove obsolete Logger severity predicates",
            "date_modified": "2024-06-18T22:18:29.000Z",
            "date_published": "2024-06-15T19:18:49.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/816901?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h2 dir=\"auto\">What this fixes</h2>\n<p dir=\"auto\">Here's the scenario I'd like to fix:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class MyTest &lt; ActiveSupport::TestCase\n  test &quot;there is a / in here&quot; do\n    assert true\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">MyTest</span> &lt; <span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-v\">TestCase</span>\n  <span class=\"pl-en\">test</span> <span class=\"pl-s\">\"there is a / in here\"</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-en\">assert</span> <span class=\"pl-c1\">true</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"bin/rails test test/my_test.rb --name test_there_is_a_/_in_here\"><pre class=\"notranslate\">bin/rails <span class=\"pl-c1\">test</span> test/my_test.rb --name test_there_is_a_/_in_here</pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"`require': cannot load such file -- /tmp/testapp/test_there_is_a_/_in_here (LoadError)\"><pre class=\"notranslate\"><code class=\"notranslate\">`require': cannot load such file -- /tmp/testapp/test_there_is_a_/_in_here (LoadError)\n</code></pre></div>\n<h2 dir=\"auto\">What the problem is</h2>\n<p dir=\"auto\">The main problem is that the code currently considers that any arg that contains at least one slash, no spaces, and is not surrounded with slashes has to be a file path, whereas in practice, arguments that follow <code class=\"notranslate\">--name</code> and <code class=\"notranslate\">-n</code> will never be a file path, <em>even</em> if they contain a <code class=\"notranslate\">/</code>.</p>\n<h2 dir=\"auto\">Reproducing</h2>\n<p dir=\"auto\">I've added some tests that prove the problem and fix, but here is another way to reproduce:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ cd /tmp\n$ rails new --minimal testapp\n$ cd testapp\n$ rails g scaffold Post title:string\"><pre class=\"notranslate\"><code class=\"notranslate\">$ cd /tmp\n$ rails new --minimal testapp\n$ cd testapp\n$ rails g scaffold Post title:string\n</code></pre></div>\n<p dir=\"auto\">Add a test to <code class=\"notranslate\">test/models/post_test.rb</code> with a slash in its label:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"test &quot;dummy test with a / slash&quot; do\n  assert true\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">test</span> <span class=\"pl-s\">\"dummy test with a / slash\"</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">assert</span> <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Failure pattern 1</h3>\n<p dir=\"auto\">The following command should only run that single test, but instead it crashes on \"cannot load such file\":</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ bin/rails test test/models/post_test.rb -n test_dummy_test_with_a_/_slash\n/opt/rubies/ruby-3.3.0/lib/ruby/3.3.0/bundled_gems.rb:74:in `require': cannot load such file -- /tmp/testapp/test_dummy_test_with_a_/_slash (LoadError)\"><pre class=\"notranslate\"><code class=\"notranslate\">$ bin/rails test test/models/post_test.rb -n test_dummy_test_with_a_/_slash\n/opt/rubies/ruby-3.3.0/lib/ruby/3.3.0/bundled_gems.rb:74:in `require': cannot load such file -- /tmp/testapp/test_dummy_test_with_a_/_slash (LoadError)\n</code></pre></div>\n<p dir=\"auto\"><code class=\"notranslate\">test_dummy_test_with_a_/_slash</code> was supposed to be a test name filter but was instead seen as a file path. Yet, the following command works:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ bin/rails test test/modes/post_test.rb -n /test_dummy_test_with_a_\\/_slash/\"><pre class=\"notranslate\"><code class=\"notranslate\">$ bin/rails test test/modes/post_test.rb -n /test_dummy_test_with_a_\\/_slash/\n</code></pre></div>\n<h3 dir=\"auto\">Failure pattern 2</h3>\n<p dir=\"auto\">Another failure, which is probably less important, but happens to get fixed by this PR, is when passing an absolute file path to a test directory in order to run all tests defined in that directory.</p>\n<p dir=\"auto\">Because the file path starts and ends with <code class=\"notranslate\">/</code>, it is seen as a regular expression instead.</p>\n<p dir=\"auto\">This next command should only run tests located in <code class=\"notranslate\">test/models</code> but it runs everything:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ bin/rails test --verbose /tmp/testapp/test/models/\nRunning 9 tests in a single process (parallelization threshold is 50)\nRun options: --verbose --seed 32902\n\nPostTest#test_the_truth = 0.02 s = .\nPostTest#test_dummy_test_with_a_/_slash = 0.00 s = .\nPostsControllerTest#test_should_show_post = 0.11 s = .\nPostsControllerTest#test_should_get_index = 0.00 s = .\nPostsControllerTest#test_should_get_edit = 0.01 s = .\nPostsControllerTest#test_should_update_post = 0.01 s = .\nPostsControllerTest#test_should_create_post = 0.01 s = .\nPostsControllerTest#test_should_destroy_post = 0.00 s = .\nPostsControllerTest#test_should_get_new = 0.00 s = .\n\nFinished in 0.168346s, 53.4614 runs/s, 77.2221 assertions/s.\n9 runs, 13 assertions, 0 failures, 0 errors, 0 skips\"><pre class=\"notranslate\"><code class=\"notranslate\">$ bin/rails test --verbose /tmp/testapp/test/models/\nRunning 9 tests in a single process (parallelization threshold is 50)\nRun options: --verbose --seed 32902\n\nPostTest#test_the_truth = 0.02 s = .\nPostTest#test_dummy_test_with_a_/_slash = 0.00 s = .\nPostsControllerTest#test_should_show_post = 0.11 s = .\nPostsControllerTest#test_should_get_index = 0.00 s = .\nPostsControllerTest#test_should_get_edit = 0.01 s = .\nPostsControllerTest#test_should_update_post = 0.01 s = .\nPostsControllerTest#test_should_create_post = 0.01 s = .\nPostsControllerTest#test_should_destroy_post = 0.00 s = .\nPostsControllerTest#test_should_get_new = 0.00 s = .\n\nFinished in 0.168346s, 53.4614 runs/s, 77.2221 assertions/s.\n9 runs, 13 assertions, 0 failures, 0 errors, 0 skips\n</code></pre></div>\n<h2 dir=\"auto\">Caveats</h2>\n<p dir=\"auto\">The code in <code class=\"notranslate\">railties/lib/rails/test_unit/runner.rb</code> is hard to adjust. It's attempting to parse arguments and change them before eventually forwarding them to Minitest. Not using <code class=\"notranslate\">OptionParser</code> means the code needs to somehow reinvent the wheel and handle multiple edge cases.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52126",
            "title": "Fix test runner when name contains a `/`",
            "date_modified": "2024-06-21T10:14:05.000Z",
            "date_published": "2024-06-14T16:25:26.000Z",
            "author": {
                "name": "davidstosik",
                "url": "https://github.com/davidstosik"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54260?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2291492548\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51799\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51799/hovercard\" href=\"https://github.com/rails/rails/pull/51799\">#51799</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/dhh/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dhh\">@dhh</a> changed asset pipeline default to Propshaft in Rails 8; specs assumed sprockets though so the new default isn't being tested.</p>\n<p dir=\"auto\"><a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/fedesapuppo/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fedesapuppo\">@fedesapuppo</a> and I reconvert <code class=\"notranslate\">test/application/assets_test.rb</code> to test the propshaft default (dropping several sprockets-specific tests now unneeded), and duplicated the original file into a <code class=\"notranslate\">test/application/sprockets_assets_test.rb</code> to continue testing that option. Both run fine independently, but loading them together leaves the propshaft railtie loaded for both versions, messing with the sprockets configuration and tests. How could we decouple them properly?</p>\n<p dir=\"auto\">Thanks to <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a> for helping us get started generating a template app for each asset pipeline option.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> [doesn't apply] Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> [doesn't apply] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52122",
            "title": "Add propshaft specs for railties new default",
            "date_modified": "2024-06-13T22:47:19.000Z",
            "date_published": "2024-06-13T22:47:15.000Z",
            "author": {
                "name": "tute",
                "url": "https://github.com/tute"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/803765?u=1068ad3fe7323acb63e9fe65e558ba0aabe5d3fe&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">I realized that retrying a job from GoodJob would enqueue it in the current locale of the GoodJob dashboard, even if the job was originally enqueued in a different locale.</p>\n<p dir=\"auto\">For instance, it was enqueued in <code class=\"notranslate\">:fr</code>, and failed. When I retried it from the dashboard that was in <code class=\"notranslate\">:en</code>, it was enqueued with an <code class=\"notranslate\">:en</code> locale ( I noticed it because it failed again with a missing translation error)</p>\n<p dir=\"auto\">I tracked it down to the <code class=\"notranslate\">serialize</code> method of <code class=\"notranslate\">ActiveJob</code> who always sets <code class=\"notranslate\">locale</code> from <code class=\"notranslate\">I18n.locale</code></p>\n<p dir=\"auto\">This PR changes the serialize method to actually return the original local from the job if it is set, and default to the current locale if not.</p>",
            "url": "https://github.com/rails/rails/pull/52121",
            "title": "Include the actual ActiveJob locale when serializing rather than I18n locale",
            "date_modified": "2024-06-14T00:53:57.000Z",
            "date_published": "2024-06-13T20:17:11.000Z",
            "author": {
                "name": "Intrepidd",
                "url": "https://github.com/Intrepidd"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/289727?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Rails was not behaving as expected when sending invalid UTF-8 query string.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52114.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2350614733\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52114\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52114/hovercard\" href=\"https://github.com/rails/rails/issues/52114\">#52114</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The <code class=\"notranslate\">check_param_encoding</code> only checked the values in the params hash resulting in a crash when sending query like <code class=\"notranslate\">?%ADf</code></p>\n<p dir=\"auto\">Changed the method so it also validates the encoding for keys in the params hash.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52116",
            "title": "Also check params key for valid encoding",
            "date_modified": "2024-06-14T08:49:59.000Z",
            "date_published": "2024-06-13T11:51:28.000Z",
            "author": {
                "name": "chrisdebruin",
                "url": "https://github.com/chrisdebruin"
            }
        }
    ]
}