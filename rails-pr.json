{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Redo of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2254046185\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51614\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51614/hovercard\" href=\"https://github.com/rails/rails/pull/51614\">#51614</a>, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2332046603\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52012\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52012/hovercard\" href=\"https://github.com/rails/rails/pull/52012\">#52012</a></p>\n<p dir=\"auto\">Executes the first routes reload when the route set is first used to serve a request, generate a url, or otherwise. Previously, this was executed unconditionally on boot, which can slow down boot time unnecessarily for larger apps with lots of routes.</p>\n<p dir=\"auto\">This Pull Request has been created to reduce route draw time for larger apps by deferring it until necessary.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes previous attempts were reverted. In this one, we're depending entirely on the route set class' methods to load routes instead of littering the codebase with manual reload calls. This should help prevent loading edge cases with the lazy route set. We're also swapping out the lazy route set for the normal one in eager-loaded environments to reduce impact on production.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52353",
            "title": "Defer route drawing to the first request, or when url_helpers called",
            "date_modified": "2024-07-17T22:21:04.000Z",
            "date_published": "2024-07-17T22:18:05.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Ref <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2341694000\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52062\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52062/hovercard\" href=\"https://github.com/rails/rails/pull/52062\">#52062</a></p>\n<p dir=\"auto\">Previously, secret_key_base was allowed to be set to <code class=\"notranslate\">nil</code> in local environments (or with SECRET_KEY_BASE_DUMMY) because validation would only happen on usage and not on the setter. This was recently <a href=\"https://github.com/rails/rails/commit/c2901eb084adb3d3701be157bec20d2961beb515\">changed</a> to make it easier to identify exactly where a secret_key_base was being set to an invalid value.</p>\n<p dir=\"auto\">However, this broke some applications which unconditionally set secret_key_base to some external value in dev/test. Before the change, the set value could be <code class=\"notranslate\">nil</code> and fall back to the generated local secret on usage.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit restores that behavior so that applications can continue to set secret_key_base unconditionally, since the nil value will end up getting replaced by the generated local secret anyways.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I left the condition blank for now to restore the behavior, but should we deprecate it and required applications set <code class=\"notranslate\">credentials.secret_key_base</code> instead?</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52351",
            "title": "Reallow setting secret_key_base to nil when local",
            "date_modified": "2024-07-17T22:52:58.000Z",
            "date_published": "2024-07-17T15:14:42.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This reverts commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/6902ca51824d5bc81e6c187ec7a58f787dfe4728/hovercard\" href=\"https://github.com/rails/rails/commit/6902ca51824d5bc81e6c187ec7a58f787dfe4728\"><tt>6902ca5</tt></a>.</p>\n<p dir=\"auto\">This was originally reverted due to a reported regression, however the regression appeared to be present without this patch as well (and was fixed in a later <a href=\"https://github.com/rails/rails/commit/ca937c59cd69c05cbb92bad4839d931061e15b69\">commit</a>.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52302.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2401430634\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52302\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52302/hovercard\" href=\"https://github.com/rails/rails/issues/52302\">#52302</a><br>\n<span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #27584.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"199049983\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/27584\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/27584/hovercard\" href=\"https://github.com/rails/rails/issues/27584\">#27584</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52348",
            "title": "Reapply \"Merge pull request #27586 from maclover7/jm-fix-27584\"",
            "date_modified": "2024-07-17T04:19:43.000Z",
            "date_published": "2024-07-17T04:19:39.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/131752?u=32ddf1119b1d189c9bd241a721b36ea01c29f61e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Some Ruby versions have a bug when creating a Time object backed by a timezone object where they create a fractional-second UTC offset.</p>\n<p dir=\"auto\">For the added test, without this workaround, on Ruby 3.3.0:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"  1) Failure:\nTimeExtCalculationsTest#test_change_preserves_fractional_seconds_on_zoned_time [./test/core_ext/time_ext_test.rb:528]:\n--- expected\n+++ actual\n@@ -1 +1,3 @@\n-&quot;2005-01-30 00:00:00.99 -0500&quot;\n+# encoding: US-ASCII\n+#    valid: true\n+&quot;2005-01-30 00:00:00.99 -045959&quot;\"><pre class=\"notranslate\"><code class=\"notranslate\">  1) Failure:\nTimeExtCalculationsTest#test_change_preserves_fractional_seconds_on_zoned_time [./test/core_ext/time_ext_test.rb:528]:\n--- expected\n+++ actual\n@@ -1 +1,3 @@\n-\"2005-01-30 00:00:00.99 -0500\"\n+# encoding: US-ASCII\n+#    valid: true\n+\"2005-01-30 00:00:00.99 -045959\"\n</code></pre></div>\n<p dir=\"auto\">This is fixed in Ruby 3.3.1 and 3.2.4. We can remove the workaround when we expect users to be on those versions or newer.</p>\n<p dir=\"auto\">I intend to backport this to 7-2-stable</p>",
            "url": "https://github.com/rails/rails/pull/52347",
            "title": "Workaround for Ruby UTC offset bug",
            "date_modified": "2024-07-16T22:45:20.000Z",
            "date_published": "2024-07-16T22:45:16.000Z",
            "author": {
                "name": "jhawthorn",
                "url": "https://github.com/jhawthorn"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1100970?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">When you have a <code class=\"notranslate\">remove_check_constraint</code> with <code class=\"notranslate\">validate: false</code>, the Rails migration can fail, producing the error: <code class=\"notranslate\">raise(ArgumentError, \"Table '#{table_name}' has no check constraint for #{expression || options}\")</code>.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"remove_check_constraint(\n  :diagram_notes,\n  &quot;width IS NOT NULL&quot;,\n  name: &quot;diagram_notes_width_null&quot;,\n  validate: false,\n)\"><pre class=\"notranslate\"><span class=\"pl-en\">remove_check_constraint</span><span class=\"pl-kos\">(</span>\n  <span class=\"pl-pds\">:diagram_notes</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"width IS NOT NULL\"</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"diagram_notes_width_null\"</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-pds\">validate</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span>\n<span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">This occurs because <code class=\"notranslate\">remove_check_constraint</code> calls <code class=\"notranslate\">check_constraint_for!</code>, which filters out any validations of constraints that may have <code class=\"notranslate\">validate: false</code>. Since <code class=\"notranslate\">validate</code> is an acceptable option on <code class=\"notranslate\">add_check_constraint</code> but not on <code class=\"notranslate\">remove_check_constraint</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">In this PR - I am proposing to ensure that migrations do not fail with an unrelated or hard-to-understand exception when <code class=\"notranslate\">validate: false</code> is accidentally passed to <code class=\"notranslate\">remove_check_constraint</code>. We are simply dropping that attribute.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Have followed it up with a spec as well.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52345",
            "title": "Protect against invalid validate option on remove_check_constraint",
            "date_modified": "2024-07-16T18:27:16.000Z",
            "date_published": "2024-07-16T18:14:32.000Z",
            "author": {
                "name": "shayonj",
                "url": "https://github.com/shayonj"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/7865030?u=a91840c5a5d8e811d0afa26717f1fd56b4d902e1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Ref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2345092347\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52084\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52084/hovercard\" href=\"https://github.com/rails/rails/pull/52084\">#52084</a></p>\n<p dir=\"auto\">Subtracting two time instances results in a Float representing the time between the instances. This is correct behaviour.</p>\n<p dir=\"auto\">Adding two time instances should not work, but it does. It is an easily made mistake.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"10.days.ago + 10.days.ago\n\n# =&gt; Mon, 09 Jan 2079 21:03:46.179229000 UTC +00:0\"><pre class=\"notranslate\"><span class=\"pl-c1\">10</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">days</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ago</span> + <span class=\"pl-c1\">10</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">days</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ago</span>\n\n<span class=\"pl-c\"># =&gt; Mon, 09 Jan 2079 21:03:46.179229000 UTC +00:0</span></pre></div>\n<p dir=\"auto\"><a href=\"https://github.com/rails/rails/pull/52084/files#diff-aa0ae5ccf92f812f874b632afe70375c52772636f927fe6e34ffeaebf54af9d1L303\">This change</a> removed the rescue statement that had made this possible.</p>\n<p dir=\"auto\">Now, it is a breaking change to have made that easy mistake. This PR instead deprecates this change until Rails 8.0 and raises a deprecation warning when adding two Time instances to give people time to fix their code.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52343",
            "title": "Deprecate adding two Time instances with ActiveSupport::TimeWithZone",
            "date_modified": "2024-07-17T16:55:39.000Z",
            "date_published": "2024-07-16T10:45:27.000Z",
            "author": {
                "name": "Schwad",
                "url": "https://github.com/Schwad"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">There's no need to use class eval here.</p>\n<p dir=\"auto\">Essentially a revert of <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/f7e91c7224560fbd3e95c238a0e8bb362799bcb7/hovercard\" href=\"https://github.com/rails/rails/commit/f7e91c7224560fbd3e95c238a0e8bb362799bcb7\"><tt>f7e91c7</tt></a></p>\n<p dir=\"auto\">FYI: <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/amatsuda/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/amatsuda\">@amatsuda</a>, I didn't find more context than the commit message, and as far as I can tell, this doesn't seem to re-introduce the issue mentioned, unless there's more to it and it happens when code is loaded in a particular order?</p>",
            "url": "https://github.com/rails/rails/pull/52339",
            "title": "Simplify FileUpdateCheckerSharedTests",
            "date_modified": "2024-07-16T07:44:19.000Z",
            "date_published": "2024-07-16T07:44:15.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Follow up to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1834208849\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48876\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48876/hovercard\" href=\"https://github.com/rails/rails/pull/48876\">#48876</a> (cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/HParker/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/HParker\">@HParker</a>).</p>\n<p dir=\"auto\">In <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2406845758\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52322\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52322/hovercard\" href=\"https://github.com/rails/rails/pull/52322\">#52322</a> I discovered, that support for composite primary keys was not added to <code class=\"notranslate\">batch_on_loaded_relation</code> in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1834208849\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48876\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48876/hovercard\" href=\"https://github.com/rails/rails/pull/48876\">#48876</a>.</p>",
            "url": "https://github.com/rails/rails/pull/52329",
            "title": "Fix loaded relation batching for models with composite primary keys",
            "date_modified": "2024-07-14T11:48:53.000Z",
            "date_published": "2024-07-14T11:48:48.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/55164724?u=c6537070bc166ac2ce4c6e8e8aa439b91fff5af1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>",
            "url": "https://github.com/rails/rails/pull/52325",
            "title": "Exclude system tables from SQLite schema dumps",
            "date_modified": "2024-07-13T20:12:01.000Z",
            "date_published": "2024-07-13T18:33:21.000Z",
            "author": {
                "name": "northeastprince",
                "url": "https://github.com/northeastprince"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6379550?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Documentation doesn't mention that blorgh needs to be copied into unicorn/engines/blorgh. Fix to include that step.</p>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because the instructions to install the engine <code class=\"notranslate\">blorgh</code> into the sample application <code class=\"notranslate\">unicorn</code> is missing the step of copying <code class=\"notranslate\">blorgh</code> into <code class=\"notranslate\">unicorn/engines/</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds the step of copying <code class=\"notranslate\">blorgh</code> into <code class=\"notranslate\">unicorn/engines/</code> before running <code class=\"notranslate\">bundle</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52318",
            "title": "Update engines.md with step needed to install engine in test application [ci skip]",
            "date_modified": "2024-07-12T18:04:55.000Z",
            "date_published": "2024-07-12T18:04:51.000Z",
            "author": {
                "name": "climatebrad",
                "url": "https://github.com/climatebrad"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6379550?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">For Comment model generator, use article:references instead of article_id:integer</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because the engines.md documentation uses an <code class=\"notranslate\">article_id:integer</code> column in its Comment model generator instead of an <code class=\"notranslate\">article:references</code> column.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">article_id:integer</code> column to <code class=\"notranslate\">article:references</code> column in the example Comment model generator and updates the explanatory text to match.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul dir=\"auto\">\n<li>[ x] This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li>[ x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[ x] Tests are added or updated if you fix a bug or add a feature.</li>\n<li>[ x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52317",
            "title": "Update engines.md: use article :references instead of article_id :integer in Comment model generator [ci skip]",
            "date_modified": "2024-07-12T15:17:52.000Z",
            "date_published": "2024-07-12T15:17:47.000Z",
            "author": {
                "name": "climatebrad",
                "url": "https://github.com/climatebrad"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39736940?u=f85e4783c5ce6188b057cb325de859d49ca967e0&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to Add support for different rate limiting strategies.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Implemented a sliding window rate limiting strategy that can be selected via the <code class=\"notranslate\">strategy</code> parameter.</p>\n<p dir=\"auto\">The default is a <code class=\"notranslate\">fixed_window</code> algorithm (what we have right now), but you can switch to the sliding window by setting <code class=\"notranslate\">strategy: :sliding_window</code>.</p>\n<p dir=\"auto\">This implementation allows for more granular control over rate limiting.</p>\n<p dir=\"auto\">You can also pass a custom strategy class in the <code class=\"notranslate\">strategy</code> parameter, as long as it implements the BaseStrategy interface. This provides flexibility for developers to create their own rate limiting logic tailored to specific use cases.</p>\n<h2 dir=\"auto\">Example usage:</h2>\n<p dir=\"auto\">Using a pre-defined strategy:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"    class LimitsController &lt; ActionController::Base\n      rate_limit to: 10, within: 1.hour, strategy: :sliding_window\n    end\"><pre class=\"notranslate\">    <span class=\"pl-k\">class</span> <span class=\"pl-v\">LimitsController</span> &lt; <span class=\"pl-v\">ActionController</span>::<span class=\"pl-v\">Base</span>\n      <span class=\"pl-en\">rate_limit</span> <span class=\"pl-pds\">to</span>: <span class=\"pl-c1\">10</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">within</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">hour</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">strategy</span>: <span class=\"pl-pds\">:sliding_window</span>\n    <span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Using a custom strategy</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"    class LimitsController &lt; ActionController::Base\n      rate_limit to: 10, within: 1.hour, strategy: ::LeakyBucketStrategy\n    end\"><pre class=\"notranslate\">    <span class=\"pl-k\">class</span> <span class=\"pl-v\">LimitsController</span> &lt; <span class=\"pl-v\">ActionController</span>::<span class=\"pl-v\">Base</span>\n      <span class=\"pl-en\">rate_limit</span> <span class=\"pl-pds\">to</span>: <span class=\"pl-c1\">10</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">within</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">hour</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">strategy</span>: ::<span class=\"pl-v\">LeakyBucketStrategy</span>\n    <span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Additional information/questions</h3>\n<ul dir=\"auto\">\n<li>This PR might be divided into two PRs, one to support other strategies, and one to add some pre-defined strategies.</li>\n</ul>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52314",
            "title": "Add support for different rate limiting strategies",
            "date_modified": "2024-07-12T18:38:08.000Z",
            "date_published": "2024-07-11T21:03:40.000Z",
            "author": {
                "name": "federicoaldunate",
                "url": "https://github.com/federicoaldunate"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2779422?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This allows the schema dumper's generated <code class=\"notranslate\">enable_extension</code> statements<br>\nto include the schema name, if different from <code class=\"notranslate\">current_schema</code>.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Fixes 52312.</p>\n<p dir=\"auto\">When extensions are created within a specific schema, the <code class=\"notranslate\">enable_extension</code> statement generated by the schema dumper should include the schema name.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">See <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2403936559\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52312\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52312/hovercard\" href=\"https://github.com/rails/rails/issues/52312\">#52312</a></p>\n<h3 dir=\"auto\">Additional information</h3>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52313",
            "title": "Update PostgreSQLAdapter#extensions to include schema name",
            "date_modified": "2024-07-11T19:36:00.000Z",
            "date_published": "2024-07-11T19:35:17.000Z",
            "author": {
                "name": "afn",
                "url": "https://github.com/afn"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/987638?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The current code expects <code class=\"notranslate\">active_record</code> to be loaded before <code class=\"notranslate\">active_job</code>. But I think there are no guarantees about load orders. At least, <code class=\"notranslate\">active_job</code> is loaded before <code class=\"notranslate\">active_record</code> in a newer application.</p>\n<p dir=\"auto\">In that case, <code class=\"notranslate\">EnqueueAfterTransactionCommit</code> isn't loaded and an application that uses <code class=\"notranslate\">enqueue_after_transaction_commit</code> in jobs will fail with the following error.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"app/jobs/user_job.rb:2:in `&lt;class:UserJob&gt;': undefined method `enqueue_after_transaction_commit=' for class UserJob (NoMethodError)\"><pre class=\"notranslate\"><code class=\"notranslate\">app/jobs/user_job.rb:2:in `&lt;class:UserJob&gt;': undefined method `enqueue_after_transaction_commit=' for class UserJob (NoMethodError)\n</code></pre></div>\n<p dir=\"auto\">I removed <code class=\"notranslate\">active_record</code> hook to fix this. Active Record are only used inside methods in ``EnqueueAfterTransactionCommit`. So I think it's safe to load the module without Active Record.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52301",
            "title": "Allow to set `enqueue_after_transaction_commit` to jobs when `eager_load` is true",
            "date_modified": "2024-07-10T22:51:00.000Z",
            "date_published": "2024-07-10T06:33:53.000Z",
            "author": {
                "name": "y-yagi",
                "url": "https://github.com/y-yagi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/170034?u=a921ef36a26d3da448fde275fd40b1e7d8a3f497&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This introduces a new config setting: <code class=\"notranslate\">action_dispatch.verbose_redirect_logs</code>. It logs the source location of redirects. It works similarly to <code class=\"notranslate\">active_record.verbose_query_logs</code> and <code class=\"notranslate\">active_job.verbose_enqueue_logs</code>.</p>\n<p dir=\"auto\">Redirects are of course used a lot. They are often defined in different locations. For example in your authentication code, authorization code, fallbacks for resources that can't be found, and to redirect users to a different page after performing an action, possibly with multiple redirect options in one controller action.</p>\n<p dir=\"auto\">I think it would be beneficial to know exactly which line of code triggered a redirect.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This adds a config setting that logs the source location of the redirect.</p>\n<p dir=\"auto\">There are three main use cases, they would look like this:</p>\n<ol dir=\"auto\">\n<li>Redirects in filters (these already have a \"filter chain halted\" log as well, which points you in the right direction a bit, but the exact code location can still be useful):</li>\n</ol>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Redirected to http://localhost:3000/\n↳ app/controllers/posts_controller.rb:76:in `check_something'\nFilter chain halted as :redirect rendered or redirected\nCompleted 302 Found in 18ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)\"><pre class=\"notranslate\"><code class=\"notranslate\">Redirected to http://localhost:3000/\n↳ app/controllers/posts_controller.rb:76:in `check_something'\nFilter chain halted as :redirect rendered or redirected\nCompleted 302 Found in 18ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)\n</code></pre></div>\n<ol start=\"2\" dir=\"auto\">\n<li>Redirects in controller actions:</li>\n</ol>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Redirected to http://localhost:3000/posts/7\n↳ app/controllers/posts_controller.rb:32:in `block (2 levels) in create'\nCompleted 302 Found in 36ms (ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)\"><pre class=\"notranslate\"><code class=\"notranslate\">Redirected to http://localhost:3000/posts/7\n↳ app/controllers/posts_controller.rb:32:in `block (2 levels) in create'\nCompleted 302 Found in 36ms (ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)\n</code></pre></div>\n<ol start=\"3\" dir=\"auto\">\n<li>Redirects in routes:</li>\n</ol>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Started GET &quot;/redirect&quot; for ::1 at 2024-07-09 12:40:23 +0200\nRedirected to http://localhost:3000/\n↳ /Users/dennis/Code/rails-test-app/config/routes.rb:14\nCompleted 301 Moved Permanently in 9ms\"><pre class=\"notranslate\"><code class=\"notranslate\">Started GET \"/redirect\" for ::1 at 2024-07-09 12:40:23 +0200\nRedirected to http://localhost:3000/\n↳ /Users/dennis/Code/rails-test-app/config/routes.rb:14\nCompleted 301 Moved Permanently in 9ms\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<hr>\n<p dir=\"auto\">There are a few points I'm not sure how to approach and like some guidance in:</p>\n<ol dir=\"auto\">\n<li>The test for for dispatch (<code class=\"notranslate\">actionpack/test/dispatch/routing/log_subscriber_test.rb</code>) breaks currently. The code relies on <a href=\"https://github.com/rails/rails/blob/16f1222753cac0a554a2acd8f4ffa3f23d51d945/actionpack/lib/action_dispatch/http/request.rb#L161-L163\"><code class=\"notranslate\">request.routes</code></a> to be set (which is true for actual applications), but it's <code class=\"notranslate\">nil</code> in the tests. I'm not sure if going through <code class=\"notranslate\">request.routes</code> is the best approach or what needs to change in the tests to make them pass or have the routes available.</li>\n<li>The source location for redirects from the router looks slightly different. This is because it uses <a href=\"https://github.com/rails/rails/blob/16f1222753cac0a554a2acd8f4ffa3f23d51d945/actionpack/lib/action_dispatch/routing/mapper.rb#L378-L408\">the existing <code class=\"notranslate\">source_location</code> implementation</a>, which for example shows the absolute path. I'm not sure if that's fine, or we want to get that in line with how the backtrace cleaner is used in other places.</li>\n<li>This is the 3rd very similar config setting (<code class=\"notranslate\">verbose_query_logs</code>, <code class=\"notranslate\">verbose_enqueue_logs</code> and now <code class=\"notranslate\">verbose_redirect_logs</code>). I can imagine most people will either set all or none of them. Would it make sense to consolidate them into one setting, or maybe have a setting that sets all 3 at the same time? The code for them is also very similar. Happy to work in a direction that unifies them if that's desirable.</li>\n</ol>",
            "url": "https://github.com/rails/rails/pull/52297",
            "title": "Add setting for logging redirect source locations",
            "date_modified": "2024-07-09T14:22:51.000Z",
            "date_published": "2024-07-09T14:22:46.000Z",
            "author": {
                "name": "djfpaagman",
                "url": "https://github.com/djfpaagman"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1151753?u=0ae97787ee7a5583ea7b5bdb149c32e84fae699b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><ul dir=\"auto\">\n<li><strong>test copying of default_proc in to_hash</strong></li>\n<li><strong>add testing of update w/ indifferent_access</strong></li>\n<li><strong>add update with block test</strong></li>\n</ul>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because I wanted to improve the test suite.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a couple tests for untested features and reworks a test that was confused.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52296",
            "title": "Some test improvements for hash with indifferent access",
            "date_modified": "2024-07-10T22:05:42.000Z",
            "date_published": "2024-07-09T14:02:16.000Z",
            "author": {
                "name": "kwstannard",
                "url": "https://github.com/kwstannard"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/10546292?u=dfcfd0a6a1b7fb713a16815dbcb19f6a03aefb27&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This is a refactor to the <code class=\"notranslate\">ParserExtractor</code> to use Prism instead of Ripper for finding comments.<br>\ncc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/kddnewton/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/kddnewton\">@kddnewton</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">I referred to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2124354975\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51006\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51006/hovercard\" href=\"https://github.com/rails/rails/pull/51006\">#51006</a> on how to load the Prism module, so some of the code/comments are similar. The main code in the diff here is the new definition of the <code class=\"notranslate\">annotations</code> method (most everything else is just the old Parser class nested in <code class=\"notranslate\">if defined?(Prism)...else...end</code>):</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"def annotations(file)\n  Prism.parse_file(file).comments.map do |comment|\n    Annotation.new(comment.location.start_line, $1, $2) if comment.location.slice =~ pattern\n  end.compact\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">def</span> <span class=\"pl-en\">annotations</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-v\">Prism</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">parse_file</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">comments</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">map</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">comment</span>|\n    <span class=\"pl-v\">Annotation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">comment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">location</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">start_line</span><span class=\"pl-kos\">,</span> $1<span class=\"pl-kos\">,</span> $2<span class=\"pl-kos\">)</span> <span class=\"pl-k\">if</span> <span class=\"pl-s1\">comment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">location</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">slice</span> =~ <span class=\"pl-en\">pattern</span>\n  <span class=\"pl-k\">end</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">compact</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">We could potentially use Prism for the <code class=\"notranslate\">PatternExtractor</code> as well, but I at least wanted to propose the change to the <code class=\"notranslate\">ParserExtractor</code> to see if we wanted to use Prism in this way.</p>\n<p dir=\"auto\"></p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/9f178ada796a89c01f952fc05810b58b6f8682fc/railties/lib/rails/source_annotation_extractor.rb#L40-L52\">rails/railties/lib/rails/source_annotation_extractor.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 40 to 52\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/9f178ada796a89c01f952fc05810b58b6f8682fc\">9f178ad</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L40\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"40\"></td>\n          <td id=\"LC40\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\"># Wraps a regular expression that will iterate through a file's lines and</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L41\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"41\"></td>\n          <td id=\"LC41\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\"># test each one for the given pattern.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L42\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"42\"></td>\n          <td id=\"LC42\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">class</span> <span class=\"pl-v\">PatternExtractor</span> &lt; <span class=\"pl-v\">Struct</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:pattern</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L43\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"43\"></td>\n          <td id=\"LC43\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">def</span> <span class=\"pl-en\">annotations</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L44\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"44\"></td>\n          <td id=\"LC44\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-s1\">lineno</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">0</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L45\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"45\"></td>\n          <td id=\"LC45\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L46\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"46\"></td>\n          <td id=\"LC46\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">readlines</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">encoding</span>: <span class=\"pl-v\">Encoding</span>::<span class=\"pl-c1\">BINARY</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">inject</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">list</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">line</span>| </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L47\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"47\"></td>\n          <td id=\"LC47\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-s1\">lineno</span> += <span class=\"pl-c1\">1</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L48\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"48\"></td>\n          <td id=\"LC48\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-k\">next</span> <span class=\"pl-s1\">list</span> <span class=\"pl-k\">unless</span> <span class=\"pl-s1\">line</span> =~ <span class=\"pl-en\">pattern</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L49\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"49\"></td>\n          <td id=\"LC49\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-s1\">list</span> &lt;&lt; <span class=\"pl-v\">Annotation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">lineno</span><span class=\"pl-kos\">,</span> $1<span class=\"pl-kos\">,</span> $2<span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L50\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"50\"></td>\n          <td id=\"LC50\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L51\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"51\"></td>\n          <td id=\"LC51\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L52\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"52\"></td>\n          <td id=\"LC52\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">As far as tests goes, I see that we have tests in <a href=\"https://github.com/rails/rails/blob/main/railties/test/commands/notes_test.rb\">railties/test/commands/notes_test.rb</a>, but since this PR is a refactor as opposed to a bug fix or a feature, I decided to leave the tests as-is. If there is something we want to test specifically, I'm willing to look over <code class=\"notranslate\">notes_test.rb</code> to see what I can add.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52287",
            "title": "Use Prism for `ParserExtractor` in `SourceAnnotationExtractor`",
            "date_modified": "2024-07-12T14:24:35.000Z",
            "date_published": "2024-07-08T07:05:09.000Z",
            "author": {
                "name": "gazayas",
                "url": "https://github.com/gazayas"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/44280450?u=5d0b7f0d7535c39131a9d2d513cbf4691236b6e4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">PostgreSQL has datatype <code class=\"notranslate\">macaddr8</code> but rails does not support in now.</p>\n<p dir=\"auto\"><a href=\"https://www.postgresql.org/docs/current/datatype-net-types.html#DATATYPE-MACADDR8\" rel=\"nofollow\">https://www.postgresql.org/docs/current/datatype-net-types.html#DATATYPE-MACADDR8</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52285",
            "title": "Add `macaddr8` type in PostgreSQL",
            "date_modified": "2024-07-13T15:48:04.000Z",
            "date_published": "2024-07-07T03:49:57.000Z",
            "author": {
                "name": "heka1024",
                "url": "https://github.com/heka1024"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/58702?u=3b098e8231945420ffdf22e1f0af0591d71e45ce&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Images and other attachments added to a rich text area aren't being displayed in the editor when you go back to edit the record again.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52233.\">Fixes</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2381123260\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52233\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52233/hovercard\" href=\"https://github.com/rails/rails/issues/52233\">#52233</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request makes it so that if the <code class=\"notranslate\">action-text-attachment</code> element contains an empty <code class=\"notranslate\">content</code> attribute, that attribute will be stripped out during the rendering of attachments.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">None</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52281",
            "title": "ActionText::Content - Strip `content` attribute if it is empty",
            "date_modified": "2024-07-10T16:50:07.000Z",
            "date_published": "2024-07-05T18:45:13.000Z",
            "author": {
                "name": "jagthedrummer",
                "url": "https://github.com/jagthedrummer"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/47554?u=7f919feee43d319ec01c7b135f4d1868a31bddc3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51327.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2186612406\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51327\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51327/hovercard\" href=\"https://github.com/rails/rails/issues/51327\">#51327</a></p>\n\n<p dir=\"auto\">This Pull Request has been created to move all of the calls to <code class=\"notranslate\">ActiveSupport.run_load_hooks</code> outside of their respective constant definitions. This is to ensure that the constant is fully defined before the <code class=\"notranslate\">run_load_hooks</code> method is called.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li><del>[] Tests are added or updated if you fix a bug or add a feature.</del></li>\n<li><del>[ ] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</del></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52280",
            "title": "[Fix #51327] Invoke `ActiveSupport.run_load_hooks` after constant definitions `end`",
            "date_modified": "2024-07-05T20:17:10.000Z",
            "date_published": "2024-07-05T18:31:46.000Z",
            "author": {
                "name": "bensheldon",
                "url": "https://github.com/bensheldon"
            }
        }
    ]
}