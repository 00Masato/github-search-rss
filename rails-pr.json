{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">CodeStatistics and CodeStatisticsCalculator are currenltly top-level constants, while almost everything in <code class=\"notranslate\">railties/lib/rails</code> is namespaced to <code class=\"notranslate\">Rails</code>. These have probably never conflicted with other top-level constants, but Rails should not pollute the top-level namespace if it's not necessary.</p>\n<p dir=\"auto\">This also prevents the constant from showing up on the API docs homepage:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/28561/361126286-41b735b8-c3f5-4f8d-9300-c2a9b6414eb9.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjQ1MjYzODksIm5iZiI6MTcyNDUyNjA4OSwicGF0aCI6Ii8yODU2MS8zNjExMjYyODYtNDFiNzM1YjgtYzNmNS00ZjhkLTkzMDAtYzJhOWI2NDE0ZWI5LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA4MjQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwODI0VDE5MDEyOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTNjZDkzZWEwZTg1NGEwNjU0MDExZWZhZDkxZDM4NDQyNjBhOTQxOTNmMjFjMTZlNGM0OTQ1YjBlNDczNjMxOGMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.NfS8BDvw4VOBqlw0GDbKcU2QnqiyFvW7r1SjwCa-TpY\"><img width=\"288\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/28561/361126286-41b735b8-c3f5-4f8d-9300-c2a9b6414eb9.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjQ1MjYzODksIm5iZiI6MTcyNDUyNjA4OSwicGF0aCI6Ii8yODU2MS8zNjExMjYyODYtNDFiNzM1YjgtYzNmNS00ZjhkLTkzMDAtYzJhOWI2NDE0ZWI5LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA4MjQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwODI0VDE5MDEyOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTNjZDkzZWEwZTg1NGEwNjU0MDExZWZhZDkxZDM4NDQyNjBhOTQxOTNmMjFjMTZlNGM0OTQ1YjBlNDczNjMxOGMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.NfS8BDvw4VOBqlw0GDbKcU2QnqiyFvW7r1SjwCa-TpY\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">This PR is best reviewed with \"hide whitespace\" enabled.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52701",
            "title": "Namespace CodeStatistics and CodeStatisticsCalculator to Rails",
            "date_modified": "2024-08-24T08:11:58.000Z",
            "date_published": "2024-08-24T08:08:18.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/16579?u=323af8c5c11b10436110e1f5d9af30651f7f719f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">After upgrading to Rails 7.1.4, we noticed <code class=\"notranslate\">rails db:prepare</code> start to take really long time. After some investigation, I found that <a href=\"https://github.com/rails/rails/pull/52506\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52506/hovercard\">this change</a> changes the behavior of migrations to dump the schema after every single migration version instead of the previous behavior of one schema dump at the very end of the migration process. I brought it up here:<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2448651045\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52506\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52506/hovercard?comment_id=1729520500&amp;comment_type=review_comment\" href=\"https://github.com/rails/rails/pull/52506#discussion_r1729520500\">#52506 (comment)</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR changes makes it so the schema dump happens once at the end and only for the databases that ran migrations. I plan to backport this to Rails 7.1 as well.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52700",
            "title": "Dump schema only once after database prepare",
            "date_modified": "2024-08-24T16:48:36.000Z",
            "date_published": "2024-08-24T01:52:01.000Z",
            "author": {
                "name": "ngan",
                "url": "https://github.com/ngan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/108208?u=a2a5b1195abe3e951d26672c75d73ca8ff83d033&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because the comparison for <code class=\"notranslate\">Timestamp</code> type on PostgreSQL was misbehaving.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Timestamp#==</code> so it can correctly check the comparison with <code class=\"notranslate\">other</code>.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52698.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2483972574\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52698\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52698/hovercard\" href=\"https://github.com/rails/rails/issues/52698\">#52698</a></p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52699",
            "title": "[#52698] Fix comparison of `Timestamp` type for PostgreSQL.",
            "date_modified": "2024-08-24T13:59:31.000Z",
            "date_published": "2024-08-24T01:26:40.000Z",
            "author": {
                "name": "ruyrocha",
                "url": "https://github.com/ruyrocha"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/23489664?u=b1bdada244b23f2cfef6b21063647c24416705ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because there are inconsistencies with touch when <code class=\"notranslate\">counter_cache</code> is used. <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52646.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2472921317\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52646\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52646/hovercard\" href=\"https://github.com/rails/rails/issues/52646\">#52646</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes how we run touch callbacks when <code class=\"notranslate\">counter_cache</code> is used. Currently there is lots of inconsistency in how <code class=\"notranslate\">after_touch</code> works when a model uses <code class=\"notranslate\">counter_cache</code> as noted in the issue script. Example: <code class=\"notranslate\">ProjectItem.first.destroy!</code> does not work but <code class=\"notranslate\">project.project_items.first.destroy!</code> works.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">As mentioned on the issue, there has been a few attempts to cover this, it looks like the preferred way is to use <code class=\"notranslate\">increment!</code> based on this <a href=\"https://github.com/rails/rails/commit/17bf62033edd4f0934c9f4a9e0c7a5f0f765975b\">commit</a>. This was reverted due to the additional queries <a href=\"https://github.com/rails/rails/commit/52e11e462f6114a4d12225c639c5f501f0ffec7a\">here</a> but i don't think we're able to avoid the additional queries.</p>\n<p dir=\"auto\">Alternative solution could be to change <code class=\"notranslate\">update_counters</code> to <code class=\"notranslate\">load_target if reflection.options[:touch]</code> as it appears target is nil when using <code class=\"notranslate\">counter_cache</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52692",
            "title": "Ensure callbacks run on counter_cache increment",
            "date_modified": "2024-08-23T14:23:41.000Z",
            "date_published": "2024-08-23T14:19:39.000Z",
            "author": {
                "name": "alexanderholder",
                "url": "https://github.com/alexanderholder"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/20938712?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #37793.\">Closes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"528109267\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/37793\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/37793/hovercard\" href=\"https://github.com/rails/rails/issues/37793\">#37793</a><br>\nSupersedes <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"528111494\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/37794\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/37794/hovercard\" href=\"https://github.com/rails/rails/pull/37794\">#37794</a></p>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">When using Action Text's rich textarea,  it's possible to attach files to the editor. Previously, that action didn't dispatch any events, which made it hard to react to the file uploads. For instance, if an upload failed, there was no way to notify the user about it, or remove the attachment from the editor.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commits adds new events - <code class=\"notranslate\">direct-upload:start</code>, <code class=\"notranslate\">direct-upload:progress</code>, and <code class=\"notranslate\">direct-upload:end</code> - similar to how Active Storage's direct uploads work.</p>\n<p dir=\"auto\">There was an initial work done by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/bradrees/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/bradrees\">@bradrees</a> at <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"528111494\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/37794\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/37794/hovercard\" href=\"https://github.com/rails/rails/pull/37794\">#37794</a>, which I used as a base (and give credit) here.</p>\n<p dir=\"auto\">I'm unsure what's the proper way to test this. I'm open to suggestions.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52680",
            "title": "Dispatch direct-upload events on attachment uploads",
            "date_modified": "2024-08-24T01:34:06.000Z",
            "date_published": "2024-08-22T16:38:19.000Z",
            "author": {
                "name": "MatheusRich",
                "url": "https://github.com/MatheusRich"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/3830?u=0d54cda7c0267e64999212f15b88bbba6d343b1b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In some cases/workflows, it may be useful to have credential files that don't match an environment name (<code class=\"notranslate\">development</code>, <code class=\"notranslate\">production</code>, <code class=\"notranslate\">testing</code>). This is supported by all the <code class=\"notranslate\">bin/rails credentials:*</code> tooling except <code class=\"notranslate\">credentials:diff</code>, which shows the whole encrypted content of the file:</p>\n<p dir=\"auto\">[on a new app]:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ bin/rails credentials:edit --environment=my_custom_env\n[lets me edit the yaml file and creates config/credentials/my_custom_env.yml.enc and .key]\n$ bin/rails credentials:show --environment=my_custom_env\n[shows its content again]\n$ git add config/\n$ bin/rails credentials:edit --environment=my_custom_env\n[lets me edit again; I add a new key]\n$ bin/rails credentials:show --environment=my_custom_env\n[shows the right content, including the new key]\n$ git diff config/credentials\n[shows the encrypted garbage]\"><pre class=\"notranslate\"><code class=\"notranslate\">$ bin/rails credentials:edit --environment=my_custom_env\n[lets me edit the yaml file and creates config/credentials/my_custom_env.yml.enc and .key]\n$ bin/rails credentials:show --environment=my_custom_env\n[shows its content again]\n$ git add config/\n$ bin/rails credentials:edit --environment=my_custom_env\n[lets me edit again; I add a new key]\n$ bin/rails credentials:show --environment=my_custom_env\n[shows the right content, including the new key]\n$ git diff config/credentials\n[shows the encrypted garbage]\n</code></pre></div>\n<p dir=\"auto\">I've seen this was reported as <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1608597692\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47570\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/47570/hovercard\" href=\"https://github.com/rails/rails/issues/47570\">#47570</a>, although a workaround was found there. I think that, since it is supported in all tools but one, it makes sense to fix that one (of course maintainers decide if it <em>actually</em> makes sense).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the way the environment is looked up. In addition to the current lookup in the available environments, it adds a fallback and it returns the name of the file in the provided path. This is enough for the rest of the process to work correctly, and I successfully tested it on a new app, where the <em>\"transcript\"</em> above can be reproduced, but getting a proper diff in the last step.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included. <strong>&lt;-- I guess this qualifies as a minor fix so I didn't update it. Please let me know if I should</strong></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52679",
            "title": "Support custom environments on bin/rails credentials:diff",
            "date_modified": "2024-08-22T14:55:28.000Z",
            "date_published": "2024-08-22T14:55:08.000Z",
            "author": {
                "name": "porras",
                "url": "https://github.com/porras"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/569991?u=83eefc5b6f72a9e9f1ab0356cc23cf8ca0542cb1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">A one-word RDoc update. Per the <a href=\"https://github.com/rails/rails/blob/9c8390032c85df23d973432b67d025df05c838f7/activerecord/lib/active_record/encryption/key_provider.rb#L21\">code</a> and the <a href=\"https://edgeguides.rubyonrails.org/active_record_encryption.html#rotating-keys\" rel=\"nofollow\">Rails guides</a>, the <em>last</em> key, not the first key, is used for encryption when the provider has multiple keys.</p>",
            "url": "https://github.com/rails/rails/pull/52678",
            "title": "Fix ActiveRecord::Encryption::KeyProvider#encryption_key documentation [ci skip]",
            "date_modified": "2024-08-22T14:31:45.000Z",
            "date_published": "2024-08-22T14:31:41.000Z",
            "author": {
                "name": "jas14",
                "url": "https://github.com/jas14"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/55164724?u=c6537070bc166ac2ce4c6e8e8aa439b91fff5af1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>",
            "url": "https://github.com/rails/rails/pull/52671",
            "title": "Allow passing validation options to update",
            "date_modified": "2024-08-22T17:44:46.000Z",
            "date_published": "2024-08-21T15:36:38.000Z",
            "author": {
                "name": "northeastprince",
                "url": "https://github.com/northeastprince"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1734607?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The defaults for the cache are pulled in from the <a href=\"https://github.com/rails/solid_cache/blob/87fd0e9611237b5608b5e0f4197aec74fe333ca4/lib/generators/solid_cache/install/templates/config/solid_cache.yml.tt\">template</a> in Solid Cache. Currently 1 week max age and 256MB max size.</p>\n<p dir=\"auto\">Right now this sets up Solid Cache to be used in development and production - maybe we'd want to stick with a memory cache in development?</p>\n<p dir=\"auto\">When using Sqlite, we'll use a separate database for the cache, with the migrations for that db going into <code class=\"notranslate\">db/cache/migrate</code>. We then need to adjust the db change task to move the migrations if required.</p>\n<p dir=\"auto\">For all databases we'll use a separate connection pool for the database even if it points to the primary database. This stops cache queries from being affected by primary database transactions.</p>\n<p dir=\"auto\">As a result the <code class=\"notranslate\">config/database.yml</code> templates have been converted to the three-tier format. We could keep the two-tier format when not using Solid Cache, but the templates would start to get messy.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50443.\">Resolves</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2056734792\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50443\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50443/hovercard\" href=\"https://github.com/rails/rails/issues/50443\">#50443</a> cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/dhh/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/dhh\">@dhh</a></p>",
            "url": "https://github.com/rails/rails/pull/52670",
            "title": "Make Solid Cache the default for new Rails apps",
            "date_modified": "2024-08-22T18:42:35.000Z",
            "date_published": "2024-08-21T14:11:37.000Z",
            "author": {
                "name": "djmb",
                "url": "https://github.com/djmb"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/58582?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created in order to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #2779.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2463125918\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rspec/rspec-rails/issues/2779\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rspec/rspec-rails/issues/2779/hovercard\" href=\"https://github.com/rspec/rspec-rails/issues/2779\">rspec/rspec-rails#2779</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Previously, <code class=\"notranslate\">ActiveRecord::Encryption</code> configuration was deferred until <code class=\"notranslate\">ActiveRecord::Base</code> was loaded. Therefore, accessing <code class=\"notranslate\">ActiveRecord::Encryption.config</code> properties before <code class=\"notranslate\">ActiveRecord::Base</code> was loaded would give incorrect results.</p>\n<p dir=\"auto\"><code class=\"notranslate\">ActiveRecord::Encryption</code> now has its own loading hook so that its configuration is set as soon as needed.</p>\n<p dir=\"auto\">When <code class=\"notranslate\">ActiveRecord::Base</code> is loaded, even lazily, it in turn triggers the loading of <code class=\"notranslate\">ActiveRecord::Encryption</code>, thus preserving the original behavior of having its config ready before any use of <code class=\"notranslate\">ActiveRecord::Base</code>.</p>\n<p dir=\"auto\">This fix complements one of my previous fixes in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2067810728\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50606\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50606/hovercard\" href=\"https://github.com/rails/rails/pull/50606\">#50606</a>.</p>\n<p dir=\"auto\">Since both Rails 7.1.4 and 7.2.* versions are affected, I'd recommend backporting this fix to <code class=\"notranslate\">7-1-stable</code> and <code class=\"notranslate\">7-2-stable</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52669",
            "title": "Ensure ActiveRecord::Encryption.config is always ready before access",
            "date_modified": "2024-08-24T13:39:33.000Z",
            "date_published": "2024-08-21T13:49:15.000Z",
            "author": {
                "name": "maximerety",
                "url": "https://github.com/maximerety"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/634379?u=c5cc4f8589962319b7522ca7d8a7aca32c3325e4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to improve the I18n guide by adding instructions for local testing setup, specifically for configuring the <code class=\"notranslate\">hosts</code> in <code class=\"notranslate\">development.rb</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the I18n guide to include additional steps required for setting up local testing of subdomain-based locale extraction.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52662",
            "title": "Update i18n guide with local testing setup instructions [ci skip]",
            "date_modified": "2024-08-21T00:34:23.000Z",
            "date_published": "2024-08-21T00:34:19.000Z",
            "author": {
                "name": "deraru",
                "url": "https://github.com/deraru"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/64558?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because there is unnecessary HTTP access in ActiveStorage, which is affecting performance, so I want to stop it.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Change it to use the <code class=\"notranslate\">Google::Cloud::Storage.anonymous</code> object to avoid obtaining an OAuth token when dealing with public buckets.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52655",
            "title": "Stopped getting an extra oauth access token when retrieving public_url l in GCS.",
            "date_modified": "2024-08-20T10:01:11.000Z",
            "date_published": "2024-08-20T10:01:07.000Z",
            "author": {
                "name": "yalab",
                "url": "https://github.com/yalab"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/347634?u=8fac9ccfaca4841463c2e688e3f8e6e3301f089d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The acronym SSL is considered deprecated by the security community and has been replaced by TLS. While both are understood and can usually be used interchangeably, Rails might as well use the modern terminology.</p>\n<p dir=\"auto\">For an example on this preference, see Wikipedia article <a href=\"https://en.wikipedia.org/wiki/Transport_Layer_Security\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Transport_Layer_Security</a></p>\n<blockquote>\n<p dir=\"auto\">TLS builds on the now-deprecated SSL (Secure Sockets Layer)<br>\nspecifications ...</p>\n</blockquote>\n<p dir=\"auto\">In the interest of back compatibility, this change only changes documentation and code comments. It does not alter configuration option names, class names, or other code. If it is preferable to make this change in code as well, followup work can be submitted for this.</p>\n<p dir=\"auto\">Some text uses the phrase \"SSL/TLS\". These instances were not altered. If it is preferable to use this everywhere, followup work can be submitted for this.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52638",
            "title": "[ci skip] Update docs and comments to prefer TLS instead of SSL",
            "date_modified": "2024-08-17T22:40:38.000Z",
            "date_published": "2024-08-17T16:57:55.000Z",
            "author": {
                "name": "jdufresne",
                "url": "https://github.com/jdufresne"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/44640?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The reaper was introduced back in <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/cde7692d4e3e0e67e480cc6172f6e2bacaceeb5e/hovercard\" href=\"https://github.com/rails/rails/commit/cde7692d4e3e0e67e480cc6172f6e2bacaceeb5e\"><tt>cde7692</tt></a> The goal is to detect checked out connections owned by dead threads, and make them available again.</p>\n<p dir=\"auto\">To do this, a thread check connections every 60 seconds, which IMO isn't nearly enough. But more importabtly since <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"29269347\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/14360\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/14360/hovercard\" href=\"https://github.com/rails/rails/pull/14360\">#14360</a> the reaper isn't really useful because in the checkout path, if we can't immediately checkout a connection, we execute the reaping routine, so IMO it's not really justified to have a background thread for this.</p>\n<p dir=\"auto\"><a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/tenderlove/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tenderlove\">@tenderlove</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a> any opinion?</p>",
            "url": "https://github.com/rails/rails/pull/52627",
            "title": "Get rid of Active Record connection reaper",
            "date_modified": "2024-08-16T15:14:32.000Z",
            "date_published": "2024-08-16T15:14:28.000Z",
            "author": {
                "name": "byroot",
                "url": "https://github.com/byroot"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4910785?u=bb262553df264faad2f515f6ea75067266e0d129&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The \"Suppressing Callbacks\" section of the ActiveRecord Suppressing Callback guide is incorrect.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The <a href=\"https://edgeguides.rubyonrails.org/active_record_callbacks.html#suppressing-callbacks\" rel=\"nofollow\">https://edgeguides.rubyonrails.org/active_record_callbacks.html#suppressing-callbacks</a> section describes the <code class=\"notranslate\">ActiveRecord::Suppressor</code> as a way to suppress callbacks. This is only partially true. It does not suppress callbacks per se, but disables saving the receiving class. This skips all callbacks that are related to a successful save.</p>\n<p dir=\"auto\">The given example and the given explanation is incorrect:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User &lt; ApplicationRecord\n  after_create :send_welcome_email\n\n  def send_welcome_email\n    puts &quot;Welcome email sent to #{self.email}&quot;\n  end\nend\n\nUser.suppress do\n  User.create(name: &quot;Jane&quot;, email: &quot;jane@example.com&quot;)\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">after_create</span> <span class=\"pl-pds\">:send_welcome_email</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">send_welcome_email</span>\n    <span class=\"pl-en\">puts</span> <span class=\"pl-s\">\"Welcome email sent to <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">email</span><span class=\"pl-kos\">}</span></span>\"</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">suppress</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"Jane\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">email</span>: <span class=\"pl-s\">\"jane@example.com\"</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">This would suppress the callback, but it will also <strong>not</strong> save the user.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Some additional thoughts:</p>\n<ul dir=\"auto\">\n<li>Maybe the suppressor should not be part of the callback guide at all, but rather a more general ActiveRecord one</li>\n<li>I think an official api that would actually suppress specific callbacks during a block, as described in the original example, would be nice :)</li>\n</ul>\n<p dir=\"auto\">I'd be happy to adapt/improve the section üëç</p>",
            "url": "https://github.com/rails/rails/pull/52596",
            "title": "Adapt the incorrect \"Supressing Callbacks\" guide section [ci skip]",
            "date_modified": "2024-08-15T22:08:06.000Z",
            "date_published": "2024-08-13T17:32:04.000Z",
            "author": {
                "name": "codergeek121",
                "url": "https://github.com/codergeek121"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/617116?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #38755.\">Fixes</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"582941692\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/38755\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/38755/hovercard\" href=\"https://github.com/rails/rails/issues/38755\">#38755</a></p>\n<p dir=\"auto\">Similar to how Solid Queue and Solid Cache are configured:<br>\n<a href=\"https://github.com/rails/solid_queue/blob/main/app/models/solid_queue/record.rb\">https://github.com/rails/solid_queue/blob/main/app/models/solid_queue/record.rb</a><br>\n<a href=\"https://github.com/rails/solid_cache/blob/main/app/models/solid_cache/record.rb\">https://github.com/rails/solid_cache/blob/main/app/models/solid_cache/record.rb</a></p>",
            "url": "https://github.com/rails/rails/pull/52569",
            "title": "Add support for multiple databases for Active Storage/Action Text/Action Mailbox",
            "date_modified": "2024-08-12T18:36:48.000Z",
            "date_published": "2024-08-11T21:56:14.000Z",
            "author": {
                "name": "n-studio",
                "url": "https://github.com/n-studio"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/30030?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">There are three cases for error handling:</p>\n<p dir=\"auto\">1/ Normal job submission, and the job executes successfully.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"::ActiveJob::Base.execute(GoodJob.new.serialize)\"><pre class=\"notranslate\">::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">GoodJob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">serialize</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">2/ Normal job submission, but the job fails, and there is no appropriate error handler (<code class=\"notranslate\">retry_on</code>). The job is discarded as expected, and the error is logged, but this method still raises an exception.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"::ActiveJob::Base.execute(BadJob.new.serialize)\"><pre class=\"notranslate\">::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">BadJob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">serialize</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">3/ Bad job submission (or other internal error). The job is not processed, an error is raised, but there is no log.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"::ActiveJob::Base.execute({})\"><pre class=\"notranslate\">::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">The problem is, the error raised by (2) is logged, but the error raised by (3) is not.</p>\n<p dir=\"auto\">A job server may wrap <code class=\"notranslate\">ActiveJob::Base.execute</code> like so:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Execute the given job.\nwhile job = read_job\n\tbegin\n\t\t::ActiveJob::Base.execute(job)\n\trescue =&gt; error\n\t\tlog_error(error)\n\tend\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># Execute the given job.</span>\n<span class=\"pl-k\">while</span> <span class=\"pl-s1\">job</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">read_job</span>\n\t<span class=\"pl-k\">begin</span>\n\t\t::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">job</span><span class=\"pl-kos\">)</span>\n\t<span class=\"pl-k\">rescue</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-en\">error</span>\n\t\t<span class=\"pl-en\">log_error</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">error</span><span class=\"pl-kos\">)</span>\n\t<span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">In case (2) above, this will lead to two log messages being emitted for the failure, one from ActiveJob and one from the Job runner. This is not ideal from a usability point of view, ideally only one log message should be emitted.</p>\n<p dir=\"auto\">One way to solve the problem is this:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Execute the given job.\nwhile job = read_job\n\tbegin\n\t\t::ActiveJob::Base.execute(job)\n\trescue =&gt; error\n\t\t# Ignore errors, logged by ActiveJob.\n\tend\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># Execute the given job.</span>\n<span class=\"pl-k\">while</span> <span class=\"pl-s1\">job</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">read_job</span>\n\t<span class=\"pl-k\">begin</span>\n\t\t::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">job</span><span class=\"pl-kos\">)</span>\n\t<span class=\"pl-k\">rescue</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-en\">error</span>\n\t\t<span class=\"pl-c\"># Ignore errors, logged by ActiveJob.</span>\n\t<span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Now ActiveJob is fully responsible for logging. However, there are some situations as shown in case (3) where <code class=\"notranslate\">ActiveJob::Base.execute</code> can raise errors which are not logged. That is problematic as that would result in a silent failure which is a very bad user experience.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This proposal changes case (2) to not re-raise the exception if the job is not retried. The error is still logged by ActiveJob, but the error is not propagated up, as it's normal and expected that the job is discarded in that case.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52557",
            "title": "If a job fails due to an error, it is discarded, and don't re-raise.",
            "date_modified": "2024-08-12T15:35:42.000Z",
            "date_published": "2024-08-09T23:29:35.000Z",
            "author": {
                "name": "ioquatix",
                "url": "https://github.com/ioquatix"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/142498048?u=ef62fa9962bb2e26413478ff05f28a98a59d9b9d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52530.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2453364344\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52530\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52530/hovercard\" href=\"https://github.com/rails/rails/issues/52530\">#52530</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request addresses an issue where adding a merge with an <code class=\"notranslate\">or</code> condition to a scope in ActiveRecord could unintentionally widen the scope if the scope contains raw SQL strings. The fix ensures that scopes behave as expected, returning only the records that match the intended query criteria.</p>\n<h3 dir=\"auto\">Details</h3>\n<p dir=\"auto\">This Pull Request includes changes to the <code class=\"notranslate\">merger.rb</code> file to properly handle the merging of scopes that involve raw SQL strings. Specifically, the logic was updated as follows:</p>\n<ul dir=\"auto\">\n<li><strong>Conditional Check for Raw SQL</strong>:\n<ul dir=\"auto\">\n<li>Added a check to determine if either of the <code class=\"notranslate\">where</code> clauses being merged contains raw SQL using the <code class=\"notranslate\">raw_sql_involved?</code> method.</li>\n</ul>\n</li>\n<li><strong>Proper Handling of <code class=\"notranslate\">or</code> Merging</strong>:\n<ul dir=\"auto\">\n<li>When raw SQL is involved, the merge is handled with the <code class=\"notranslate\">merge_with_proper_or_handling</code> method, which ensures that the conditions are grouped correctly and the scope is not widened unintentionally.</li>\n</ul>\n</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52550",
            "title": "Added changes in the merger.rb file for merge logic",
            "date_modified": "2024-08-12T06:46:42.000Z",
            "date_published": "2024-08-08T19:26:59.000Z",
            "author": {
                "name": "Demon-Sheriff",
                "url": "https://github.com/Demon-Sheriff"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/97030518?u=44f65a79575affbfae38d5a4e75393694efa9d6c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because the documentation for the <code class=\"notranslate\">config.assets.debug</code> configuration option is incorrect.</p>\n<p dir=\"auto\">Fixes issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2280577750\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51747\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51747/hovercard\" href=\"https://github.com/rails/rails/issues/51747\">#51747</a> and closes PR <a href=\"https://github.com/rails/rails/pull/51845\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51845/hovercard\">#51845</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request fixes the <code class=\"notranslate\">config.assets.debug</code> documentation and makes it correct.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52544",
            "title": "Fix wrong `config.assets.debug` documentation [ci skip]",
            "date_modified": "2024-08-12T08:23:51.000Z",
            "date_published": "2024-08-08T12:25:42.000Z",
            "author": {
                "name": "Uaitt",
                "url": "https://github.com/Uaitt"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2786819?u=722b21f1f48dc9a97c9494aba04c4f657d31e941&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Update the Active Record Association Documentation.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The images used to show the relationships of the different types of associations have both the table declarations, as well as a code sample, but the code sample is also in the guide. We could probably simplify the images by cutting off the code samples from them and leaving them in the guide code.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> belongs_to section mentions bi-directional association and links to it within the same guide, but doesn't do the same for has_one and has_many, mentioned right after in the same paragraph.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> There's a note about using bigint :supplier_id in the section between belongs_to and has_one, but up until that point it's always been using belongs_to in migrations... it's probably something that doesn't need to be in this area of the guide.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The has_many :through vs has_and_belongs_to_many section ends with a composite keys mention, we could link to the new guide there.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Associations between models with composite PKs may be simplified.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> One example in bi-directional associations mentions Book belongs_to :writer, but then uses book.author a few lines below, which is incorrect.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> STI section could be expanded, it's very useful in certain situations.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add more info and make it clear</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Group sections better</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Amend the References section to be integrated with associations</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Abstract and remove duplications for options and scopes</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52523",
            "title": "[RF-DOCS]Active Record Associations Guide [ci-skip]",
            "date_modified": "2024-08-23T21:50:32.000Z",
            "date_published": "2024-08-06T20:48:18.000Z",
            "author": {
                "name": "Ridhwana",
                "url": "https://github.com/Ridhwana"
            }
        }
    ]
}