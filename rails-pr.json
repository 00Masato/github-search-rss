{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/800362?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This is a backport of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2021475111\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50236\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50236/hovercard\" href=\"https://github.com/rails/rails/pull/50236\">#50236</a> for 7-0-stable.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Fix incorrect <code class=\"notranslate\">Date.today</code> result value that caused <a href=\"https://github.com/faker-ruby/faker/issues/2861\" data-hovercard-type=\"issue\" data-hovercard-url=\"/faker-ruby/faker/issues/2861/hovercard\">a bug with the <code class=\"notranslate\">Faker::Time.backward</code> method</a> in the Faker gem.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">There is a bug in the current implementation of <code class=\"notranslate\">#travel_to</code>: it remembers a timezone of its argument, and all stubbed methods (<code class=\"notranslate\">Time.now</code>, <code class=\"notranslate\">DateTime.now</code>, <code class=\"notranslate\">Date.today</code>) start returning results in that remembered timezone. However, the expected behaviour is to return results in a system timezone.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50292",
            "title": "Fix `Time.now`/`DateTime.now`/`Date.today` to return results in a system timezone after `#travel_to` in 7-0-stable",
            "date_modified": "2023-12-07T06:35:22.000Z",
            "date_published": "2023-12-07T06:33:03.000Z",
            "author": {
                "name": "907th",
                "url": "https://github.com/907th"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Context in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1990987030\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50040\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50040/hovercard\" href=\"https://github.com/rails/rails/issues/50040\">#50040</a>, specifically <a href=\"https://github.com/rails/rails/issues/50040#issuecomment-1826306098\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50040/hovercard\">this comment</a>. This isn't necessarilly to fix that issue, since it was mostly a bad setup, but it does ensure that users don't get unexpected behaviour just because an association was duplicated / overridden.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">ActiveRecord::AutosaveAssociation::ClassMethods#define_non_cyclic_method</code> to return only if the method has been defined for the given reflection, as opposed to whether it's ever been defined on the class, to ensure that the autosave methods are redefined for associations that are overridden.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50291",
            "title": "Redefine autosave callbacks if associations are overriden",
            "date_modified": "2023-12-07T03:53:32.000Z",
            "date_published": "2023-12-07T03:22:45.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Previously, the description of this configuration value explains that this configuration controls what part of the Content-Type header is returned by #content_type, but it doesn't explain what the header looks like or what the returned value looks like.</p>\n<p dir=\"auto\">This commit adds examples for what the Content-Type header looks like and what #content_type returns in both configurations. Additionally, it adds context that this configuration is meant to be a transition between behavior in Rails 7.0 and Rails 7.1 which was previously not explained.</p>\n<p dir=\"auto\">Ref <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2021508693\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50238\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50238/hovercard\" href=\"https://github.com/rails/rails/issues/50238\">#50238</a></p>",
            "url": "https://github.com/rails/rails/pull/50290",
            "title": "Improve doc for content_type new framework default [ci-skip]",
            "date_modified": "2023-12-07T12:29:02.000Z",
            "date_published": "2023-12-07T01:31:24.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Change the Testing Guide to emphasize that <code class=\"notranslate\">session</code>, <code class=\"notranslate\">flash</code>, and <code class=\"notranslate\">cookies</code> helpers are only available to be read from <strong>after</strong> a request has been made.</p>\n<p dir=\"auto\">This is a break from <code class=\"notranslate\">ActionController::TestCase</code> support for writing to these Hash helpers <strong>before</strong> a request has been made, so it's worth emphasizing to avoid confusing the two practices.</p>",
            "url": "https://github.com/rails/rails/pull/50289",
            "title": "Elaborate on support for hash helpers in Integration Tests [ci skip]",
            "date_modified": "2023-12-07T01:28:59.000Z",
            "date_published": "2023-12-06T22:53:46.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/13400?u=a60500d9214da06f50153c53c8e82b8b51d41aea&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Co-authored with <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/vinistock/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vinistock\">@vinistock</a></p>\n<p dir=\"auto\">Expose the server URL so that external tools are able to know where the server is running.</p>\n<p dir=\"auto\">One example would be for an <a href=\"https://en.wikipedia.org/wiki/Language_Server_Protocol\" rel=\"nofollow\">LSP</a> implementation, so that introspection of the server can be provided.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Write the file as part of the server initialization.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This could be a step towards implementing <a href=\"https://github.com/Shopify/ruby-lsp-rails\">ruby-lsp-rails</a> as a built-in Rails feature.</p>\n<h3 dir=\"auto\">Questions</h3>\n<p dir=\"auto\">Should we delete the <code class=\"notranslate\">server_url.txt</code> file when the server is shutdown? If so, where in the code would that be done?</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50286",
            "title": "Write server URL to a temporary file when starting Rails",
            "date_modified": "2023-12-07T06:04:56.000Z",
            "date_published": "2023-12-06T17:02:10.000Z",
            "author": {
                "name": "andyw8",
                "url": "https://github.com/andyw8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22835?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Long story short: while trying to configure the timeout(s) for connections in a Zammad installation the current docs lead me to believe the <code class=\"notranslate\">timeout</code> option would apply to database connections. This is compounded by the <code class=\"notranslate\">timeout</code> and <code class=\"notranslate\">checkout_timeout</code> options both default to 5 seconds. See also this Zammad Docs issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1944779289\" data-permission-text=\"Title is private\" data-url=\"https://github.com/zammad/zammad/issues/4883\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/zammad/zammad/pull/4883/hovercard?comment_id=1815291895&amp;comment_type=issue_comment\" href=\"https://github.com/zammad/zammad/pull/4883#issuecomment-1815291895\">zammad/zammad#4883 (comment)</a>.</p>\n<p dir=\"auto\">This Pull Request tries to clarify this in the docs by removing the <code class=\"notranslate\">timeout</code> option from the Connection Pooling paragraph and explicitly explaining the Pool timeout options. The changes are broken into different Commits to keep formatting and content changes separate to make understanding what is changed easier. They might be squashed before merging.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50285",
            "title": "[ci skip] Clarify ConnectionPool timeout options",
            "date_modified": "2023-12-06T16:34:36.000Z",
            "date_published": "2023-12-06T16:34:31.000Z",
            "author": {
                "name": "thegcat",
                "url": "https://github.com/thegcat"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49574.\">Closes</span> <a href=\"https://github.com/rails/rails/issues/49574\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49574/hovercard\">#49574</a></p>\n<p dir=\"auto\">Issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1936358826\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49574\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49574/hovercard\" href=\"https://github.com/rails/rails/issues/49574\">#49574</a> outlines how an Active Record join model accessed through a <code class=\"notranslate\">has_many ..., through:</code> association is unable to infer an appropriate <code class=\"notranslate\">:inverse_of</code> association by pluralizing a predictably pluralizable class name.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit resolves that issue by also checking a model's reflections for a pluralized inverse name in addition to whatever's provided through the <code class=\"notranslate\">:as</code> option or inferred in the singular.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The issue shares a code sample:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"ActiveRecord::Schema.define do\n  create_table &quot;listings&quot;, force: :cascade do |t|\n    t.bigint &quot;list_id&quot;, null: false\n    t.bigint &quot;pin_id&quot;, null: false\n  end\n\n  create_table &quot;lists&quot;, force: :cascade do |t|\n  end\n\n  create_table &quot;pins&quot;, force: :cascade do |t|\n  end\nend\n\nclass Pin &lt; ActiveRecord::Base\n  has_many :listings\nend\n\nclass List &lt; ActiveRecord::Base\n  has_many :listings\n  has_many :pins, through: :listings\nend\n\nclass Listing &lt; ActiveRecord::Base\n  belongs_to :list\n  belongs_to :pin\nend\n\nclass BugTest &lt; Minitest::Test\n  def test_association_stuff\n    list = List.create!\n    pin = list.pins.new\n\n    pin.save!\n\n    assert_equal [pin], list.reload.pins\n    assert_equal 1, list.reload.pins.count\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Schema</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">define</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">create_table</span> <span class=\"pl-s\">\"listings\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-pds\">:cascade</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n    <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">bigint</span> <span class=\"pl-s\">\"list_id\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span>\n    <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">bigint</span> <span class=\"pl-s\">\"pin_id\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-en\">create_table</span> <span class=\"pl-s\">\"lists\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-pds\">:cascade</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-en\">create_table</span> <span class=\"pl-s\">\"pins\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-pds\">:cascade</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Pin</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:listings</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">List</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:listings</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:pins</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">through</span>: <span class=\"pl-pds\">:listings</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Listing</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">belongs_to</span> <span class=\"pl-pds\">:list</span>\n  <span class=\"pl-en\">belongs_to</span> <span class=\"pl-pds\">:pin</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">BugTest</span> &lt; <span class=\"pl-v\">Minitest</span>::<span class=\"pl-v\">Test</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_association_stuff</span>\n    <span class=\"pl-s1\">list</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">List</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span>\n    <span class=\"pl-s1\">pin</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">list</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">pins</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n\n    <span class=\"pl-s1\">pin</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">save!</span>\n\n    <span class=\"pl-en\">assert_equal</span> <span class=\"pl-kos\">[</span><span class=\"pl-s1\">pin</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">list</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">reload</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">pins</span>\n    <span class=\"pl-en\">assert_equal</span> <span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">list</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">reload</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">pins</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">count</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Unfortunately, there isn't a one-to-one mapping in the test suite's <code class=\"notranslate\">test/model</code> directory for this type of structure. The most similar associations were between the <code class=\"notranslate\">Book</code>, <code class=\"notranslate\">Subscription</code>, and <code class=\"notranslate\">Subscriber</code>. For the sake of ease, this commit wraps the test block in a new <code class=\"notranslate\">skipping_validations_for</code> helper method to ignore validations declared on the <code class=\"notranslate\">Subscription</code> join table model.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50284",
            "title": "Infer `:inverse_of` for `has_many ..., through:`",
            "date_modified": "2023-12-06T16:25:41.000Z",
            "date_published": "2023-12-06T16:25:36.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">To assert the expected number of queries are made, Rails internally uses <code class=\"notranslate\">assert_queries</code> and <code class=\"notranslate\">assert_no_queries</code>. These assertions can be useful in applications as well.</p>\n<p dir=\"auto\">By extracting these assertions to a module, the assertions can be<br>\nincluded where required.<br>\nThere currently isn't an ActiveRecord::TestCase where we can include<br>\nthis module by default, so in an application they need to be included by<br>\nhand.</p>\n<p dir=\"auto\">ActiveStorage, ActionView and ActionText are using this module now as well, instead of duplicating the implementation.<br>\nThe internal ActiveRecord::TestCase, used for testing ActiveRecord, <a href=\"https://github.com/rails/rails/blob/745992e93e5e0a308fcdb9dc0488396b7cd6475e/activerecord/test/cases/test_case.rb#L59\">implements these assertions</a> as well. However, these are slighlty more advanced/complex and use the <a href=\"https://github.com/rails/rails/blob/745992e93e5e0a308fcdb9dc0488396b7cd6475e/activerecord/test/cases/test_case.rb#L284\">SQLCounter</a> class. To keep things simple for now, this implementation isn't used.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This currently requires including the assertions in a model test:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class ArticleTest &lt; ActiveSupport::TestCase\n  include ActiveRecord::Assertions::QueryAssertions\n\n  test &quot;queries are made&quot; do\n     assert_queries(1) { Article.first }\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">ArticleTest</span> &lt; <span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-v\">TestCase</span>\n  <span class=\"pl-en\">include</span> <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Assertions</span>::<span class=\"pl-v\">QueryAssertions</span>\n\n  <span class=\"pl-en\">test</span> <span class=\"pl-s\">\"queries are made\"</span> <span class=\"pl-k\">do</span>\n     <span class=\"pl-en\">assert_queries</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> <span class=\"pl-v\">Article</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">first</span> <span class=\"pl-kos\">}</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">An alternative, \"Rails, batteries included\" solution would be a specific ActiveRecord::TestCase:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class ArticleTest &lt; ActiveRecord::TestCase\n   test &quot;queries are made&quot; do\n     assert_queries(1) { Article.first }\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">ArticleTest</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">TestCase</span>\n   <span class=\"pl-en\">test</span> <span class=\"pl-s\">\"queries are made\"</span> <span class=\"pl-k\">do</span>\n     <span class=\"pl-en\">assert_queries</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> <span class=\"pl-v\">Article</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">first</span> <span class=\"pl-kos\">}</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50281",
            "title": "Expose `assert_queries` and `assert_no_queries` assertions",
            "date_modified": "2023-12-07T10:34:31.000Z",
            "date_published": "2023-12-06T10:48:35.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Prior to this commit, delegated types were unable to infer their inverse associations, so saving records built with the generated <code class=\"notranslate\">#build_ASSOCIATION</code> methods weren't writing to all the necessary places. For example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"entry = Entry.create! entryable: Message.new(subject: &quot;Hello world!&quot;)\nentry.message.subject # =&gt; &quot;Hello world!&quot;\n\nentry.build_entryable(subject: &quot;Goodbye world!&quot;).save!\nentry.reload.message.subject # =&gt; &quot;Hello world!&quot;\"><pre class=\"notranslate\"><span class=\"pl-s1\">entry</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Entry</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span> <span class=\"pl-pds\">entryable</span>: <span class=\"pl-v\">Message</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">subject</span>: <span class=\"pl-s\">\"Hello world!\"</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">entry</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">message</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">subject</span> <span class=\"pl-c\"># =&gt; \"Hello world!\"</span>\n\n<span class=\"pl-s1\">entry</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">build_entryable</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">subject</span>: <span class=\"pl-s\">\"Goodbye world!\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">save!</span>\n<span class=\"pl-s1\">entry</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">reload</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">message</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">subject</span> <span class=\"pl-c\"># =&gt; \"Hello world!\"</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The fact that the <code class=\"notranslate\">Entry</code> test model declared a <code class=\"notranslate\">delegated_type :entryable</code> definition with <code class=\"notranslate\">types: %w[ Message Comment ]</code> was never reciprocated in the appropriate models.</p>\n<p dir=\"auto\">In order to pass the tests, this commit needed to define the corresponding <code class=\"notranslate\">has_one :entry</code> associations. To do so, introduce the <code class=\"notranslate\">Entryable</code> concern in the same style as the one mentioned in the documentation.</p>\n<p dir=\"auto\">Unfortunately, defining <code class=\"notranslate\">delegated_type :thing, types: %w[ Post ]</code> was more tricky to fix. The <code class=\"notranslate\">Post</code> test model is widely used, so defining a <code class=\"notranslate\">has_one</code> had farther-reaching effects than intended. To resolve that issue, this commit redefines <code class=\"notranslate\">:thing</code> to use <code class=\"notranslate\">types: %w[ Essay ]</code>, which has much fewer unintended side effects.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50280",
            "title": "Infer default `:inverse_of` option for `delegated_type`",
            "date_modified": "2023-12-06T04:23:57.000Z",
            "date_published": "2023-12-06T03:48:22.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><ul dir=\"auto\">\n<li>Explain the purpose of wrap_parameters_by_default and how it replaces the wrap_parameters initializer.</li>\n<li>Explain why action_mailer.smtp_timeout exists and why its useful</li>\n<li>Add example to action_view.button_to_generates_button_tag</li>\n</ul>\n<p dir=\"auto\">Ref <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2021508693\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50238\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50238/hovercard\" href=\"https://github.com/rails/rails/issues/50238\">#50238</a></p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/BenSandeen/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/BenSandeen\">@BenSandeen</a></p>",
            "url": "https://github.com/rails/rails/pull/50279",
            "title": "More improvements to new framework defaults doc [ci-skip]",
            "date_modified": "2023-12-07T01:35:47.000Z",
            "date_published": "2023-12-06T00:20:15.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/192395?u=9d22d29928303208a4e361c5e407b95802b1565f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because there are several issues w/ <code class=\"notranslate\">read_multi</code> on cache stores with an active local cache:</p>\n<ul dir=\"auto\">\n<li>If using a namespace, it does not normalize the keys before looking them up in the cache and thus always falls back to looking them up in the real cache store</li>\n<li>If trying to lookup raw values, it would always silently fail and return <code class=\"notranslate\">nil</code> for the values <em>if it found them in the local cache</em> (this was hidden in the current tests by the above issue)</li>\n</ul>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">LocalCache#read_multi_entries</code> to normalize the keys before looking them up in the local cache &amp; to pass the options down to <code class=\"notranslate\">deserialize_entry</code> to correctly deserialize raw values for memcache and redis stores. It also changes the <code class=\"notranslate\">ActiveSupport::Cache::Store#deserialize_entry</code> signature to account for options being passed to it (from memory, null, &amp; file stores).</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">On any rails app configured to use :mem_cache_store and no namespace (or do have a namespace and run with the changes from the first commit), run this code in a rails console:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class LetsMakeItBreak\n  def boom\n    log_it = -&gt; { puts &quot;@data: #{::ActiveSupport::Cache::Strategy::LocalCache::LocalCacheRegistry.cache_for(Rails.cache.send(:local_cache_key)).instance_variable_get(:@data).inspect}&quot; }\n\n    Rails.cache.with_local_cache do\n      log_it.call\n      puts &quot;fetch_multi: #{Rails.cache.fetch_multi(&quot;blep:one&quot;, raw: true) { 1 }}&quot;\n      log_it.call\n      puts &quot;increment: #{Rails.cache.increment(&quot;blep:one&quot;, 1, raw: true)}&quot;\n      log_it.call\n      puts &quot;read: #{Rails.cache.read(&quot;blep:one&quot;, raw: true)}&quot;\n      log_it.call\n      puts &quot;read_multi: #{Rails.cache.read_multi(&quot;blep:one&quot;, raw: true)}&quot;\n      log_it.call\n    end\n  end\nend\n\nLetsMakeItBreak.new.boom\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">LetsMakeItBreak</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">boom</span>\n    <span class=\"pl-s1\">log_it</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">-&gt;</span> <span class=\"pl-kos\">{</span> <span class=\"pl-en\">puts</span> <span class=\"pl-s\">\"@data: <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span>::<span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-v\">Cache</span>::<span class=\"pl-v\">Strategy</span>::<span class=\"pl-v\">LocalCache</span>::<span class=\"pl-v\">LocalCacheRegistry</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">cache_for</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">send</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:local_cache_key</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">instance_variable_get</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:@data</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">inspect</span><span class=\"pl-kos\">}</span></span>\"</span> <span class=\"pl-kos\">}</span>\n\n    <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">with_local_cache</span> <span class=\"pl-k\">do</span>\n      <span class=\"pl-s1\">log_it</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span>\n      <span class=\"pl-en\">puts</span> <span class=\"pl-s\">\"fetch_multi: <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fetch_multi</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">raw</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> <span class=\"pl-c1\">1</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">}</span></span>\"</span>\n      <span class=\"pl-s1\">log_it</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span>\n      <span class=\"pl-en\">puts</span> <span class=\"pl-s\">\"increment: <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">increment</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">raw</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">}</span></span>\"</span>\n      <span class=\"pl-s1\">log_it</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span>\n      <span class=\"pl-en\">puts</span> <span class=\"pl-s\">\"read: <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">read</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">raw</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">}</span></span>\"</span>\n      <span class=\"pl-s1\">log_it</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span>\n      <span class=\"pl-en\">puts</span> <span class=\"pl-s\">\"read_multi: <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">read_multi</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">raw</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">}</span></span>\"</span>\n      <span class=\"pl-s1\">log_it</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-v\">LetsMakeItBreak</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">boom</span></pre></div>\n<p dir=\"auto\">The output should look like:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@data: {}\nfetch_multi: {&quot;blep:one&quot;=&gt;1}\n@data: {&quot;blep:one&quot;=&gt;&quot;1&quot;}\nincrement: 2\n@data: {&quot;blep:one&quot;=&gt;&quot;2&quot;}\nread: 2\n@data: {&quot;blep:one&quot;=&gt;&quot;2&quot;}\nread_multi: {&quot;blep:one&quot;=&gt;nil}\n@data: {&quot;blep:one&quot;=&gt;&quot;2&quot;}\"><pre class=\"notranslate\"><span class=\"pl-c1\">@data</span>: <span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-en\">fetch_multi</span>: <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-c1\">=&gt;</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-c1\">@data</span>: <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-c1\">=&gt;</span><span class=\"pl-s\">\"1\"</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-en\">increment</span>: <span class=\"pl-c1\">2</span>\n<span class=\"pl-c1\">@data</span>: <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-c1\">=&gt;</span><span class=\"pl-s\">\"2\"</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-en\">read</span>: <span class=\"pl-c1\">2</span>\n<span class=\"pl-c1\">@data</span>: <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-c1\">=&gt;</span><span class=\"pl-s\">\"2\"</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-en\">read_multi</span>: <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-c1\">=&gt;</span><span class=\"pl-c1\">nil</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-c1\">@data</span>: <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-c1\">=&gt;</span><span class=\"pl-s\">\"2\"</span><span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">You can see the problem on the <code class=\"notranslate\">read_multi</code> output! Suddenly, a <code class=\"notranslate\">nil</code> appears instead of <code class=\"notranslate\">\"2\"</code>.</p>\n<p dir=\"auto\">If we turn on logging for the cache, we can see a bit more of what is happening:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Rails.cache.logger = Logger.new($stdout)\nLetsMakeItBreak.new.boom\n# ...\nD, [2023-12-05T11:30:47.089666 #29076] DEBUG -- : Cache read_multi: 1 key(s) specified ({:compress=&gt;true, :compress_threshold=&gt;1024, :raw=&gt;true})\nW, [2023-12-05T11:30:47.089719 #29076]  WARN -- : Unrecognized payload prefix &quot;2&quot;; deserializing as nil\nread_multi: {&quot;blep:one&quot;=&gt;nil}\"><pre class=\"notranslate\"><span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span>$stdout<span class=\"pl-kos\">)</span>\n<span class=\"pl-v\">LetsMakeItBreak</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">boom</span>\n<span class=\"pl-c\"># ...</span>\n<span class=\"pl-c1\">D</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">2023</span>-<span class=\"pl-c1\">12</span>-<span class=\"pl-c1\">05</span><span class=\"pl-pds\">T11</span>:<span class=\"pl-c1\">30</span>:<span class=\"pl-c1\">47.089666</span> <span class=\"pl-c\">#29076] DEBUG -- : Cache read_multi: 1 key(s) specified ({:compress=&gt;true, :compress_threshold=&gt;1024, :raw=&gt;true})</span>\n<span class=\"pl-c1\">W</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">2023</span>-<span class=\"pl-c1\">12</span>-<span class=\"pl-c1\">05</span><span class=\"pl-pds\">T11</span>:<span class=\"pl-c1\">30</span>:<span class=\"pl-c1\">47.089719</span> <span class=\"pl-c\">#29076]  WARN -- : Unrecognized payload prefix \"2\"; deserializing as nil</span>\n<span class=\"pl-en\">read_multi</span>: <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"blep:one\"</span><span class=\"pl-c1\">=&gt;</span><span class=\"pl-c1\">nil</span><span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">The culprit here is that the local cache strategy code was not accounting for the mem cache and redis stores expecting to pass the <code class=\"notranslate\">raw: true</code> all the way down to the <code class=\"notranslate\">deserialize_entry</code> method. This PR fixes that, and adjusts the overall signature of <code class=\"notranslate\">ActiveSupport::Cache::Store#deserialize_entry</code> so the fix doesn't break other built-in stores like file, memory, &amp; null.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\n<ul dir=\"auto\">\n<li>I tried to split this into 2 PRs, but fixing the first issue immediately makes the existing tests fail by exposing the second issue</li>\n</ul>\n</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50276",
            "title": "fix LocalCache#read_multi_entries not namespacing keys & not deserializing raw values correctly",
            "date_modified": "2023-12-05T22:34:18.000Z",
            "date_published": "2023-12-05T20:07:59.000Z",
            "author": {
                "name": "fusion2004",
                "url": "https://github.com/fusion2004"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Add guidance to the Association Basics and <code class=\"notranslate\">.belongs_to</code> method<br>\ndocumentation to encourage the renaming of a model's Ruby class to<br>\ncoincide with updates to the existing data in the database.</p>\n<p dir=\"auto\">Since Action Text and Active Storage rely on polymorphic associations,<br>\nadd similar warnings to their guides.</p>\n<p dir=\"auto\">Co-authored-by: Petrik de Heus <a href=\"mailto:petrik@deheus.net\">petrik@deheus.net</a></p>",
            "url": "https://github.com/rails/rails/pull/50275",
            "title": "Provide guidance for renaming classes in polymorphic associations [ci skip]",
            "date_modified": "2023-12-05T21:34:04.000Z",
            "date_published": "2023-12-05T19:43:49.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Add prose and code samples for:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">request.variant=</code></li>\n<li><code class=\"notranslate\">request.variant</code></li>\n</ul>\n<p dir=\"auto\">Add sections to the Action View and Action Controller guides, along with some code samples.</p>\n<p dir=\"auto\">The majority of these changes were excised from past pull requests, such as <a href=\"https://github.com/rails/rails/pull/12977\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/12977/hovercard\">#12977</a> and <a href=\"https://github.com/rails/rails/pull/18939\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/18939/hovercard\">#18939</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50273",
            "title": "Add `request.variant` API and guides documentation",
            "date_modified": "2023-12-05T19:09:23.000Z",
            "date_published": "2023-12-05T19:04:03.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2741?u=387c085565dc648f11d835558ad1b6d524ddc91d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Let's get with the times.</p>",
            "url": "https://github.com/rails/rails/pull/50265",
            "title": "Add webp and avif as allowed formats for active storage to serve inline",
            "date_modified": "2023-12-05T00:50:08.000Z",
            "date_published": "2023-12-05T00:50:04.000Z",
            "author": {
                "name": "dhh",
                "url": "https://github.com/dhh"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5122678?u=204301f9f9fe8930fd26fe3bfe65b6ffaffd8b59&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">It's common to modify <code class=\"notranslate\">package.json</code> with custom <a href=\"https://docs.npmjs.com/cli/v6/using-npm/scripts\" rel=\"nofollow\">scripts</a>.</p>\n<p dir=\"auto\">We already support the ability to create <a href=\"https://edgeapi.rubyonrails.org/classes/Rails/Generators/Actions.html#method-i-rakefile\" rel=\"nofollow\">rake tasks</a>, so this change is in alignment with that.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Extends existing <a href=\"https://edgeapi.rubyonrails.org/classes/Rails/Generators/Actions.html\" rel=\"nofollow\">Generator Actions</a> by allowing the consumer to modify <code class=\"notranslate\">package.json</code>.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"package_json scripts: { stylelint: &quot;npx stylelint 'app/assets/stylesheets/**/*.css'&quot; }\"><pre class=\"notranslate\"><span class=\"pl-en\">package_json</span> <span class=\"pl-pds\">scripts</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">stylelint</span>: <span class=\"pl-s\">\"npx stylelint 'app/assets/stylesheets/**/*.css'\"</span> <span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">This is especially useful when used with an <a href=\"https://edgeguides.rubyonrails.org/rails_application_templates.html\" rel=\"nofollow\">Application Template</a> when creating or modifying a Rails application.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"gem &quot;cssbundling-rails&quot;\n\nafter_bundle do\n  rails_command &quot;css:install:postcss&quot;\n  run &quot;yarn add stylelint stylelint-config-standard&quot;\n  run &quot;touch .stylelintrc.json&quot;\n  insert_into_file &quot;.stylelintrc.json&quot;, &lt;&lt;~JSON\n    {\n      &quot;extends&quot;: [&quot;stylelint-config-standard&quot;]\n    }\n  JSON\n\n  package_json scripts: { stylelint: &quot;npx stylelint 'app/assets/stylesheets/**/*.css'&quot; }\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"cssbundling-rails\"</span>\n\n<span class=\"pl-en\">after_bundle</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">rails_command</span> <span class=\"pl-s\">\"css:install:postcss\"</span>\n  <span class=\"pl-en\">run</span> <span class=\"pl-s\">\"yarn add stylelint stylelint-config-standard\"</span>\n  <span class=\"pl-en\">run</span> <span class=\"pl-s\">\"touch .stylelintrc.json\"</span>\n  <span class=\"pl-en\">insert_into_file</span> <span class=\"pl-s\">\".stylelintrc.json\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">&lt;&lt;~JSON</span><span class=\"pl-s\"></span>\n<span class=\"pl-s\">    {</span>\n<span class=\"pl-s\">      \"extends\": [\"stylelint-config-standard\"]</span>\n<span class=\"pl-s\">    }</span>\n<span class=\"pl-s\">  JSON</span>\n\n  <span class=\"pl-en\">package_json</span> <span class=\"pl-pds\">scripts</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">stylelint</span>: <span class=\"pl-s\">\"npx stylelint 'app/assets/stylesheets/**/*.css'\"</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I opted to not create a <code class=\"notranslate\">package.json</code> file if one does not exist. Instead, the command will raise an error. This is consistent with how the <code class=\"notranslate\">gem</code> command works in that it assumes the file already exists.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50264",
            "title": "Introduce `package_json` Generator Action",
            "date_modified": "2023-12-07T05:31:36.000Z",
            "date_published": "2023-12-04T20:56:28.000Z",
            "author": {
                "name": "stevepolitodesign",
                "url": "https://github.com/stevepolitodesign"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Attempts to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50260.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2023770652\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50260\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50260/hovercard\" href=\"https://github.com/rails/rails/issues/50260\">#50260</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Introduces <code class=\"notranslate\">ActiveRecord::Transactions::ClassMethods#set_callback</code> which behaves like <code class=\"notranslate\">ActiveSupport::Callbacks::ClassMethods#set_callback</code> with support for the <code class=\"notranslate\">:on</code> option available on <code class=\"notranslate\">#after_commit</code> and <code class=\"notranslate\">#after_rollback</code> callbacks.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50261",
            "title": "Fix [#50260] Support `:on` option in `#set_callback`",
            "date_modified": "2023-12-04T12:56:38.000Z",
            "date_published": "2023-12-04T12:44:48.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/64807335?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><ol dir=\"auto\">\n<li>This request needs to be combined, as it corrects the error when losing context for node when working with the next 3.7+ version in conjunction with vite. The context for self is undefined, in the code I change it to global, which exists in node</li>\n<li>I added a section of code that determines whether there is a context for global, otherwise self</li>\n</ol>\n<h3 dir=\"auto\">Checklist</h3>\n<ul dir=\"auto\">\n<li>[+] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n</ul>\n<ul dir=\"auto\">\n<li>Yes</li>\n</ul>\n<h3 dir=\"auto\"></h3>\n<ul dir=\"auto\">\n<li>[ +] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n</ul>\n<ul dir=\"auto\">\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2021326872\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50232\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50232/hovercard\" href=\"https://github.com/rails/rails/issues/50232\">#50232</a></li>\n</ul>\n<ul dir=\"auto\">\n<li>[+ ] Tests are added or updated if you fix a bug or add a feature.</li>\n</ul>\n<h3 dir=\"auto\"></h3>\n<ul dir=\"auto\">\n<li>[ +] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50235",
            "title": "Fixed getting context for nuxt 3.7+ in conjunction with vite",
            "date_modified": "2023-12-07T01:00:19.000Z",
            "date_published": "2023-12-01T18:39:04.000Z",
            "author": {
                "name": "bananchill",
                "url": "https://github.com/bananchill"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2384094?u=9f1ad3c6a809770df25b4a6b9fcc3820c1deef15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">The purpose of this pull request is to correct the following issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2013268856\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50189\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50189/hovercard\" href=\"https://github.com/rails/rails/issues/50189\">#50189</a>, there is an error in the following section <a href=\"https://guides.rubyonrails.org/active_record_migrations.html#reverting-previous-migrations\" rel=\"nofollow\">this documentation section</a>.</p>\n<p dir=\"auto\">There is confusion between the steps</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"1. Reverse the order of create_table and reversible.\n2. Replace create_table with drop_table.\n3. Finally, replace up with down and vice-versa.\"><pre class=\"notranslate\"><code class=\"notranslate\">1. Reverse the order of create_table and reversible.\n2. Replace create_table with drop_table.\n3. Finally, replace up with down and vice-versa.\n</code></pre></div>\n<p dir=\"auto\">and the example below</p>\n<p dir=\"auto\">I suggest modifying the example.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50228",
            "title": "Adjusted an example to align with the documentation section on reversing a previous migration.",
            "date_modified": "2023-12-04T16:25:16.000Z",
            "date_published": "2023-12-01T10:37:48.000Z",
            "author": {
                "name": "cedriccarrard",
                "url": "https://github.com/cedriccarrard"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/47554?u=7f919feee43d319ec01c7b135f4d1868a31bddc3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Rails runner scripts were wrapped with a Rails Executor in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1222730076\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/44999\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/44999/hovercard\" href=\"https://github.com/rails/rails/pull/44999\">#44999</a></p>\n<p dir=\"auto\">This is great! Except when using the Runner to execute long-running/looping/daemon-like scripts. In that case, it would be better to allow for intentionally adding Executor wraps around individual units of work in that script.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request allows passing <code class=\"notranslate\">--executor-wrap false</code> to the Rails script runner to conditionally <em>not</em> add an Executor wrap to the script.</p>\n<p dir=\"auto\"><strong>Help wanted:</strong> I don't particularly like the naming. I wanted to make it affirmative, but it's also true by default which means passing <code class=\"notranslate\">false</code> option is necessary. The other option is to make it a negative boolean .e.g <code class=\"notranslate\">--skip-executor</code>. What do you think?</p>\n<p dir=\"auto\"><strong>Another option:</strong> Instead of removing the Executor, maybe the runner should be wrapped with a reentrant Executor <code class=\"notranslate\">#perform</code> that was introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1037842877\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/43550\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/43550/hovercard\" href=\"https://github.com/rails/rails/pull/43550\">#43550</a>, instead.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50223",
            "title": "Add runner script option to disable Executor wrap",
            "date_modified": "2023-12-02T09:33:51.000Z",
            "date_published": "2023-11-30T20:27:50.000Z",
            "author": {
                "name": "bensheldon",
                "url": "https://github.com/bensheldon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/33667846?u=41b68a97d56ca1603ad6e5f4549080c72eae05f0&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In short, the <code class=\"notranslate\">numericality</code> validator doesn't support method names, and we would like it to within our codebase.</p>\n<p dir=\"auto\">This PR gives the <code class=\"notranslate\">numericality</code> validator, in order of importance,</p>\n<ol dir=\"auto\">\n<li>the ability to accept a range returned from a method call</li>\n<li>more versatility, it can now accept an array or an array returned from a method call</li>\n</ol>\n<h3 dir=\"auto\">Detail</h3>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">includes Clusivity</code> in <code class=\"notranslate\">numericality.rb</code></li>\n<li>broadens initial type check within <code class=\"notranslate\">check_validity!</code></li>\n<li>in <code class=\"notranslate\">validate_each</code>, deals with cases of symbols</li>\n<li>in <code class=\"notranslate\">validate_each</code>, uses <code class=\"notranslate\">includes?</code> to deal with ranges, arrays, and ranges/arrays returned from method calls</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This is my first Rails PR and I'm scared / please be nice</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50222",
            "title": "(feat) Give `numericality` validation `Clusivity` considerations",
            "date_modified": "2023-12-06T22:34:27.000Z",
            "date_published": "2023-11-30T18:10:29.000Z",
            "author": {
                "name": "spimonid",
                "url": "https://github.com/spimonid"
            }
        }
    ]
}