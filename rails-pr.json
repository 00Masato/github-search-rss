{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Previously, #overlap? would incorrectly return true when one of the ranges is effectively \"empty\":</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"(2...2).overlap? 1..2 # =&gt; true\n(1..2).overlap? 2...2 # =&gt; true\"><pre class=\"notranslate\"><span class=\"pl-kos\">(</span><span class=\"pl-c1\">2</span>...<span class=\"pl-c1\">2</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">overlap?</span> <span class=\"pl-c1\">1</span>..<span class=\"pl-c1\">2</span> <span class=\"pl-c\"># =&gt; true</span>\n<span class=\"pl-kos\">(</span><span class=\"pl-c1\">1</span>..<span class=\"pl-c1\">2</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">overlap?</span> <span class=\"pl-c1\">2</span>...<span class=\"pl-c1\">2</span> <span class=\"pl-c\"># =&gt; true</span></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This is fixed in the Ruby 3.3 implementation of Range#overlap?, so this commit fixes it for Ruby &lt; 3.3 as well.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The tests added are from the Ruby repository and the implementation is effectively a Ruby version of the fix in C.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49356",
            "title": "Fix Range#overlap? ignoring empty ranges",
            "date_modified": "2023-09-22T23:49:40.000Z",
            "date_published": "2023-09-22T23:46:39.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5077225?u=e9f968c9eb790ee7734442f6b7998155400ad1d8&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">SQLite's <code class=\"notranslate\">busy_timeout</code> is a specific implementation of the lower-level <code class=\"notranslate\">busy_handler</code> function which simply retries busy connections with \"exponential backoff\" (not truly exponential, the backoff steps are [1, 2, 5, 10, 15, 20, 25, 25, 25, 50, 50, 100] ms and then 100 ms each step thereafter) up to the <code class=\"notranslate\">timeout</code> number of milliseconds. Exposing access to this function via the <code class=\"notranslate\">timeout</code> option in the <code class=\"notranslate\">database.yml</code> file is useful, but insufficient.</p>\n<p dir=\"auto\">It is growingly common for production Rails applications to use SQLite as their database engine. A recommended performance optimization is to immediately retry busy connections, instead of waiting for backoffs.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This pull request adds support for a new option in the <code class=\"notranslate\">database.yml</code> called <code class=\"notranslate\">retries</code>, which is used in a simple <code class=\"notranslate\">busy_handler</code> function to retry busy connections without exponential backoff up to the max number of <code class=\"notranslate\">retries</code> .</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[] Tests are added or updated if you fix a bug or add a feature.\n<ul dir=\"auto\">\n<li>no tests added as the <code class=\"notranslate\">timeout</code> option isn't tested, and testing either the <code class=\"notranslate\">busy_timeout</code> or <code class=\"notranslate\">busy_handler</code> function is difficult relative to its value</li>\n</ul>\n</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49352",
            "title": "Allow SQLite3 `busy_handler` to be configured with simple max number of retries",
            "date_modified": "2023-09-22T10:11:15.000Z",
            "date_published": "2023-09-22T10:11:11.000Z",
            "author": {
                "name": "fractaledmind",
                "url": "https://github.com/fractaledmind"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1806902?u=91164c0d36f1b50ca79a6d6687a3d671d7a745ff&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><a href=\"https://api.rubyonrails.org/v7.0.4/classes/ActionView/Helpers/FormBuilder.html#method-i-file_field\" rel=\"nofollow\">The documentation</a> says that the hidden input is only output if include_hidden: true is present. However, it is also output even if the include_hidden key is entirely absent. The documentation does not state that if the <code class=\"notranslate\">include_hidden</code> key is not present it takes <code class=\"notranslate\">config.active_storage.multiple_file_field_include_hidden</code> into account.</p>\n<ul dir=\"auto\">\n<li>It adds proper documentation to avoid any further confusion as to why the hidden input field is present even if <code class=\"notranslate\">include_hidden</code> is absent.</li>\n</ul>\n<p dir=\"auto\">This Pull Request has been created because <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1677646911\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48006\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48006/hovercard\" href=\"https://github.com/rails/rails/issues/48006\">#48006</a><br>\n<span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48006.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1677646911\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48006\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48006/hovercard\" href=\"https://github.com/rails/rails/issues/48006\">#48006</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49350",
            "title": "Update doc for `include_hidden` form form file_field.",
            "date_modified": "2023-09-23T00:00:44.000Z",
            "date_published": "2023-09-22T06:59:30.000Z",
            "author": {
                "name": "bhanubhakta",
                "url": "https://github.com/bhanubhakta"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5077225?u=e9f968c9eb790ee7734442f6b7998155400ad1d8&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">For Rails applications, the Write-Ahead-Log in normal syncing mode with a capped journal size, a healthy shared memory buffer and a shared cache will perform, on average, 2× better.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Rails applications using SQLite are poorly tuned for the web application context in which the database is being run. Because of its commitment to backwards-compatibility and its original use-case for embedded systems, the default configuration of SQLite today is not well-suited for web applications. Luckily, through its <code class=\"notranslate\">PRAGMA</code> statements, SQLite is easy to configure.</p>\n<p dir=\"auto\">As has been detailed in <a href=\"https://www.cs.utexas.edu/~vijay/papers/apsys17-sqlite.pdf\" rel=\"nofollow\">academic literature</a>, <a href=\"https://phiresky.github.io/blog/2020/sqlite-performance-tuning/\" rel=\"nofollow\">real-world developer experience</a>, and my own <a href=\"https://fractaledmind.github.io/2023/09/07/enhancing-rails-sqlite-fine-tuning/\" rel=\"nofollow\">writing</a>, SQLite databases can be easily optimized to achieve at least a <a href=\"https://fractaledmind.github.io/2023/09/21/enhancing-rails-sqlite-performance-metrics/\" rel=\"nofollow\">2× performance increase</a>.</p>\n<p dir=\"auto\">This pull request updates the default configuration of Rails' SQLite connections to better tune them to the context of modern day Rails applications.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The first and most important pragma to understand and tune is the <a href=\"https://www.sqlite.org/pragma.html#pragma_journal_mode\" rel=\"nofollow\">journal_mode pragma</a>. Since version 3.7.0 (2010-07-21) SQLite has offered a <a href=\"https://www.sqlite.org/wal.html\" rel=\"nofollow\">Write-Ahead log</a> to support the atomic transactions. This is the recommended journal mode for web applications, since, as the SQLite docs lay out:</p>\n<blockquote>\n<p dir=\"auto\">WAL is significantly faster in most scenarios.<br>\nWAL provides more concurrency as readers do not block writers and a writer does not block readers. Reading and writing can proceed concurrently.</p>\n</blockquote>\n<p dir=\"auto\">Once an application is using the Write-Ahead log, it also makes sense to relax the synchronization rhythm:</p>\n<blockquote>\n<p dir=\"auto\">The <code class=\"notranslate\">synchronous=NORMAL</code> setting is a good choice for most applications running in WAL mode.</p>\n</blockquote>\n<p dir=\"auto\">The <code class=\"notranslate\">NORMAL</code> sync mode means that SQLite will flush to disk less often than after every single write. SQLite has its own algorithm for determining the “most critical moments” to write to disk, where it syncs every <code class=\"notranslate\">wal_autocheckpoint</code> pages (which defaults to 1000). So, if/when the <code class=\"notranslate\">wal_autocheckpoint</code> pragma is changed, <code class=\"notranslate\">NORMAL</code> mode syncs would occur after that many pages are written. So, we trade an aggressive approach to durability for speed. However, SQLite does a lot to mitigate the reduction in durability, and it is honestly an extreme edge-case. In fact, SQLite ensures that any potential data loss could only happen with OS or filesystem failure; any process crash won’t affect data durability. So, we are optimizing for the 99% case and not the 1% case, which I think is appropriate for a Rails application.</p>\n<p dir=\"auto\">The <a href=\"https://www.sqlite.org/pragma.html#pragma_journal_size_limit\" rel=\"nofollow\"><code class=\"notranslate\">journal_size_limit</code> pragma</a> tells SQLite how much of the write-ahead log data (in our case) to keep in the on-disk file. The default of -1 means that there is no limit, so this disk file will grow in size indefinitely. This is not what we want. Anyone who has experienced app downtime because log files filled up your disk space no that unlimited file size is just a massive headache waiting to happen. We need to ensure that the file size is capped at an appropriate size.</p>\n<p dir=\"auto\">Next up, we have the abbreviated pragma <a href=\"https://www.sqlite.org/pragma.html#pragma_mmap_size\" rel=\"nofollow\"><code class=\"notranslate\">mmap_size</code></a>. This setting controls the “the maximum number of bytes of the database file that will be accessed using memory-mapped I/O.” This is a mouth-full, but the gist is that when we enable memory-mapped I/O, we are allowing SQLite to share data among multiple processes. The memory map plays a similar role to Postgres’ buffer pool, so instead of disabling it, we should set it to the same safe as the default Postgres buffer pool—128MB.</p>\n<p dir=\"auto\">Finally, the <a href=\"https://www.sqlite.org/pragma.html#pragma_cache_size\" rel=\"nofollow\"><code class=\"notranslate\">cache_size</code> pragma</a> sets the “maximum number of database disk pages that SQLite will hold in memory at once per open database file.” The default value of -2000 is a negative number, which SQLite interprets as a byte limit. If we use a positive number, SQLite will interpret this as a page limit. The default limit is ~2MB (2,048,000 bytes) and is independent of the number of pages. We want to ensure that we have a large cache and that it doesn’t split across pages, so let’s use a positive number to set the cache limit to a page number. I recommend 2,000 pages as the cache_size, which, with the default page size of 4,096 bytes, means that the cache limit is ~8MB (8,192,000 bytes).</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49349",
            "title": "Performance tune the SQLite3 adapter connection configuration",
            "date_modified": "2023-09-22T22:45:14.000Z",
            "date_published": "2023-09-21T22:08:44.000Z",
            "author": {
                "name": "fractaledmind",
                "url": "https://github.com/fractaledmind"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1558372?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because I'd like to get the label of the fixture that created a record.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">When working with fixtures, it inserts records in the database at the beginning of the test suite. I like to validate those fixtures to avoid inserting invalid data for testing. In case of validation error, I need to find out which fixture created the failing record. For some models it's easy to go from one record  to the fixture that created it, for other models it can be more complicated, for example a join model with an id and foreign_keys.</p>\n<p dir=\"auto\">This PR introduces <code class=\"notranslate\">ActiveRecord::FixtureSet.label_of(record)</code> which will return the fixture label of the record if it was created by a fixture.</p>\n<p dir=\"auto\">I'd like to get feedback regarding this PR and could it be useful in the project ?<br>\nThis is working for records with primary_key.<br>\nComposite primary keys are not supported, should it be supported in this PR ?</p>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49348",
            "title": "Get fixture label from a record",
            "date_modified": "2023-09-21T23:43:41.000Z",
            "date_published": "2023-09-21T21:27:36.000Z",
            "author": {
                "name": "jean-francois-labbe",
                "url": "https://github.com/jean-francois-labbe"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/91473?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Looking at the list and description, it's not very clear that the filter_parameters are partial matches. For example I was wondering why password wasn't on the list and if I needed to add it or if there was a default list somewhere and this initializer was just adding to the default list.</p>",
            "url": "https://github.com/rails/rails/pull/49347",
            "title": "Update description for filter_parameter_logging",
            "date_modified": "2023-09-22T10:51:57.000Z",
            "date_published": "2023-09-21T17:42:39.000Z",
            "author": {
                "name": "jess",
                "url": "https://github.com/jess"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5077225?u=e9f968c9eb790ee7734442f6b7998155400ad1d8&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">SQLite is a feature-rich database engine, and production usage is only growing. We need Rails' support to offer developers the range and scope of its features.</p>\n<p dir=\"auto\">Both the MySQL and PostgreSQL adapters support virtual columns, and SQLite itself has support generated columns <a href=\"https://www.sqlite.org/releaselog/3_31_0.html\" rel=\"nofollow\">since 2020</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">PR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"851659992\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/41856\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/41856/hovercard\" href=\"https://github.com/rails/rails/pull/41856\">#41856</a> introduced virtual columns to the PostgreSQLAdapter. This is effectively a clone of that feature, with some necessary tweaks.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"create_table :users do |t|\n  t.string :name\n  t.virtual :name_upper, type: :string, as: 'UPPER(name)'\n  t.virtual :name_lower, type: :string, as: 'LOWER(name)', stored: true\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:users</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">string</span> <span class=\"pl-pds\">:name</span>\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">virtual</span> <span class=\"pl-pds\">:name_upper</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">type</span>: <span class=\"pl-pds\">:string</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">as</span>: <span class=\"pl-s\">'UPPER(name)'</span>\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">virtual</span> <span class=\"pl-pds\">:name_lower</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">type</span>: <span class=\"pl-pds\">:string</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">as</span>: <span class=\"pl-s\">'LOWER(name)'</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">stored</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Firstly, SQLite supported both <code class=\"notranslate\">STORED</code> and <code class=\"notranslate\">VIRTUAL</code> generated columns, while PostgreSQL only supports <code class=\"notranslate\">VIRTUAL</code>. Secondly, SQLite doesn't support <code class=\"notranslate\">ALTER TABLE</code> commands with generated columns.</p>\n<p dir=\"auto\">In this PR, I am adding full support for the SQLite3Adapter by implementing:</p>\n<p dir=\"auto\"><code class=\"notranslate\">ActiveRecord::ConnectionAdapters::SQLite3::Column#virtual?</code><br>\n<code class=\"notranslate\">ActiveRecord::ConnectionAdapters::SQLite3Adapter#supports_virtual_columns?</code></p>\n<p dir=\"auto\">and altering:</p>\n<p dir=\"auto\"><code class=\"notranslate\">ActiveRecord::ConnectionAdapters::SQLite3::SchemaCreation#add_column_options</code><br>\n<code class=\"notranslate\">ActiveRecord::ConnectionAdapters::SQLite3::SchemaDefinitions#new_column_definition</code><br>\n<code class=\"notranslate\">ActiveRecord::ConnectionAdapters::SQLite3::SchemaDumper#prepare_column_options</code><br>\n<code class=\"notranslate\">ActiveRecord::ConnectionAdapters::SQLite3::SchemaStatements#new_column_from_field</code><br>\n<code class=\"notranslate\">ActiveRecord::ConnectionAdapters::SQLite3Adapter#table_structure</code><br>\n<code class=\"notranslate\">ActiveRecord::ConnectionAdapters::SQLite3Adapter#invalid_alter_table_type?</code><br>\n<code class=\"notranslate\">ActiveRecord::ConnectionAdapters::SQLite3Adapter#table_structure_with_collation</code></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49346",
            "title": "Add support for generated columns in SQLite3 adapter",
            "date_modified": "2023-09-21T14:01:42.000Z",
            "date_published": "2023-09-21T14:01:38.000Z",
            "author": {
                "name": "fractaledmind",
                "url": "https://github.com/fractaledmind"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39735028?u=91330295c614cf3cec0b64bf242a14fc2ceb358f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because I want to have the ability to use <code class=\"notranslate\">ActiveSupport::ErrorReport#handle</code> to handle errors in production, but still have these errors be raised when encountered in test or development mode. Sometimes for un-expected / rare issues is better to handle it gracefully in production but I would still prefer to raise it in dev / test.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request introduces a <code class=\"notranslate\">production_only</code> flag to the <code class=\"notranslate\">ActiveSupport::ErrorReporter#handle</code> and <code class=\"notranslate\">#report</code> methods and <code class=\"notranslate\">production</code> attribute to <code class=\"notranslate\">ActiveSupport::ErrorReporter</code>. When this flag is <code class=\"notranslate\">true</code> errors will be raised in non-production environments instead of reported. The flag is <code class=\"notranslate\">false</code> by default to preserve existing behaviour.</p>\n<p dir=\"auto\">I added a <code class=\"notranslate\">production</code> attribute to <code class=\"notranslate\">ActiveSupport::ErrorReporter</code> instances to capture what environment we are in. It is <code class=\"notranslate\">true</code> by default.</p>\n<p dir=\"auto\">In <code class=\"notranslate\">Rails#error</code> I <code class=\"notranslate\">tap</code> the error handler and set the <code class=\"notranslate\">production</code> flag based on the Rails environment.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49339",
            "title": "Introduce :production_only flag for ActiveSupport::ErorrReporter#handle",
            "date_modified": "2023-09-21T19:19:42.000Z",
            "date_published": "2023-09-20T21:04:43.000Z",
            "author": {
                "name": "andrewn617",
                "url": "https://github.com/andrewn617"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49331.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1905093936\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49331\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49331/hovercard\" href=\"https://github.com/rails/rails/issues/49331\">#49331</a>.</p>",
            "url": "https://github.com/rails/rails/pull/49337",
            "title": "Include connection specification name into `ActiveRecord::StatementInvalid` errors",
            "date_modified": "2023-09-22T23:20:22.000Z",
            "date_published": "2023-09-20T20:12:27.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49334.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1905356800\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49334\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49334/hovercard\" href=\"https://github.com/rails/rails/issues/49334\">#49334</a>.<br>\nThere was a \"similar\" issue previously <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"764213830\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/40822\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/40822/hovercard\" href=\"https://github.com/rails/rails/pull/40822\">#40822</a>.</p>",
            "url": "https://github.com/rails/rails/pull/49336",
            "title": "Fix MySQL expression index dumping with escaped quotes",
            "date_modified": "2023-09-21T16:12:34.000Z",
            "date_published": "2023-09-20T17:31:11.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/76983?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because the current behavior is misleading and could cause potential data loss. If you define a scope and you try to call an <code class=\"notranslate\">update</code> or <code class=\"notranslate\">update!</code> on the scope then you would expect that the updates will be executed on the scope and not on every record by ignoring the scope completely.</p>\n<p dir=\"auto\">If I wanted to update every record, then I would call the <code class=\"notranslate\">update</code> or <code class=\"notranslate\">update!</code> on the model directly.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This change updates the behavior of the <code class=\"notranslate\">update</code> and <code class=\"notranslate\">update!</code> methods of the <code class=\"notranslate\">ActiveRecord::Relation</code>. If you pass a set of ids then the update will be executed on those records that match the selected ids but also satisfy the scope.</p>\n<p dir=\"auto\">With this change, we also make the <code class=\"notranslate\">update</code> and <code class=\"notranslate\">update!</code> methods symmetric regardless of whether the first parameter was <code class=\"notranslate\">:all</code> or a set of ids.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This might be considered a breaking change, but I do believe this is an actual bugfix since the behavior was misleading and it was asymmetric depending on the first argument.</p>\n<p dir=\"auto\">Consider the following scenario, if you want to update the <code class=\"notranslate\">Model</code> record and set all of the <code class=\"notranslate\">sent_at</code> attributes to the actual time if the items have been sent, then this would work.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Model.unsent.update!(:all, sent_at: Time.zone.now)\"><pre class=\"notranslate\"><span class=\"pl-v\">Model</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">unsent</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">update!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:all</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">sent_at</span>: <span class=\"pl-v\">Time</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">zone</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">now</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">But if you want to reduce it to just a subset of ids:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Model.unsent.update!([1, 2], { sent_at: Time.zone.now }, { sent_at: Time.zone.now })\"><pre class=\"notranslate\"><span class=\"pl-v\">Model</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">unsent</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">update!</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">[</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">2</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">sent_at</span>: <span class=\"pl-v\">Time</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">zone</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">now</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">sent_at</span>: <span class=\"pl-v\">Time</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">zone</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">now</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">Then this method call would update all the <code class=\"notranslate\">Model</code> records with the matching ids in the DB and we would lose the previous <code class=\"notranslate\">sent_at</code> values if for example Model with id <code class=\"notranslate\">1</code> was sent already.</p>\n<h4 dir=\"auto\">Undocumented and untested behavior</h4>\n<p dir=\"auto\">I made my change symmetric to <code class=\"notranslate\">ActiveRecord::Persistence</code> so it will also raise an <code class=\"notranslate\">ActiveRecord::RecordNotFound</code> error if a record could not be found, it also raises similar <code class=\"notranslate\">ArgumentError</code> exceptions when invalid arguments are passed.  This behavior was undocumented and untested, now I added tests to cover the cases.</p>\n<p dir=\"auto\">I was using <code class=\"notranslate\">respond_to?</code> to check if we received an <code class=\"notranslate\">Enumerable</code> like argument. This code is almost the exact copy of the <code class=\"notranslate\">ActiveRecord::Persistence#update</code> or <code class=\"notranslate\">ActiveRecord::Persistence#update!</code>, we could merge these three methods into one concern, but I did not want to introduce any bigger changes with this PR.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49332",
            "title": "Handle update and update! on scopes properly",
            "date_modified": "2023-09-23T08:21:42.000Z",
            "date_published": "2023-09-20T14:34:30.000Z",
            "author": {
                "name": "raszi",
                "url": "https://github.com/raszi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4289625?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because the tests for exclusion validation is missing in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1239433073\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/45123\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/45123/hovercard\" href=\"https://github.com/rails/rails/pull/45123\">#45123</a> and I had to check the exclusivity of the beginless/endless validations as the change for 7.1.0beta1.</p>\n<blockquote>\n<p dir=\"auto\">The PR is a second try of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1899213976\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49298\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49298/hovercard\" href=\"https://github.com/rails/rails/pull/49298\">#49298</a> to reduce irrelevant rebase-commits.</p>\n</blockquote>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds tests for exclusion validation with beginless/endless range, based on the ones for inclusion validation.<br>\nAnd updates 7_1_release_notes.md and CHANGELOG.md for Active Model for conveniences.</p>\n<p dir=\"auto\">The behavior has not been changed.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49322",
            "title": "[Docs][Tests] Add tests for validates_exclusion_of to 7.1.0beta1",
            "date_modified": "2023-09-21T01:50:42.000Z",
            "date_published": "2023-09-19T21:37:45.000Z",
            "author": {
                "name": "hachi8833",
                "url": "https://github.com/hachi8833"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1068531?u=86f00938be9f39ec677b8dd5f3518aab3d2d8585&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">MariaDB have supported <a href=\"https://mariadb.com/kb/en/insertreturning/\" rel=\"nofollow\">INSERT RETURNING</a> starting with 10.5.0.</p>\n<p dir=\"auto\">This is very convenient to use in methods such as <code class=\"notranslate\">ActiveRecord::Persistence.insert_all</code> to return default or setted by trigger attributes.</p>\n<p dir=\"auto\">Now you can use returning option with MariaDB the same way as with PostgreSQL in ActiveRecord::Persistence <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-insert_all\" rel=\"nofollow\">insert</a> methods.</p>\n<p dir=\"auto\">There are tests </p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/ebcd7233ea1307448f2d97eaf56a8d303200e5f7/activerecord/test/cases/insert_all_test.rb#L87-L120\">rails/activerecord/test/cases/insert_all_test.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 87 to 120\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/ebcd7233ea1307448f2d97eaf56a8d303200e5f7\">ebcd723</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L87\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"87\"></td>\n          <td id=\"LC87\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_insert_all_returns_primary_key_if_returning_is_supported</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L88\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"88\"></td>\n          <td id=\"LC88\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">skip</span> <span class=\"pl-k\">unless</span> <span class=\"pl-en\">supports_insert_returning?</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L89\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"89\"></td>\n          <td id=\"LC89\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L90\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"90\"></td>\n          <td id=\"LC90\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-s1\">result</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Book</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">insert_all!</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"Rework\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">author_id</span>: <span class=\"pl-c1\">1</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">]</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L91\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"91\"></td>\n          <td id=\"LC91\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">assert_equal</span> <span class=\"pl-kos\">%w[</span> <span class=\"pl-s\">id</span> <span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">columns</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L92\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"92\"></td>\n          <td id=\"LC92\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L93\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"93\"></td>\n          <td id=\"LC93\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L94\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"94\"></td>\n          <td id=\"LC94\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_insert_all_returns_nothing_if_returning_is_empty</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L95\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"95\"></td>\n          <td id=\"LC95\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">skip</span> <span class=\"pl-k\">unless</span> <span class=\"pl-en\">supports_insert_returning?</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L96\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"96\"></td>\n          <td id=\"LC96\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L97\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"97\"></td>\n          <td id=\"LC97\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-s1\">result</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Book</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">insert_all!</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"Rework\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">author_id</span>: <span class=\"pl-c1\">1</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">returning</span>: <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L98\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"98\"></td>\n          <td id=\"LC98\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">assert_equal</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">columns</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L99\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"99\"></td>\n          <td id=\"LC99\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L100\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"100\"></td>\n          <td id=\"LC100\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L101\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"101\"></td>\n          <td id=\"LC101\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_insert_all_returns_nothing_if_returning_is_false</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L102\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"102\"></td>\n          <td id=\"LC102\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">skip</span> <span class=\"pl-k\">unless</span> <span class=\"pl-en\">supports_insert_returning?</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L103\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"103\"></td>\n          <td id=\"LC103\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L104\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"104\"></td>\n          <td id=\"LC104\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-s1\">result</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Book</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">insert_all!</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"Rework\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">author_id</span>: <span class=\"pl-c1\">1</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">returning</span>: <span class=\"pl-c1\">false</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L105\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"105\"></td>\n          <td id=\"LC105\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">assert_equal</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">columns</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L106\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"106\"></td>\n          <td id=\"LC106\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L107\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"107\"></td>\n          <td id=\"LC107\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L108\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"108\"></td>\n          <td id=\"LC108\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_insert_all_returns_requested_fields</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L109\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"109\"></td>\n          <td id=\"LC109\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">skip</span> <span class=\"pl-k\">unless</span> <span class=\"pl-en\">supports_insert_returning?</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L110\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"110\"></td>\n          <td id=\"LC110\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L111\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"111\"></td>\n          <td id=\"LC111\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-s1\">result</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Book</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">insert_all!</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"Rework\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">author_id</span>: <span class=\"pl-c1\">1</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">returning</span>: <span class=\"pl-kos\">[</span><span class=\"pl-pds\">:id</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">]</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L112\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"112\"></td>\n          <td id=\"LC112\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">assert_equal</span> <span class=\"pl-kos\">%w[</span> <span class=\"pl-s\">Rework</span> <span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">pluck</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"name\"</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L113\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"113\"></td>\n          <td id=\"LC113\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L114\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"114\"></td>\n          <td id=\"LC114\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L115\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"115\"></td>\n          <td id=\"LC115\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_insert_all_returns_requested_sql_fields</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L116\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"116\"></td>\n          <td id=\"LC116\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">skip</span> <span class=\"pl-k\">unless</span> <span class=\"pl-en\">supports_insert_returning?</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L117\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"117\"></td>\n          <td id=\"LC117\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L118\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"118\"></td>\n          <td id=\"LC118\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-s1\">result</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Book</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">insert_all!</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"Rework\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">author_id</span>: <span class=\"pl-c1\">1</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">returning</span>: <span class=\"pl-v\">Arel</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">sql</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"UPPER(name) as name\"</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L119\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"119\"></td>\n          <td id=\"LC119\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">assert_equal</span> <span class=\"pl-kos\">%w[</span> <span class=\"pl-s\">REWORK</span> <span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">result</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">pluck</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"name\"</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L120\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"120\"></td>\n          <td id=\"LC120\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n  that will automatically run in the required version of MariaDB.<p></p>\n<p dir=\"auto\">We've been using this patch in production for several months.</p>",
            "url": "https://github.com/rails/rails/pull/49315",
            "title": "Support returning option in insert_all for MariaDB",
            "date_modified": "2023-09-20T14:53:51.000Z",
            "date_published": "2023-09-19T09:46:58.000Z",
            "author": {
                "name": "nkondratyev",
                "url": "https://github.com/nkondratyev"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4910785?u=bb262553df264faad2f515f6ea75067266e0d129&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Many apps use the <a href=\"https://github.com/rmm5t/strip_attributes\">https://github.com/rmm5t/strip_attributes</a> gem to strip most string attributes.<br>\nThe new <code class=\"notranslate\">normalizes</code> API is a perfect fit for this. One \"downside\" in contrast to the strip_attributes gem, is that you have to explicitly list all attributes you want to normalize. It would be nice to have a simple way to e.g. \"strip all string attributes in most models\".</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49314",
            "title": "Add normalizes_type to apply common normalizations",
            "date_modified": "2023-09-20T18:57:04.000Z",
            "date_published": "2023-09-18T22:00:16.000Z",
            "author": {
                "name": "codergeek121",
                "url": "https://github.com/codergeek121"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/107635?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I've been stuck on a failing test about a job that was supposed to be rescued from exceptions, and after an embarrassing amount of time I came to realise that using <code class=\"notranslate\">perform</code> shortcuts all of the ActiveJob niceties.</p>\n<p dir=\"auto\">This Pull Request has been created because I don't want other people to confuse the <code class=\"notranslate\">perform</code>, <code class=\"notranslate\">perform_now</code> or <code class=\"notranslate\">perform_later</code> altogether and waste valuable time trying to understand why the first one doesn't behave like the two others.</p>\n<p dir=\"auto\">Feel free to challenge the wording as you please ✌️</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the ActiveJob guide.</p>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49301",
            "title": "[ci skip] clarify the benefits of using ActiveJob's execution wrappers",
            "date_modified": "2023-09-23T12:55:07.000Z",
            "date_published": "2023-09-16T10:36:45.000Z",
            "author": {
                "name": "freesteph",
                "url": "https://github.com/freesteph"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/76922290?u=43264c7b0c15885c082eb8f7570643015f7a49fd&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">It was great to see <code class=\"notranslate\">ActionController::Live#send_stream</code> introduced in Rails 7.0. We'd like to collect information on <code class=\"notranslate\">send_stream</code> events by adding instrumentation for it.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Adds instrumentation for <code class=\"notranslate\">ActionController::Live#send_stream</code>. The event payload contains the filename, disposition, and type.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49297",
            "title": "Add instrumentation for ActionController::Live#send_stream",
            "date_modified": "2023-09-23T12:39:50.000Z",
            "date_published": "2023-09-15T22:29:31.000Z",
            "author": {
                "name": "hannahramadan",
                "url": "https://github.com/hannahramadan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/52599949?u=1760b036d3c7541f6947088385784714acfc770e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The as_json method in <code class=\"notranslate\">ActiveModel</code> accepts the only option to restrict the keys that are included in the JSON output. However, when including <code class=\"notranslate\">ActionText::Attachable</code>, this behavior is overridden, and an additional <code class=\"notranslate\">attachable_sgid</code> key is unconditionally added to the JSON output.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"class User &lt; ActiveRecord\n   include ActionText::Attachable\nend\n\nuser = User.new(name: &quot;Dave&quot;)\nuser.as_json(only: :name)\n#=&gt; { &quot;name&quot; =&gt; &quot;Dave&quot;, &quot;attachable_sgid&quot; =&gt; &quot;...&quot; }\"><pre class=\"notranslate\"><code class=\"notranslate\">class User &lt; ActiveRecord\n   include ActionText::Attachable\nend\n\nuser = User.new(name: \"Dave\")\nuser.as_json(only: :name)\n#=&gt; { \"name\" =&gt; \"Dave\", \"attachable_sgid\" =&gt; \"...\" }\n</code></pre></div>\n<p dir=\"auto\">I am not sure if applying the only option in ActionText::Attachable's as_json method was the correct approach, but I made that modification.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49272",
            "title": "Fix as_json behavior in ActionText::Attachable",
            "date_modified": "2023-09-15T14:37:48.000Z",
            "date_published": "2023-09-14T14:22:18.000Z",
            "author": {
                "name": "a5-stable",
                "url": "https://github.com/a5-stable"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1518299?u=d3dda61ebb16317ded64f166b59e35e1e160b9b1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><code class=\"notranslate\">save_and_open_page</code> is a capybara helper that lets developers inspect the status of the page at any given point in their tests. This is helpful when trying to keep a short feedback loop while working on a test.</p>\n<p dir=\"auto\">This change adds a similar helper with a matching signature to integration tests.</p>\n<details open=\"\" class=\"details-reset border rounded-2\">\n  <summary class=\"px-3 py-2\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-device-camera-video\">\n    <path d=\"M16 3.75v8.5a.75.75 0 0 1-1.136.643L11 10.575v.675A1.75 1.75 0 0 1 9.25 13h-7.5A1.75 1.75 0 0 1 0 11.25v-6.5C0 3.784.784 3 1.75 3h7.5c.966 0 1.75.784 1.75 1.75v.675l3.864-2.318A.75.75 0 0 1 16 3.75Zm-6.5 1a.25.25 0 0 0-.25-.25h-7.5a.25.25 0 0 0-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-6.5ZM11 8.825l3.5 2.1v-5.85l-3.5 2.1Z\"></path>\n</svg>\n    <span aria-label=\"Video description 20230913155205_0fccdf93e5.mp4\" class=\"m-1\">20230913155205_0fccdf93e5.mp4</span>\n    <span class=\"dropdown-caret\"></span>\n  </summary>\n\n  <video src=\"https://user-images.githubusercontent.com/1518299/267807273-8137fa68-619b-4673-bd95-495f56eb0984.mp4\" data-canonical-src=\"https://user-images.githubusercontent.com/1518299/267807273-8137fa68-619b-4673-bd95-495f56eb0984.mp4\" controls=\"controls\" muted=\"muted\" class=\"d-block rounded-bottom-2 border-top width-fit\" style=\"max-height:640px; min-height: 200px\">\n\n  </video>\n</details>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I have seen similar helpers defined in a number of projects in their <code class=\"notranslate\">test_helper.rb</code>.<br>\nI figured this would be a good candidate to upstream as we already have the same helper for system tests.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Launchy is required to automatically open the dump in a browser, but the helper still works without. Without launchy it prints a warning along with the path to the dump for manual review.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<ul dir=\"auto\">\n<li>I wasn't sure where to put the changelog notice. I've put it above the Rails 7.1 release header as I assume this won't make the cut for the release</li>\n<li>I did not add launchy to the <a href=\"https://github.com/rails/rails/blob/bb2fedbf013d2a087087c6456f3c54bc74d3e609/railties/lib/rails/generators/rails/app/templates/Gemfile.tt\">Gemfile template</a>. Maybe I should?</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49267",
            "title": "Add `save_and_open_page` helper to IntegrationTest",
            "date_modified": "2023-09-13T23:10:41.000Z",
            "date_published": "2023-09-13T23:07:56.000Z",
            "author": {
                "name": "JoeDupuis",
                "url": "https://github.com/JoeDupuis"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This commit is intended to address a few separate but related problems.</p>\n<p dir=\"auto\">The first issue is that this log message is currently impossible to customize without monkey patching <code class=\"notranslate\">Rails::Rack::Logger</code>. Gems like lograge and rails_semantic_logger currently monkey patch the class in order to remove or modify the message logged. Whether or not one of these specific gems is used, apps that want to use structured logging in production will almost certainly want to change or remove this message since it does not have a uniform structure.</p>\n<p dir=\"auto\">Another issue is that this log message makes <code class=\"notranslate\">Rails::Rack::Logger</code> dependent on <code class=\"notranslate\">ActionDispatch::RemoteIp</code> if an application wants to be protected from IP spoofing (<code class=\"notranslate\">RemoteIp</code> must appear before it in the middleware stack). There is currently an issue open because <code class=\"notranslate\">RemoteIp</code> will raise an uncaught error when IP spoofing is detected, when really it should return a 4xx response. That type of issue is normally solved by <code class=\"notranslate\">ActionDispatch::ShowExceptions</code>, however, <code class=\"notranslate\">Rails::Rack::Logger</code> additionally depends on <code class=\"notranslate\">ShowExceptions</code> being below it in the middleware stack so that the proper response status is logged. By moving the <code class=\"notranslate\">started_request_message</code> out of <code class=\"notranslate\">Rails::Rack::Logger</code>, the second dependency is removed and both <code class=\"notranslate\">Rails::Rack::Logger</code> and <code class=\"notranslate\">ShowExceptions</code> could be moved up to the top of the middleware stack in the future.</p>\n<p dir=\"auto\">In addition to fixing the 5xx response for Ip spoofing requests, there is another large benefit to moving request instrumentation higher in the middleware stack. Currently, <code class=\"notranslate\">process_action.action_controller</code> is the default instrumentation enabled in Rails applications. However, it is limited to returning information about the response returned from the controller action. This has lead to another issue opened where a user reported seeing 2xx responses logged (from <code class=\"notranslate\">process_action</code>) even though the <code class=\"notranslate\">ConditionalGet</code> middleware was intercepting the response and actually returning a 3xx response. So by enabling <code class=\"notranslate\">Rails::Rack::Logger</code> to be moved higher up in the middleware stack, we are also creating an opportunity to have more realistic instrumentation and logs.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Issues references:</p>\n<ul dir=\"auto\">\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1369554829\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46003\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46003/hovercard\" href=\"https://github.com/rails/rails/issues/46003\">#46003</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1516609172\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46869\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46869/hovercard\" href=\"https://github.com/rails/rails/issues/46869\">#46869</a></li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49245",
            "title": "Move started_request_message into LogSubscriber",
            "date_modified": "2023-09-20T21:49:12.000Z",
            "date_published": "2023-09-12T22:18:50.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14993828?u=8ed3978d4be4f3a0ed1eb48dc0e5e039b5f885e7&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Looking for early feedback on notes</p>\n<p dir=\"auto\">Inspired by the <code class=\"notranslate\">rails/info/routes</code> route I am suggesting a <code class=\"notranslate\">rails/info/notes</code> internal route.</p>\n<p dir=\"auto\">This will be same as doing</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"$ bin/rails notes\n\napp/controllers/posts_controller.rb:\n  * [ 9] [TODO] Move this logic to a concern\n  * [18] [FIXME] Refactor this method\n\napp/models/post.rb:\n  * [ 2] [TODO] Refactor this validation\"><pre class=\"notranslate\">$ bin/rails notes\n\napp/controllers/posts_controller.rb:\n  <span class=\"pl-k\">*</span> [ 9] [TODO] Move this logic to a concern\n  <span class=\"pl-k\">*</span> [18] [FIXME] Refactor this method\n\napp/models/post.rb:\n  <span class=\"pl-k\">*</span> [ 2] [TODO] Refactor this validation</pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Adding an internal route for the <code class=\"notranslate\">bin/rails notes</code> so we can check the notes on UI.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\"><strong>Option 1:</strong></p>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/14993828/267357459-7bde94f3-629b-42b0-b85f-54826af9b553.png\"><img width=\"890\" alt=\"Screenshot 2023-09-12 at 19 40 07\" src=\"https://user-images.githubusercontent.com/14993828/267357459-7bde94f3-629b-42b0-b85f-54826af9b553.png\" style=\"max-width: 100%;\"></a>\n<p dir=\"auto\"><strong>Option 2:</strong></p>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/14993828/267356301-104e15cb-460b-403d-93d8-5dcfae02d991.png\"><img width=\"890\" alt=\"Screenshot 2023-09-12 at 19 36 03\" src=\"https://user-images.githubusercontent.com/14993828/267356301-104e15cb-460b-403d-93d8-5dcfae02d991.png\" style=\"max-width: 100%;\"></a>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49240",
            "title": "Add an internal route for bin/rails notes",
            "date_modified": "2023-09-18T13:00:02.000Z",
            "date_published": "2023-09-12T14:11:15.000Z",
            "author": {
                "name": "deepakmahakale",
                "url": "https://github.com/deepakmahakale"
            }
        }
    ]
}