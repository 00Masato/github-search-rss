{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Ref <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1833726665\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48874\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48874/hovercard\" href=\"https://github.com/rails/rails/issues/48874\">#48874</a></p>\n<p dir=\"auto\">This adds additional coverage to ActionCable::Server to validate that its output follow the Rack SPEC.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">In addition to using Rack::CONTENT_TYPE for the Content-Type header, there was another change required: the Content-Type header cannot be specified when the Response status is 204, so the default health check status was updated to 200</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48961",
            "title": "Add Rack::Lint to ActionCable::Server health tests",
            "date_modified": "2023-08-17T02:57:54.000Z",
            "date_published": "2023-08-17T02:57:51.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><code class=\"notranslate\">actionpack/lib/action_dispatch/routing.rb</code></p>\n<ul dir=\"auto\">\n<li>added: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/013745151be062aa4d0fc1f2a008a7303fdb6e04/hovercard\" href=\"https://github.com/rails/rails/commit/013745151be062aa4d0fc1f2a008a7303fdb6e04\"><tt>0137451</tt></a></li>\n<li>removed: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/93034ad7fea7e00562103a7cd0acfab19bbfadf9/hovercard\" href=\"https://github.com/rails/rails/commit/93034ad7fea7e00562103a7cd0acfab19bbfadf9\"><tt>93034ad</tt></a></li>\n</ul>\n<p dir=\"auto\"><code class=\"notranslate\">activejob/lib/active_job/log_subscriber.rb</code></p>\n<ul dir=\"auto\">\n<li>added: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/b314ab555e0d85e6efb41be94fb5f3a157bb12fe/hovercard\" href=\"https://github.com/rails/rails/commit/b314ab555e0d85e6efb41be94fb5f3a157bb12fe\"><tt>b314ab5</tt></a></li>\n<li>removed: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/5ab2034730feacfc2caee418f8c0b55191d27427/hovercard\" href=\"https://github.com/rails/rails/commit/5ab2034730feacfc2caee418f8c0b55191d27427\"><tt>5ab2034</tt></a></li>\n</ul>\n<p dir=\"auto\"><code class=\"notranslate\">activemodel/lib/active_model/errors.rb</code></p>\n<ul dir=\"auto\">\n<li>added: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/cf7fac7e29bb2816412c949fdaed3d61a923eb23/hovercard\" href=\"https://github.com/rails/rails/commit/cf7fac7e29bb2816412c949fdaed3d61a923eb23\"><tt>cf7fac7</tt></a></li>\n<li>removed: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/9de6457ab0767ebab7f2c8bc583420fda072e2bd/hovercard\" href=\"https://github.com/rails/rails/commit/9de6457ab0767ebab7f2c8bc583420fda072e2bd\"><tt>9de6457</tt></a></li>\n</ul>\n<p dir=\"auto\"><code class=\"notranslate\">activerecord/lib/active_record/core.rb</code></p>\n<ul dir=\"auto\">\n<li>added: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/b3bfa361c503e107aff4dee5edf79bd7fd3d3725/hovercard\" href=\"https://github.com/rails/rails/commit/b3bfa361c503e107aff4dee5edf79bd7fd3d3725\"><tt>b3bfa36</tt></a></li>\n<li>removed: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/e1066f450d1a99c9a0b4d786b202e2ca82a4c3b3/hovercard\" href=\"https://github.com/rails/rails/commit/e1066f450d1a99c9a0b4d786b202e2ca82a4c3b3\"><tt>e1066f4</tt></a></li>\n</ul>\n<p dir=\"auto\"><code class=\"notranslate\">activesupport/lib/active_support/core_ext/module/introspection.rb</code></p>\n<ul dir=\"auto\">\n<li>added: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/358ac36edf1695fcbec0aa21f126a3d8b83d4b5a/hovercard\" href=\"https://github.com/rails/rails/commit/358ac36edf1695fcbec0aa21f126a3d8b83d4b5a\"><tt>358ac36</tt></a></li>\n<li>removed: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/167b4153cac0069a21e0bb9689cb16f34f6abbaa/hovercard\" href=\"https://github.com/rails/rails/commit/167b4153cac0069a21e0bb9689cb16f34f6abbaa\"><tt>167b415</tt></a></li>\n</ul>\n<p dir=\"auto\"><code class=\"notranslate\">activesupport/lib/active_support/duration.rb</code></p>\n<ul dir=\"auto\">\n<li>added: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/75924c4517c8f87712d3f59c11f10152ed57b9d8/hovercard\" href=\"https://github.com/rails/rails/commit/75924c4517c8f87712d3f59c11f10152ed57b9d8\"><tt>75924c4</tt></a></li>\n<li>removed: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/a91ea1d51048342d13fc73f9b09ce4cfd086bb34/hovercard\" href=\"https://github.com/rails/rails/commit/a91ea1d51048342d13fc73f9b09ce4cfd086bb34\"><tt>a91ea1d</tt></a></li>\n</ul>\n<p dir=\"auto\"><code class=\"notranslate\">railties/lib/rails/commands/server/server_command.rb</code></p>\n<ul dir=\"auto\">\n<li>added: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/f2173648938b418d120f5a68d8f3862d8ae9dace/hovercard\" href=\"https://github.com/rails/rails/commit/f2173648938b418d120f5a68d8f3862d8ae9dace\"><tt>f217364</tt></a></li>\n<li>removed: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/553b86fc751c751db504bcbe2d033eb2bb5b6a0b/hovercard\" href=\"https://github.com/rails/rails/commit/553b86fc751c751db504bcbe2d033eb2bb5b6a0b\"><tt>553b86f</tt></a></li>\n</ul>\n<p dir=\"auto\"><code class=\"notranslate\">railties/lib/rails/command/base.rb</code></p>\n<ul dir=\"auto\">\n<li>added: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/6813edc7d926965e5644cd8befaf229a35b9d8ca/hovercard\" href=\"https://github.com/rails/rails/commit/6813edc7d926965e5644cd8befaf229a35b9d8ca\"><tt>6813edc</tt></a></li>\n<li>removed: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/b617a561d865a65cfc140caa0e3c4af4350bfcef/hovercard\" href=\"https://github.com/rails/rails/commit/b617a561d865a65cfc140caa0e3c4af4350bfcef\"><tt>b617a56</tt></a></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48959",
            "title": "Remove uneeded requires of core_ext/string/filters",
            "date_modified": "2023-08-16T21:59:18.000Z",
            "date_published": "2023-08-16T21:59:14.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5864726?u=e92ece760a4f05c73e36340e2e4ea3abdfc7e128&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The current example test for jobs using <code class=\"notranslate\">perform_now</code> to run the job inline. This is problematic for jobs that have retries configured, as any exception that is retried will be silently rescued. Ideally, the test will still fail because the job did not perform the work it was supposed to, but it makes finding the root cause a lot harder.</p>\n<p dir=\"auto\">Testing with <code class=\"notranslate\">perform_enqueued_jobs</code> and <code class=\"notranslate\">perform_later</code> gets around this problem, as the retries are also performed immediately and, assuming that the exception happens consistently, it will bubble up after exhausting its retries.</p>\n<p dir=\"auto\">Therefore, this PR updates the basic test guidance to suggest <code class=\"notranslate\">perform_enqueued_jobs</code> and <code class=\"notranslate\">perform_later</code> over <code class=\"notranslate\">perform_now</code>.</p>\n<p dir=\"auto\">Both described behaviours make it harder to test that a job raises a specific exception, so this requires special handling, which I added a paragraph on. I can pull that out to a separate PR if desired.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48958",
            "title": "Update job testing guidelines",
            "date_modified": "2023-08-16T21:15:35.000Z",
            "date_published": "2023-08-16T21:15:31.000Z",
            "author": {
                "name": "Mangara",
                "url": "https://github.com/Mangara"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1709692?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48326.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1730003454\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48326\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48326/hovercard\" href=\"https://github.com/rails/rails/issues/48326\">#48326</a></p>\n<p dir=\"auto\">This Pull Request has been created to fix an issue where syntax errors generated inside an eval method cause an Internal Server Error due to a TypeError.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">In order to display the extraced source of a syntax error, we try to locate the node id for the backtrace location. The call to RubyVM::AbstractSyntaxTree.node_id_for_backtrace_location is expecting a Thread::Backtrace::Location object, but we are passing a SourceMapLocation instead.</p>\n<p dir=\"auto\">Once this is fixed, another issue then appears. The first location of the backtrace for an eval error does not include the filename of where eval is called, so we can't extract the source. This means that the development view fails to show the extracted source because it is hard-coded to show the source extracted for the first location.</p>\n<p dir=\"auto\">This commit does two things:</p>\n<ol dir=\"auto\">\n<li>it addresses the issue by making sure that we are always passing a Thread::Backtrace::Location instead</li>\n<li>it allows the development view to show the extracted source fragment by ensuring the first location of the backtrace for a syntax error coming from eval includes the name of the file where eval is called</li>\n</ol>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I have tried to keep the changes consistent with the approach introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1393581431\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46171\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46171/hovercard\" href=\"https://github.com/rails/rails/pull/46171\">#46171</a>.</p>",
            "url": "https://github.com/rails/rails/pull/48957",
            "title": "Fix #48326",
            "date_modified": "2023-08-16T20:32:58.000Z",
            "date_published": "2023-08-16T20:32:54.000Z",
            "author": {
                "name": "cmaruz",
                "url": "https://github.com/cmaruz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Ref <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1833726665\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48874\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48874/hovercard\" href=\"https://github.com/rails/rails/issues/48874\">#48874</a></p>\n<p dir=\"auto\">This adds additional test coverage to ShowExceptions, since one of the possible responses it creates was not previously tested.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Because of the previous <a href=\"https://github.com/rails/rails/commit/339dda4a82356d173b62dab144870790618e40c6\">addition</a> of Rack::Lint, this also demonstrates that the Content-Type header needed to be fixed.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48956",
            "title": "Add test coverage for ShowExceptions failsafe",
            "date_modified": "2023-08-16T20:05:58.000Z",
            "date_published": "2023-08-16T20:05:54.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This <code class=\"notranslate\">#use_puma?</code> check was <a href=\"https://github.com/rails/rails/commit/29648ff60e66c674b3cc49151df15dc100ffb4f4\">introduced</a> because Rails could potentially display the wrong server URL in development if another host or port is configured in <code class=\"notranslate\">config/puma.rb</code>.</p>\n<p dir=\"auto\">However, in Rack 3 the the name of the server class changed from <code class=\"notranslate\">Rack::Handler::Puma</code> to <code class=\"notranslate\">Rackup::Handler::Puma</code>, which means that the served_url is being logged again.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit fixes the check to accept either version of the class. Additionally, puma was updated in Gemfile.lock because Puma 6.0.x prints a deprecation warning about Rack::Handler that's fixed in 6.1.0.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48955",
            "title": "Fix served_url printed when using Puma & Rack 3",
            "date_modified": "2023-08-16T19:35:43.000Z",
            "date_published": "2023-08-16T19:35:40.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/75903418?u=6f227375ed865d3bb51476d2e1fe8ce241ac7af4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because I was working on some system specs for my project and noticed the deprecation warning in my console. I thought that this would be a great opportunity to contribute and create my first pull request to Rails! Even though it's a simple maintenance fix, it's very exciting to update the rails repository no matter the size of the change.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the <code class=\"notranslate\">action_cable/connection/base.rb#started_request_message</code> and <code class=\"notranslate\">action_cable/connection/base.rb#finished_request_message</code> methods to use <code class=\"notranslate\">Time.to_fs</code> instead of <code class=\"notranslate\">Time.to_s</code> as the deprecation warning suggests as well. This was causing the deprecation warning message in my system spec.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Should be a simple maintenance fix, nothing should be broken :)</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48954",
            "title": "Updating Time.to_s to Time.to_fs",
            "date_modified": "2023-08-16T16:34:33.000Z",
            "date_published": "2023-08-16T16:34:29.000Z",
            "author": {
                "name": "kemaldemirgil",
                "url": "https://github.com/kemaldemirgil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/386234?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><a href=\"https://playwright.dev/\" rel=\"nofollow\">Playwright</a> is getting popularity as a new browser automation tool. There is a community-maintained Ruby client (<a href=\"https://github.com/YusukeIwaki/playwright-ruby-client\">client</a> and <a href=\"https://github.com/YusukeIwaki/capybara-playwright-driver\">capybara driver</a>) as well. I have been using it for a while now and it works great, and it would be great if we could add support for it to Rails.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR adds support for the Playwright driver to Rails.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48950",
            "title": "Add support for Playwright as a driver for system tests",
            "date_modified": "2023-08-16T12:21:25.000Z",
            "date_published": "2023-08-16T07:28:00.000Z",
            "author": {
                "name": "yuki24",
                "url": "https://github.com/yuki24"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1080678?u=b6e211b7766e6aa01e794067f67dd65d419c0150&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">We originally implemented this project to use OR queries instead of IN because it seemed like there was no way to do that without a row constructor. While working on implementing this feature in our vitess gem I noticed that we can actually get the queries we wanted, and the new code is more performant than generating an OR.</p>\n<p dir=\"auto\">SQL Before:</p>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"SELECT &quot;sharded_comments&quot;.*\nFROM &quot;sharded_comments&quot;\nWHERE (&quot;sharded_comments&quot;.&quot;blog_id&quot; = 969142904\nAND (&quot;sharded_comments&quot;.&quot;blog_post_id&quot; = 357271355\nOR &quot;sharded_comments&quot;.&quot;blog_post_id&quot; = 756811794)\nOR &quot;sharded_comments&quot;.&quot;blog_id&quot; = 308674288\nAND &quot;sharded_comments&quot;.&quot;blog_post_id&quot; = 1055755181)\"><pre class=\"notranslate\"><span class=\"pl-k\">SELECT</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-k\">*</span>\n<span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">WHERE</span> (<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>blog_id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">969142904</span>\n<span class=\"pl-k\">AND</span> (<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>blog_post_id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">357271355</span>\n<span class=\"pl-k\">OR</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>blog_post_id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">756811794</span>)\n<span class=\"pl-k\">OR</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>blog_id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">308674288</span>\n<span class=\"pl-k\">AND</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>blog_post_id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">1055755181</span>)</pre></div>\n<p dir=\"auto\">SQL After:</p>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"SELECT &quot;sharded_comments&quot;.*\nFROM &quot;sharded_comments&quot;\nWHERE &quot;sharded_comments&quot;.&quot;blog_id&quot;\nIN (969142904, 308674288)\nAND &quot;sharded_comments&quot;.&quot;blog_post_id&quot;\nIN (357271355, 756811794, 1055755181)\"><pre class=\"notranslate\"><span class=\"pl-k\">SELECT</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-k\">*</span>\n<span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">WHERE</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>blog_id<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">IN</span> (<span class=\"pl-c1\">969142904</span>, <span class=\"pl-c1\">308674288</span>)\n<span class=\"pl-k\">AND</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sharded_comments<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>blog_post_id<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">IN</span> (<span class=\"pl-c1\">357271355</span>, <span class=\"pl-c1\">756811794</span>, <span class=\"pl-c1\">1055755181</span>)</pre></div>\n<p dir=\"auto\">Using one of the tests that utilizes this code path, I benchmarked the queries. The new implementation is faster:</p>\n<p dir=\"auto\">Before:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Warming up --------------------------------------\n             queries   147.000  i/100ms\nCalculating -------------------------------------\n             queries      1.486k (± 3.2%) i/s -      7.497k in   5.050742s\"><pre class=\"notranslate\"><code class=\"notranslate\">Warming up --------------------------------------\n             queries   147.000  i/100ms\nCalculating -------------------------------------\n             queries      1.486k (± 3.2%) i/s -      7.497k in   5.050742s\n</code></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Warming up --------------------------------------\n             queries   179.000  i/100ms\nCalculating -------------------------------------\n             queries      1.747k (± 4.5%) i/s -      8.771k in   5.031424s\"><pre class=\"notranslate\"><code class=\"notranslate\">Warming up --------------------------------------\n             queries   179.000  i/100ms\nCalculating -------------------------------------\n             queries      1.747k (± 4.5%) i/s -      8.771k in   5.031424s\n</code></pre></div>\n<p dir=\"auto\">We can probably improve this more but I think this query is more in line with what we want and expect while also being more performant (without having to build a new row constructor in arel).</p>",
            "url": "https://github.com/rails/rails/pull/48947",
            "title": "Use IN sql instead of OR sql for query constraints",
            "date_modified": "2023-08-17T00:40:54.000Z",
            "date_published": "2023-08-15T20:14:46.000Z",
            "author": {
                "name": "eileencodes",
                "url": "https://github.com/eileencodes"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Previously, when a Request had a non-authorized HTTP_HOST but an authorized HTTP_X_FORWARDED_HOST, the HTTP_X_FORWARDED_HOST value would be displayed as the one being blocked. However, this could be confusing for users since that value would already be added to <code class=\"notranslate\">config.hosts</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit addresses the issue by tweaking how the blocked host is displayed. Instead of always displaying Request#host (which will return X_FORWARDED_HOST when present whether or not that's the host being blocked), each host being blocked will be displayed on its own.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #40230.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"702217507\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/40230\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/40230/hovercard\" href=\"https://github.com/rails/rails/issues/40230\">#40230</a><br>\nSupercedes <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1391515790\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46158\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46158/hovercard\" href=\"https://github.com/rails/rails/pull/46158\">#46158</a></p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/Eusebius1920/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Eusebius1920\">@Eusebius1920</a> I added you as a coauthor for your work on the previous PR</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48941",
            "title": "Fix host display when X_FORWARDED_HOST authorized",
            "date_modified": "2023-08-15T07:35:44.000Z",
            "date_published": "2023-08-15T07:34:14.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/76693?u=baf66d56dcdc2cf6b0f5d9345736f78b529afc82&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I've been playing a bit with MRSK on a new Rails 7.1alpha project (using <code class=\"notranslate\">main</code>) and something that is both mentioned in the video and the <a href=\"https://github.com/mrsked/mrsk#using-a-generated-env-file\">Readme</a> is the ability to set a <code class=\"notranslate\">.env.erb</code> template and then run <code class=\"notranslate\">mrsk envify</code> to generate the final <code class=\"notranslate\">.env</code>.</p>\n<p dir=\"auto\">Given that MRSK might become more popular to deploy Rails applications, it feels like a good default to automatically remove any <code class=\"notranslate\">.env</code> from the Git repository that are not templates or examples.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This adds a few new lines to the <code class=\"notranslate\">.gitignore</code> template to ignore all env files that are not ending by <code class=\"notranslate\">.erb</code> or <code class=\"notranslate\">.example</code></p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This is similar to what the <code class=\"notranslate\">.dockerignore</code> is <a href=\"https://github.com/rails/rails/blob/main/railties/lib/rails/generators/rails/app/templates/dockerignore.tt#L13\">currently doing</a>, with the exception of allowing template files and any specialized env files (eg. <code class=\"notranslate\">.env.staging.erb</code> / <code class=\"notranslate\">.env.staging.example</code>)</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48940",
            "title": "Ignore all environment files in the gitignore template",
            "date_modified": "2023-08-15T17:28:55.000Z",
            "date_published": "2023-08-14T18:39:58.000Z",
            "author": {
                "name": "cover",
                "url": "https://github.com/cover"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1518299?u=a2dd8dd1835679cfd6b1924ef63a6e61ea62fa2a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1723197770\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48287\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48287/hovercard\" href=\"https://github.com/rails/rails/pull/48287\">#48287</a> introduced auto loading fixtures in engines. All engines present in the root folder of the rails app would have their fixtures auto loaded. This caused tests to fail when gems were vendorized, because fixtures from the internal rails test suite would be loaded.</p>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1729552267\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48323\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48323/hovercard\" href=\"https://github.com/rails/rails/pull/48323\">#48323</a> Added a check to exclude the vendor folder.</p>\n<p dir=\"auto\">This PR extends the check introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1729552267\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48323\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48323/hovercard\" href=\"https://github.com/rails/rails/pull/48323\">#48323</a> to prevent loading fixtures from gem paths instead of just the vendor folder.</p>\n<p dir=\"auto\">Some tools like devenv install gems in the root of the app, but outside of the vendor folder (<code class=\"notranslate\">.devenv/state</code>).</p>\n<p dir=\"auto\">This change prevents automatically loading fixtures from gems instead of the vendor folder.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I run rails using devenv and after updating rails, my test suite started to complain about fixtures from rails internal tests.<br>\nThe current check doesn't fix the issue for all situations. This new check <em>should</em>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48933",
            "title": "Prevent autoloading fixtures in gem paths.",
            "date_modified": "2023-08-13T19:52:28.000Z",
            "date_published": "2023-08-13T04:24:10.000Z",
            "author": {
                "name": "JoeDupuis",
                "url": "https://github.com/JoeDupuis"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/96156234?u=9ced8d6ac6128a8dea78e7f0d9233669ff0ffecf&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This branch allows a user to set <code class=\"notranslate\">self.table_alias</code> in the model to custom set a table alias.  It then accounts for the SQL needed for this in the AST.  It addresses <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1814805867\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48775\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48775/hovercard\" href=\"https://github.com/rails/rails/issues/48775\">#48775</a>.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This was motivated by the behavior shown in <a href=\"https://github.com/rails/rails/issues/48775\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48775/hovercard\">48775</a> and by a suggestion to implement it by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request allows a user to set a SQL <code class=\"notranslate\">table_alias</code> in the model by using <code class=\"notranslate\">self.table_alias = \"alias\"</code>.  Once this is done it gets added to the <code class=\"notranslate\">Alias</code> node in the AST.  In order to account for this in the SQL created by the AST I have the <code class=\"notranslate\">Insert</code> statement using the original table name instead of the <code class=\"notranslate\">table_alias</code> when a <code class=\"notranslate\">table_alias</code> is present so that the SQL INSERT will function.</p>\n<p dir=\"auto\">With the <code class=\"notranslate\">Update</code> and <code class=\"notranslate\">Delete</code> methods I changed the default behavior of <code class=\"notranslate\">visit_Arel_Table</code> to use <code class=\"notranslate\">AS</code> when a <code class=\"notranslate\">table_alias</code> is present, <code class=\"notranslate\">table AS t</code> vs <code class=\"notranslate\">table t</code>.  One last adjustment was necessary in the <code class=\"notranslate\">Delete</code> method.  In order for MySQL to use the alias in the delete method I needed to add the <code class=\"notranslate\">table_alias</code> after <code class=\"notranslate\">DELETE </code>.  So the code checks for MySQL and if the Node is using a <code class=\"notranslate\">table_alias</code> it will then insert the alias  after <code class=\"notranslate\">DELETE </code>, <code class=\"notranslate\">DELETE t FROM table AS t</code> vs <code class=\"notranslate\">DELETE FROM table AS t</code>.</p>\n<p dir=\"auto\">With these adjustments in place one can now successfully use a <code class=\"notranslate\">table_alias</code> set from the model with the Public API.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48932",
            "title": "This branch allows a user to set self.table_alias in the model",
            "date_modified": "2023-08-13T19:26:08.000Z",
            "date_published": "2023-08-13T02:50:09.000Z",
            "author": {
                "name": "paulreece",
                "url": "https://github.com/paulreece"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22918438?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Extends on <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1765797832\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48533\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48533/hovercard\" href=\"https://github.com/rails/rails/pull/48533\">#48533</a>.</p>\n<p dir=\"auto\">This allows access to the raw <code class=\"notranslate\">id</code> column value on records for which an id column exists but is not the primary key. This is common amongst models with composite primary keys.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Use <code class=\"notranslate\">alias_attribute</code> to provide a <code class=\"notranslate\">uid</code> alias for the <code class=\"notranslate\">id</code> attribute. That was one of the primary use cases described in the above pull request; as such, we've decided to provide it out of the box in Rails.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Is there a better way to provide documentation for <code class=\"notranslate\">#uid</code> than via a comment inserted above the <code class=\"notranslate\">alias_attribute</code> call?</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/nvasilevski/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nvasilevski\">@nvasilevski</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a></p>",
            "url": "https://github.com/rails/rails/pull/48930",
            "title": "Use `alias_attribute` to provide `uid` alias for `id` attribute",
            "date_modified": "2023-08-15T17:50:21.000Z",
            "date_published": "2023-08-11T17:03:28.000Z",
            "author": {
                "name": "adrianna-chang-shopify",
                "url": "https://github.com/adrianna-chang-shopify"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6826778?u=f003e43af6f187f1ff48cfb577150c77a54f4138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">We want to be clear that alias_attribute is not meant to be used for non-attributes, and provide a clear deprecation warning if it's used for associations or otherwise non-attribute methods. This adds specific deprecation warnings for overriding an attribute method that won't forward in the future, aliasing an association (a common anti-pattern), and aliasing a non-attribute method.</p>\n<p dir=\"auto\">In addition, we add tests for some of these common cases to ensure that we get the expected deprecation warning.</p>\n<ul dir=\"auto\">\n<li>If the user has manually defined an attribute method, we need to warn them that we won't forward to that method call in the future.</li>\n<li>If the user is using <code class=\"notranslate\">alias_attribute</code> to alias an association (a common anti-pattern), we need to warn them of that specifically.</li>\n<li>Finally, we can warn if <code class=\"notranslate\">alias_attribute</code> is being used with a non-attribute target.</li>\n</ul>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">We add a check to walk up the alias chain to ensure that the target hasn't been redefined by the user. If the targets are all attribute methods and the class has the attribute, we can use <code class=\"notranslate\">define_proxy_call</code>. Otherwise, we determine a deprecation warning to issue.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Opened separately from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1843597332\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48913\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48913/hovercard\" href=\"https://github.com/rails/rails/pull/48913\">#48913</a> to try to keep the changes easier to reason about, but let me know if there are any conflicts I may have missed.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48929",
            "title": "Refine the alias_attribute warning message to be more specific",
            "date_modified": "2023-08-11T19:29:01.000Z",
            "date_published": "2023-08-11T16:50:27.000Z",
            "author": {
                "name": "ipc103",
                "url": "https://github.com/ipc103"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/58582?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48922.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1845388034\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48922\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48922/hovercard\" href=\"https://github.com/rails/rails/issues/48922\">#48922</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The helper <code class=\"notranslate\">encrypted_attribute?</code> currently delegates the check to the global default encryptor configured, cf</p>\n<p dir=\"auto\"></p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/e6d59cdebbd0ddaf88029a7b9f03f5d642780e0a/activerecord/lib/active_record/encryption/encryptable_record.rb#L141-L144\">rails/activerecord/lib/active_record/encryption/encryptable_record.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 141 to 144\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/e6d59cdebbd0ddaf88029a7b9f03f5d642780e0a\">e6d59cd</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L141\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"141\"></td>\n          <td id=\"LC141\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\"># Returns whether a given attribute is encrypted or not.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L142\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"142\"></td>\n          <td id=\"LC142\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">encrypted_attribute?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">attribute_name</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L143\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"143\"></td>\n          <td id=\"LC143\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Encryption</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">encryptor</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">encrypted?</span> <span class=\"pl-en\">read_attribute_before_type_cast</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">attribute_name</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L144\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"144\"></td>\n          <td id=\"LC144\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">This Pull Requests delegates the check to the EncryptedAttributeType instance defined for the attribute. This attribute type properly applies context properties defined initially with <code class=\"notranslate\">encrypts</code>, such as a custom encryptor or message serializer.</p>\n<p dir=\"auto\">This fixes an issue where the <code class=\"notranslate\">encrypted_attribute?</code> helper would return erroneous results.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48923",
            "title": "[Fix #48922] Honour encrypted attribute context in encrypted_attribute?",
            "date_modified": "2023-08-10T15:23:12.000Z",
            "date_published": "2023-08-10T15:21:02.000Z",
            "author": {
                "name": "maximerety",
                "url": "https://github.com/maximerety"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/142914?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">If this looks good, I'll fill in the gaps in documentation and respond<br>\nto feedback in a timely manner.</p>\n<p dir=\"auto\">Is a simpler version of what's in<br>\n<a href=\"https://github.com/rails/rails/blob/7-0-stable/activerecord/lib/active_record/core.rb#L373-L396\">https://github.com/rails/rails/blob/7-0-stable/activerecord/lib/active_record/core.rb#L373-L396</a></p>\n<p dir=\"auto\">I'm using this in our application and thought I'd share back.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">We using ActiveModel::Model to build plain-old-ruby<br>\nobjects for things like API clients.  When I use<br>\nthe Attributes API to define secrets like <code class=\"notranslate\">attribute :api_key, :string</code><br>\nI don't want the <code class=\"notranslate\">api_key</code> to show up anywhere.</p>\n<p dir=\"auto\">This Pull Request has been created because ActiveModel::Model<br>\nis missing the <code class=\"notranslate\">filter_attributes</code> behavior present in<br>\nActiveRecord::Core.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes adds <code class=\"notranslate\">filter_attributes</code> to ActiveModel::API</p>\n<p dir=\"auto\">I added it to ActiveModel::API so that it does not interfere with<br>\nActiveRecord.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">We're using this in our app.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48921",
            "title": "feat: Add ActiveModel::Model.filter_attributes",
            "date_modified": "2023-08-13T16:33:55.000Z",
            "date_published": "2023-08-10T14:03:53.000Z",
            "author": {
                "name": "bf4",
                "url": "https://github.com/bf4"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22743?u=e50ea34a823df4b4f098a77e63c67b043847b06c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because it's not intuitive how we should match the arguments passed to an ActiveJob job when using keyword arguments.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit adds an example to the <code class=\"notranslate\">assert_enqueued_with</code> method documentation, demonstrating how to use it with keyword arguments. The example clarifies that keyword arguments should be specified as a hash inside an array, guiding developers to write tests for jobs that use keyword arguments.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48920",
            "title": "[docs] Update assert_enqueued_with documentation with keyword arguments example",
            "date_modified": "2023-08-11T07:55:37.000Z",
            "date_published": "2023-08-10T12:38:36.000Z",
            "author": {
                "name": "fidalgo",
                "url": "https://github.com/fidalgo"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This flattens our workflow graph pretty much in half.</p>\n<p dir=\"auto\">By compacting the lint jobs into a single job inside a single workflow, we maybe lose some readability -- but since the cost to maintain those files is already really low, they are rarely changed, versus the number of checks on each PR makes for a worse experience IMO.</p>\n<p dir=\"auto\">This also means that all of those separate checks can be found on a single page (e.g. <a href=\"https://github.com/zzak/rails/actions/runs/5820736204/job/15781737808?pr=20\">here</a>), for better or worse.. navigating the actions UI across multiple workflows and jobs is already strenuous. There is an argument that if one of these steps fails, debugging it there may be difficult, but I've tried to order them in terms of priority of \"if this step fails it should fail first\".</p>\n<p dir=\"auto\">If any of the <code class=\"notranslate\">Lint</code> steps fails, figuring out which one and why may not be as straight-forward, that maybe the only downside here. There are plans to move this workflow entirely to Buildkite at some point, probably after a refactor (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1804093901\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/buildkite-config/issues/62\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/buildkite-config/pull/62/hovercard\" href=\"https://github.com/rails/buildkite-config/pull/62\">rails/buildkite-config#62</a>, where they can go back to being separate \"jobs\" in that context and all of the important stuff is in a single place.</p>\n<p dir=\"auto\">So this is more of an intermediary step to improve the PR page and hopefully make reviewing them and deciding which checks failed matters, more efficient.</p>",
            "url": "https://github.com/rails/rails/pull/48919",
            "title": "Refactor actions to make fewer status checks",
            "date_modified": "2023-08-10T23:05:09.000Z",
            "date_published": "2023-08-10T12:10:24.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Follow-up to <a href=\"https://github.com/rails/rails/pull/47420\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47420/hovercard\">#47420</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">With the changes made in <a href=\"https://github.com/rails/rails/pull/47420\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47420/hovercard\">#47420</a>, <code class=\"notranslate\">has_secure_token</code> declarations can be configured to execute in an <code class=\"notranslate\">after_initialize</code> callback. This commit proposed a new Rails 7.1 default: generate all <code class=\"notranslate\">has_secure_token</code> values when their corresponding models are initialized.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">To preserve pre-7.1 behavior, applications can set <code class=\"notranslate\">config.active_record.generate_secure_token_on = :create</code>.</p>\n<p dir=\"auto\">By default, generate the value when the model is initialized:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User &lt; ApplicationRecord\n  has_secure_token\nend\n\nrecord = User.new\nrecord.token # =&gt; &quot;fwZcXX6SkJBJRogzMdciS7wf&quot;\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">has_secure_token</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">record</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n<span class=\"pl-s1\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">token</span> <span class=\"pl-c\"># =&gt; \"fwZcXX6SkJBJRogzMdciS7wf\"</span></pre></div>\n<p dir=\"auto\">With <code class=\"notranslate\">config.active_record.generate_secure_token_on = :create</code>, generate the<br>\nvalue when the model is created:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# config/application.rb\nconfig.active_record.generate_secure_token_on = :create\n\n# app/models/user.rb\nclass User &lt; ApplicationRecord\n  has_secure_token on: :create\nend\n\nrecord = User.new\nrecord.token # =&gt; nil\nrecord.save!\nrecord.token # =&gt; &quot;fwZcXX6SkJBJRogzMdciS7wf&quot;\"><pre class=\"notranslate\"><span class=\"pl-c\"># config/application.rb</span>\n<span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">generate_secure_token_on</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:create</span>\n\n<span class=\"pl-c\"># app/models/user.rb</span>\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">has_secure_token</span> <span class=\"pl-pds\">on</span>: <span class=\"pl-pds\">:create</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">record</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n<span class=\"pl-s1\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">token</span> <span class=\"pl-c\"># =&gt; nil</span>\n<span class=\"pl-s1\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">save!</span>\n<span class=\"pl-s1\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">token</span> <span class=\"pl-c\"># =&gt; \"fwZcXX6SkJBJRogzMdciS7wf\"</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48912",
            "title": "Change `has_secure_token` default to `on: :initialize`",
            "date_modified": "2023-08-11T15:43:46.000Z",
            "date_published": "2023-08-09T14:23:11.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        }
    ]
}