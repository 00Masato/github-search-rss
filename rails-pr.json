{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The overhead isn't necessary for development when not using the routes command. We can omit it entirely by checking for existence of the routes command constant.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Here's a quick benchmark:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# frozen_string_literal: true\n\nrequire &quot;bundler/inline&quot;\n\ngemfile(true) do\n  source &quot;https://rubygems.org&quot;\n\n  gem &quot;rails&quot;, path: &quot;.&quot;\n  gem &quot;benchmark-ips&quot;\nend\n\nrequire &quot;benchmark/ips&quot;\nrequire &quot;action_controller/railtie&quot;\n\nclass TestApp &lt; Rails::Application\n  config.root = __dir__\n  config.hosts &lt;&lt; &quot;example.org&quot;\n  config.secret_key_base = &quot;secret_key_base&quot;\n\n  config.logger = Logger.new($stdout)\n  Rails.logger  = config.logger\n  config.eager_load = true\nend\n\nRails.application.initialize!\n\nBenchmark.ips do |x|\n  x.report(&quot;draw&quot;) do\n    Rails.application.routes.draw do\n      300.times.each do |n|\n        get &quot;/#{n}&quot;, to: &quot;a#a&quot;\n      end\n    end\n    Rails.application.instance_variable_set(:@routes, nil)\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># frozen_string_literal: true</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"bundler/inline\"</span>\n\n<span class=\"pl-en\">gemfile</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">source</span> <span class=\"pl-s\">\"https://rubygems.org\"</span>\n\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">path</span>: <span class=\"pl-s\">\".\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"benchmark-ips\"</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"benchmark/ips\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"action_controller/railtie\"</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">TestApp</span> &lt; <span class=\"pl-v\">Rails</span>::<span class=\"pl-v\">Application</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">root</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">__dir__</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">hosts</span> &lt;&lt; <span class=\"pl-s\">\"example.org\"</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">secret_key_base</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">\"secret_key_base\"</span>\n\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span>$stdout<span class=\"pl-kos\">)</span>\n  <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span>  <span class=\"pl-c1\">=</span> <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">eager_load</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">initialize!</span>\n\n<span class=\"pl-v\">Benchmark</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ips</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">x</span>|\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"draw\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">routes</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">draw</span> <span class=\"pl-k\">do</span>\n      <span class=\"pl-c1\">300</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">times</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">n</span>|\n        <span class=\"pl-en\">get</span> <span class=\"pl-s\">\"/<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">n</span><span class=\"pl-kos\">}</span></span>\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">to</span>: <span class=\"pl-s\">\"a#a\"</span>\n      <span class=\"pl-k\">end</span>\n    <span class=\"pl-k\">end</span>\n    <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">instance_variable_set</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:@routes</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">nil</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Before:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw     8.000 i/100ms\nCalculating -------------------------------------\n                draw     85.752 (± 2.3%) i/s -    432.000 in   5.040986s\"><pre class=\"notranslate\"><code class=\"notranslate\">ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw     8.000 i/100ms\nCalculating -------------------------------------\n                draw     85.752 (± 2.3%) i/s -    432.000 in   5.040986s\n</code></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw     9.000 i/100ms\nCalculating -------------------------------------\n                draw    101.938 (± 2.0%) i/s -    513.000 in   5.034786s\"><pre class=\"notranslate\"><code class=\"notranslate\">ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw     9.000 i/100ms\nCalculating -------------------------------------\n                draw    101.938 (± 2.0%) i/s -    513.000 in   5.034786s\n</code></pre></div>\n<p dir=\"auto\">Marginally quicker. With a larger app, this shaves off around 50-100ms of draw time.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">ActionDispatch::Routing::Mapper.route_source_locations</code> to true only when routing command if defined.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52303",
            "title": "Only enable routing source locations when using routes command",
            "date_modified": "2024-07-11T01:00:37.000Z",
            "date_published": "2024-07-11T00:37:01.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/987638?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The current code expects <code class=\"notranslate\">active_record</code> to be loaded before <code class=\"notranslate\">active_job</code>. But I think there are no guarantees about load orders. At least, <code class=\"notranslate\">active_job</code> is loaded before <code class=\"notranslate\">active_record</code> in a newer application.</p>\n<p dir=\"auto\">In that case, <code class=\"notranslate\">EnqueueAfterTransactionCommit</code> isn't loaded and an application that uses <code class=\"notranslate\">enqueue_after_transaction_commit</code> in jobs will fail with the following error.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"app/jobs/user_job.rb:2:in `&lt;class:UserJob&gt;': undefined method `enqueue_after_transaction_commit=' for class UserJob (NoMethodError)\"><pre class=\"notranslate\"><code class=\"notranslate\">app/jobs/user_job.rb:2:in `&lt;class:UserJob&gt;': undefined method `enqueue_after_transaction_commit=' for class UserJob (NoMethodError)\n</code></pre></div>\n<p dir=\"auto\">I removed <code class=\"notranslate\">active_record</code> hook to fix this. Active Record are only used inside methods in ``EnqueueAfterTransactionCommit`. So I think it's safe to load the module without Active Record.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52301",
            "title": "Allow to set `enqueue_after_transaction_commit` to jobs when `eager_load` is true",
            "date_modified": "2024-07-10T22:51:00.000Z",
            "date_published": "2024-07-10T06:33:53.000Z",
            "author": {
                "name": "y-yagi",
                "url": "https://github.com/y-yagi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/717637?u=685121f22ceb01c9e4650173c8eedae4cd070aa9&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This is a backport of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2194577828\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51348\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51348/hovercard\" href=\"https://github.com/rails/rails/pull/51348\">#51348</a> for the 7-1-stable branch. The motivation is the same as what was detailed in the original PR</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">N/A</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">N/A</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature. N/A</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included. N/A</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52300",
            "title": "[BACKPORT] Extract check for VALUES/row_alias syntax",
            "date_modified": "2024-07-10T02:30:53.000Z",
            "date_published": "2024-07-10T02:29:06.000Z",
            "author": {
                "name": "pjambet",
                "url": "https://github.com/pjambet"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/7911294?u=f39338498a634d2861ebcd94c2419715e58d258b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to make it easier to provide programatic access to details about requested shard/role.</p>\n<h3 dir=\"auto\">Detail</h3>\n<ul dir=\"auto\">\n<li>This Pull Request introduces a more specific exception <code class=\"notranslate\">NoConnectionPool</code> as a subclass of the previously-raised ConnectionNotEstablished. The new exception is used to handle cases where a requested database connection pool has not been found.</li>\n<li>The <code class=\"notranslate\">retrieve_connection_pool</code> method in <code class=\"notranslate\">connection_handler.rb</code> has been modified to provide more specific error messages reflecting if we're missing a shard and/or a role.</li>\n<li>Test cases have been updated to reflect these changes.</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a></p>",
            "url": "https://github.com/rails/rails/pull/52298",
            "title": "Raise specific exception when a pool is not configured",
            "date_modified": "2024-07-10T18:58:49.000Z",
            "date_published": "2024-07-09T21:19:03.000Z",
            "author": {
                "name": "hharen",
                "url": "https://github.com/hharen"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/170034?u=a921ef36a26d3da448fde275fd40b1e7d8a3f497&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This introduces a new config setting: <code class=\"notranslate\">action_dispatch.verbose_redirect_logs</code>. It logs the source location of redirects. It works similarly to <code class=\"notranslate\">active_record.verbose_query_logs</code> and <code class=\"notranslate\">active_job.verbose_enqueue_logs</code>.</p>\n<p dir=\"auto\">Redirects are of course used a lot. They are often defined in different locations. For example in your authentication code, authorization code, fallbacks for resources that can't be found, and to redirect users to a different page after performing an action, possibly with multiple redirect options in one controller action.</p>\n<p dir=\"auto\">I think it would be beneficial to know exactly which line of code triggered a redirect.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This adds a config setting that logs the source location of the redirect.</p>\n<p dir=\"auto\">There are three main use cases, they would look like this:</p>\n<ol dir=\"auto\">\n<li>Redirects in filters (these already have a \"filter chain halted\" log as well, which points you in the right direction a bit, but the exact code location can still be useful):</li>\n</ol>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Redirected to http://localhost:3000/\n↳ app/controllers/posts_controller.rb:76:in `check_something'\nFilter chain halted as :redirect rendered or redirected\nCompleted 302 Found in 18ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)\"><pre class=\"notranslate\"><code class=\"notranslate\">Redirected to http://localhost:3000/\n↳ app/controllers/posts_controller.rb:76:in `check_something'\nFilter chain halted as :redirect rendered or redirected\nCompleted 302 Found in 18ms (ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)\n</code></pre></div>\n<ol start=\"2\" dir=\"auto\">\n<li>Redirects in controller actions:</li>\n</ol>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Redirected to http://localhost:3000/posts/7\n↳ app/controllers/posts_controller.rb:32:in `block (2 levels) in create'\nCompleted 302 Found in 36ms (ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)\"><pre class=\"notranslate\"><code class=\"notranslate\">Redirected to http://localhost:3000/posts/7\n↳ app/controllers/posts_controller.rb:32:in `block (2 levels) in create'\nCompleted 302 Found in 36ms (ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)\n</code></pre></div>\n<ol start=\"3\" dir=\"auto\">\n<li>Redirects in routes:</li>\n</ol>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Started GET &quot;/redirect&quot; for ::1 at 2024-07-09 12:40:23 +0200\nRedirected to http://localhost:3000/\n↳ /Users/dennis/Code/rails-test-app/config/routes.rb:14\nCompleted 301 Moved Permanently in 9ms\"><pre class=\"notranslate\"><code class=\"notranslate\">Started GET \"/redirect\" for ::1 at 2024-07-09 12:40:23 +0200\nRedirected to http://localhost:3000/\n↳ /Users/dennis/Code/rails-test-app/config/routes.rb:14\nCompleted 301 Moved Permanently in 9ms\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<hr>\n<p dir=\"auto\">There are a few points I'm not sure how to approach and like some guidance in:</p>\n<ol dir=\"auto\">\n<li>The test for for dispatch (<code class=\"notranslate\">actionpack/test/dispatch/routing/log_subscriber_test.rb</code>) breaks currently. The code relies on <a href=\"https://github.com/rails/rails/blob/16f1222753cac0a554a2acd8f4ffa3f23d51d945/actionpack/lib/action_dispatch/http/request.rb#L161-L163\"><code class=\"notranslate\">request.routes</code></a> to be set (which is true for actual applications), but it's <code class=\"notranslate\">nil</code> in the tests. I'm not sure if going through <code class=\"notranslate\">request.routes</code> is the best approach or what needs to change in the tests to make them pass or have the routes available.</li>\n<li>The source location for redirects from the router looks slightly different. This is because it uses <a href=\"https://github.com/rails/rails/blob/16f1222753cac0a554a2acd8f4ffa3f23d51d945/actionpack/lib/action_dispatch/routing/mapper.rb#L378-L408\">the existing <code class=\"notranslate\">source_location</code> implementation</a>, which for example shows the absolute path. I'm not sure if that's fine, or we want to get that in line with how the backtrace cleaner is used in other places.</li>\n<li>This is the 3rd very similar config setting (<code class=\"notranslate\">verbose_query_logs</code>, <code class=\"notranslate\">verbose_enqueue_logs</code> and now <code class=\"notranslate\">verbose_redirect_logs</code>). I can imagine most people will either set all or none of them. Would it make sense to consolidate them into one setting, or maybe have a setting that sets all 3 at the same time? The code for them is also very similar. Happy to work in a direction that unifies them if that's desirable.</li>\n</ol>",
            "url": "https://github.com/rails/rails/pull/52297",
            "title": "Add setting for logging redirect source locations",
            "date_modified": "2024-07-09T14:22:51.000Z",
            "date_published": "2024-07-09T14:22:46.000Z",
            "author": {
                "name": "djfpaagman",
                "url": "https://github.com/djfpaagman"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1151753?u=0ae97787ee7a5583ea7b5bdb149c32e84fae699b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><ul dir=\"auto\">\n<li><strong>test copying of default_proc in to_hash</strong></li>\n<li><strong>add testing of update w/ indifferent_access</strong></li>\n<li><strong>add update with block test</strong></li>\n</ul>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because I wanted to improve the test suite.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a couple tests for untested features and reworks a test that was confused.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52296",
            "title": "Some test improvements for hash with indifferent access",
            "date_modified": "2024-07-10T22:05:42.000Z",
            "date_published": "2024-07-09T14:02:16.000Z",
            "author": {
                "name": "kwstannard",
                "url": "https://github.com/kwstannard"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14007?u=7d74620cf38d2057b13e9cbb7ee8c6ae35c1d019&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52135.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2355724770\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52135\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52135/hovercard\" href=\"https://github.com/rails/rails/issues/52135\">#52135</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">A reflection is <a href=\"https://github.com/rails/rails/blame/56b83a2b4108b6d31a3b2b769e8e363640b649d6/activerecord/lib/active_record/table_metadata.rb#L30\">currently found by table name</a> when retrieving the associated table. Obviously, if the association name doesn't match the table name, no reflection is found. This only becomes a problem when custom types are involved.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This implementation uses a custom hash to represent the \"where values\" along with the reflection.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52291",
            "title": "For an association scope, pass the reflection along with the where values",
            "date_modified": "2024-07-09T23:54:35.000Z",
            "date_published": "2024-07-08T22:30:15.000Z",
            "author": {
                "name": "justinko",
                "url": "https://github.com/justinko"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/10546292?u=dfcfd0a6a1b7fb713a16815dbcb19f6a03aefb27&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This is a refactor to the <code class=\"notranslate\">ParserExtractor</code> to use Prism instead of Ripper for finding comments.<br>\ncc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/kddnewton/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/kddnewton\">@kddnewton</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">I referred to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2124354975\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51006\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51006/hovercard\" href=\"https://github.com/rails/rails/pull/51006\">#51006</a> on how to load the Prism module, so some of the code/comments are similar. The main code in the diff here is the new definition of the <code class=\"notranslate\">annotations</code> method (most everything else is just the old Parser class nested in <code class=\"notranslate\">if defined?(Prism)...else...end</code>):</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"def annotations(file)\n  Prism.parse_file(file).comments.map do |comment|\n    Annotation.new(comment.location.start_line, $1, $2) if comment.location.slice =~ pattern\n  end.compact\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">def</span> <span class=\"pl-en\">annotations</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-v\">Prism</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">parse_file</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">comments</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">map</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">comment</span>|\n    <span class=\"pl-v\">Annotation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">comment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">location</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">start_line</span><span class=\"pl-kos\">,</span> $1<span class=\"pl-kos\">,</span> $2<span class=\"pl-kos\">)</span> <span class=\"pl-k\">if</span> <span class=\"pl-s1\">comment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">location</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">slice</span> =~ <span class=\"pl-en\">pattern</span>\n  <span class=\"pl-k\">end</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">compact</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">We could potentially use Prism for the <code class=\"notranslate\">PatternExtractor</code> as well, but I at least wanted to propose the change to the <code class=\"notranslate\">ParserExtractor</code> to see if we wanted to use Prism in this way.</p>\n<p dir=\"auto\"></p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/9f178ada796a89c01f952fc05810b58b6f8682fc/railties/lib/rails/source_annotation_extractor.rb#L40-L52\">rails/railties/lib/rails/source_annotation_extractor.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 40 to 52\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/9f178ada796a89c01f952fc05810b58b6f8682fc\">9f178ad</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L40\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"40\"></td>\n          <td id=\"LC40\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\"># Wraps a regular expression that will iterate through a file's lines and</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L41\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"41\"></td>\n          <td id=\"LC41\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\"># test each one for the given pattern.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L42\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"42\"></td>\n          <td id=\"LC42\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">class</span> <span class=\"pl-v\">PatternExtractor</span> &lt; <span class=\"pl-v\">Struct</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:pattern</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L43\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"43\"></td>\n          <td id=\"LC43\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">def</span> <span class=\"pl-en\">annotations</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L44\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"44\"></td>\n          <td id=\"LC44\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-s1\">lineno</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">0</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L45\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"45\"></td>\n          <td id=\"LC45\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L46\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"46\"></td>\n          <td id=\"LC46\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">readlines</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">encoding</span>: <span class=\"pl-v\">Encoding</span>::<span class=\"pl-c1\">BINARY</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">inject</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">list</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">line</span>| </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L47\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"47\"></td>\n          <td id=\"LC47\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-s1\">lineno</span> += <span class=\"pl-c1\">1</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L48\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"48\"></td>\n          <td id=\"LC48\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-k\">next</span> <span class=\"pl-s1\">list</span> <span class=\"pl-k\">unless</span> <span class=\"pl-s1\">line</span> =~ <span class=\"pl-en\">pattern</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L49\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"49\"></td>\n          <td id=\"LC49\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-s1\">list</span> &lt;&lt; <span class=\"pl-v\">Annotation</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">lineno</span><span class=\"pl-kos\">,</span> $1<span class=\"pl-kos\">,</span> $2<span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L50\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"50\"></td>\n          <td id=\"LC50\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L51\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"51\"></td>\n          <td id=\"LC51\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L52\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"52\"></td>\n          <td id=\"LC52\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">As far as tests goes, I see that we have tests in <a href=\"https://github.com/rails/rails/blob/main/railties/test/commands/notes_test.rb\">railties/test/commands/notes_test.rb</a>, but since this PR is a refactor as opposed to a bug fix or a feature, I decided to leave the tests as-is. If there is something we want to test specifically, I'm willing to look over <code class=\"notranslate\">notes_test.rb</code> to see what I can add.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52287",
            "title": "Use Prism for `ParserExtractor` in `SourceAnnotationExtractor`",
            "date_modified": "2024-07-09T20:36:58.000Z",
            "date_published": "2024-07-08T07:05:09.000Z",
            "author": {
                "name": "gazayas",
                "url": "https://github.com/gazayas"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/44280450?u=5d0b7f0d7535c39131a9d2d513cbf4691236b6e4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">PostgreSQL has datatype <code class=\"notranslate\">macaddr8</code> but rails does not support in now.</p>\n<p dir=\"auto\"><a href=\"https://www.postgresql.org/docs/current/datatype-net-types.html#DATATYPE-MACADDR8\" rel=\"nofollow\">https://www.postgresql.org/docs/current/datatype-net-types.html#DATATYPE-MACADDR8</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52285",
            "title": "Add `macaddr8` type in PostgreSQL",
            "date_modified": "2024-07-10T15:24:06.000Z",
            "date_published": "2024-07-07T03:49:57.000Z",
            "author": {
                "name": "heka1024",
                "url": "https://github.com/heka1024"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/58702?u=3b098e8231945420ffdf22e1f0af0591d71e45ce&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Images and other attachments added to a rich text area aren't being displayed in the editor when you go back to edit the record again.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52233.\">Fixes</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2381123260\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52233\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52233/hovercard\" href=\"https://github.com/rails/rails/issues/52233\">#52233</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request makes it so that if the <code class=\"notranslate\">action-text-attachment</code> element contains an empty <code class=\"notranslate\">content</code> attribute, that attribute will be stripped out during the rendering of attachments.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">None</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52281",
            "title": "ActionText::Content - Strip `content` attribute if it is empty",
            "date_modified": "2024-07-10T16:50:07.000Z",
            "date_published": "2024-07-05T18:45:13.000Z",
            "author": {
                "name": "jagthedrummer",
                "url": "https://github.com/jagthedrummer"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/47554?u=7f919feee43d319ec01c7b135f4d1868a31bddc3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51327.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2186612406\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51327\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51327/hovercard\" href=\"https://github.com/rails/rails/issues/51327\">#51327</a></p>\n\n<p dir=\"auto\">This Pull Request has been created to move all of the calls to <code class=\"notranslate\">ActiveSupport.run_load_hooks</code> outside of their respective constant definitions. This is to ensure that the constant is fully defined before the <code class=\"notranslate\">run_load_hooks</code> method is called.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li><del>[] Tests are added or updated if you fix a bug or add a feature.</del></li>\n<li><del>[ ] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</del></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52280",
            "title": "[Fix #51327] Invoke `ActiveSupport.run_load_hooks` after constant definitions `end`",
            "date_modified": "2024-07-05T20:17:10.000Z",
            "date_published": "2024-07-05T18:31:46.000Z",
            "author": {
                "name": "bensheldon",
                "url": "https://github.com/bensheldon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/787783?u=5fda346e35dce7edb3ad596c1a96e0b09b48e090&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because of readability issues with the gotcha section of the select form options helper documentation.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the select form options helper gotcha documentation.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52278",
            "title": "[ci skip] Improve readability of select form options helper gotcha documentation",
            "date_modified": "2024-07-10T20:01:52.000Z",
            "date_published": "2024-07-05T12:00:08.000Z",
            "author": {
                "name": "markzalar",
                "url": "https://github.com/markzalar"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/7865030?u=a91840c5a5d8e811d0afa26717f1fd56b4d902e1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I18n is intialized with file watchers for all translation paths when reloading is enabled.</p>\n<p dir=\"auto\">This includes translations contained within gems; which the user will not be editing in development. This adds unnecessary performance overhead.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This change ensures we're only watching the files we care about.</p>\n<p dir=\"auto\"><strong>Before Pull Request</strong><br>\n<code class=\"notranslate\">EventedFileUpdateChecker</code> watched all these files</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"[\n  &quot;/Users/schwad/.gem/ruby/3.3.3/gems/validate_url-1.0.15/lib/locale/ar.yml&quot;,\n  ...\n  &quot;/Users/schwad/path/to/my/app/config/locales/foo/en.yml&quot;\n  ...\n]\"><pre class=\"notranslate\"><span class=\"pl-kos\">[</span>\n  <span class=\"pl-s\">\"/Users/schwad/.gem/ruby/3.3.3/gems/validate_url-1.0.15/lib/locale/ar.yml\"</span><span class=\"pl-kos\">,</span>\n  ...\n  <span class=\"pl-s\">\"/Users/schwad/path/to/my/app/config/locales/foo/en.yml\"</span>\n  ...\n<span class=\"pl-kos\">]</span></pre></div>\n<p dir=\"auto\"><strong>After Pull Request</strong><br>\nNow:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"[\n  &quot;/Users/schwad/path/to/my/app/config/locales/foo/en.yml&quot;\n  ...\n]\"><pre class=\"notranslate\"><code class=\"notranslate\">[\n  \"/Users/schwad/path/to/my/app/config/locales/foo/en.yml\"\n  ...\n]\n</code></pre></div>\n<h2 dir=\"auto\">Benchmark - <code class=\"notranslate\">I18n.initialize_i18n</code></h2>\n<p dir=\"auto\">I benchmarked this by running <code class=\"notranslate\">benchmark-ips</code> twice; with <code class=\"notranslate\">I18n.initialize_i18n</code> against <code class=\"notranslate\">main</code> vs this PR. I checked against varying distributions of local translations &amp;&amp; gem locations, up to 10000.</p>\n<details>\n  <summary>\n    Script\n  </summary>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"require &quot;bundler/inline&quot;\nrequire 'fileutils'\n\ngemfile(true) do\n  source &quot;https://rubygems.org&quot;\n\n  gem &quot;rails&quot;, github: &quot;rails/rails&quot;, branch: &quot;main&quot;\n  # gem &quot;rails&quot;, github: &quot;schwad/rails&quot;, branch: &quot;schwad/only_watch_local_translations&quot;\n  gem &quot;benchmark-ips&quot;\nend\n\nrequire &quot;rails/all&quot;\n\nclass TinyApp &lt; Rails::Application;end\nTinyApp.config.eager_load = false\n# TinyApp.initialize!\n\n\n# Generate a sample Rails locale file content\ndef generate_locale_file_content(file_path, extra_lines=500)\n  content = &lt;&lt;~YAML\n    en:\n      hello: &quot;Hello, World!&quot;\n      goodbye: &quot;Goodbye, World!&quot;\n      greeting: &quot;Welcome, %{name}!&quot;\n  YAML\n\n  extra_lines.times do |i|\n    content += &quot;  key_#{i}: value_#{i}\\n&quot;\n  end\n\n\n  File.open(file_path, &quot;w&quot;) { |file| file.write(content) }\nend\n\nSCENARIOS = {\n  &quot;10 local 10 gem&quot;       =&gt; [10,10],\n  &quot;10 local 0 gem&quot;        =&gt; [10,0],\n  &quot;0 local 10 gem&quot;        =&gt; [0,10],\n  &quot;100 local 100 gem&quot;     =&gt; [100,100],\n  &quot;100 local 50 gem&quot;      =&gt; [100,50],\n  &quot;100 local 0 gem&quot;       =&gt; [100,0],\n  &quot;50 local 100 gem&quot;      =&gt; [50,100],\n  &quot;0 local 100 gem&quot;       =&gt; [0,100],\n  &quot;1000 local 1000 gem&quot;   =&gt; [1000,1000],\n  &quot;1000 local 500 gem&quot;    =&gt; [1000,500],\n  &quot;1000 local 0 gem&quot;      =&gt; [1000,0],\n  &quot;500 local 1000 gem&quot;    =&gt; [500,1000],\n  &quot;10000 local 10000 gem&quot; =&gt; [10000,10000],\n  &quot;10000 local 5000 gem&quot;  =&gt; [10000,5000],\n  &quot;10000 local 0 gem&quot;     =&gt; [10000,0],\n  &quot;5000 local 10000 gem&quot;  =&gt; [5000,10000],\n  &quot;0 local 10000 gem&quot;     =&gt; [0,10000],\n}\n\nlocal_path = &quot;#{TinyApp.root.to_s}/config/locales/&quot;\ngem_path = &quot;#some_gem/config/locales/&quot;\nFileUtils.mkdir_p(local_path) unless Dir.exist?(local_path)\nFileUtils.mkdir_p(gem_path) unless Dir.exist?(gem_path)\n\n\n\nSCENARIOS.each_pair do |name, value|\n  puts\n  puts &quot; #{name} &quot;.center(80, &quot;=&quot;)\n  puts\n\n  I18n.load_path = []\n\n  value[0].times do |i|\n    I18n.load_path &lt;&lt; &quot;#{TinyApp.root.to_s}/config/locales/#{i}.yml&quot;\n    file_path = &quot;#{local_path}/#{i}.yml&quot;\n    generate_locale_file_content(file_path)\n  end\n  value[1].times do |x|\n    I18n.load_path &lt;&lt; &quot;#some_gem/config/locales/#{x}.yml&quot;\n    file_path = &quot;#{gem_path}/#{x}.yml&quot;\n    generate_locale_file_content(file_path)\n  end\n\n  Benchmark.ips do |x|\n    x.report(&quot;ImprovementPR&quot;) do\n\n      # Redeclare the Railtie class to avoid the @i18n_inited check\n      module I18n\n        class Railtie &lt; Rails::Railtie\n          @i18n_inited = false\n        end\n      end\n      I18n::Railtie.initialize_i18n(TinyApp)\n    end\n    x.compare!\n  end\nend\n\nFileUtils.rm_rf(gem_path) if File.exist?(gem_path)\nFile.rm_rf(local_path) if File.exist?(local_path)\"><pre class=\"notranslate\"><span class=\"pl-en\">require</span> <span class=\"pl-s\">\"bundler/inline\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">'fileutils'</span>\n\n<span class=\"pl-en\">gemfile</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">source</span> <span class=\"pl-s\">\"https://rubygems.org\"</span>\n\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">github</span>: <span class=\"pl-s\">\"rails/rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">branch</span>: <span class=\"pl-s\">\"main\"</span>\n  <span class=\"pl-c\"># gem \"rails\", github: \"schwad/rails\", branch: \"schwad/only_watch_local_translations\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"benchmark-ips\"</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"rails/all\"</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">TinyApp</span> &lt; <span class=\"pl-v\">Rails</span>::<span class=\"pl-v\">Application</span><span class=\"pl-kos\">;</span><span class=\"pl-k\">end</span>\n<span class=\"pl-v\">TinyApp</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">eager_load</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">false</span>\n<span class=\"pl-c\"># TinyApp.initialize!</span>\n\n\n<span class=\"pl-c\"># Generate a sample Rails locale file content</span>\n<span class=\"pl-k\">def</span> <span class=\"pl-en\">generate_locale_file_content</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file_path</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">extra_lines</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">500</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-s1\">content</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">&lt;&lt;~YAML</span><span class=\"pl-s\"></span>\n<span class=\"pl-s\">    en:</span>\n<span class=\"pl-s\">      hello: \"Hello, World!\"</span>\n<span class=\"pl-s\">      goodbye: \"Goodbye, World!\"</span>\n<span class=\"pl-s\">      greeting: \"Welcome, %{name}!\"</span>\n<span class=\"pl-s\">  YAML</span>\n\n  <span class=\"pl-s1\">extra_lines</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">times</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">i</span>|\n    <span class=\"pl-s1\">content</span> += <span class=\"pl-s\">\"  key_<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">}</span></span>: value_<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">}</span></span><span class=\"pl-cce\">\\n</span>\"</span>\n  <span class=\"pl-k\">end</span>\n\n\n  <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">open</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file_path</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"w\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">file</span>| <span class=\"pl-s1\">file</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">write</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">content</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-c1\">SCENARIOS</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span>\n  <span class=\"pl-s\">\"10 local 10 gem\"</span>       <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">10</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">10</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"10 local 0 gem\"</span>        <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">10</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">0</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"0 local 10 gem\"</span>        <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">0</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">10</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"100 local 100 gem\"</span>     <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"100 local 50 gem\"</span>      <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">50</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"100 local 0 gem\"</span>       <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">0</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"50 local 100 gem\"</span>      <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">50</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"0 local 100 gem\"</span>       <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">0</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"1000 local 1000 gem\"</span>   <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">1000</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">1000</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"1000 local 500 gem\"</span>    <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">1000</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">500</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"1000 local 0 gem\"</span>      <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">1000</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">0</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"500 local 1000 gem\"</span>    <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">500</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">1000</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"10000 local 10000 gem\"</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">10000</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">10000</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"10000 local 5000 gem\"</span>  <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">10000</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">5000</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"10000 local 0 gem\"</span>     <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">10000</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">0</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"5000 local 10000 gem\"</span>  <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">5000</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">10000</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-s\">\"0 local 10000 gem\"</span>     <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-c1\">0</span><span class=\"pl-kos\">,</span><span class=\"pl-c1\">10000</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span>\n<span class=\"pl-kos\">}</span>\n\n<span class=\"pl-s1\">local_path</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">\"<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-v\">TinyApp</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">root</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_s</span><span class=\"pl-kos\">}</span></span>/config/locales/\"</span>\n<span class=\"pl-s1\">gem_path</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">\"#some_gem/config/locales/\"</span>\n<span class=\"pl-v\">FileUtils</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">mkdir_p</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">local_path</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">unless</span> <span class=\"pl-v\">Dir</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">exist?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">local_path</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-v\">FileUtils</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">mkdir_p</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">gem_path</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">unless</span> <span class=\"pl-v\">Dir</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">exist?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">gem_path</span><span class=\"pl-kos\">)</span>\n\n\n\n<span class=\"pl-c1\">SCENARIOS</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each_pair</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">name</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">value</span>|\n  <span class=\"pl-en\">puts</span>\n  <span class=\"pl-en\">puts</span> <span class=\"pl-s\">\" <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">name</span><span class=\"pl-kos\">}</span></span> \"</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">center</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">80</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"=\"</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-en\">puts</span>\n\n  <span class=\"pl-v\">I18n</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">load_path</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span>\n\n  <span class=\"pl-s1\">value</span><span class=\"pl-kos\">[</span><span class=\"pl-c1\">0</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">times</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">i</span>|\n    <span class=\"pl-v\">I18n</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">load_path</span> &lt;&lt; <span class=\"pl-s\">\"<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-v\">TinyApp</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">root</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_s</span><span class=\"pl-kos\">}</span></span>/config/locales/<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">}</span></span>.yml\"</span>\n    <span class=\"pl-s1\">file_path</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">\"<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">local_path</span><span class=\"pl-kos\">}</span></span>/<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">}</span></span>.yml\"</span>\n    <span class=\"pl-en\">generate_locale_file_content</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file_path</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n  <span class=\"pl-s1\">value</span><span class=\"pl-kos\">[</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">times</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">x</span>|\n    <span class=\"pl-v\">I18n</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">load_path</span> &lt;&lt; <span class=\"pl-s\">\"#some_gem/config/locales/<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">x</span><span class=\"pl-kos\">}</span></span>.yml\"</span>\n    <span class=\"pl-s1\">file_path</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">\"<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">gem_path</span><span class=\"pl-kos\">}</span></span>/<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">x</span><span class=\"pl-kos\">}</span></span>.yml\"</span>\n    <span class=\"pl-en\">generate_locale_file_content</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file_path</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-v\">Benchmark</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ips</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">x</span>|\n    <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"ImprovementPR\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n\n      <span class=\"pl-c\"># Redeclare the Railtie class to avoid the @i18n_inited check</span>\n      <span class=\"pl-k\">module</span> <span class=\"pl-v\">I18n</span>\n        <span class=\"pl-k\">class</span> <span class=\"pl-v\">Railtie</span> &lt; <span class=\"pl-v\">Rails</span>::<span class=\"pl-v\">Railtie</span>\n          <span class=\"pl-c1\">@i18n_inited</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">false</span>\n        <span class=\"pl-k\">end</span>\n      <span class=\"pl-k\">end</span>\n      <span class=\"pl-v\">I18n</span>::<span class=\"pl-v\">Railtie</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">initialize_i18n</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">TinyApp</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-k\">end</span>\n    <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">compare!</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-v\">FileUtils</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rm_rf</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">gem_path</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">if</span> <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">exist?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">gem_path</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rm_rf</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">local_path</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">if</span> <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">exist?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">local_path</span><span class=\"pl-kos\">)</span></pre></div>\n</details>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"=============================== 10 local 10 gem ================================\nCalculating -------------------------------------\n       Rails#Main      1.754k (±17.4%) i/s -      8.947k in   5.250369s\n       ImprovementPR   1.812k (±17.7%) i/s -      8.928k in   5.074040s\n\n================================ 10 local 0 gem ================================\nCalculating -------------------------------------\n       Rails#Main      1.114k (± 7.1%) i/s -      5.544k in   5.000581s\n       ImprovementPR   1.051k (± 8.7%) i/s -      5.280k in   5.066276s\n\n================================ 0 local 10 gem ================================\nCalculating -------------------------------------\n       Rails#Main    860.960 (± 4.4%) i/s -      4.312k in   5.018215s\n       ImprovementPR 890.677 (± 4.2%) i/s -      4.500k in   5.060871s\n\n============================== 100 local 100 gem ===============================\nCalculating -------------------------------------\n       Rails#Main    426.028 (± 1.9%) i/s -      2.150k in   5.048368s\n       ImprovementPR 513.826 (± 1.9%) i/s -      2.600k in   5.062177s\n\n=============================== 100 local 50 gem ===============================\nCalculating -------------------------------------\n       Rails#Main    449.178 (± 2.9%) i/s -      2.250k in   5.014045s\n       ImprovementPR 487.010 (± 1.8%) i/s -      2.450k in   5.032367s\n\n=============================== 100 local 0 gem ================================\nCalculating -------------------------------------\n       Rails#Main    477.125 (± 1.5%) i/s -      2.401k in   5.033304s\n       ImprovementPR 459.398 (± 1.7%) i/s -      2.303k in   5.014521s\n\n=============================== 50 local 100 gem ===============================\nCalculating -------------------------------------\n       Rails#Main    407.719 (± 1.7%) i/s -      2.058k in   5.049146s\n       ImprovementPR 493.687 (± 1.8%) i/s -      2.499k in   5.063768s\n\n=============================== 0 local 100 gem ================================\nCalculating -------------------------------------\n       Rails#Main    443.337 (± 1.8%) i/s -      2.250k in   5.077096s\n       ImprovementPR 526.257 (± 7.8%) i/s -      2.632k in   5.047372s\n\n============================= 1000 local 1000 gem ==============================\nCalculating -------------------------------------\n       Rails#Main     75.830 (± 6.6%) i/s -    378.000 in   5.008978s\n       ImprovementPR    115.665 (± 1.7%) i/s -    583.000 in   5.042762s\n\n============================== 1000 local 500 gem ==============================\nCalculating -------------------------------------\n       Rails#Main     95.604 (± 6.3%) i/s -    477.000 in   5.012849s\n       ImprovementPR 118.272 (± 1.7%) i/s -    594.000 in   5.024444s\n\n=============================== 1000 local 0 gem ===============================\nCalculating -------------------------------------\n       Rails#Main    127.400 (± 2.4%) i/s -    648.000 in   5.088344s\n       ImprovementPR 119.764 (± 1.7%) i/s -    605.000 in   5.053437s\n\n============================== 500 local 1000 gem ==============================\nCalculating -------------------------------------\n       Rails#Main    102.431 (± 2.0%) i/s -    520.000 in   5.079499s\n       ImprovementPR 182.073 (± 2.2%) i/s -    918.000 in   5.044251s\n\n============================ 10000 local 10000 gem =============================\nCalculating -------------------------------------\n       Rails#Main      6.085 (± 0.0%) i/s -     31.000 in   5.097722s\n       ImprovementPR  11.167 (± 9.0%) i/s -     56.000 in   5.026659s\n\n============================= 10000 local 5000 gem =============================\nCalculating -------------------------------------\n       Rails#Main      7.923 (± 0.0%) i/s -     40.000 in   5.056703s\n       ImprovementPR  11.185 (± 8.9%) i/s -     56.000 in   5.025844s\n\n============================== 10000 local 0 gem ===============================\nCalculating -------------------------------------\n       Rails#Main     11.963 (± 8.4%) i/s -     60.000 in   5.040293s\n       ImprovementPR  11.823 (± 8.5%) i/s -     60.000 in   5.089172s\n\n\n============================= 5000 local 10000 gem =============================\nCalculating -------------------------------------\n       Rails#Main      8.346 (± 0.0%) i/s -     42.000 in   5.039615s\n       ImprovementPR  24.008 (± 4.2%) i/s -    120.000 in   5.012617s\n\n============================== 0 local 10000 gem ===============================\nCalculating -------------------------------------\n       Rails#Main     15.497 (± 6.5%) i/s -     78.000 in   5.069015s\n       ImprovementPR 185.827 (± 1.6%) i/s -    936.000 in   5.038608s\"><pre class=\"notranslate\"><code class=\"notranslate\">=============================== 10 local 10 gem ================================\nCalculating -------------------------------------\n       Rails#Main      1.754k (±17.4%) i/s -      8.947k in   5.250369s\n       ImprovementPR   1.812k (±17.7%) i/s -      8.928k in   5.074040s\n\n================================ 10 local 0 gem ================================\nCalculating -------------------------------------\n       Rails#Main      1.114k (± 7.1%) i/s -      5.544k in   5.000581s\n       ImprovementPR   1.051k (± 8.7%) i/s -      5.280k in   5.066276s\n\n================================ 0 local 10 gem ================================\nCalculating -------------------------------------\n       Rails#Main    860.960 (± 4.4%) i/s -      4.312k in   5.018215s\n       ImprovementPR 890.677 (± 4.2%) i/s -      4.500k in   5.060871s\n\n============================== 100 local 100 gem ===============================\nCalculating -------------------------------------\n       Rails#Main    426.028 (± 1.9%) i/s -      2.150k in   5.048368s\n       ImprovementPR 513.826 (± 1.9%) i/s -      2.600k in   5.062177s\n\n=============================== 100 local 50 gem ===============================\nCalculating -------------------------------------\n       Rails#Main    449.178 (± 2.9%) i/s -      2.250k in   5.014045s\n       ImprovementPR 487.010 (± 1.8%) i/s -      2.450k in   5.032367s\n\n=============================== 100 local 0 gem ================================\nCalculating -------------------------------------\n       Rails#Main    477.125 (± 1.5%) i/s -      2.401k in   5.033304s\n       ImprovementPR 459.398 (± 1.7%) i/s -      2.303k in   5.014521s\n\n=============================== 50 local 100 gem ===============================\nCalculating -------------------------------------\n       Rails#Main    407.719 (± 1.7%) i/s -      2.058k in   5.049146s\n       ImprovementPR 493.687 (± 1.8%) i/s -      2.499k in   5.063768s\n\n=============================== 0 local 100 gem ================================\nCalculating -------------------------------------\n       Rails#Main    443.337 (± 1.8%) i/s -      2.250k in   5.077096s\n       ImprovementPR 526.257 (± 7.8%) i/s -      2.632k in   5.047372s\n\n============================= 1000 local 1000 gem ==============================\nCalculating -------------------------------------\n       Rails#Main     75.830 (± 6.6%) i/s -    378.000 in   5.008978s\n       ImprovementPR    115.665 (± 1.7%) i/s -    583.000 in   5.042762s\n\n============================== 1000 local 500 gem ==============================\nCalculating -------------------------------------\n       Rails#Main     95.604 (± 6.3%) i/s -    477.000 in   5.012849s\n       ImprovementPR 118.272 (± 1.7%) i/s -    594.000 in   5.024444s\n\n=============================== 1000 local 0 gem ===============================\nCalculating -------------------------------------\n       Rails#Main    127.400 (± 2.4%) i/s -    648.000 in   5.088344s\n       ImprovementPR 119.764 (± 1.7%) i/s -    605.000 in   5.053437s\n\n============================== 500 local 1000 gem ==============================\nCalculating -------------------------------------\n       Rails#Main    102.431 (± 2.0%) i/s -    520.000 in   5.079499s\n       ImprovementPR 182.073 (± 2.2%) i/s -    918.000 in   5.044251s\n\n============================ 10000 local 10000 gem =============================\nCalculating -------------------------------------\n       Rails#Main      6.085 (± 0.0%) i/s -     31.000 in   5.097722s\n       ImprovementPR  11.167 (± 9.0%) i/s -     56.000 in   5.026659s\n\n============================= 10000 local 5000 gem =============================\nCalculating -------------------------------------\n       Rails#Main      7.923 (± 0.0%) i/s -     40.000 in   5.056703s\n       ImprovementPR  11.185 (± 8.9%) i/s -     56.000 in   5.025844s\n\n============================== 10000 local 0 gem ===============================\nCalculating -------------------------------------\n       Rails#Main     11.963 (± 8.4%) i/s -     60.000 in   5.040293s\n       ImprovementPR  11.823 (± 8.5%) i/s -     60.000 in   5.089172s\n\n\n============================= 5000 local 10000 gem =============================\nCalculating -------------------------------------\n       Rails#Main      8.346 (± 0.0%) i/s -     42.000 in   5.039615s\n       ImprovementPR  24.008 (± 4.2%) i/s -    120.000 in   5.012617s\n\n============================== 0 local 10000 gem ===============================\nCalculating -------------------------------------\n       Rails#Main     15.497 (± 6.5%) i/s -     78.000 in   5.069015s\n       ImprovementPR 185.827 (± 1.6%) i/s -    936.000 in   5.038608s\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52271",
            "title": "[i18n] - Do not watch translations from gems when reloading is enabled",
            "date_modified": "2024-07-10T20:37:37.000Z",
            "date_published": "2024-07-04T13:23:33.000Z",
            "author": {
                "name": "Schwad",
                "url": "https://github.com/Schwad"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/46262107?u=d88447065cd085859006068fcde0ef5ac9199b3b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52243.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2384037324\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52243\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52243/hovercard\" href=\"https://github.com/rails/rails/issues/52243\">#52243</a></p>\n<p dir=\"auto\">Currently, the <code class=\"notranslate\">validate_each</code> method in <code class=\"notranslate\">ComparisonValidator</code> checks for presence and add an error to the record object.</p>\n<p dir=\"auto\">However, for the following case,</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"validates :attribute, presence: true, comparison: { greater_than: 0 }\"><pre class=\"notranslate\"><span class=\"pl-en\">validates</span> <span class=\"pl-pds\">:attribute</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">presence</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">comparison</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">greater_than</span>: <span class=\"pl-c1\">0</span> <span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">this would cause the error to be added twice - once by the <code class=\"notranslate\">Validations::PresenceValidator</code> and then by <code class=\"notranslate\">Validations::ComparisonValidator</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<ul dir=\"auto\">\n<li>\n<p dir=\"auto\">In <code class=\"notranslate\">ComparisonValidator#validates_each</code>, added a condition to not validate <code class=\"notranslate\">presence</code> if it has already been checked.</p>\n</li>\n<li>\n<p dir=\"auto\">Made the following change as <code class=\"notranslate\">obj.blank?</code> covers <code class=\"notranslate\">obj.nil?</code> as well.</p>\n</li>\n</ul>\n<div class=\"highlight highlight-source-diff notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"- if value.nil? || value.blank?\n+ if value.blank?\"><pre class=\"notranslate\"><span class=\"pl-md\"><span class=\"pl-md\">-</span> if value.nil? || value.blank?</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span> if value.blank?</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52269",
            "title": "Bypass presence validation in comparison validator if already checked",
            "date_modified": "2024-07-08T06:47:32.000Z",
            "date_published": "2024-07-04T12:26:59.000Z",
            "author": {
                "name": "kabirpathak",
                "url": "https://github.com/kabirpathak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39735028?u=91330295c614cf3cec0b64bf242a14fc2ceb358f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because until now, the <code class=\"notranslate\">database</code> option has conflated the database adapter and the database itself. It's fine for <code class=\"notranslate\">postgres</code> and <code class=\"notranslate\">sqlite</code>, but for <code class=\"notranslate\">mysql2</code> and <code class=\"notranslate\">trilogy</code> adapters we could either use MySQL or MariaDB as the database. This becomes a problem for generating a Dev Container, since we need to add a service to docker compose with the correct database. Previously, we gave the user a MySQL database for the <code class=\"notranslate\">mysql</code> option, and a MariaDB database for the <code class=\"notranslate\">trilogy</code> option. But that is no good as it is common to use a <code class=\"notranslate\">mysql</code> database with <code class=\"notranslate\">trilogy</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">In this PR I introduce two new options, <code class=\"notranslate\">mariadb-mysql</code> and <code class=\"notranslate\">mariadb-trilogy</code>. When generating a dev container, the <code class=\"notranslate\">mysql</code> and <code class=\"notranslate\">trilogy</code> options will create a MySQL database, and the <code class=\"notranslate\">mariadb-</code> options will generate a MariaDB database. Users not generating a dev container do not need to worry about the new options and can continue using the original options, as this change only effects dev container setup.</p>\n<p dir=\"auto\">So to review here is what the options do:</p>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"mysql:\n  adapter: mysql2\n  database: mysql\n\ntrilogy:\n  adapter: trilogy\n  database: mysql\n\nmariadb-mysql:\n  adapter: mysql2\n  database: mariadb\n\nmariadb-trilogy:\n  adapter: trilogy\n  database: mariadb\"><pre class=\"notranslate\"><span class=\"pl-ent\">mysql</span>:\n  <span class=\"pl-ent\">adapter</span>: <span class=\"pl-s\">mysql2</span>\n  <span class=\"pl-ent\">database</span>: <span class=\"pl-s\">mysql</span>\n\n<span class=\"pl-ent\">trilogy</span>:\n  <span class=\"pl-ent\">adapter</span>: <span class=\"pl-s\">trilogy</span>\n  <span class=\"pl-ent\">database</span>: <span class=\"pl-s\">mysql</span>\n\n<span class=\"pl-ent\">mariadb-mysql</span>:\n  <span class=\"pl-ent\">adapter</span>: <span class=\"pl-s\">mysql2</span>\n  <span class=\"pl-ent\">database</span>: <span class=\"pl-s\">mariadb</span>\n\n<span class=\"pl-ent\">mariadb-trilogy</span>:\n  <span class=\"pl-ent\">adapter</span>: <span class=\"pl-s\">trilogy</span>\n  <span class=\"pl-ent\">database</span>: <span class=\"pl-s\">mariadb</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52266",
            "title": "Add mariadb options to application generator",
            "date_modified": "2024-07-03T19:59:56.000Z",
            "date_published": "2024-07-03T19:59:48.000Z",
            "author": {
                "name": "andrewn617",
                "url": "https://github.com/andrewn617"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/7331511?u=e5c461c2ed59b967e0925a515ab00b9a756715e3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<blockquote>\n<p dir=\"auto\">This deprecation warning will be visible starting with the release of Rails 8.0,<br>\nso it seems correct to use \"in Rails 8.1\" instead of \"in Rails 8.0\".<br>\n<a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/willnet/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/willnet\">@willnet</a></p>\n</blockquote>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1632305308\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47713\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47713/hovercard\" href=\"https://github.com/rails/rails/pull/47713\">#47713</a></p>\n<p dir=\"auto\">This Pull Request has been created because need to update the deprecation warning message.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the deprecation warning message from \"in Rails 8.0\" to \"in Rails 8.1\".</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">suggested by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/willnet/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/willnet\">@willnet</a> in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1632305308\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47713\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47713/hovercard?comment_id=1663496308&amp;comment_type=review_comment\" href=\"https://github.com/rails/rails/pull/47713#discussion_r1663496308\">#47713 (comment)</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52265",
            "title": "Update statistics.rake deprecation message",
            "date_modified": "2024-07-04T10:25:05.000Z",
            "date_published": "2024-07-03T12:58:28.000Z",
            "author": {
                "name": "JuanVqz",
                "url": "https://github.com/JuanVqz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/30030?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The tests for streaming responses, as modified in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2347543583\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52094\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52094/hovercard\" href=\"https://github.com/rails/rails/pull/52094\">#52094</a> are insufficient to determine whether the response included multiple chunks. We should ensure that this is the case, as well as ensuring that the response body conforms to an \"Enumerable Body\" as defined by the Rack specification when <code class=\"notranslate\">stream: true</code> is requested.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52253",
            "title": "Add tests for streaming chunks.",
            "date_modified": "2024-07-02T23:33:42.000Z",
            "date_published": "2024-07-02T03:24:05.000Z",
            "author": {
                "name": "ioquatix",
                "url": "https://github.com/ioquatix"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/30030?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The HTTP status code 422 was informally referred to as \"unprocessable entity\" by the WebDAV specifications. However, it was officially standardised as \"unprocessable content\" by the HTTP standards. Rack adopted this change in v3.1 and emits deprecation warnings in v3.2 (HEAD).</p>\n<p dir=\"auto\">The current released versions of Rack work acceptably with Rails, however Rack HEAD emits warnings, causing test failures.</p>\n<p dir=\"auto\">See <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2010260417\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rack/rack/issues/2137\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rack/rack/pull/2137/hovercard\" href=\"https://github.com/rack/rack/pull/2137\">rack/rack#2137</a> for more context. See <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422</a> for more details about the specifications.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Use \"422\" status code directly in <code class=\"notranslate\">exception_wrapper.rb</code> to avoid the deprecation warning. This change bypasses symbolic name lookup and thus the deprecation warning, by using the status code directly. We may prefer to change all the symbolic constants to integer values to avoid extra hash lookups. However, it's probably not a performance issue in practice.</p>\n<p dir=\"auto\">Handle both <code class=\"notranslate\">unprocessible_entity</code> and <code class=\"notranslate\">unprocessible_content</code> in <code class=\"notranslate\">ActionDispatch::Response</code> and the test assertions helper. This ensures compatibility with both symbols going forward, until Rails decides to drop support.</p>\n<h3 dir=\"auto\">Alternatives</h3>\n<p dir=\"auto\">I considered the following alternatives:</p>\n<ul dir=\"auto\">\n<li>Don’t emit the warning in Rack head, but restore it later (3.2 in about a years time?)</li>\n<li>Don’t make it an error if the warning is emitted in Rack head, in Rails test CI.</li>\n</ul>\n<p dir=\"auto\">If there is enough interest in doing it differently, I'd be willing to consider those options.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52252",
            "title": "Use direct status code to avoid deprecation warnings.",
            "date_modified": "2024-07-02T22:51:53.000Z",
            "date_published": "2024-07-02T02:06:19.000Z",
            "author": {
                "name": "ioquatix",
                "url": "https://github.com/ioquatix"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/200500?u=328252b84dc40e5d2f8cfb89de4a3e3c5ee49bb0&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because <code class=\"notranslate\">EncryptedAttributeType#type</code> incorrectly always returns <code class=\"notranslate\">:text</code> type since that's the type <code class=\"notranslate\">EncryptedAttributeType</code> inherited from. It doesn't consider the actual <code class=\"notranslate\">cast_type</code> it has.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes two things:</p>\n<ul dir=\"auto\">\n<li>it delegates <code class=\"notranslate\">type</code> method to actual <code class=\"notranslate\">cast_type</code> instead of using one from <code class=\"notranslate\">::ActiveRecord::Type::Text</code></li>\n<li>it changes type class from which <code class=\"notranslate\">EncryptedAttributeType</code> is inherited to more generic <code class=\"notranslate\">::ActiveModel::Type::Value</code>. We don't need this change to fix this issue but I thought it makes more sense to inherit from base type instead of specific <code class=\"notranslate\">::ActiveRecord::Type::Text</code>. I tried to check git history to understand why exactly this type was chosen but it was like this when this encryption feature was implemented (without an explanation) so I'm not completely sure if that's ok to change that.</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52247",
            "title": "EncryptedAttributeType#type should return cast_type's type.",
            "date_modified": "2024-07-06T14:19:35.000Z",
            "date_published": "2024-07-01T19:22:53.000Z",
            "author": {
                "name": "nashby",
                "url": "https://github.com/nashby"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Related to: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2373086217\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52217\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52217/hovercard\" href=\"https://github.com/rails/rails/pull/52217\">#52217</a><br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/28561/344766376-0eb45589-76fb-4274-9a6e-e60ceeeb8733.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjA2NjcxOTksIm5iZiI6MTcyMDY2Njg5OSwicGF0aCI6Ii8yODU2MS8zNDQ3NjYzNzYtMGViNDU1ODktNzZmYi00Mjc0LTlhNmUtZTYwY2VlZWI4NzMzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA3MTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNzExVDAzMDEzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTg0YWFiYzE3YWQ3NDJlNTRjNmEzYTVlY2IyYzYzNTU3NTJlN2UzODk1ZTQwMTUxZDI2NmNmYTliNzY5NGE0YWEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.SLA_JdUCG29gUC_qX_3yw7h16Ceqjt7l12vJ9N_DfUg\"><img width=\"872\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/28561/344766376-0eb45589-76fb-4274-9a6e-e60ceeeb8733.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjA2NjcxOTksIm5iZiI6MTcyMDY2Njg5OSwicGF0aCI6Ii8yODU2MS8zNDQ3NjYzNzYtMGViNDU1ODktNzZmYi00Mjc0LTlhNmUtZTYwY2VlZWI4NzMzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA3MTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNzExVDAzMDEzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTg0YWFiYzE3YWQ3NDJlNTRjNmEzYTVlY2IyYzYzNTU3NTJlN2UzODk1ZTQwMTUxZDI2NmNmYTliNzY5NGE0YWEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.SLA_JdUCG29gUC_qX_3yw7h16Ceqjt7l12vJ9N_DfUg\" style=\"max-width: 100%;\"></a></p>",
            "url": "https://github.com/rails/rails/pull/52245",
            "title": "Add link guidelines to guides [ci-skip]",
            "date_modified": "2024-07-10T21:08:00.000Z",
            "date_published": "2024-07-01T17:35:34.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        }
    ]
}