{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/771968?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">When <code class=\"notranslate\">ActiveRecord.marshalling_format_version</code> is set to <code class=\"notranslate\">6.1</code>, <code class=\"notranslate\">Marshal</code> will try to serialize attribute types along with the model, causing a <code class=\"notranslate\">TypeError</code> if the model uses <code class=\"notranslate\">ActiveRecord::Base.normalizes</code> with a normalization <code class=\"notranslate\">Proc</code>.</p>\n<p dir=\"auto\">This commit adds a caveat to the <code class=\"notranslate\">normalizes</code> API documentation to warn users that they should set <code class=\"notranslate\">marshalling_format_version</code> to <code class=\"notranslate\">7.1</code> if they are using <code class=\"notranslate\">normalizes</code> and marshalling the targeted model.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49871.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1970922894\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49871\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49871/hovercard\" href=\"https://github.com/rails/rails/issues/49871\">#49871</a>.</p>\n<hr>\n<p dir=\"auto\"><a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/mjankowski/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mjankowski\">@mjankowski</a> Do you feel like this would have prevented the issue you encountered?</p>",
            "url": "https://github.com/rails/rails/pull/49876",
            "title": "Add caveat about `normalizes` / `Marshal` interaction [ci-skip]",
            "date_modified": "2023-10-31T21:23:58.000Z",
            "date_published": "2023-10-31T21:23:55.000Z",
            "author": {
                "name": "jonathanhefner",
                "url": "https://github.com/jonathanhefner"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5864726?u=e92ece760a4f05c73e36340e2e4ea3abdfc7e128&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I'm trying to use memcached to de-duplicate some work. When I start the work, I want to write a key with a 5s TTL and if the key already exists, someone else is already doing the work and started at most 5s ago, so I don't have to start it again. To avoid a race condition, I'd like to use the <code class=\"notranslate\">unless_exist: true</code> option for this. If <code class=\"notranslate\">write(..., unless_exist: true)</code> returns <code class=\"notranslate\">false</code>, the key was already there and we don't need to do the work.</p>\n<p dir=\"auto\">The only problem with this approach is that the <code class=\"notranslate\">write</code> method also returns <code class=\"notranslate\">false</code> if there is some error with memcached. But in that case I do want to do the work, to ensure it gets done at least once.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR enables us to distinguish the case where the key already exists from the case where there was a memcached error, by making the fallback value returned on an error configurable.</p>\n<p dir=\"auto\">Now <code class=\"notranslate\">write(..., unless_exist: true, fallback: true)</code> will return <code class=\"notranslate\">true</code> on a memcached error and only returns <code class=\"notranslate\">false</code> when the key actually already exists.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Does it make sense to add this to more / all cache stores? Or should this be just for MemCachStore, as it makes the most sense when combined with <code class=\"notranslate\">unless_exist: true</code>?</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49873",
            "title": "Add fallback option to MemCacheStore#write",
            "date_modified": "2023-10-31T20:27:16.000Z",
            "date_published": "2023-10-31T20:23:06.000Z",
            "author": {
                "name": "Mangara",
                "url": "https://github.com/Mangara"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This moves most of the implementation of ActiveRecord::Enum to ActiveModel::Enum. This excludes:</p>\n<ul dir=\"auto\">\n<li>scopes, as scopes aren't supported by ActiveModel.</li>\n<li>method conflict detection, as this is difficult to implement in ActiveModel.</li>\n</ul>\n<p dir=\"auto\">The current implementation supports using for example integers for values and strings for labels, if defined. This required moving ActiveRecord::AttributeMethods::BeforeTypeCast to ActiveModel as well.</p>\n<p dir=\"auto\">The tests were copied from ActiveRecord and modified for ActiveModel. Scoping and method conflict detection tests were excluded.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49872",
            "title": "Introduce `ActiveModel::Enum`",
            "date_modified": "2023-10-31T20:28:59.000Z",
            "date_published": "2023-10-31T20:20:51.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49867.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1970789509\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49867\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49867/hovercard\" href=\"https://github.com/rails/rails/issues/49867\">#49867</a>.</p>\n<p dir=\"auto\">Before, when <code class=\"notranslate\">@on_duplicate = :skip if @on_duplicate == :update &amp;&amp; updatable_columns.empty?</code> line run, it incorrectly ignores the fact that custom <code class=\"notranslate\">:on_duplicate</code> was passed and <code class=\"notranslate\">@on_duplicate</code> is already configured in the <code class=\"notranslate\">configure_on_duplicate_update_logic</code> method. So I moved that logic into that method.</p>",
            "url": "https://github.com/rails/rails/pull/49870",
            "title": "Fix upserting for custom `:on_duplicate` and `:unique_by` consisting of all inserts keys",
            "date_modified": "2023-10-31T17:29:04.000Z",
            "date_published": "2023-10-31T17:10:17.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5512772?u=bbae6d87b3499e6b3662664cf4be0e84cc40f6d2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">An alternative for <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1966141228\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49815\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49815/hovercard\" href=\"https://github.com/rails/rails/pull/49815\">#49815</a></p>\n<p dir=\"auto\">Currently when we <code class=\"notranslate\">_create_record</code> or <code class=\"notranslate\">destroy_row</code> we have to iterate over the list of <code class=\"notranslate\">_reflections</code> and find the ones that are <code class=\"notranslate\">belongs_to</code> type and have a <code class=\"notranslate\">counter_cache_column</code>. This is inefficient as we don't expect the result of this selection to change during runtime. To make it prettier and more efficient we will prebuild a list of associations that have a counter cache column.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I have two reasons to implement this change</p>\n<ol dir=\"auto\">\n<li>It will unblock <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1964409838\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49801\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49801/hovercard\" href=\"https://github.com/rails/rails/pull/49801\">#49801</a> . I'd like to introduce an <code class=\"notranslate\">alias_association</code> feature which will populate <code class=\"notranslate\">_reflections</code> mapping with duplicated reflections under different keys (aliases) and the current approach relies on <code class=\"notranslate\">_reflections</code> to be unique</li>\n<li>Instead of trying to address the reflection uniqueness problem I'd like to also improve the performance of this particular piece. It seems inefficient to iterate over the same <code class=\"notranslate\">_reflections</code> hash again and again and performing the same checks to get the same result for a given model class. It would be much better to have the list we are interested in prebuilt and ready for use.</li>\n</ol>\n<p dir=\"auto\">Even though performance is not my ultimate goal and the main reason for this change is to unblock <code class=\"notranslate\">alias_association</code> here is the benchmark:</p>\n<details>\n<summary>Benchmark</summary>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"begin\n  require &quot;bundler/inline&quot;\nrescue LoadError =&gt; e\n  $stderr.puts &quot;Bundler version 1.10 or later is required. Please update your Bundler&quot;\n  raise e\nend\n\ngemfile(true) do\n  source &quot;https://rubygems.org&quot;\n  gem &quot;rails&quot;, path: &quot;.&quot;\n  gem &quot;sqlite3&quot;\n  gem &quot;benchmark-ips&quot;\n  gem &quot;debug&quot;\nend\n\nrequire &quot;active_record&quot;\nrequire &quot;benchmark/ips&quot;\n\nmodule ActiveRecord\n  module CounterCache\n    # legacy implementation\n    def each_counter_cached_associations\n      _reflections.each do |name, reflection|\n        yield association(name.to_sym) if reflection.belongs_to? &amp;&amp; reflection.counter_cache_column\n      end\n    end\n  end\nend\n\n\nActiveRecord::Base.establish_connection(adapter: &quot;sqlite3&quot;, database: &quot;:memory:&quot;)\nActiveRecord::Base.logger = Logger.new(STDOUT)\n\nActiveRecord::Schema.define do\n  create_table :users do |t|\n    t.string :first_name\n    t.string :last_name\n    t.integer :comments_count\n  end\n\n  create_table :comments do |t|\n    t.integer :user_id\n    t.text :body\n  end\nend\n\nclass User &lt; ActiveRecord::Base\nend\n\nclass Comment &lt; ActiveRecord::Base\n  belongs_to :user, counter_cache: true\nend\n\nuser = User.create!(first_name: &quot;Nikita&quot;, last_name: &quot;V&quot;)\nputs RUBY_DESCRIPTION\n\nlegacy_associations = []\nuser.send(:each_counter_cached_associations) { |assoc| legacy_associations &lt;&lt; assoc.name }\n\nnew_associations = User.counter_cached_association_names.each { |name| User.association(name) }\nraise if legacy_associations != new_associations\n\n\nBenchmark.ips do |x|\n  x.report(&quot;memoized counter_cache association names&quot;) do\n    User.counter_cached_association_names.each { |name| User.association(name) }\n  end\n\n  x.report(&quot;each_counter_cached_associations&quot;) do\n    user.send(:each_counter_cached_associations) do |assoc|\n      assoc # no need to do anything\n    end\n  end\n\n  x.compare!\nend\n\"><pre class=\"notranslate\"><span class=\"pl-k\">begin</span>\n  <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"bundler/inline\"</span>\n<span class=\"pl-k\">rescue</span> <span class=\"pl-v\">LoadError</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-en\">e</span>\n  $stderr<span class=\"pl-kos\">.</span><span class=\"pl-en\">puts</span> <span class=\"pl-s\">\"Bundler version 1.10 or later is required. Please update your Bundler\"</span>\n  <span class=\"pl-en\">raise</span> <span class=\"pl-en\">e</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">gemfile</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">source</span> <span class=\"pl-s\">\"https://rubygems.org\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">path</span>: <span class=\"pl-s\">\".\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"sqlite3\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"benchmark-ips\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"debug\"</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_record\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"benchmark/ips\"</span>\n\n<span class=\"pl-k\">module</span> <span class=\"pl-v\">ActiveRecord</span>\n  <span class=\"pl-k\">module</span> <span class=\"pl-v\">CounterCache</span>\n    <span class=\"pl-c\"># legacy implementation</span>\n    <span class=\"pl-k\">def</span> <span class=\"pl-en\">each_counter_cached_associations</span>\n      <span class=\"pl-en\">_reflections</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">name</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">reflection</span>|\n        <span class=\"pl-k\">yield</span> <span class=\"pl-en\">association</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">name</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_sym</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">if</span> <span class=\"pl-s1\">reflection</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">belongs_to?</span> &amp;&amp; <span class=\"pl-s1\">reflection</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">counter_cache_column</span>\n      <span class=\"pl-k\">end</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n\n<span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">establish_connection</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">adapter</span>: <span class=\"pl-s\">\"sqlite3\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">database</span>: <span class=\"pl-s\">\":memory:\"</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDOUT</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Schema</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">define</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:users</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n    <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">string</span> <span class=\"pl-pds\">:first_name</span>\n    <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">string</span> <span class=\"pl-pds\">:last_name</span>\n    <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">integer</span> <span class=\"pl-pds\">:comments_count</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:comments</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n    <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">integer</span> <span class=\"pl-pds\">:user_id</span>\n    <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">text</span> <span class=\"pl-pds\">:body</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Comment</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">belongs_to</span> <span class=\"pl-pds\">:user</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">counter_cache</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">first_name</span>: <span class=\"pl-s\">\"Nikita\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">last_name</span>: <span class=\"pl-s\">\"V\"</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-en\">puts</span> <span class=\"pl-c1\">RUBY_DESCRIPTION</span>\n\n<span class=\"pl-s1\">legacy_associations</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span>\n<span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">send</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:each_counter_cached_associations</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">assoc</span>| <span class=\"pl-s1\">legacy_associations</span> &lt;&lt; <span class=\"pl-s1\">assoc</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span> <span class=\"pl-kos\">}</span>\n\n<span class=\"pl-s1\">new_associations</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">counter_cached_association_names</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">name</span>| <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">association</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">name</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-en\">raise</span> <span class=\"pl-k\">if</span> <span class=\"pl-s1\">legacy_associations</span> != <span class=\"pl-s1\">new_associations</span>\n\n\n<span class=\"pl-v\">Benchmark</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ips</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">x</span>|\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"memoized counter_cache association names\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">counter_cached_association_names</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">name</span>| <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">association</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">name</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"each_counter_cached_associations\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">send</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:each_counter_cached_associations</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">assoc</span>|\n      <span class=\"pl-s1\">assoc</span> <span class=\"pl-c\"># no need to do anything</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">compare!</span>\n<span class=\"pl-k\">end</span></pre></div>\n</details>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Calculating -------------------------------------\nmemoized counter_cache association names\n                          9.143M (± 6.0%) i/s -     46.355M in   5.091984s\neach_counter_cached_associations\n                          3.401M (± 6.1%) i/s -     16.914M in   5.001597s\n\nComparison:\nmemoized counter_cache association names:  9142732.6 i/s\neach_counter_cached_associations:  3401378.9 i/s - 2.69x  slower\"><pre class=\"notranslate\"><code class=\"notranslate\">Calculating -------------------------------------\nmemoized counter_cache association names\n                          9.143M (± 6.0%) i/s -     46.355M in   5.091984s\neach_counter_cached_associations\n                          3.401M (± 6.1%) i/s -     16.914M in   5.001597s\n\nComparison:\nmemoized counter_cache association names:  9142732.6 i/s\neach_counter_cached_associations:  3401378.9 i/s - 2.69x  slower\n</code></pre></div>\n<p dir=\"auto\">I think we can even make the current solution look worse if we make the <code class=\"notranslate\">_reflections</code> hash bigger which is reasonable as models may totally have more than one association</p>\n<h3 dir=\"auto\">Concerns</h3>\n<p dir=\"auto\">I feel a little uncomfortable making counter cache to know about something low-level as db schema and know about existence of <code class=\"notranslate\">load_schema</code>. Part of me wishes there was a higher-level callback where you can register what to do when schema is done loading or schema is being reset. But this may be unjustified complexity.</p>\n<p dir=\"auto\">At the same time I feel like we may benefit from a proper abstraction as currently it feels like to many things know about schema loading code internals which complicates the refactoring, for example:<br>\n</p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/bf55e921a4ee8b9cd529c062f927cd228fdd5996/activerecord/lib/active_record/encryption/encryptable_record.rb#L126\">rails/activerecord/lib/active_record/encryption/encryptable_record.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 126\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/bf55e921a4ee8b9cd529c062f927cd228fdd5996\">bf55e92</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L126\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"126\"></td>\n          <td id=\"LC126\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">load_schema!</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<br>\n<div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/bf55e921a4ee8b9cd529c062f927cd228fdd5996/activerecord/lib/active_record/timestamp.rb#L82\">rails/activerecord/lib/active_record/timestamp.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 82\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/bf55e921a4ee8b9cd529c062f927cd228fdd5996\">bf55e92</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L82\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"82\"></td>\n          <td id=\"LC82\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">reload_schema_from_cache</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">recursive</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49866",
            "title": "Prebuild list of counter cache associations",
            "date_modified": "2023-10-31T19:22:25.000Z",
            "date_published": "2023-10-31T15:19:07.000Z",
            "author": {
                "name": "nvasilevski",
                "url": "https://github.com/nvasilevski"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/20317297?u=177bd9e550568864a33a7745a8cac192849d185a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This indentation does not feel natural, and is often trimmed by linters.</p>\n<div class=\"highlight highlight-source-diff notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"- config.consider_all_requests_local       = true\n+ config.consider_all_requests_local = true\"><pre class=\"notranslate\"><span class=\"pl-md\"><span class=\"pl-md\">-</span> config.consider_all_requests_local       = true</span>\n<span class=\"pl-mi1\"><span class=\"pl-mi1\">+</span> config.consider_all_requests_local = true</span></pre></div>",
            "url": "https://github.com/rails/rails/pull/49865",
            "title": "Reset indentation of equals assignation",
            "date_modified": "2023-10-31T14:29:12.000Z",
            "date_published": "2023-10-31T13:00:17.000Z",
            "author": {
                "name": "guillaumewrobel",
                "url": "https://github.com/guillaumewrobel"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6301525?u=dcbf7e6eec3f6fe171da0aa8acb29ebd8fdd4d95&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because <code class=\"notranslate\">service</code> kwarg in <code class=\"notranslate\">has_one_attached</code> and <code class=\"notranslate\">has_many_attached</code> methods accepts only symbols as values. It allows to define a <code class=\"notranslate\">service</code> at a class-level context. But in one of our requirements, we wanted to upload files based on user's region due to some regulations. So in order to allow defining a <code class=\"notranslate\">service</code> at instance-level context, this PR makes the changes to accept <code class=\"notranslate\">service</code> as a Proc as well.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">has_one_attached</code> and <code class=\"notranslate\">has_many_attached</code> logic where:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">service</code> can be accepted either as a symbol or a proc</li>\n<li>Service configuration for symbols is validated on application boot but for procs, it'll validated at runtime.</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49863",
            "title": "Allow accepting `service` as a proc in `has_one_attached` and `has_many_attached`",
            "date_modified": "2023-10-31T12:01:48.000Z",
            "date_published": "2023-10-31T11:27:13.000Z",
            "author": {
                "name": "yogeshjain999",
                "url": "https://github.com/yogeshjain999"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Backports <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1969689504\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49859\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49859/hovercard\" href=\"https://github.com/rails/rails/pull/49859\">#49859</a> to <code class=\"notranslate\">7-1-stable</code> from <code class=\"notranslate\">zzak/railties-schema-cache-dump-check-errors</code></p>",
            "url": "https://github.com/rails/rails/pull/49860",
            "title": "[7-1-stable] Cover railties check_schema_cache_dump_version errors",
            "date_modified": "2023-10-31T08:42:43.000Z",
            "date_published": "2023-10-31T08:42:39.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Previously, both the <code class=\"notranslate\">@rendered_format</code> and <code class=\"notranslate\">@marked_for_same_origin_verification</code> instance variables would be assigned to instances of <code class=\"notranslate\">ActionView::Base</code>, making them accessible in view templates. However, these instance variables are really internal to the controller and result in extra string allocations because the <code class=\"notranslate\">@</code> gets stripped and readded when going through the assignment.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit prefixes the variables with an underscore to help indicate that they are internal, and then adds them to the list of <code class=\"notranslate\">_protected_ivars</code> to prevent assigning them when rendering templates.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49858",
            "title": "Prevent assigning internal ivars to AV::Base",
            "date_modified": "2023-10-31T15:02:24.000Z",
            "date_published": "2023-10-31T00:40:01.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/99301559?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created in order to fix issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1959655377\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49768\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49768/hovercard\" href=\"https://github.com/rails/rails/issues/49768\">#49768</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request updates the documentation in the Rails migration guide from version 7.0 to 7.1. It documents a breaking change regarding @rails/ujs imports in Rails 7.1. The syntax for imports from @rails/ujs is modified in Rails 7.1.</p>\n<p dir=\"auto\">Specifically, users can no longer directly import modules from @rails/ujs in their JavaScript code.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49857",
            "title": "Documented a breaking change regarding imports in @rails/ujs 7.1.0 [ci skip]",
            "date_modified": "2023-10-31T17:53:24.000Z",
            "date_published": "2023-10-30T22:48:17.000Z",
            "author": {
                "name": "mguan2020",
                "url": "https://github.com/mguan2020"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49818.\">Closes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1966229536\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49818\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49818/hovercard\" href=\"https://github.com/rails/rails/issues/49818\">#49818</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Renames the <code class=\"notranslate\">ActionView::TestCase::Behavior</code> module's <code class=\"notranslate\">Content</code> to <code class=\"notranslate\">RenderedViewContent</code>, with the goal of making it more of an internal implementation detail that's unlikely to collide with an application-side <code class=\"notranslate\">Content</code> class.</p>\n<p dir=\"auto\">The <code class=\"notranslate\">RenderedView</code>-prefix mirrors the module's <code class=\"notranslate\">RenderedViewsCollection</code> class.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Is this worth backporting into a <code class=\"notranslate\">7.1</code> release?</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49856",
            "title": "Rename `ActionView::TestCase::Behavior::{Content,RenderedViewContent}`",
            "date_modified": "2023-10-31T11:45:50.000Z",
            "date_published": "2023-10-30T22:00:32.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>",
            "url": "https://github.com/rails/rails/pull/49854",
            "title": "Document ActiveJob::Base#logger",
            "date_modified": "2023-10-31T20:00:09.000Z",
            "date_published": "2023-10-30T20:11:35.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><code class=\"notranslate\">env_name</code> has to transform given strings into the <code class=\"notranslate\">HTTP_</code> type headers that are put in the Rack env. This involves at least one String allocation and a few additional transformations performed on the string.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit avoids the extra allocations/transformations by precomputing some request header strings so that <code class=\"notranslate\">env_name</code> can be avoided. The places changed here show up in a basic controller request, but there may be other places that could be changed as well.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49853",
            "title": "Avoid calling Headers#env_name when static header",
            "date_modified": "2023-10-30T19:29:56.000Z",
            "date_published": "2023-10-30T19:29:52.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/13788379?u=f234dc21f770859a49d02ec762c62e1a80bac449&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1556953153\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47137\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47137/hovercard\" href=\"https://github.com/rails/rails/pull/47137\">#47137</a> turned on static file server by default for all environments.</p>\n<p dir=\"auto\">I already opened a PR to update the documentation to reflect this change (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1968293302\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49848\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49848/hovercard\" href=\"https://github.com/rails/rails/pull/49848\">#49848</a>), I think it might be reasonable to remove this setting from the default generated environments. It's already absent in the <code class=\"notranslate\">config/environments/development.rb</code> file, and this PR removes it from the templates for <code class=\"notranslate\">production.rb</code> and <code class=\"notranslate\">test.rb</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR removes the setting <code class=\"notranslate\">config.public_file_server.enabled</code> from the <code class=\"notranslate\">production.rb.tt</code> and <code class=\"notranslate\">test.rb.tt</code> files, as well as from the testcases where this setting is set to <code class=\"notranslate\">true</code>.</p>\n<p dir=\"auto\">Users wishing to disable this may still set the value to <code class=\"notranslate\">false</code> by including it in the respective environment config file, but I think removing this setting might make sense if it has the same value in all environments anyway.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">As the other PR (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1968293302\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49848\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49848/hovercard\" href=\"https://github.com/rails/rails/pull/49848\">#49848</a>) is only concerned with updating the docs to reflect the current state of the code, I opened a separate PR here to change the code. Feel free to accept / refuse either PRs, both or none :)</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49851",
            "title": "Remove `config.public_file_server.enabled` from environment templates",
            "date_modified": "2023-10-30T17:33:59.000Z",
            "date_published": "2023-10-30T17:05:03.000Z",
            "author": {
                "name": "Adrian-Hirt",
                "url": "https://github.com/Adrian-Hirt"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1734607?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">SQLite3 supports three different transaction modes - DEFERRED, IMMEDIATE and EXCLUSIVE, see<br>\n<a href=\"https://www.sqlite.org/lang_transaction.html\" rel=\"nofollow\">https://www.sqlite.org/lang_transaction.html</a>.</p>\n<p dir=\"auto\">Rails currently uses the default which is DEFERRED. While this is best for read concurrency, it can lead to <code class=\"notranslate\">SQLite3::BusyException</code>s when you read first and then write in the transaction.</p>\n<p dir=\"auto\">If you only create transactions when you are planning to write, then IMMEDIATE may be a better choice, as it will block all other write transactions and prevent stale reads.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Add a <code class=\"notranslate\">transaction_mode</code> option to the SQLite database configuration to allow the transaction mode to be changed:</p>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"development:\n  adapter: sqlite3\n  database: storage/development.sqlite3\n  transaction_mode: immediate\"><pre class=\"notranslate\"><span class=\"pl-ent\">development</span>:\n  <span class=\"pl-ent\">adapter</span>: <span class=\"pl-s\">sqlite3</span>\n  <span class=\"pl-ent\">database</span>: <span class=\"pl-s\">storage/development.sqlite3</span>\n  <span class=\"pl-ent\">transaction_mode</span>: <span class=\"pl-s\">immediate</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">SQLite3 transaction docs: <a href=\"https://www.sqlite.org/lang_transaction.html\" rel=\"nofollow\">https://www.sqlite.org/lang_transaction.html</a><br>\nSQLIte3 gem transaction method: <a href=\"https://github.com/sparklemotion/sqlite3-ruby/blob/e60035e8f01c13ee986ddfee501a93bd6d6394a2/lib/sqlite3/database.rb#L637-L653\">https://github.com/sparklemotion/sqlite3-ruby/blob/e60035e8f01c13ee986ddfee501a93bd6d6394a2/lib/sqlite3/database.rb#L637-L653</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49849",
            "title": "SQLite3 transaction modes",
            "date_modified": "2023-10-31T14:20:08.000Z",
            "date_published": "2023-10-30T14:28:54.000Z",
            "author": {
                "name": "djmb",
                "url": "https://github.com/djmb"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48688.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1793824215\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48688\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48688/hovercard\" href=\"https://github.com/rails/rails/issues/48688\">#48688</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request updates <code class=\"notranslate\">ActiveRecord::AutosaveAssociation#save_has_one_association</code> and <code class=\"notranslate\">ActiveRecord::AutosaveAssociation#validate_single_association</code> to return early and not re-save the child record via autosave if the inverse association (<code class=\"notranslate\">belongs_to</code>) has already set the child target, which happens after the child has been saved.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">Some additional context in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1793824215\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48688\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48688/hovercard?comment_id=1774942159&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/issues/48688#issuecomment-1774942159\">#48688 (comment)</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49847",
            "title": "[Fix #48688] Duplicate callback execution when child autosaves parent with `has_one` and `belongs_to`",
            "date_modified": "2023-10-31T02:52:42.000Z",
            "date_published": "2023-10-30T12:39:11.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22231095?u=fc75f9764434943effe06d6c1dc48d40a5003b0c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">As part of this <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"75617550\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/20124\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/20124/hovercard\" href=\"https://github.com/rails/rails/pull/20124\">#20124</a>, We are raising an <code class=\"notranslate\">ArgumentError</code> when <code class=\"notranslate\">include_blank</code> is false for a required select field. The message is bit confusing for identifying the issue.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request includes the field name in the error message.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<p dir=\"auto\">cc: <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/zzak/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zzak\">@zzak</a></p>",
            "url": "https://github.com/rails/rails/pull/49845",
            "title": "Field name added in ArgumentError when include_blank is false for a required select field",
            "date_modified": "2023-10-31T07:53:31.000Z",
            "date_published": "2023-10-30T10:11:02.000Z",
            "author": {
                "name": "akhilgkrishnan",
                "url": "https://github.com/akhilgkrishnan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This warning occurs three times before this:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\".W, [2023-10-17T19:15:46.723620 9821]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting &quot;config.active_record.sqlite3_production_warning=false&quot;.\n........W, [2023-10-17T19:15:47.315464 9832]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting &quot;config.active_record.sqlite3_production_warning=false&quot;.\n....W, [2023-10-17T19:16:03.776050 10140]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting &quot;config.active_record.sqlite3_production_warning=false&quot;.\"><pre class=\"notranslate\"><code class=\"notranslate\">.W, [2023-10-17T19:15:46.723620 9821]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting \"config.active_record.sqlite3_production_warning=false\".\n........W, [2023-10-17T19:15:47.315464 9832]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting \"config.active_record.sqlite3_production_warning=false\".\n....W, [2023-10-17T19:16:03.776050 10140]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting \"config.active_record.sqlite3_production_warning=false\".\n</code></pre></div>\n<p dir=\"auto\">This PR is blocked by <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1966939284\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49835\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49835/hovercard\" href=\"https://github.com/rails/rails/pull/49835\">#49835</a> since there are now multiple settings for config.active_record, which results in the following errors:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Error:\nApplicationTests::ConfigurationTest#test_the_application_root_can_be_set:\nNoMethodError: undefined method `active_record' for #&lt;Rails::Application::Configuration:0x00000001063d7320&gt;\n    /Users/zzak/code/rails/railties/lib/rails/railtie/configuration.rb:96:in `method_missing'\n    /Users/zzak/code/rails/tmp/d20231030-68543-vf3ndb/app/config/application.rb:28:in `&lt;class:Application&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-68543-vf3ndb/app/config/application.rb:10:in `&lt;module:AppTemplate&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-68543-vf3ndb/app/config/application.rb:9:in `&lt;top (required)&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-68543-vf3ndb/app/config/environment.rb:2:in `require_relative'\n    /Users/zzak/code/rails/tmp/d20231030-68543-vf3ndb/app/config/environment.rb:2:in `&lt;top (required)&gt;'\n    &lt;internal:/Users/zzak/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n    &lt;internal:/Users/zzak/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n    /Users/zzak/code/rails/railties/test/application/configuration_test.rb:55:in `app'\n    /Users/zzak/code/rails/railties/test/application/configuration_test.rb:260:in `block in &lt;class:ConfigurationTest&gt;'\"><pre class=\"notranslate\"><code class=\"notranslate\">Error:\nApplicationTests::ConfigurationTest#test_the_application_root_can_be_set:\nNoMethodError: undefined method `active_record' for #&lt;Rails::Application::Configuration:0x00000001063d7320&gt;\n    /Users/zzak/code/rails/railties/lib/rails/railtie/configuration.rb:96:in `method_missing'\n    /Users/zzak/code/rails/tmp/d20231030-68543-vf3ndb/app/config/application.rb:28:in `&lt;class:Application&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-68543-vf3ndb/app/config/application.rb:10:in `&lt;module:AppTemplate&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-68543-vf3ndb/app/config/application.rb:9:in `&lt;top (required)&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-68543-vf3ndb/app/config/environment.rb:2:in `require_relative'\n    /Users/zzak/code/rails/tmp/d20231030-68543-vf3ndb/app/config/environment.rb:2:in `&lt;top (required)&gt;'\n    &lt;internal:/Users/zzak/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n    &lt;internal:/Users/zzak/.rbenv/versions/3.2.2/lib/ruby/3.2.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n    /Users/zzak/code/rails/railties/test/application/configuration_test.rb:55:in `app'\n    /Users/zzak/code/rails/railties/test/application/configuration_test.rb:260:in `block in &lt;class:ConfigurationTest&gt;'\n</code></pre></div>",
            "url": "https://github.com/rails/rails/pull/49844",
            "title": "[7-0-stable] Quiet sqlite3_production_warning on railties/configuration_test",
            "date_modified": "2023-10-30T02:50:49.000Z",
            "date_published": "2023-10-30T02:50:45.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This warning occurs three times before this:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\".W, [2023-10-17T19:15:46.723620 #9821]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting &quot;config.active_record.sqlite3_production_warning=false&quot;.\n........W, [2023-10-17T19:15:47.315464 #9832]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting &quot;config.active_record.sqlite3_production_warning=false&quot;.\n....W, [2023-10-17T19:16:03.776050 #10140]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting &quot;config.active_record.sqlite3_production_warning=false&quot;.\"><pre class=\"notranslate\"><code class=\"notranslate\">.W, [2023-10-17T19:15:46.723620 #9821]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting \"config.active_record.sqlite3_production_warning=false\".\n........W, [2023-10-17T19:15:47.315464 #9832]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting \"config.active_record.sqlite3_production_warning=false\".\n....W, [2023-10-17T19:16:03.776050 #10140]  WARN -- : You are running SQLite in production, this is generally not recommended. You can disable this warning by setting \"config.active_record.sqlite3_production_warning=false\".\n</code></pre></div>\n<p dir=\"auto\"><strong>🟢 Merged!</strong>: <del>This** PR is blocked by <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1966938274\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49834\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49834/hovercard\" href=\"https://github.com/rails/rails/pull/49834\">#49834</a> since there are now multiple settings for <code class=\"notranslate\">config.active_record</code>, which results in the following errors:</del></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Error:\nApplicationTests::ConfigurationTest#test_the_application_root_can_be_set:\nNoMethodError: undefined method `active_record' for #&lt;Rails::Application::Configuration:0x000000000032c8&gt;\n    /Users/zzak/code/rails/railties/lib/rails/railtie/configuration.rb:109:in `method_missing'\n    /Users/zzak/code/rails/tmp/d20231030-66254-n6lfzq/app/config/application.rb:34:in `&lt;class:Application&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-66254-n6lfzq/app/config/application.rb:10:in `&lt;module:AppTemplate&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-66254-n6lfzq/app/config/application.rb:9:in `&lt;top (required)&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-66254-n6lfzq/app/config/environment.rb:2:in `require_relative'\n    /Users/zzak/code/rails/tmp/d20231030-66254-n6lfzq/app/config/environment.rb:2:in `&lt;top (required)&gt;'\n    /Users/zzak/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.6.12/lib/zeitwerk/kernel.rb:38:in `require'\n    /Users/zzak/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.6.12/lib/zeitwerk/kernel.rb:38:in `require'\n    /Users/zzak/code/rails/railties/test/application/configuration_test.rb:63:in `app'\n    /Users/zzak/code/rails/railties/test/application/configuration_test.rb:270:in `block in &lt;class:ConfigurationTest&gt;'\"><pre class=\"notranslate\"><code class=\"notranslate\">Error:\nApplicationTests::ConfigurationTest#test_the_application_root_can_be_set:\nNoMethodError: undefined method `active_record' for #&lt;Rails::Application::Configuration:0x000000000032c8&gt;\n    /Users/zzak/code/rails/railties/lib/rails/railtie/configuration.rb:109:in `method_missing'\n    /Users/zzak/code/rails/tmp/d20231030-66254-n6lfzq/app/config/application.rb:34:in `&lt;class:Application&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-66254-n6lfzq/app/config/application.rb:10:in `&lt;module:AppTemplate&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-66254-n6lfzq/app/config/application.rb:9:in `&lt;top (required)&gt;'\n    /Users/zzak/code/rails/tmp/d20231030-66254-n6lfzq/app/config/environment.rb:2:in `require_relative'\n    /Users/zzak/code/rails/tmp/d20231030-66254-n6lfzq/app/config/environment.rb:2:in `&lt;top (required)&gt;'\n    /Users/zzak/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.6.12/lib/zeitwerk/kernel.rb:38:in `require'\n    /Users/zzak/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/zeitwerk-2.6.12/lib/zeitwerk/kernel.rb:38:in `require'\n    /Users/zzak/code/rails/railties/test/application/configuration_test.rb:63:in `app'\n    /Users/zzak/code/rails/railties/test/application/configuration_test.rb:270:in `block in &lt;class:ConfigurationTest&gt;'\n</code></pre></div>",
            "url": "https://github.com/rails/rails/pull/49843",
            "title": "[7-1-stable] Quiet sqlite3_production_warning on railties/configuration_test",
            "date_modified": "2023-10-31T03:05:56.000Z",
            "date_published": "2023-10-30T02:12:36.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49752.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1958096764\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49752\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49752/hovercard\" href=\"https://github.com/rails/rails/issues/49752\">#49752</a>.</p>\n<p dir=\"auto\">MariaDB since version 10.7 natively supports <a href=\"https://mariadb.com/kb/en/uuid-data-type/\" rel=\"nofollow\"><code class=\"notranslate\">uuid</code> data type</a>. Also, since 10.5 supports <a href=\"https://mariadb.com/kb/en/insertreturning/\" rel=\"nofollow\"><code class=\"notranslate\">INSERT ... RETURNING</code></a>.</p>\n<p dir=\"auto\">This PR adds support for <code class=\"notranslate\">uuid</code> type for MariaDB only.</p>\n<p dir=\"auto\">MySQL, unfortunately, as usual does not support anything. There are some hacks on how people manually implement \"uuid\" data type. For example, using a <code class=\"notranslate\">BINARY(16)</code> column with a <code class=\"notranslate\">UUID_TO_BIN(UUID())</code> as a default or a <code class=\"notranslate\">VARCHAR(36)</code> with <code class=\"notranslate\">UUID()</code> as a default. See <a href=\"https://blogs.oracle.com/mysql/post/mysql-uuids\" rel=\"nofollow\">https://blogs.oracle.com/mysql/post/mysql-uuids</a> or <a href=\"https://dev.mysql.com/blog-archive/mysql-8-0-uuid-support/\" rel=\"nofollow\">https://dev.mysql.com/blog-archive/mysql-8-0-uuid-support/</a> for detailed examples. But since MySQL does not support <code class=\"notranslate\">RETURNING</code>, there is no way we can retrieve these values during the <code class=\"notranslate\">INSERT</code> without the <code class=\"notranslate\">record.reload</code>. Or, differently, we must manually set the uuid before creating a record.</p>\n<p dir=\"auto\">So, the question is: Should we add also support for MySQL, expecting that people will manually set the default?<br>\nSomething like:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"attribute :guid, :uuid, default: -&gt; { SomeUuidGenerator.generate }\"><pre class=\"notranslate\"><span class=\"pl-en\">attribute</span> <span class=\"pl-pds\">:guid</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:uuid</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-c1\">-&gt;</span> <span class=\"pl-kos\">{</span> <span class=\"pl-v\">SomeUuidGenerator</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">generate</span> <span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">The added test cases are basically adopted tests for PostgreSQL uuid (<a href=\"https://github.com/rails/rails/blob/main/activerecord/test/cases/adapters/postgresql/uuid_test.rb\">https://github.com/rails/rails/blob/main/activerecord/test/cases/adapters/postgresql/uuid_test.rb</a>).</p>\n<p dir=\"auto\"><del>Before merging this PR, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1967219246\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49840\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49840/hovercard\" href=\"https://github.com/rails/rails/pull/49840\">#49840</a> should be merged, because these have overlapping code regarding <code class=\"notranslate\">RETURNING</code> for MariaDB.</del> (done)</p>",
            "url": "https://github.com/rails/rails/pull/49842",
            "title": "Support `uuid` type for MariaDB 10.7.0+",
            "date_modified": "2023-10-31T19:08:57.000Z",
            "date_published": "2023-10-30T01:10:01.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        }
    ]
}