{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/20158582?u=dc2a444da31e84ac2aa186d705dc24b4f3dd588b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h2 dir=\"auto\">What are you trying to accomplish?</h2>\n<p dir=\"auto\">We should add <code class=\"notranslate\">::</code> to namespace the module we delegate to when the caller is a module. Without the <code class=\"notranslate\">::</code>, Ruby will perform relative name resolution which can lead to unexpected behaviour if there are nested constants with the same name.</p>\n<p dir=\"auto\"><a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/gmcgibbon/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/gmcgibbon\">@gmcgibbon</a> helped create a code snippet that demonstrates the problem:</p>\n<details><summary>Current (bugged) behaviour `B.a` </summary>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"module A\n  module Delegation\n    def self.call(owner)\n      owner.module_eval(&quot;def a; B.a; end&quot;, __FILE__, __LINE__)\n    end\n  end\n\n  module B\n    def self.a\n      raise &quot;Don't call this.&quot;\n    end\n  end\nend\n\nmodule B\n  def self.a\n    raise &quot;This should be called.&quot;\n  end\nend\n\nclass C\n  A::Delegation.(self)\nend\n\nC.new.a\"><pre class=\"notranslate\"><span class=\"pl-k\">module</span> <span class=\"pl-c1\">A</span>\n  <span class=\"pl-k\">module</span> <span class=\"pl-v\">Delegation</span>\n    <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">owner</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-s1\">owner</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">module_eval</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"def a; B.a; end\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">__FILE__</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">__LINE__</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-k\">module</span> <span class=\"pl-c1\">B</span>\n    <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">a</span>\n      <span class=\"pl-en\">raise</span> <span class=\"pl-s\">\"Don't call this.\"</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">module</span> <span class=\"pl-c1\">B</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">a</span>\n    <span class=\"pl-en\">raise</span> <span class=\"pl-s\">\"This should be called.\"</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-c1\">C</span>\n  <span class=\"pl-c1\">A</span>::<span class=\"pl-v\">Delegation</span><span class=\"pl-kos\">.</span><span class=\"pl-kos\">(</span><span class=\"pl-smi\">self</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-c1\">C</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">a</span></pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"&gt; C.new.a\n(irb):10:in `a': Don't call this. (RuntimeError)\"><pre class=\"notranslate\"><code class=\"notranslate\">&gt; C.new.a\n(irb):10:in `a': Don't call this. (RuntimeError)\n</code></pre></div>\n</details> \n<details><summary>With this change `::B.a` </summary>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"module A\n  module Delegation\n    def self.call(owner)\n      owner.module_eval(&quot;def a; ::B.a; end&quot;, __FILE__, __LINE__)\n    end\n  end\n\n  module B\n    def self.a\n      raise &quot;Don't call this.&quot;\n    end\n  end\nend\n\nmodule B\n  def self.a\n    raise &quot;This should be called.&quot;\n  end\nend\n\nclass C\n  A::Delegation.(self)\nend\n\nC.new.a\"><pre class=\"notranslate\"><span class=\"pl-k\">module</span> <span class=\"pl-c1\">A</span>\n  <span class=\"pl-k\">module</span> <span class=\"pl-v\">Delegation</span>\n    <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">call</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">owner</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-s1\">owner</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">module_eval</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"def a; ::B.a; end\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">__FILE__</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">__LINE__</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-k\">module</span> <span class=\"pl-c1\">B</span>\n    <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">a</span>\n      <span class=\"pl-en\">raise</span> <span class=\"pl-s\">\"Don't call this.\"</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">module</span> <span class=\"pl-c1\">B</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">a</span>\n    <span class=\"pl-en\">raise</span> <span class=\"pl-s\">\"This should be called.\"</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-c1\">C</span>\n  <span class=\"pl-c1\">A</span>::<span class=\"pl-v\">Delegation</span><span class=\"pl-kos\">.</span><span class=\"pl-kos\">(</span><span class=\"pl-smi\">self</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-c1\">C</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">a</span></pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"C.new.a\n(irb):17:in `a': This should be called. (RuntimeError)\"><pre class=\"notranslate\"><code class=\"notranslate\">C.new.a\n(irb):17:in `a': This should be called. (RuntimeError)\n</code></pre></div>\n</details> ",
            "url": "https://github.com/rails/rails/pull/50926",
            "title": "Add `::` to namespace the module we delegate \"to\"",
            "date_modified": "2024-01-30T17:20:03.000Z",
            "date_published": "2024-01-30T16:32:53.000Z",
            "author": {
                "name": "george-ma",
                "url": "https://github.com/george-ma"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50910.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2104763755\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50910\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50910/hovercard\" href=\"https://github.com/rails/rails/issues/50910\">#50910</a>.</p>",
            "url": "https://github.com/rails/rails/pull/50922",
            "title": "Fix loading schema cache when all databases have disabled database tasks",
            "date_modified": "2024-01-30T11:49:51.000Z",
            "date_published": "2024-01-30T11:49:46.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1734607?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">ActiveRecord Encryption doesn't prevent you from encrypting binary columns but it doesn't have proper support for it either.</p>\n<p dir=\"auto\">When the data is fed through encrypt/decrypt it is converted to a String. This means that the the encryption layer is not transparent to binary data - which should be passed as Type::Binary::Data.</p>\n<p dir=\"auto\">As a result the data is not properly escaped in the SQL queries or deserialized correctly after decryption.</p>\n<p dir=\"auto\">However it just happens to work fine for MySQL and SQLite because the MessageSerializer doesn't use any characters that need to be encoded. However if you try to use a custom serializer that does then it breaks.</p>\n<p dir=\"auto\">PostgreSQL on the other hand does not work - because the Bytea type is passed a String rather than a Type::Binary::Data to deserialize, it attempts to unescape the data and either mangles it or raises an error if it contains null bytes.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The commit fixes the issue, by reserializing the data after encryption and decryption. For text data that's a no-op, but for binary data we'll convert it back to a Type::Binary::Data.</p>",
            "url": "https://github.com/rails/rails/pull/50920",
            "title": "Support encrypting binary columns",
            "date_modified": "2024-01-30T13:43:35.000Z",
            "date_published": "2024-01-30T10:53:34.000Z",
            "author": {
                "name": "djmb",
                "url": "https://github.com/djmb"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/12777550?u=415303ec1c626279c440cf729435fc0ee833d1c9&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">In certain situation, we might need to store and query <code class=\"notranslate\">negative</code> values. Having the option to bypass the auto-generated negative scopes can avoid the conflicts.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Add <code class=\"notranslate\">negative_scopes</code> option to <code class=\"notranslate\">ActiveRecord::Enum#enum</code>, this offers the flexibility to optionally skip the creation of negative scopes.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50919",
            "title": "Add negative_scopes option to ActiveRecord's enum method",
            "date_modified": "2024-01-30T09:40:23.000Z",
            "date_published": "2024-01-30T09:11:41.000Z",
            "author": {
                "name": "Jay0921",
                "url": "https://github.com/Jay0921"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/30030?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because using <code class=\"notranslate\">falcon</code> (or indeed, any other server, e.g. <code class=\"notranslate\">pitchfork</code>) should be easy.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">rails new</code> and adds support for <code class=\"notranslate\">--server puma</code> or <code class=\"notranslate\">--server falcon</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50917",
            "title": "Add support for `rails new --server falcon ...`.",
            "date_modified": "2024-01-30T18:17:10.000Z",
            "date_published": "2024-01-30T04:42:44.000Z",
            "author": {
                "name": "ioquatix",
                "url": "https://github.com/ioquatix"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/16530564?u=d83be1ac3a5246e80f3ecef0309aa114c9519a34&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because <code class=\"notranslate\">ActiveRecord::TestFixtures.teardown_fixtures</code> method does not get called if a <code class=\"notranslate\">MiniTest::Assertion</code> error is raised in <code class=\"notranslate\">ActiveSupport::TestCase.teardown</code> callbacks.</p>\n<h3 dir=\"auto\">Test Case to Reproduce the Problem</h3>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class DrinkTest &lt; ActiveSupport::TestCase\n  teardown do\n    if @failure_test\n      flunk\n    end\n  end\n\n  test &quot;should fail&quot; do\n    @failure_test = true\n    Drink.create!(name: &quot;test&quot;)\n  end\n\n  test &quot;should pass&quot; do\n    assert_equal 0, Drink.where(name: &quot;test&quot;).size\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">DrinkTest</span> &lt; <span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-v\">TestCase</span>\n  <span class=\"pl-en\">teardown</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-k\">if</span> <span class=\"pl-c1\">@failure_test</span>\n      <span class=\"pl-en\">flunk</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-en\">test</span> <span class=\"pl-s\">\"should fail\"</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-c1\">@failure_test</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">true</span>\n    <span class=\"pl-v\">Drink</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"test\"</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-en\">test</span> <span class=\"pl-s\">\"should pass\"</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-en\">assert_equal</span> <span class=\"pl-c1\">0</span><span class=\"pl-kos\">,</span> <span class=\"pl-v\">Drink</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"test\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">size</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Running the above test case with a seed that runs <code class=\"notranslate\">should fail</code> and then <code class=\"notranslate\">should pass</code>:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"bundle exec ruby test/models/drink_test.rb\nRunning 2 tests in a single process (parallelization threshold is 50)\nRun options: --seed 6897\n\n# Running:\n\nF\n\nFailure:\nDrinkTest#test_should_fail [test/models/drink_test.rb:6]:\nEpic Fail!\n\n\nbin/rails test test/models/drink_test.rb:10\n\nF\n\nFailure:\nDrinkTest#test_should_pass [test/models/drink_test.rb:16]:\nExpected: 0\n  Actual: 1\n\n\nbin/rails test test/models/drink_test.rb:15\n\n\n\nFinished in 0.016991s, 117.7094 runs/s, 117.7094 assertions/s.\n2 runs, 2 assertions, 2 failures, 0 errors, 0 skips\"><pre class=\"notranslate\"><code class=\"notranslate\">bundle exec ruby test/models/drink_test.rb\nRunning 2 tests in a single process (parallelization threshold is 50)\nRun options: --seed 6897\n\n# Running:\n\nF\n\nFailure:\nDrinkTest#test_should_fail [test/models/drink_test.rb:6]:\nEpic Fail!\n\n\nbin/rails test test/models/drink_test.rb:10\n\nF\n\nFailure:\nDrinkTest#test_should_pass [test/models/drink_test.rb:16]:\nExpected: 0\n  Actual: 1\n\n\nbin/rails test test/models/drink_test.rb:15\n\n\n\nFinished in 0.016991s, 117.7094 runs/s, 117.7094 assertions/s.\n2 runs, 2 assertions, 2 failures, 0 errors, 0 skips\n</code></pre></div>\n<p dir=\"auto\">Running the test file with a seed with the following order: <code class=\"notranslate\">should pass</code> -&gt; <code class=\"notranslate\">should fail</code>:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"bundle exec ruby test/models/drink_test.rb\nRunning 2 tests in a single process (parallelization threshold is 50)\nRun options: --seed 3383\n\n# Running:\n\n.F\n\nFailure:\nDrinkTest#test_should_fail [test/models/drink_test.rb:6]:\nEpic Fail!\n\n\nbin/rails test test/models/drink_test.rb:10\n\n\n\nFinished in 0.016423s, 121.7804 runs/s, 121.7804 assertions/s.\n2 runs, 2 assertions, 1 failures, 0 errors, 0 skips\"><pre class=\"notranslate\"><code class=\"notranslate\">bundle exec ruby test/models/drink_test.rb\nRunning 2 tests in a single process (parallelization threshold is 50)\nRun options: --seed 3383\n\n# Running:\n\n.F\n\nFailure:\nDrinkTest#test_should_fail [test/models/drink_test.rb:6]:\nEpic Fail!\n\n\nbin/rails test test/models/drink_test.rb:10\n\n\n\nFinished in 0.016423s, 121.7804 runs/s, 121.7804 assertions/s.\n2 runs, 2 assertions, 1 failures, 0 errors, 0 skips\n</code></pre></div>\n<h4 dir=\"auto\">Specifications</h4>\n<p dir=\"auto\">ruby: 3.2.2<br>\nrails: 7.1.1<br>\nminitest: 5.21.0<br>\nOS: MacOS arm64-darwin<br>\nDatabase: SQLite</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the following files:</p>\n<h4 dir=\"auto\"><code class=\"notranslate\">ActiveSupport::Testing::SetupAndTeardown</code></h4>\n<p dir=\"auto\">Renames the following class methods in</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">after_teardown</code> -&gt; <code class=\"notranslate\">teardown</code></li>\n<li><code class=\"notranslate\">before_setup</code> -&gt; <code class=\"notranslate\">setup</code>.</li>\n</ul>\n<p dir=\"auto\">Why switch from <code class=\"notranslate\">after_teardown</code> to <code class=\"notranslate\">teardown</code> and <code class=\"notranslate\">before_setup</code> to <code class=\"notranslate\">setup</code>?</p>\n<p dir=\"auto\">When a user defines a <code class=\"notranslate\">teardown</code> callback block in their test case, it will actually run in the <code class=\"notranslate\">after_teardown</code> Minitest Lifecycle hook. This is confusing and has a major side effect that if a user defines an <code class=\"notranslate\">assertion</code> in that teardown code, it will raise out without getting rescued (see the <a href=\"https://github.com/rails/rails/blob/main/activesupport/lib/active_support/testing/setup_and_teardown.rb#L47\">calling code</a>). This means <code class=\"notranslate\">super</code> will never get called, <code class=\"notranslate\">ActiveRecord::TestFixtures.teardown_fixtures</code> will never run, and the database state will not get rolled back.</p>\n<p dir=\"auto\">By moving the <code class=\"notranslate\">teardown</code> callbacks to run in the <code class=\"notranslate\">teardown</code> lifecycle, all <code class=\"notranslate\">after_teardown</code> code will run since the error will get rescued by Minitest's lifecycle management:</p>\n<ul dir=\"auto\">\n<li><a href=\"https://github.com/minitest/minitest/blob/master/lib/minitest/test.rb#L98-L100\">Lifecycle hooks</a></li>\n<li><a href=\"https://github.com/minitest/minitest/blob/master/lib/minitest/test.rb#L194\">capture_exceptions</a></li>\n</ul>\n<p dir=\"auto\">Minitest also provides recommendations about when to use <code class=\"notranslate\">after_teardown</code> and <code class=\"notranslate\">before_setup</code>:<br>\n<a href=\"https://docs.seattlerb.org/minitest/Minitest/Test/LifecycleHooks.html\" rel=\"nofollow\">https://docs.seattlerb.org/minitest/Minitest/Test/LifecycleHooks.html</a></p>\n<blockquote>\n<p dir=\"auto\">after_teardown()<br>\nRuns after every test, after teardown. This hook is meant for libraries to extend minitest. It is not meant to be used by test developers.</p>\n</blockquote>\n<p dir=\"auto\">There is a slight grey area here, where the <code class=\"notranslate\">setup</code> and <code class=\"notranslate\">teardown</code> callbacks are code written and provided by the \"test developers\". It was surprising at least to me to find that they were not run in <code class=\"notranslate\">setup</code> and <code class=\"notranslate\">teardown</code> Minitest Lifecycle hooks but rather <code class=\"notranslate\">before_setup</code> and <code class=\"notranslate\">after_teardown</code>.</p>\n<p dir=\"auto\">Moving the callbacks to run in their respective Minitest Lifecycle hooks properly will follow Minitest's recommendations and clear up any confusion about where these callbacks are run.</p>\n<h4 dir=\"auto\"><code class=\"notranslate\">ActiveRecord::TestFixture.after_teardown</code></h4>\n<ul dir=\"auto\">\n<li>Wrap <code class=\"notranslate\">teardown_fixtures</code> in <code class=\"notranslate\">ensure</code> block to always run the code that rolls back the test's database transactions.</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50915",
            "title": "Fix teardown callbacks",
            "date_modified": "2024-01-30T18:43:49.000Z",
            "date_published": "2024-01-30T04:04:00.000Z",
            "author": {
                "name": "ttstarck",
                "url": "https://github.com/ttstarck"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39735028?u=91330295c614cf3cec0b64bf242a14fc2ceb358f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2064753125\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50566\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50566/hovercard\" href=\"https://github.com/rails/rails/issues/50566\">#50566</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created to generate <code class=\"notranslate\">devcontainer</code> files for new Rails apps.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds templates for devcontainer files (<code class=\"notranslate\">devcontainer.json</code>, <code class=\"notranslate\">Dockerfile</code> and <code class=\"notranslate\">docker-compose.yml</code>) to be generated on <code class=\"notranslate\">rails new</code>.</p>\n<p dir=\"auto\">By default the devcontainer contains the following:</p>\n<ul dir=\"auto\">\n<li>A redis container for Sidekiq and Action Cable</li>\n<li>A database (SQLite, Postgres, MySQL or MariaDB)</li>\n<li>A Headless chrome container for system tests</li>\n<li>Active Storage configured to use the local disk and with preview features working</li>\n</ul>\n<p dir=\"auto\">If <code class=\"notranslate\">rails new</code> is called with options to skip any of the above they will be removed from the dev container config.</p>\n<p dir=\"auto\">The dev container can be skipped entirely with the <code class=\"notranslate\">--skip_devcontainer</code> option.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">A few changes are needed to other files generated by rails new to make sure new Rails apps can be developed both in a container and locally.</p>\n<ul dir=\"auto\">\n<li>Differentiate <code class=\"notranslate\">CABLE_REDIS_URL</code> and <code class=\"notranslate\">JOBS_REDIS_URL</code> instead of just using <code class=\"notranslate\">REDIS_URL</code> for both (A PR will need to be opened to turbo-rails to make this change as well)</li>\n<li>For MariaDB and MySQL use the <code class=\"notranslate\">RAILS_DATABASE_HOST</code> if it's set (which it will be in a container) and fallback to <code class=\"notranslate\">localhost</code></li>\n<li>For Postgres set the host (<code class=\"notranslate\">RAILS_DATABASE_HOST</code>), username and password when in a container</li>\n</ul>\n<p dir=\"auto\">For system tests, we need to configure the <code class=\"notranslate\">Capybara</code> host and port to the selenium container. Rather than expose the implementation details of <code class=\"notranslate\">Capybara</code> to the developer, we created a new <code class=\"notranslate\">served_by</code> method on <code class=\"notranslate\">SystemTestCase</code> to configure these.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50914",
            "title": "Generate devcontainer files by default",
            "date_modified": "2024-01-30T18:38:16.000Z",
            "date_published": "2024-01-29T23:03:25.000Z",
            "author": {
                "name": "andrewn617",
                "url": "https://github.com/andrewn617"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/40373?u=97283b5a00bd596840c2024f7e430ac9e41ca503&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">As of December, <a href=\"https://github.com/rails/rails/blob/main/actionpack/lib/action_controller/metal/rate_limiting.rb\">ActionController::Metal::RateLimiting</a> provides rate limiting through the <code class=\"notranslate\">increment</code> method of any cache store. RateLimiting relies on a feature of the underlying store. This feature needs to be documented, so that it remains supported, and so alternative stores know to support it.</p>\n<p dir=\"auto\">This PR has been created to document this behavior.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The feature is that <code class=\"notranslate\">increment</code>, when passed <code class=\"notranslate\">expires_in</code>, will set expiration time when the key is first created, and ignore that option if the key already exists.</p>\n<p dir=\"auto\">That functionality is already tested <a href=\"https://github.com/rails/rails/blob/cf26c5482924babca573e6c01594d77e3321ae58/activesupport/test/cache/behaviors/cache_increment_decrement_behavior.rb#L34\">here</a>, in the <code class=\"notranslate\">CacheIncrementDecrementBehavior</code> test module.</p>\n<p dir=\"auto\">This Pull Request changes the documentation of <code class=\"notranslate\">ActiveSupport::Cache::Store.increment</code> to reflect a now-required feature of existing stores.</p>",
            "url": "https://github.com/rails/rails/pull/50909",
            "title": "[ci skip] [docs] make increment requirement explicit",
            "date_modified": "2024-01-29T00:20:53.000Z",
            "date_published": "2024-01-29T00:07:29.000Z",
            "author": {
                "name": "jamiemccarthy",
                "url": "https://github.com/jamiemccarthy"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50897.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2103568249\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50897\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50897/hovercard\" href=\"https://github.com/rails/rails/issues/50897\">#50897</a><br>\nSimilar to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1501158537\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46759\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46759/hovercard\" href=\"https://github.com/rails/rails/pull/46759\">#46759</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Updates <code class=\"notranslate\">ActiveRecord::AutosaveAssociation#save_has_one_association</code> to only update the foreign key attribute on the child record if it has changed. This makes its behaviour consistent with <code class=\"notranslate\">belongs_to</code> associations and ensures that <code class=\"notranslate\">ActiveRecord::ReadOnlyAttributeError</code> isn't raised when no changes have been made to the attribute.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">None.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50901",
            "title": "[Fix #50897] Autosaving `has_one` sets foreign key attribute when unchanged",
            "date_modified": "2024-01-30T10:42:10.000Z",
            "date_published": "2024-01-28T09:30:20.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/25781337?u=bd8d8c8e062d4ee487b4727c750d0529ee547e7d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<h4 dir=\"auto\">My Specific Use Case</h4>\n<p dir=\"auto\">In my project, where <code class=\"notranslate\">ActiveStorage.track_variants = true</code>, I needed to generate a variant of an image (a thumbnail for a room on a floorplan) but did not want to create a variant record of the original image record. This is because I intended to save the variant on a child relation, separate from the original image record.</p>\n<h4 dir=\"auto\">The Challenge</h4>\n<p dir=\"auto\">With <code class=\"notranslate\">ActiveStorage.track_variants = true</code> every variant generated through <code class=\"notranslate\">ActiveStorage</code> is automatically tracked in the database to the original record. There are cases in this application where we <strong>do</strong> want to track these variant records so I was unable to change the default configuration. This meant to properly generate my variant I had to use <code class=\"notranslate\">ImageProcessing::Vips</code> directly to not generate the variant record. This worked but generated two concerns for me:</p>\n<ol dir=\"auto\">\n<li>This specific code is dependent on <code class=\"notranslate\">ImageProcessing::Vips</code> and if we were to ever migrate to another image processor we would have to remember to update this code as well instead of just relying on the <code class=\"notranslate\">ActiveStorage</code> default processor.</li>\n<li>It strays enough from the standard pattern when generating <code class=\"notranslate\">ActiveStorage</code> variants that without good documentation it can become confusing to maintain.</li>\n</ol>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This pull request adds the <code class=\"notranslate\">track</code> option to the <code class=\"notranslate\">variant</code> method which allows for overriding of the <code class=\"notranslate\">ActiveStorage.track_variants</code>. This is useful when in cases where you want to stray from the application's standard configuration.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"ActiveSupport.track_variants\n# =&gt; true\nuser.avatar.variant(track: false, resize_to_limit: [100, 100])\n# =&gt; #&lt;ActiveStorage::Variant:0x00007f4e0004ffb0&gt; \"><pre class=\"notranslate\"><span class=\"pl-v\">ActiveSupport</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">track_variants</span>\n<span class=\"pl-c\"># =&gt; true</span>\n<span class=\"pl-en\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">avatar</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">variant</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">track</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">resize_to_limit</span>: <span class=\"pl-kos\">[</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">100</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\"># =&gt; #&lt;ActiveStorage::Variant:0x00007f4e0004ffb0&gt; </span></pre></div>\n<p dir=\"auto\">and</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"ActiveSupport.track_variants\n# =&gt; false\nuser.avatar.variant(track: true, resize_to_limit: [100, 100])\n# =&gt; #&lt;ActiveStorage::VariantWithRecord:0x00007f4e0004ffb0&gt; \"><pre class=\"notranslate\"><span class=\"pl-v\">ActiveSupport</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">track_variants</span>\n<span class=\"pl-c\"># =&gt; false</span>\n<span class=\"pl-en\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">avatar</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">variant</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">track</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">resize_to_limit</span>: <span class=\"pl-kos\">[</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">100</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\"># =&gt; #&lt;ActiveStorage::VariantWithRecord:0x00007f4e0004ffb0&gt; </span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This is my first time contributing to Rails and I appreciate anyone who takes the time to read all this. I tried my best to follow all conventions and to keep all current functionality, but in the case that I missed something I'd be happy to discuss and fix whatever is needed.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50895",
            "title": "Enhanced ActiveStorage variant tracking control",
            "date_modified": "2024-01-27T04:42:19.000Z",
            "date_published": "2024-01-27T04:41:38.000Z",
            "author": {
                "name": "JaceBayless",
                "url": "https://github.com/JaceBayless"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/545604?u=f4a12e38b365d7686f15e93391b6ffa88c0545cd&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">There may be instances where a developer is working in an environment where a higher cost than the default (12) for BCrypt is required either due to arbitrary security requirements or the recommended minimum changes and the version of bcrypt used isn't updated.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This change adds a <code class=\"notranslate\">cost:</code> argument to <code class=\"notranslate\">has_secure_password</code>. If provided, it will use that value for the password cost. Its value is validated to make sure it's between <code class=\"notranslate\">BCrypt::Engine::MIN_COST</code> and <code class=\"notranslate\">BCrypt::Engine::MAX_COST</code>.</p>\n<p dir=\"auto\">Additionally <code class=\"notranslate\">[password attribute]_cost</code> is exposed as a convenience method to determine the cost used for the set password hash. This can be used to review the current costs from a user record and either transparently upgrade the user's password or force a password reset.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I'm not 100% married to using <code class=\"notranslate\">cost</code> as the argument name as it affects only new passwords created for the record going forward.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50894",
            "title": "Add cost argument to has_secure_password",
            "date_modified": "2024-01-27T05:30:09.000Z",
            "date_published": "2024-01-26T22:52:12.000Z",
            "author": {
                "name": "t27duck",
                "url": "https://github.com/t27duck"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/140453075?u=8d64b0326624236f7b4bc49b3c68a80b1f2db877&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Give further context about the requirements for using the has_one_attached method.</p>\n<p dir=\"auto\">I have an application that does not have an ActiveJob::Backend queue adapter. When I tried to destroy a record, it raised an error that I needed a queue adapter. There is a dependency between the has_one_attached method and a queue adapter.</p>\n<p dir=\"auto\">That is why adding more context about the functionality and requirements about using the has_one_attached method is important.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50892",
            "title": "Documentation: Expand documentation on has_one_attached method [ci-skip].",
            "date_modified": "2024-01-30T18:45:39.000Z",
            "date_published": "2024-01-26T20:02:30.000Z",
            "author": {
                "name": "Takahashi-Seiji",
                "url": "https://github.com/Takahashi-Seiji"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">When discussing testing frameworks for new projects, the absence of <code class=\"notranslate\">around</code> hooks is usually a focal point of the conversation that pushes consensus toward alternative test harnesses.</p>\n<p dir=\"auto\">Minitest itself <a href=\"https://github.com/minitest/minitest/issues/892\" data-hovercard-type=\"issue\" data-hovercard-url=\"/minitest/minitest/issues/892/hovercard\">will not support built-in <code class=\"notranslate\">around</code> hooks</a>. While the <a href=\"https://github.com/jeremyevans/minitest-hooks\">minitest-hooks</a> gem provides support for <code class=\"notranslate\">around</code>, Active Support's callback system makes adding <code class=\"notranslate\">around</code> hooks fairly trivial, and is guaranteed to be implemented in the same way as all other callbacks (Controller, Jobs, Mailers, etc.).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Add a callback, which runs around <code class=\"notranslate\">TestCase#setup</code>, the <code class=\"notranslate\">test</code> block, and <code class=\"notranslate\">TestCase#teardown</code>. Yields the test class instance and the test case to the block:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Test &lt; ActiveSupport::TestCase\n  around do |test_case, &amp;block|\n    Client.with(stubbed: true, &amp;block)\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Test</span> &lt; <span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-v\">TestCase</span>\n  <span class=\"pl-en\">around</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">test_case</span><span class=\"pl-kos\">,</span> &amp;<span class=\"pl-s1\">block</span>|\n    <span class=\"pl-v\">Client</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">with</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">stubbed</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">,</span> &amp;<span class=\"pl-s1\">block</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Additional Information</h3>\n<p dir=\"auto\">To support this change, rename the <code class=\"notranslate\">activesupport/test/testing/after_teardown_test.rb</code> file to <code class=\"notranslate\">activesupport/test/testing/callbacks_test.rb</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50889",
            "title": "Introduce `ActiveSupport::TestCase.around`",
            "date_modified": "2024-01-29T19:58:05.000Z",
            "date_published": "2024-01-26T15:29:23.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50812.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2091410608\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50812\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50812/hovercard\" href=\"https://github.com/rails/rails/issues/50812\">#50812</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">#merge_select_values</code>, <code class=\"notranslate\">#merge_joins</code> and <code class=\"notranslate\">#merge_outer_joins</code> in <code class=\"notranslate\">ActiveRecord::Relation::Merger</code> to unionise selects, inner and outer joins when the two sources of a <code class=\"notranslate\">merge</code> are related via STI.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">The only similar case left in <code class=\"notranslate\">ActiveRecord::Relation::Merger</code> is when <a href=\"https://github.com/rails/rails/blob/68eade83c87ae309191add6dfa4959d7d7e07464/activerecord/lib/active_record/relation/merger.rb#L101\">merging preloads</a>.</p>\n<p dir=\"auto\">I don't think that is similar to these cases since the preload values are simply used to preload associations. I thought I would just mention it anyway.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50886",
            "title": "[Fix #50812] Don't duplicate selects, inner and outer joins when merging with STI",
            "date_modified": "2024-01-30T10:41:26.000Z",
            "date_published": "2024-01-26T13:54:50.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/122306143?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Adds documentation for the <code class=\"notranslate\">attachment_changes</code> method of Active Storage.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50885",
            "title": "Document Attached::Model#attachment_changes [ci skip]",
            "date_modified": "2024-01-26T14:14:49.000Z",
            "date_published": "2024-01-26T13:18:39.000Z",
            "author": {
                "name": "tsvallender",
                "url": "https://github.com/tsvallender"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Ref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2028934613\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50284\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50284/hovercard\" href=\"https://github.com/rails/rails/pull/50284\">#50284</a></p>\n<p dir=\"auto\">While having the inverse association configured it generally positive as it avoid some extra queries etc, infering it may break legecy code, as evidenced by how it broke <code class=\"notranslate\">ActiveStorage::Blob</code> in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2089482274\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50800\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50800/hovercard\" href=\"https://github.com/rails/rails/pull/50800\">#50800</a></p>\n<p dir=\"auto\">As such we can't just enable this behavior immediately, we need to provide and upgrade path for users.</p>\n<p dir=\"auto\">At this stage this PR is just a quick draft to discuss how exactly we should gate this. We can just make it a regular framework default, but perhaps emitting a deprecation warning when we would have infered the inverse relation would help users upgrade?  cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a> as you generally have great insights on this kind of new framework default.</p>",
            "url": "https://github.com/rails/rails/pull/50883",
            "title": "Put plural inverse association inference behind a configuration flag",
            "date_modified": "2024-01-26T17:23:32.000Z",
            "date_published": "2024-01-26T09:19:56.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/47848?u=41ccf0d1865a17f47d140f73a3293f1f3559fc0f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Related to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2082675602\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50759\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50759/hovercard\" href=\"https://github.com/rails/rails/issues/50759\">#50759</a></p>\n<p dir=\"auto\"><code class=\"notranslate\">./tools/rdoc-to-md -a --only=actionpack</code> to reproduce the results.</p>",
            "url": "https://github.com/rails/rails/pull/50879",
            "title": "Transform actionpack documentation to Markdown",
            "date_modified": "2024-01-25T22:29:37.000Z",
            "date_published": "2024-01-25T19:53:03.000Z",
            "author": {
                "name": "rafaelfranca",
                "url": "https://github.com/rafaelfranca"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/519226?u=59a6c3425b6e478c5da291701c8e9df97422d039&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">this pull request improve the current implementation of ignoring table during the schema dump by allowing to ignore tables from other postgres schema than \"public\".</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes [REPLACE ME]</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">the proposed implementation lack the ability to specify exactly from which schema, the table is ignored but I think that even do, it's better than the current implementation.</p>\n<ul dir=\"auto\">\n<li><a href=\"https://www.postgresql.org/docs/current/app-pgdump.html\" rel=\"nofollow\">pg_dump documentation</a></li>\n<li>[pattern documentation](<a href=\"https://www.postgresql.org/docs/current/app-psql.html#APP-PSQL-PATTERNS\" rel=\"nofollow\">https://www.postgresql.org/docs/current/app-psql.html#APP-PSQL-PATTERNS</a></li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<p dir=\"auto\">I feel that the code change is too small to request updating CHANGELOG or writing new tests</p>",
            "url": "https://github.com/rails/rails/pull/50873",
            "title": "dump schema: ignore tables from any postgres schema",
            "date_modified": "2024-01-25T13:41:01.000Z",
            "date_published": "2024-01-25T13:31:52.000Z",
            "author": {
                "name": "gagalago",
                "url": "https://github.com/gagalago"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1322013?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This is already done in rake tasks in the <code class=\"notranslate\">load_config</code> task. However, if migrations want to be manipulated/used by a non-rake program this initialization would miss any extra directories configured by the user.</p>\n<p dir=\"auto\">We move the initialization to an initializer block. With this we can remove the rake config since it depends on <code class=\"notranslate\">environment</code> anyway.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In our app we use schema-based multitenancy which means we need to setup and migrate for each tenant. We have created<br>\na few helpers to aid in this task.<br>\nRecently, we began modularizing our app, and started moving our migrations into packs.<br>\nThen we started facing issues with migrations that tried to run more than once.<br>\nWe diagnosed the root cause that our tenant creation command was not invoking <code class=\"notranslate\">db:load_config</code> before loading the schema.<br>\nThis resulted in \"packed\" migrations not being recorded in the initial seed of the <code class=\"notranslate\">schema_migrations</code> table. Then when we attempted to run migrations on that tenant those migrations would try to run and fail.</p>\n<p dir=\"auto\">This Pull Request has been created because a fix for this is to ensure whenever the app is loaded, the correct default paths<br>\nare loaded.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the initialization from a rake task to the app initialization process.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50867",
            "title": "Initialize ActiveRecord::Migrator.migrations_paths at application initialization",
            "date_modified": "2024-01-24T17:46:06.000Z",
            "date_published": "2024-01-24T17:44:10.000Z",
            "author": {
                "name": "fsateler",
                "url": "https://github.com/fsateler"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/99586?u=b4abd791d83e768c72cb832147b4a210caecf47d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><code class=\"notranslate\">File</code> is already accepted as an attachable, so why not?</p>",
            "url": "https://github.com/rails/rails/pull/50862",
            "title": "Accept Tempfile as ActiveStorage attachable",
            "date_modified": "2024-01-29T23:50:09.000Z",
            "date_published": "2024-01-24T10:31:28.000Z",
            "author": {
                "name": "shouichi",
                "url": "https://github.com/shouichi"
            }
        }
    ]
}