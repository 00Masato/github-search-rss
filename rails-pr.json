{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8122246?u=2dbe607a66a7616297b78647eeb4e0dbff657c3a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This is a fix needed to unblock <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2028934613\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50284\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50284/hovercard\" href=\"https://github.com/rails/rails/pull/50284\">#50284</a>, because Active Storage relies on a Active Record bug.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The problem is best understood with a small snippet:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"blob = ActiveStorage::Blob.new\n\nActiveStorage::Attachment.new(blob: blob)\nActiveStorage::Attachment.new(blob: blob)\n\n# Currently:\np blob.attachments #=&gt; #&lt;ActiveRecord::Associations::CollectionProxy []&gt;\n\n# Once the Active Record bug is fixed:\np blob.attachments #=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;ActiveStorage::Attachment id: nil, name: nil, record_type: nil, record_id: nil, blob_id: nil, created_at: nil&gt;, #&lt;ActiveStorage::Attachment id: nil, name: nil, record_type: nil, record_id: nil, blob_id: nil, created_at: nil&gt;]&gt;\n\n# Saving the blob would result in trying to create 2 attachments which\n# fails because of unique constraints.\"><pre class=\"notranslate\"><span class=\"pl-s1\">blob</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">Blob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n\n<span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">Attachment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">blob</span>: <span class=\"pl-s1\">blob</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">Attachment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">blob</span>: <span class=\"pl-s1\">blob</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-c\"># Currently:</span>\n<span class=\"pl-en\">p</span> <span class=\"pl-s1\">blob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attachments</span> <span class=\"pl-c\">#=&gt; #&lt;ActiveRecord::Associations::CollectionProxy []&gt;</span>\n\n<span class=\"pl-c\"># Once the Active Record bug is fixed:</span>\n<span class=\"pl-en\">p</span> <span class=\"pl-s1\">blob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attachments</span> <span class=\"pl-c\">#=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;ActiveStorage::Attachment id: nil, name: nil, record_type: nil, record_id: nil, blob_id: nil, created_at: nil&gt;, #&lt;ActiveStorage::Attachment id: nil, name: nil, record_type: nil, record_id: nil, blob_id: nil, created_at: nil&gt;]&gt;</span>\n\n<span class=\"pl-c\"># Saving the blob would result in trying to create 2 attachments which</span>\n<span class=\"pl-c\"># fails because of unique constraints.</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The real code path that does what the snippet above does is located here:</p>\n<p dir=\"auto\"></p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/9c3ffab47c3bf59320ba08e9dafdb0275cf91a5a/activestorage/lib/active_storage/attached/many.rb#L52\">rails/activestorage/lib/active_storage/attached/many.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 52\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/9c3ffab47c3bf59320ba08e9dafdb0275cf91a5a\">9c3ffab</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L52\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"52\"></td>\n          <td id=\"LC52\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-en\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">public_send</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-en\">name</span><span class=\"pl-kos\">}</span></span>=\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-en\">blobs</span> + <span class=\"pl-s1\">attachables</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">flatten</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">It's basically doing this:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"user.images.attach &quot;photo1.png&quot;\n# Initialize a Blob record and an Attachment\n\nuser.images.attach &quot;photo2.png&quot;\n# Get the Blob from above, create another Attachment\n# Initialize a new Blob record and an new Attachment\n\n# Rinse and repeat every time `attach` is called\"><pre class=\"notranslate\"><span class=\"pl-en\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">images</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attach</span> <span class=\"pl-s\">\"photo1.png\"</span>\n<span class=\"pl-c\"># Initialize a Blob record and an Attachment</span>\n\n<span class=\"pl-en\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">images</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attach</span> <span class=\"pl-s\">\"photo2.png\"</span>\n<span class=\"pl-c\"># Get the Blob from above, create another Attachment</span>\n<span class=\"pl-c\"># Initialize a new Blob record and an new Attachment</span>\n\n<span class=\"pl-c\"># Rinse and repeat every time `attach` is called</span></pre></div>\n<h3 dir=\"auto\">Solution</h3>\n<ul dir=\"auto\">\n<li>Explicitly set the <code class=\"notranslate\">inverse_of</code>, so that it behaves as if <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2028934613\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50284\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50284/hovercard\" href=\"https://github.com/rails/rails/pull/50284\">#50284</a> is shipped</li>\n<li>Don't build a new attachment for blob already having one.</li>\n</ul>\n<h3 dir=\"auto\">Tests</h3>\n<p dir=\"auto\">I didn't add tests, the test suite is already well covered, adding the <code class=\"notranslate\">inverse_of</code><br>\nwithout any changes breaks the test suite already. You can try by running<br>\nfor instance the <code class=\"notranslate\">activestorage/test/models/attached/many_test.rb</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50800",
            "title": "Fix ActiveStorage::Blob inverse association:",
            "date_modified": "2024-01-19T03:18:23.000Z",
            "date_published": "2024-01-19T03:15:19.000Z",
            "author": {
                "name": "Edouard-chin",
                "url": "https://github.com/Edouard-chin"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39729785?u=bca7557c833422e5d3656072d74e99510b0764d2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Method <code class=\"notranslate\">absence_in</code> complements existing <code class=\"notranslate\">presence_in</code> and can be used to check for absence on the blacklist .</p>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Existing method <code class=\"notranslate\">Object#presence_in</code> can be used for whilelisting:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"def page_title\n  params[:page_title].presence_in(%w[photos videos]) || &quot;photos&quot;\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">def</span> <span class=\"pl-en\">page_title</span>\n  <span class=\"pl-en\">params</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:page_title</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">presence_in</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">%w[</span><span class=\"pl-s\">photos</span> <span class=\"pl-s\">videos</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span> || <span class=\"pl-s\">\"photos\"</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">However, sometimes sometimes it is important to check for absence on the blacklist rather than whilelist inclusion:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"def page_title\n  params[:page_title].absence_in(%w[default hidden]) || &quot;photos&quot;\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">def</span> <span class=\"pl-en\">page_title</span>\n  <span class=\"pl-en\">params</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:page_title</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">absence_in</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">%w[</span><span class=\"pl-s\">default</span> <span class=\"pl-s\">hidden</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span> || <span class=\"pl-s\">\"photos\"</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Seems like this method does not add any additional complexity. I also wasn't able to come up with a clean, short and good-looking alternative based on existing methods (tell me if I'm missing something!).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR adds implementation for <code class=\"notranslate\">Object#absence_in</code> ActiveSupport core extension.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50797",
            "title": "Implement `Object#absence_in` ActiveSupport core extension method",
            "date_modified": "2024-01-18T23:45:03.000Z",
            "date_published": "2024-01-18T23:44:48.000Z",
            "author": {
                "name": "viralpraxis",
                "url": "https://github.com/viralpraxis"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5079556?u=d571676cb19b50ef19ea0dcd2f2b66a2d38dd574&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">As discussed in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2084529336\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50770\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50770/hovercard\" href=\"https://github.com/rails/rails/issues/50770\">#50770</a>, Rails console's prompt is not easily distinguishable from normal IRB console. It also doesn't provide Rails-specific information to assist developers.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50770.\">Closes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2084529336\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50770\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50770/hovercard\" href=\"https://github.com/rails/rails/issues/50770\">#50770</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<ul dir=\"auto\">\n<li>A new IRB prompt called <code class=\"notranslate\">RAILS_PROMPT</code> is added, which looks like:\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">dev:001&gt;</code> in development</li>\n<li><code class=\"notranslate\">prod:001&gt;</code> in production</li>\n<li><code class=\"notranslate\">test:001&gt;</code> in test</li>\n</ul>\n</li>\n<li>The <code class=\"notranslate\">RAILS_PROMPT</code> is only selected when the user doesn't specify another custom prompt.</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50796",
            "title": "Implement #50770",
            "date_modified": "2024-01-19T00:42:52.000Z",
            "date_published": "2024-01-18T23:00:43.000Z",
            "author": {
                "name": "st0012",
                "url": "https://github.com/st0012"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/44640?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Context</h3>\n<p dir=\"auto\">In part for performance and simplicity reasons, and in part because of its historical lack of threading support, Active Record rely quite heavily on <code class=\"notranslate\">ActiveRecord::Base.connection</code> checking out and holding a connection inside a thread of fiber local variable.</p>\n<p dir=\"auto\">Concretly, every request or job lazily checkout connections when it needs to perform a database operations, and then holds onto it until the request or job completes, at which point the <code class=\"notranslate\">Executor</code> hook automatically check it back in the pool.</p>\n<p dir=\"auto\">For the overwhelming majority of Rails application, which don't do enough IOs to benefit from more than a handful of threads, it's a perfectly adequate solution, as it pretty much remove connection management as a concern.</p>\n<p dir=\"auto\">However for applications that spent most of their time on IOs others than the database (e.g. 3rd party APIs), and would benefit from much higher levels of concurrency, this strategy is problematic because it requires about as many database connections as there is threads or fibers, even though most connections are idle but can't be used because they checked out of the pool and held by another thead or fiber.</p>\n<h3 dir=\"auto\">Goal</h3>\n<p dir=\"auto\">I believe the current model is still preferable for the vast majority of Rails users, and changing the way <code class=\"notranslate\">ActiveRecord::Base.connection</code> behaves would break a ton of code anyway. So I believe it should remain the default.</p>\n<p dir=\"auto\">However I think we could support an alternative mode, in which <code class=\"notranslate\">ActiveRecord::Base.connection</code> doesn't hold onto the connection until the end of the request cycle, but instead immediately check it back in, allowing it to be re-used immediately.</p>\n<h3 dir=\"auto\">Implementation</h3>\n<p dir=\"auto\">First, nothing changes unless you disable <code class=\"notranslate\">ActiveRecord.cache_connection_checkout</code>.</p>\n<p dir=\"auto\">Then, since a lot of code in Rails itself, in third party libraries, and in private Rails applications do rely on <code class=\"notranslate\">Model.connection.something()</code>, we must make it work without caching the connection.</p>\n<p dir=\"auto\">To solve this, when caching is disabled, <code class=\"notranslate\">Model.connection</code> returns a proxy object, that delegates the methods it receive to a freshly checked out connection, and then check it back in. See <code class=\"notranslate\">LazyConnectionProxy</code> in <code class=\"notranslate\">connection_pool.rb</code> for the details.</p>\n<p dir=\"auto\">That is the key to permitting this feature while retaining backward compatibility. It's not perfect, as code might assume that subsequent calls to <code class=\"notranslate\">Model.connection</code> will return the same connection instance, but in most case it's not necessary.</p>\n<p dir=\"auto\">Also, while the proxy holds the connection, it caches in on the thread or fiber, so subsequent calls to <code class=\"notranslate\">Model.connection</code> will return the same connection until it's checked back in. This solves most of the statefulness issues, like opening a transaction etc, as long as the APIs are blocked based.</p>\n<h3 dir=\"auto\">Status</h3>\n<p dir=\"auto\">This is a proof of concept, it's nowhere near ready to merge, it's mostly to explore whether it's doable with some work, or just not possible.</p>\n<p dir=\"auto\">Most of the Active Record test suite passes against Sqlite3, except for 3 tests that do disconnect and reconnect. In general all the tests had to be opted out of the feature, I still need to dig into why exactly.</p>\n<p dir=\"auto\">I also had to disable the feature for a few test suites that rely too much on the caching, and would need a bit of refactoring to pass without, but at first glance it doesn't look like a fundamental incompatibility.</p>\n<h3 dir=\"auto\">Concerns</h3>\n<p dir=\"auto\">There is a number of Active Record methods that currently cause more than one checkout/checkin cycle and would benefit from a strategically placed <code class=\"notranslate\">with_connection do</code> call to optimize that. But that is mostly a performance concern, not a fundamental incompatibility.</p>\n<p dir=\"auto\">One more major concern is the query cache. As it stand it's pretty much useless when checkout caching is disabled, because when we check the connection back in, we have to clear the cache, so it's pretty much always empty. To make it usable again, we need a substantial refactoring. At first glance it looks possible, just not trivial.</p>\n<h3 dir=\"auto\">Conclusion</h3>\n<p dir=\"auto\">I'm a bit on the fence about this. I think we can make it work, but I already spent most of one day on just the proof of concept, and would need substantially more work to iron out all the issues.</p>\n<p dir=\"auto\">The actual code changes needed in Active Record itself are relatively small, it's really all the test suite and 3rd party code that would need to be updated to properly work with this option that is the big can of worm I'm worried about.</p>",
            "url": "https://github.com/rails/rails/pull/50793",
            "title": "PoC: Add an option to disable connection checkout caching",
            "date_modified": "2024-01-18T17:13:38.000Z",
            "date_published": "2024-01-18T16:54:17.000Z",
            "author": {
                "name": "byroot",
                "url": "https://github.com/byroot"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The Rails documentation uses the <code class=\"notranslate\">:include:</code> directive to inline the README of the framework into the main documentation page. As the README's aren't in the root directory from where SDoc is run we need to add the framework path to the include:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"# :include: activesupport/README.md\"><pre class=\"notranslate\"><code class=\"notranslate\"># :include: activesupport/README.md\n</code></pre></div>\n<p dir=\"auto\">This results in a warning when installing the gems as generating the rdoc for the gem is run from the gem/framework root:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Couldn't find file to include 'activesupport/README.rdoc' from lib/active_support.rb\"><pre class=\"notranslate\"><code class=\"notranslate\">Couldn't find file to include 'activesupport/README.rdoc' from lib/active_support.rb\n</code></pre></div>\n<p dir=\"auto\">The <code class=\"notranslate\">:include:</code> RDoc directive supports includes relative to the current file as well:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"# :include: ../README.md\"><pre class=\"notranslate\"><code class=\"notranslate\"># :include: ../README.md\n</code></pre></div>\n<p dir=\"auto\">This makes sure it works for the Rails API docs and the separate gems.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49524.\">Fixes</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1931152658\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49524\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49524/hovercard\" href=\"https://github.com/rails/rails/issues/49524\">#49524</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50789",
            "title": "Use relative includes of README's in documentation [ci-skip]",
            "date_modified": "2024-01-18T09:39:29.000Z",
            "date_published": "2024-01-18T09:34:54.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1148320?u=bee10f326f6f222152823082a3ac6c2f43897452&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Newbies tend to misunderstand <code class=\"notranslate\">params</code> hash is a plain old Hash. So I added a note that <code class=\"notranslate\">params</code> hash is ActionController::Parameters.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes \"4 Parameters\" in Action Controller Overview.</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/1148320/297570895-de0dc860-35d1-4d3b-b209-ab4abbac5a17.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDU2NDA3OTcsIm5iZiI6MTcwNTY0MDQ5NywicGF0aCI6Ii8xMTQ4MzIwLzI5NzU3MDg5NS1kZTBkYzg2MC0zNWQxLTRkM2ItYjIwOS1hYjRhYmJhYzVhMTcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDExOSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAxMTlUMDUwMTM3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZjczODQyYjJlODk0YWUyNjNlNWI2YzViNDg5NWI5ZjQ3YWNkZmQwYjBlMTZmN2Y4Yjk5MGNlNWI2MDViYjAyOCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.-NWozO-UHiAZsTmQK-1I08M0quUoiHlEIiDKb5rPRNI\"><img src=\"https://private-user-images.githubusercontent.com/1148320/297570895-de0dc860-35d1-4d3b-b209-ab4abbac5a17.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDU2NDA3OTcsIm5iZiI6MTcwNTY0MDQ5NywicGF0aCI6Ii8xMTQ4MzIwLzI5NzU3MDg5NS1kZTBkYzg2MC0zNWQxLTRkM2ItYjIwOS1hYjRhYmJhYzVhMTcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDExOSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAxMTlUMDUwMTM3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZjczODQyYjJlODk0YWUyNjNlNWI2YzViNDg5NWI5ZjQ3YWNkZmQwYjBlMTZmN2Y4Yjk5MGNlNWI2MDViYjAyOCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.-NWozO-UHiAZsTmQK-1I08M0quUoiHlEIiDKb5rPRNI\" alt=\"Screenshot 2024-01-18 at 10 31 55\" style=\"max-width: 100%;\"></a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50785",
            "title": "Add note about `params` hash in Action Controller Overview [ci skip] ",
            "date_modified": "2024-01-18T17:22:33.000Z",
            "date_published": "2024-01-18T01:26:00.000Z",
            "author": {
                "name": "JunichiIto",
                "url": "https://github.com/JunichiIto"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/986290?u=4d733016cf0aff060b84f4084595e5ace35d3b42&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because <code class=\"notranslate\">skip_sprockets?</code> wasn't being preserved when running <code class=\"notranslate\">app:update</code> in a project using <code class=\"notranslate\">propshaft</code>. Helpful when <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2056739647\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50444\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50444/hovercard\" href=\"https://github.com/rails/rails/issues/50444\">#50444</a> lands.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request sets <code class=\"notranslate\">options[:asset_pipeline]</code> in <code class=\"notranslate\">AppUpdater</code> based on whether Sprockets/Propshaft Railtie is defined.</p>\n<p dir=\"auto\">Without this change, <code class=\"notranslate\">app:update</code> will suggest injecting sprocket configuration in a propshaft project.</p>",
            "url": "https://github.com/rails/rails/pull/50780",
            "title": "Preserve `--asset-pipeline propshaft` when running `app:update`",
            "date_modified": "2024-01-17T12:02:48.000Z",
            "date_published": "2024-01-17T12:02:43.000Z",
            "author": {
                "name": "zachasme",
                "url": "https://github.com/zachasme"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/101501?u=b9368cd286f05d7b8998746f81d8cb3c2bd247c1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">In these last years we have been using a monkey patch at our company that smartly detects domain and subdomains according to the <a href=\"https://publicsuffix.org/\" rel=\"nofollow\">Public Suffix database</a>. There are a few gems in our ecosystems like <a href=\"https://github.com/weppos/publicsuffix-ruby\">public_suffix</a> and <a href=\"https://github.com/discourse/mini_suffix\">mini_suffix</a> that does exactly that. But Rails uses an older and primitive method that splits the domain tld using <code class=\"notranslate\">config.action_dispatch.tld_length</code> option. This pull request changes that by allowing developers to specify a custom domain extractor class.</p>\n<p dir=\"auto\">This is really useful for any SaaS company that offers custom domain and subdomains.</p>",
            "url": "https://github.com/rails/rails/pull/50763",
            "title": "Allow custom domain extractor class on ActionDispatch::Http::URL",
            "date_modified": "2024-01-18T20:47:53.000Z",
            "date_published": "2024-01-15T23:32:04.000Z",
            "author": {
                "name": "rainerborene",
                "url": "https://github.com/rainerborene"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50762",
            "title": "Document some ActionText methods [ci-skip]",
            "date_modified": "2024-01-15T21:22:39.000Z",
            "date_published": "2024-01-15T21:22:33.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The documenation of <code class=\"notranslate\">ActiveRecord::Core.configurations=</code> <a href=\"https://edgeapi.rubyonrails.org/classes/ActiveRecord/Core.html#method-c-configurations-3D\" rel=\"nofollow\">reads</a> like the documentation for the getter instead of the setter.<br>\nIt should not describe what is returned, but what arguments are expected.</p>\n<p dir=\"auto\">This changes moves the documentation of the setter to the getter and adds a new comment to the setter.</p>\n<p dir=\"auto\">This commit has 2 separate commits to make sure the diffs only apply to documentation and not the code.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50761",
            "title": "Improve documentation of ActiveRecord::Core.configurations",
            "date_modified": "2024-01-16T12:15:00.000Z",
            "date_published": "2024-01-15T21:18:15.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8156?u=8390870c130426ed6ddd95cbe048005615658771&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Sometimes you want to build a transformation based on the user input, or information persisted in the database (i.e.: add a watermark to a picture, crop based on user input)</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR allow the transformations to be built based on user input:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User &lt; ApplicationRecord\n  has_one_attached :photo do |attachable|\n    attachable.variant :default, crop: :crop_positions\n    attachable.variant :thumb, crop: :crop_positions,\n                               resize_to_limit: [100, 100]\n  end\n\n  def crop_positions\n    [crop_x1, crop_y1, crop_x2, crop_y2]\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">has_one_attached</span> <span class=\"pl-pds\">:photo</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">attachable</span>|\n    <span class=\"pl-s1\">attachable</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">variant</span> <span class=\"pl-pds\">:default</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">crop</span>: <span class=\"pl-pds\">:crop_positions</span>\n    <span class=\"pl-s1\">attachable</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">variant</span> <span class=\"pl-pds\">:thumb</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">crop</span>: <span class=\"pl-pds\">:crop_positions</span><span class=\"pl-kos\">,</span>\n                               <span class=\"pl-pds\">resize_to_limit</span>: <span class=\"pl-kos\">[</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">100</span><span class=\"pl-kos\">]</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">crop_positions</span>\n    <span class=\"pl-kos\">[</span><span class=\"pl-en\">crop_x1</span><span class=\"pl-kos\">,</span> <span class=\"pl-en\">crop_y1</span><span class=\"pl-kos\">,</span> <span class=\"pl-en\">crop_x2</span><span class=\"pl-kos\">,</span> <span class=\"pl-en\">crop_y2</span><span class=\"pl-kos\">]</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50754",
            "title": "Allow named variants to evaluate dynamic transformation options",
            "date_modified": "2024-01-18T00:07:51.000Z",
            "date_published": "2024-01-15T01:18:24.000Z",
            "author": {
                "name": "xjunior",
                "url": "https://github.com/xjunior"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39912547?u=c7ab43d184bf5df318171d1dbc7ca933859dec48&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because comments in <code class=\"notranslate\">ActionView::Helpers::FormHelper</code> refer to the deprecated <code class=\"notranslate\">form_for</code> instead of the recommended <code class=\"notranslate\">form_with</code>. This could potentially cause confusion for developers consulting the Rails API documentation, such as <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html\" rel=\"nofollow\">Action View Form Builder page</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes  the comments in <code class=\"notranslate\">ActionView::Helpers::FormHelper</code>, replacing instances of <code class=\"notranslate\">form_for</code> with <code class=\"notranslate\">form_with</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The Rails guide has already documented the usage of <code class=\"notranslate\">form_with</code> on the <a href=\"https://guides.rubyonrails.org/form_helpers.html\" rel=\"nofollow\">form_helpers page</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50744",
            "title": "docs: Update FormHelper comments to use `form_with` instead of `form_for` [ci skip]",
            "date_modified": "2024-01-13T17:32:43.000Z",
            "date_published": "2024-01-13T17:32:39.000Z",
            "author": {
                "name": "takatea",
                "url": "https://github.com/takatea"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/87183507?u=1374c66fb72815a8d824ed1a4b80b9f0ebc2d72e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because <code class=\"notranslate\">arel/select_manager_test.rb</code> is failling test</p>\n<h3 dir=\"auto\">Detail</h3>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"vscode ➜ /workspaces/rails/activerecord (main) $ bin/test test/cases/arel/select_manager_test.rb\"><pre class=\"notranslate\"><code class=\"notranslate\">vscode ➜ /workspaces/rails/activerecord (main) $ bin/test test/cases/arel/select_manager_test.rb\n</code></pre></div>\n<p dir=\"auto\">I Run the above test.<br>\nAt that time, if this <code class=\"notranslate\">require \"active_model\"</code> is not in <code class=\"notranslate\">activerecord/lib/arel.rb</code>, the following error will occur</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"NameError: uninitialized constant Arel::Nodes::ActiveModel\n    lib/arel/nodes/casted.rb:50:in `build_quoted'\n    test/cases/arel/select_manager_test.rb:686:in `block (2 levels) in &lt;class:SelectManagerTest&gt;'\"><pre class=\"notranslate\"><code class=\"notranslate\">NameError: uninitialized constant Arel::Nodes::ActiveModel\n    lib/arel/nodes/casted.rb:50:in `build_quoted'\n    test/cases/arel/select_manager_test.rb:686:in `block (2 levels) in &lt;class:SelectManagerTest&gt;'\n</code></pre></div>\n<p dir=\"auto\">Maybe from <a href=\"https://github.com/rails/rails/pull/41577\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/41577/hovercard\">this change</a>, the test is failing.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50741",
            "title": "Fix failing test due to active_model not loading",
            "date_modified": "2024-01-15T18:37:28.000Z",
            "date_published": "2024-01-13T12:31:34.000Z",
            "author": {
                "name": "koya1616",
                "url": "https://github.com/koya1616"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54689845?u=a04d67675e25feecde73a4d56495a71fbeb2ea4a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because the documentation for composite primary keys wasn't correct.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">While working on <code class=\"notranslate\">shoulda-matchers</code> I noticed that the documentation is not correct. We actually need to declare the <code class=\"notranslate\">query_constraints</code> option in the <code class=\"notranslate\">has_many</code> association using the same attribute name as the ones in the associated object.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Author &lt; ApplicationRecord\n  self.primary_key = [:first_name, :last_name]\n  # This was incorrect as `first_name` and `last_name` don't exist on the `Book` model.\n  has_many :books, query_constraints: [:first_name, :last_name] \n  \n  # Correct way\n  has_many :books, query_constraints: [:author_first_name, :author_last_name]\nend\n\nclass Book &lt; ApplicationRecord\n  belongs_to :author, query_constraints: [:author_first_name, :author_last_name]\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Author</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">primary_key</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">[</span><span class=\"pl-pds\">:first_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:last_name</span><span class=\"pl-kos\">]</span>\n  <span class=\"pl-c\"># This was incorrect as `first_name` and `last_name` don't exist on the `Book` model.</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:books</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">query_constraints</span>: <span class=\"pl-kos\">[</span><span class=\"pl-pds\">:first_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:last_name</span><span class=\"pl-kos\">]</span> \n  \n  <span class=\"pl-c\"># Correct way</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:books</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">query_constraints</span>: <span class=\"pl-kos\">[</span><span class=\"pl-pds\">:author_first_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:author_last_name</span><span class=\"pl-kos\">]</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Book</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">belongs_to</span> <span class=\"pl-pds\">:author</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">query_constraints</span>: <span class=\"pl-kos\">[</span><span class=\"pl-pds\">:author_first_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:author_last_name</span><span class=\"pl-kos\">]</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50734",
            "title": "docs: Adjust composite primary keys documentation [skip ci]",
            "date_modified": "2024-01-17T18:36:00.000Z",
            "date_published": "2024-01-12T18:49:57.000Z",
            "author": {
                "name": "matsales28",
                "url": "https://github.com/matsales28"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/99700?u=e57f2b28c7e5ba71d425bc4d4a26192f122125a6&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The <code class=\"notranslate\">id</code> keyword argument passed to <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-create_table\" rel=\"nofollow\">create_table</a> method allow to receive a hash with options for column creation but it's not documented.</p>",
            "url": "https://github.com/rails/rails/pull/50731",
            "title": "Document passing hash as id option on create_table",
            "date_modified": "2024-01-12T17:21:36.000Z",
            "date_published": "2024-01-12T17:21:32.000Z",
            "author": {
                "name": "javierav",
                "url": "https://github.com/javierav"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Follow-up to <a href=\"https://github.com/rails/rails/pull/49819\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49819/hovercard\">#49819</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Since <a href=\"https://github.com/rails/rails/pull/49819\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49819/hovercard\">#49819</a> resolves an issue with<br>\n<code class=\"notranslate\">ActionDispatch::IntegrationTest#with_routing</code> helper support, Action View's <code class=\"notranslate\">test/abstract_unit.rb</code> file can rely on routing being reset within the block argument.</p>\n<p dir=\"auto\">This means that the <code class=\"notranslate\">RoutedRackApp</code> class and <code class=\"notranslate\">.build_app</code> method is can be made unnecessary.</p>",
            "url": "https://github.com/rails/rails/pull/50727",
            "title": "Action View Tests: Use `#with_routing` helper",
            "date_modified": "2024-01-12T16:57:46.000Z",
            "date_published": "2024-01-12T14:36:26.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1100408?u=4ee1778b7ad20f4434193baeb963b976f36d0665&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I noticed there is an inconsistency in the system test scaffold where the model name is sometimes capitalised. This fixes the two instances where the model name is humanised.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"test &quot;should create user&quot;\ntest &quot;should update User&quot;\ntest &quot;should destroy User&quot;\"><pre class=\"notranslate\"><span class=\"pl-en\">test</span> <span class=\"pl-s\">\"should create user\"</span>\n<span class=\"pl-en\">test</span> <span class=\"pl-s\">\"should update User\"</span>\n<span class=\"pl-en\">test</span> <span class=\"pl-s\">\"should destroy User\"</span></pre></div>\n<p dir=\"auto\">Considering all the other scaffolds use lowercase text I think it's right these two are downcased in the same way.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50722",
            "title": "Downcase the model name in the system scaffolds",
            "date_modified": "2024-01-15T02:43:38.000Z",
            "date_published": "2024-01-12T10:51:23.000Z",
            "author": {
                "name": "dwightwatson",
                "url": "https://github.com/dwightwatson"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1734607?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">For <a href=\"https://github.com/rails/solid_cache\">Solid Cache</a>, we want to be able to read and write from the cache database without using the query cache.</p>\n<p dir=\"auto\">We also don't want to expire the query cache on other connection pools when we write. Writing to the Rails cache shouldn't invalidate the main query cache.</p>\n<p dir=\"auto\">This is an alternative to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2074094584\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50695\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50695/hovercard\" href=\"https://github.com/rails/rails/pull/50695\">#50695</a>, based on <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a>'s <a href=\"https://github.com/rails/rails/pull/50695#issuecomment-1885312807\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50695/hovercard\">suggestion here</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">After a database write we clear the query cache on all connection pools. The change here is that we will now only do that if either the connection pool or the connection itself has the query cache enabled.</p>\n<p dir=\"auto\">The query cache is <a href=\"https://github.com/rails/rails/blob/cff2eb1be11cb729382b3674e3caa2bd198ec55e/activerecord/lib/active_record/query_cache.rb#L28-L42\">enabled on all connection pools</a> by the executor hooks, so to take advantage of this we'll need to add another executor hook that disables the query cache on the Solid Cache connection pool (but only when it has a dedicated pool).</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50721",
            "title": "Pool disabled query cache handling",
            "date_modified": "2024-01-12T13:43:25.000Z",
            "date_published": "2024-01-12T09:06:56.000Z",
            "author": {
                "name": "djmb",
                "url": "https://github.com/djmb"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Splits the examples for <code class=\"notranslate\">#clone</code> into separate sections for easier scanability.</p>\n<p dir=\"auto\">Adds examples to <code class=\"notranslate\">#dup</code> to clarify the difference with <code class=\"notranslate\">#clone</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50717",
            "title": "Expand documentation for ActiveRecord::Core #dup and #clone",
            "date_modified": "2024-01-17T10:26:04.000Z",
            "date_published": "2024-01-11T19:46:53.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5122678?u=204301f9f9fe8930fd26fe3bfe65b6ffaffd8b59&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The previous recommendation to place constraints in <code class=\"notranslate\">lib/constraints</code> did not work in practice on a default Rails install, as it will raise the following:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"uninitialized constant Iphone (NameError)\"><pre class=\"notranslate\"><code class=\"notranslate\">uninitialized constant Iphone (NameError)\n</code></pre></div>\n<p dir=\"auto\">Instead, recommend placing constraints in <code class=\"notranslate\">app/constraints</code> such that they will be eager loaded.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Alternatively, we could update the documentation to elaborate that <code class=\"notranslate\">lib/constraints</code> would need to be explicitly eager loaded.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"config.eager_load_paths &lt;&lt; Rails.root.join(&quot;lib/constraints&quot;)\"><pre class=\"notranslate\"><span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">eager_load_paths</span> &lt;&lt; <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">root</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">join</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"lib/constraints\"</span><span class=\"pl-kos\">)</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50710",
            "title": "Update `ActionDispatch::Routing::Mapper:Scoping#constraints` documentation",
            "date_modified": "2024-01-11T16:50:36.000Z",
            "date_published": "2024-01-11T16:50:31.000Z",
            "author": {
                "name": "stevepolitodesign",
                "url": "https://github.com/stevepolitodesign"
            }
        }
    ]
}