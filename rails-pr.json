{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/93735?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Allows more customization of the new console prompts instead of only looking at the <code class=\"notranslate\">Rails.env</code> with newly introduced environment variables.</p>\n<p dir=\"auto\"><code class=\"notranslate\">RAILS_PROMPT_PREFIX</code> will replace the dev/test/prod wording regardless the env. This can be useful in case of multiple production environments or staging environments that also use the <code class=\"notranslate\">production</code> rails env.</p>\n<p dir=\"auto\"><code class=\"notranslate\">RAILS_PROMPT_COLOR</code> can be used to override the colour. This can be usefully to differentiate between a real production environment and a staging / QA environment that runs in <code class=\"notranslate\">production</code> mode.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because we often work with different \"production\" like environments.<br>\neg they all use the same settings in <code class=\"notranslate\">production</code>; but are for different cases. Eg one could be a staging environment, or even multiple production environments eg different installations for different tenants.<br>\nIn this case we still want to color the environment (eg red for all actual production environments, but cyan for staging environments) + correctly name them.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2089217366\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50796\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50796/hovercard\" href=\"https://github.com/rails/rails/pull/50796\">#50796</a></p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I took the liberty to change the last ChangeLog entry (and add my name) instead of creating a new changelog entry, as the changes relate to the latest change anyway.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50898",
            "title": "Allow customization to console prompt's format",
            "date_modified": "2024-01-27T21:45:30.000Z",
            "date_published": "2024-01-27T15:49:48.000Z",
            "author": {
                "name": "nathansamson",
                "url": "https://github.com/nathansamson"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/95560433?u=a42c6f8976f5f33491aca5eb2665378e3fd87604&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because the current button_to method documentation in Rails API lacks clarity regarding its default HTTP request behavior based on the object's persistence. This update aims to explicitly differentiate between POST and PATCH requests in the method's documentation, providing clearer guidance for developers, especially when handling objects with different persistence states.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50896",
            "title": "Improve ActionView::Helpers::UrlHelper button_to explanation [ci-skip]",
            "date_modified": "2024-01-27T07:18:54.000Z",
            "date_published": "2024-01-27T07:05:38.000Z",
            "author": {
                "name": "yin0110",
                "url": "https://github.com/yin0110"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/25781337?u=bd8d8c8e062d4ee487b4727c750d0529ee547e7d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<h4 dir=\"auto\">My Specific Use Case</h4>\n<p dir=\"auto\">In my project, where <code class=\"notranslate\">ActiveStorage.track_variants = true</code>, I needed to generate a variant of an image (a thumbnail for a room on a floorplan) but did not want to create a variant record of the original image record. This is because I intended to save the variant on a child relation, separate from the original image record.</p>\n<h4 dir=\"auto\">The Challenge</h4>\n<p dir=\"auto\">With <code class=\"notranslate\">ActiveStorage.track_variants = true</code> every variant generated through <code class=\"notranslate\">ActiveStorage</code> is automatically tracked in the database to the original record. There are cases in this application where we <strong>do</strong> want to track these variant records so I was unable to change the default configuration. This meant to properly generate my variant I had to use <code class=\"notranslate\">ImageProcessing::Vips</code> directly to not generate the variant record. This worked but generated two concerns for me:</p>\n<ol dir=\"auto\">\n<li>This specific code is dependent on <code class=\"notranslate\">ImageProcessing::Vips</code> and if we were to ever migrate to another image processor we would have to remember to update this code as well instead of just relying on the <code class=\"notranslate\">ActiveStorage</code> default processor.</li>\n<li>It strays enough from the standard pattern when generating <code class=\"notranslate\">ActiveStorage</code> variants that without good documentation it can become confusing to maintain.</li>\n</ol>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This pull request adds the <code class=\"notranslate\">track</code> option to the <code class=\"notranslate\">variant</code> method which allows for overriding of the <code class=\"notranslate\">ActiveStorage.track_variants</code>. This is useful when in cases where you want to stray from the application's standard configuration.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"ActiveSupport.track_variants\n# =&gt; true\nuser.avatar.variant(track: false, resize_to_limit: [100, 100])\n# =&gt; #&lt;ActiveStorage::Variant:0x00007f4e0004ffb0&gt; \"><pre class=\"notranslate\"><span class=\"pl-v\">ActiveSupport</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">track_variants</span>\n<span class=\"pl-c\"># =&gt; true</span>\n<span class=\"pl-en\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">avatar</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">variant</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">track</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">resize_to_limit</span>: <span class=\"pl-kos\">[</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">100</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\"># =&gt; #&lt;ActiveStorage::Variant:0x00007f4e0004ffb0&gt; </span></pre></div>\n<p dir=\"auto\">and</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"ActiveSupport.track_variants\n# =&gt; false\nuser.avatar.variant(track: true, resize_to_limit: [100, 100])\n# =&gt; #&lt;ActiveStorage::VariantWithRecord:0x00007f4e0004ffb0&gt; \"><pre class=\"notranslate\"><span class=\"pl-v\">ActiveSupport</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">track_variants</span>\n<span class=\"pl-c\"># =&gt; false</span>\n<span class=\"pl-en\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">avatar</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">variant</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">track</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">resize_to_limit</span>: <span class=\"pl-kos\">[</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">100</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\"># =&gt; #&lt;ActiveStorage::VariantWithRecord:0x00007f4e0004ffb0&gt; </span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This is my first time contributing to Rails and I appreciate anyone who takes the time to read all this. I tried my best to follow all conventions and to keep all current functionality, but in the case that I missed something I'd be happy to discuss and fix whatever is needed.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50895",
            "title": "Enhanced ActiveStorage variant tracking control",
            "date_modified": "2024-01-27T04:42:19.000Z",
            "date_published": "2024-01-27T04:41:38.000Z",
            "author": {
                "name": "JaceBayless",
                "url": "https://github.com/JaceBayless"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/545604?u=f4a12e38b365d7686f15e93391b6ffa88c0545cd&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">There may be instances where a developer is working in an environment where a higher cost than the default (12) for BCrypt is required either due to arbitrary security requirements or the recommended minimum changes and the version of bcrypt used isn't updated.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This change adds a <code class=\"notranslate\">cost:</code> argument to <code class=\"notranslate\">has_secure_password</code>. If provided, it will use that value for the password cost. Its value is validated to make sure it's between <code class=\"notranslate\">BCrypt::Engine::MIN_COST</code> and <code class=\"notranslate\">BCrypt::Engine::MAX_COST</code>.</p>\n<p dir=\"auto\">Additionally <code class=\"notranslate\">[password attribute]_cost</code> is exposed as a convenience method to determine the cost used for the set password hash. This can be used to review the current costs from a user record and either transparently upgrade the user's password or force a password reset.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I'm not 100% married to using <code class=\"notranslate\">cost</code> as the argument name as it affects only new passwords created for the record going forward.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50894",
            "title": "Add cost argument to has_secure_password",
            "date_modified": "2024-01-27T05:30:09.000Z",
            "date_published": "2024-01-26T22:52:12.000Z",
            "author": {
                "name": "t27duck",
                "url": "https://github.com/t27duck"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/47848?u=41ccf0d1865a17f47d140f73a3293f1f3559fc0f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">When the application has more than one database configuration, only the primary was being loaded by default on boot time. All the other connection pools were loading the schema cache lazily.</p>\n<p dir=\"auto\">This logic can be found in:</p>\n<p dir=\"auto\"></p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/351a8d9bc99e69cc8d1ced86dc1d523e2dc51985/activerecord/lib/active_record/connection_adapters/pool_config.rb#L13\">rails/activerecord/lib/active_record/connection_adapters/pool_config.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 13\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/351a8d9bc99e69cc8d1ced86dc1d523e2dc51985\">351a8d9</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L13\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"13\"></td>\n          <td id=\"LC13\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c1\">@schema_reflection</span> ||= <span class=\"pl-v\">SchemaReflection</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">db_config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">lazy_schema_cache_path</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<br>\n<div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/351a8d9bc99e69cc8d1ced86dc1d523e2dc51985/activerecord/lib/active_record/railtie.rb#L149-L178\">rails/activerecord/lib/active_record/railtie.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 149 to 178\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/351a8d9bc99e69cc8d1ced86dc1d523e2dc51985\">351a8d9</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L149\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"149\"></td>\n          <td id=\"LC149\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">db_config</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">configurations</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">configs_for</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">env_name</span>: <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">env</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">first</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L150\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"150\"></td>\n          <td id=\"LC150\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L151\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"151\"></td>\n          <td id=\"LC151\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">filename</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Tasks</span>::<span class=\"pl-v\">DatabaseTasks</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">cache_dump_filename</span><span class=\"pl-kos\">(</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L152\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"152\"></td>\n          <td id=\"LC152\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-s1\">db_config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span><span class=\"pl-kos\">,</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L153\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"153\"></td>\n          <td id=\"LC153\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-pds\">schema_cache_path</span>: <span class=\"pl-s1\">db_config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">schema_cache_path</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L154\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"154\"></td>\n          <td id=\"LC154\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L155\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"155\"></td>\n          <td id=\"LC155\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L156\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"156\"></td>\n          <td id=\"LC156\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">cache</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">ConnectionAdapters</span>::<span class=\"pl-v\">SchemaCache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">_load_from</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">filename</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L157\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"157\"></td>\n          <td id=\"LC157\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">next</span> <span class=\"pl-k\">if</span> <span class=\"pl-s1\">cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">nil?</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L158\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"158\"></td>\n          <td id=\"LC158\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L159\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"159\"></td>\n          <td id=\"LC159\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">if</span> <span class=\"pl-s1\">check_schema_cache_dump_version</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L160\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"160\"></td>\n          <td id=\"LC160\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-s1\">current_version</span> <span class=\"pl-c1\">=</span> <span class=\"pl-k\">begin</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L161\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"161\"></td>\n          <td id=\"LC161\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Migrator</span><span class=\"pl-kos\">.</span><span class=\"pl-s1\">current_version</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L162\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"162\"></td>\n          <td id=\"LC162\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">rescue</span> <span class=\"pl-v\">ActiveRecordError</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-en\">error</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L163\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"163\"></td>\n          <td id=\"LC163\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-en\">warn</span> <span class=\"pl-s\">\"Failed to validate the schema cache because of <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-en\">error</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">class</span><span class=\"pl-kos\">}</span></span>: <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-en\">error</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">message</span><span class=\"pl-kos\">}</span></span>\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L164\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"164\"></td>\n          <td id=\"LC164\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-c1\">nil</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L165\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"165\"></td>\n          <td id=\"LC165\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L166\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"166\"></td>\n          <td id=\"LC166\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L167\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"167\"></td>\n          <td id=\"LC167\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">if</span> <span class=\"pl-s1\">current_version</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">nil?</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L168\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"168\"></td>\n          <td id=\"LC168\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-en\">connection_pool</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">schema_reflection</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">clear!</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L169\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"169\"></td>\n          <td id=\"LC169\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">next</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L170\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"170\"></td>\n          <td id=\"LC170\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">elsif</span> <span class=\"pl-s1\">cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">schema_version</span> != <span class=\"pl-s1\">current_version</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L171\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"171\"></td>\n          <td id=\"LC171\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-en\">warn</span> <span class=\"pl-s\">\"Ignoring <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">filename</span><span class=\"pl-kos\">}</span></span> because it has expired. The current schema version is <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">current_version</span><span class=\"pl-kos\">}</span></span>, but the one in the schema cache file is <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">schema_version</span><span class=\"pl-kos\">}</span></span>.\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L172\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"172\"></td>\n          <td id=\"LC172\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-en\">connection_pool</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">schema_reflection</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">clear!</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L173\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"173\"></td>\n          <td id=\"LC173\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">next</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L174\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"174\"></td>\n          <td id=\"LC174\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L175\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"175\"></td>\n          <td id=\"LC175\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L176\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"176\"></td>\n          <td id=\"LC176\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L177\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"177\"></td>\n          <td id=\"LC177\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">info</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"Using schema cache file <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">filename</span><span class=\"pl-kos\">}</span></span>\"</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L178\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"178\"></td>\n          <td id=\"LC178\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-en\">connection_pool</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">schema_reflection</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set_schema_cache</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">cache</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">The lazy code path wasn't using the same logic to determine the name of the default schema cache file that the Railties uses, so it was loading the schema cache of the primary config to all the other configs. If no table name coincided nothing bad would happen, but if table names coincided, the schema would be completely wrong in all non-primary connections.</p>",
            "url": "https://github.com/rails/rails/pull/50893",
            "title": " Unify the logic to determine the default schema cache path for a database configuration",
            "date_modified": "2024-01-26T22:50:30.000Z",
            "date_published": "2024-01-26T22:26:39.000Z",
            "author": {
                "name": "rafaelfranca",
                "url": "https://github.com/rafaelfranca"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/140453075?u=8d64b0326624236f7b4bc49b3c68a80b1f2db877&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Give further context about the requirements for using the has_one_attached method.</p>\n<p dir=\"auto\">I have an application that does not have an ActiveJob::Backend queue adapter. When I tried to destroy a record, it raised an error that I needed a queue adapter. There is a dependency between the has_one_attached method and a queue adapter.</p>\n<p dir=\"auto\">That is why adding more context about the functionality and requirements about using the has_one_attached method is important.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50892",
            "title": "Documentation: Expand documentation on has_one_attached method [ci-skip].",
            "date_modified": "2024-01-26T20:35:18.000Z",
            "date_published": "2024-01-26T20:02:30.000Z",
            "author": {
                "name": "Takahashi-Seiji",
                "url": "https://github.com/Takahashi-Seiji"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">When discussing testing frameworks for new projects, the absence of <code class=\"notranslate\">around</code> hooks is usually a focal point of the conversation that pushes consensus toward alternative test harnesses.</p>\n<p dir=\"auto\">Minitest itself <a href=\"https://github.com/minitest/minitest/issues/892\" data-hovercard-type=\"issue\" data-hovercard-url=\"/minitest/minitest/issues/892/hovercard\">will not support built-in <code class=\"notranslate\">around</code> hooks</a>. While the <a href=\"https://github.com/jeremyevans/minitest-hooks\">minitest-hooks</a> gem provides support for <code class=\"notranslate\">around</code>, Active Support's callback system makes adding <code class=\"notranslate\">around</code> hooks fairly trivial, and is guaranteed to be implemented in the same way as all other callbacks (Controller, Jobs, Mailers, etc.).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Add a callback, which runs around <code class=\"notranslate\">TestCase#setup</code>, the <code class=\"notranslate\">test</code> block, and <code class=\"notranslate\">TestCase#teardown</code>. Yields the test class instance and the test case to the block:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Test &lt; ActiveSupport::TestCase\n  around do |test_case, &amp;block|\n    Client.with(stubbed: true, &amp;block)\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Test</span> &lt; <span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-v\">TestCase</span>\n  <span class=\"pl-en\">around</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">test_case</span><span class=\"pl-kos\">,</span> &amp;<span class=\"pl-s1\">block</span>|\n    <span class=\"pl-v\">Client</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">with</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">stubbed</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">,</span> &amp;<span class=\"pl-s1\">block</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Additional Information</h3>\n<p dir=\"auto\">To support this change, rename the <code class=\"notranslate\">activesupport/test/testing/after_teardown_test.rb</code> file to <code class=\"notranslate\">activesupport/test/testing/callbacks_test.rb</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50889",
            "title": "Introduce `ActiveSupport::TestCase.around`",
            "date_modified": "2024-01-27T14:24:35.000Z",
            "date_published": "2024-01-26T15:29:23.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/644950?u=21ceba0f35732731441f413b999b2c9d589d0440&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In Intercom we are working on detecting queries with large result sets, as Vitess based databases (like in our case Planetscale) block queries that return more than (by default) 100k result set rows.</p>\n<p dir=\"auto\">We have an internal patch for this that works well for us, but thought to contribute this upstream, so others can benefit</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">{*}Adapter.log</code>, which emits <code class=\"notranslate\">sql.active_record</code> notifications.</p>\n<p dir=\"auto\">Previously the instrument call only logs information that goes into a request, but allows the caller inside the block to modify the payload. We make use of this inside each adapter to add a new field to each <code class=\"notranslate\">sql.active_record</code> notification with the number of result rows being returned in each query.</p>\n<p dir=\"auto\">This allows consumers of this notification <a href=\"https://github.com/DataDog/dd-trace-rb/blob/master/lib/datadog/tracing/contrib/active_record/events/sql.rb\">(example)</a> to consume this metric.</p>\n<p dir=\"auto\">There is previous work in this regard with the <a href=\"https://github.com/rails/rails/blob/main/activerecord/lib/active_record/relation/record_fetch_warning.rb\"><code class=\"notranslate\">RecordFetchWarning</code></a> module that can be included, which demonstrates the need to monitor queries with large result sets. In our case these log lines weren't easy to integrate into our observability stack, and having a numerical value attached to each sql trace allowed us to use the full power of our observability suite.</p>\n<p dir=\"auto\">This pr also includes three tests in the instrumentation test suite that verify this working for model instanciation queries, direct value queries like <code class=\"notranslate\">pluck</code> and raw <code class=\"notranslate\">ActiveRecord::Base.connection.execute(sql)</code> queries.</p>\n<h3 dir=\"auto\">Performance</h3>\n<p dir=\"auto\">The change asks the resultset how many elements it has. Expectation was that that should be a constant lookup, and benchmarks suggest this to be true:</p>\n<p dir=\"auto\">I have tested this change with <code class=\"notranslate\">examples/performance</code> on adapters <code class=\"notranslate\">sqlite3</code>, <code class=\"notranslate\">mysql2</code> and <code class=\"notranslate\">postgresql</code> with no measurable difference in performance (less than 0.1% when standard deviation was 1%).</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I originally approached this inside <code class=\"notranslate\">abstract_adapter</code> but it turns out every adapters Result uses a different method, so I moved the call into each adapters respective usage of <code class=\"notranslate\">log</code></p>\n<p dir=\"auto\"><a href=\"https://github.com/rails/rails/blob/main/activerecord/lib/active_record/relation/record_fetch_warning.rb\"><code class=\"notranslate\">RecordFetchWarning</code></a> works by patching <code class=\"notranslate\">exec_queries</code>, so it aggregates the result set size of multiple queries into one, which is less helpful for this case, as the limits imposed by Vitess are per query. Additionally, this does not support the case of executing raw SQL on the connection, which is something that this patch captures.</p>\n<p dir=\"auto\">As for the field name on the payload <code class=\"notranslate\">row_count</code> seemed like a good name as it follows the same pattern as <code class=\"notranslate\">result_count</code> does in <a href=\"https://guides.rubyonrails.org/active_support_instrumentation.html#instantiation-active-record\" rel=\"nofollow\">https://guides.rubyonrails.org/active_support_instrumentation.html#instantiation-active-record</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50887",
            "title": "Add row_count field to sql.active_record notification",
            "date_modified": "2024-01-27T00:14:36.000Z",
            "date_published": "2024-01-26T13:55:17.000Z",
            "author": {
                "name": "marvin-bitterlich",
                "url": "https://github.com/marvin-bitterlich"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50812.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2091410608\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50812\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50812/hovercard\" href=\"https://github.com/rails/rails/issues/50812\">#50812</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">#merge_select_values</code>, <code class=\"notranslate\">#merge_joins</code> and <code class=\"notranslate\">#merge_outer_joins</code> in <code class=\"notranslate\">ActiveRecord::Relation::Merger</code> to unionise selects, inner and outer joins when the two sources of a <code class=\"notranslate\">merge</code> are related via STI.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">The only similar case left in <code class=\"notranslate\">ActiveRecord::Relation::Merger</code> is when <a href=\"https://github.com/rails/rails/blob/68eade83c87ae309191add6dfa4959d7d7e07464/activerecord/lib/active_record/relation/merger.rb#L101\">merging preloads</a>.</p>\n<p dir=\"auto\">I don't think that is similar to these cases since the preload values are simply used to preload associations. I thought I would just mention it anyway.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50886",
            "title": "[Fix #50812] Don't duplicate selects, inner and outer joins when merging with STI",
            "date_modified": "2024-01-26T14:09:06.000Z",
            "date_published": "2024-01-26T13:54:50.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/122306143?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Adds documentation for the <code class=\"notranslate\">attachment_changes</code> method of Active Storage.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50885",
            "title": "Document Attached::Model#attachment_changes [ci skip]",
            "date_modified": "2024-01-26T14:14:49.000Z",
            "date_published": "2024-01-26T13:18:39.000Z",
            "author": {
                "name": "tsvallender",
                "url": "https://github.com/tsvallender"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Ref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2028934613\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50284\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50284/hovercard\" href=\"https://github.com/rails/rails/pull/50284\">#50284</a></p>\n<p dir=\"auto\">While having the inverse association configured it generally positive as it avoid some extra queries etc, infering it may break legecy code, as evidenced by how it broke <code class=\"notranslate\">ActiveStorage::Blob</code> in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2089482274\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50800\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50800/hovercard\" href=\"https://github.com/rails/rails/pull/50800\">#50800</a></p>\n<p dir=\"auto\">As such we can't just enable this behavior immediately, we need to provide and upgrade path for users.</p>\n<p dir=\"auto\">At this stage this PR is just a quick draft to discuss how exactly we should gate this. We can just make it a regular framework default, but perhaps emitting a deprecation warning when we would have infered the inverse relation would help users upgrade?  cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a> as you generally have great insights on this kind of new framework default.</p>",
            "url": "https://github.com/rails/rails/pull/50883",
            "title": "Put plural inverse association inference behind a configuration flag",
            "date_modified": "2024-01-26T17:23:32.000Z",
            "date_published": "2024-01-26T09:19:56.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/853015?u=7a457811f0ebec8f47bc83ee39021835888a5955&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because the documentation is out-of-sync.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Since <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"613078684\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/39164\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/39164/hovercard\" href=\"https://github.com/rails/rails/pull/39164\">#39164</a> extension in filename are deprecated (shipped with Rails 6.1)<br>\nAnd has been removed in Rails 7.0.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">N/A</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[N/A] Tests are added or updated if you fix a bug or add a feature.</li>\n<li>[N/A] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50881",
            "title": "Update caching_with_rails.md regarding extension in filename [ci skip]",
            "date_modified": "2024-01-26T20:55:47.000Z",
            "date_published": "2024-01-26T03:51:09.000Z",
            "author": {
                "name": "D-system",
                "url": "https://github.com/D-system"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/47848?u=41ccf0d1865a17f47d140f73a3293f1f3559fc0f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Related to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2082675602\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50759\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50759/hovercard\" href=\"https://github.com/rails/rails/issues/50759\">#50759</a></p>\n<p dir=\"auto\"><code class=\"notranslate\">./tools/rdoc-to-md -a --only=actionpack</code> to reproduce the results.</p>",
            "url": "https://github.com/rails/rails/pull/50879",
            "title": "Transform actionpack documentation to Markdown",
            "date_modified": "2024-01-25T22:29:37.000Z",
            "date_published": "2024-01-25T19:53:03.000Z",
            "author": {
                "name": "rafaelfranca",
                "url": "https://github.com/rafaelfranca"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1734607?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">You may want to avoid compression when using ActiveRecord encryption.</p>\n<p dir=\"auto\">Reasons include</p>\n<ul dir=\"auto\">\n<li>Your data is already compressed</li>\n<li>Avoiding revealing information about the entropy of the encrypted value (see <a href=\"https://github.blog/2022-10-26-why-and-how-github-encrypts-sensitive-database-columns-using-activerecordencryption/#turn-off-compression-by-default\" rel=\"nofollow\">https://github.blog/2022-10-26-why-and-how-github-encrypts-sensitive-database-columns-using-activerecordencryption/#turn-off-compression-by-default</a>)</li>\n</ul>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Add a <code class=\"notranslate\">compress</code> option to ActiveRecord::Encryption::Encryptor, which defaults to <code class=\"notranslate\">true</code>. When set to <code class=\"notranslate\">false</code>, the encryptor will never compress the data.</p>\n<p dir=\"auto\">This can be used with the <code class=\"notranslate\">encryptor</code> option in the model:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Record &lt; ApplicationRecord\n  encrypts :field, encryptor: ActiveRecord::Encryption::Encryptor.new(compress: false)\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Record</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">encrypts</span> <span class=\"pl-pds\">:field</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">encryptor</span>: <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Encryption</span>::<span class=\"pl-v\">Encryptor</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">compress</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-k\">end</span></pre></div>",
            "url": "https://github.com/rails/rails/pull/50876",
            "title": "Allow encryption without compression",
            "date_modified": "2024-01-25T14:50:57.000Z",
            "date_published": "2024-01-25T14:50:53.000Z",
            "author": {
                "name": "djmb",
                "url": "https://github.com/djmb"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/519226?u=59a6c3425b6e478c5da291701c8e9df97422d039&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">this pull request improve the current implementation of ignoring table during the schema dump by allowing to ignore tables from other postgres schema than \"public\".</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes [REPLACE ME]</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">the proposed implementation lack the ability to specify exactly from which schema, the table is ignored but I think that even do, it's better than the current implementation.</p>\n<ul dir=\"auto\">\n<li><a href=\"https://www.postgresql.org/docs/current/app-pgdump.html\" rel=\"nofollow\">pg_dump documentation</a></li>\n<li>[pattern documentation](<a href=\"https://www.postgresql.org/docs/current/app-psql.html#APP-PSQL-PATTERNS\" rel=\"nofollow\">https://www.postgresql.org/docs/current/app-psql.html#APP-PSQL-PATTERNS</a></li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<p dir=\"auto\">I feel that the code change is too small to request updating CHANGELOG or writing new tests</p>",
            "url": "https://github.com/rails/rails/pull/50873",
            "title": "dump schema: ignore tables from any postgres schema",
            "date_modified": "2024-01-25T13:41:01.000Z",
            "date_published": "2024-01-25T13:31:52.000Z",
            "author": {
                "name": "gagalago",
                "url": "https://github.com/gagalago"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1322013?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This is already done in rake tasks in the <code class=\"notranslate\">load_config</code> task. However, if migrations want to be manipulated/used by a non-rake program this initialization would miss any extra directories configured by the user.</p>\n<p dir=\"auto\">We move the initialization to an initializer block. With this we can remove the rake config since it depends on <code class=\"notranslate\">environment</code> anyway.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In our app we use schema-based multitenancy which means we need to setup and migrate for each tenant. We have created<br>\na few helpers to aid in this task.<br>\nRecently, we began modularizing our app, and started moving our migrations into packs.<br>\nThen we started facing issues with migrations that tried to run more than once.<br>\nWe diagnosed the root cause that our tenant creation command was not invoking <code class=\"notranslate\">db:load_config</code> before loading the schema.<br>\nThis resulted in \"packed\" migrations not being recorded in the initial seed of the <code class=\"notranslate\">schema_migrations</code> table. Then when we attempted to run migrations on that tenant those migrations would try to run and fail.</p>\n<p dir=\"auto\">This Pull Request has been created because a fix for this is to ensure whenever the app is loaded, the correct default paths<br>\nare loaded.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the initialization from a rake task to the app initialization process.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50867",
            "title": "Initialize ActiveRecord::Migrator.migrations_paths at application initialization",
            "date_modified": "2024-01-24T17:46:06.000Z",
            "date_published": "2024-01-24T17:44:10.000Z",
            "author": {
                "name": "fsateler",
                "url": "https://github.com/fsateler"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/99586?u=b4abd791d83e768c72cb832147b4a210caecf47d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><code class=\"notranslate\">File</code> is already accepted as an attachable, so why not?</p>",
            "url": "https://github.com/rails/rails/pull/50862",
            "title": "Accept Tempfile as ActiveStorage attachable",
            "date_modified": "2024-01-25T14:59:26.000Z",
            "date_published": "2024-01-24T10:31:28.000Z",
            "author": {
                "name": "shouichi",
                "url": "https://github.com/shouichi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5238698?u=891eeb449bcb179b920fd08ed86c18eb6d477a04&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #45636.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1314546104\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/45636\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/45636/hovercard\" href=\"https://github.com/rails/rails/issues/45636\">#45636</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a check in <code class=\"notranslate\">ActionView::PathSet#find_all</code> to ensure all passed formats are valid.</p>\n<p dir=\"auto\">Since <code class=\"notranslate\">#find_all</code> is used by <code class=\"notranslate\">#exists?</code> and <code class=\"notranslate\">#find</code>, the check is extended to all the public methods in the class that search templates.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50861",
            "title": "ActionView: Raise on invalid format",
            "date_modified": "2024-01-24T08:37:47.000Z",
            "date_published": "2024-01-24T08:37:24.000Z",
            "author": {
                "name": "3v0k4",
                "url": "https://github.com/3v0k4"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/13130705?u=c91ddc42cdbe8620020f2935052801734da051cf&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The section \"Error Message Scopes\" describes how the Rails look up the namespaces for a validation error message with code snippets. The first code snippet shows abstract namespaces like <code class=\"notranslate\">errors.attributes.[attribute_name]</code> while the second one demonstrates the materialized one like <code class=\"notranslate\">errors.attributes.name.blank</code>. The first code snippet lacks the validation error \"key.\" My team member was confused and created a translation without \"key\", so I think it would be helpful to add \".[key]\" to the abstract namespaces.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li><del>[ ] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</del></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li><del>[ ] Tests are added or updated if you fix a bug or add a feature.</del></li>\n<li><del>[ ] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</del></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50860",
            "title": "Add \".[key]\" to the abstract namespaces [ci skip]",
            "date_modified": "2024-01-27T20:11:48.000Z",
            "date_published": "2024-01-24T07:58:00.000Z",
            "author": {
                "name": "yykamei",
                "url": "https://github.com/yykamei"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50830.\">Closes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2092565763\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50830\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50830/hovercard\" href=\"https://github.com/rails/rails/issues/50830\">#50830</a>.</p>\n<p dir=\"auto\">The code works, but docs/tests etc are currently missing. I want to validate the approach before proceeding.</p>\n<p dir=\"auto\">Inside action mailer I am reusing private methods from the implementation of callbacks from the action controller, see <a href=\"https://github.com/rails/rails/blob/main/actionpack/lib/abstract_controller/callbacks.rb\">https://github.com/rails/rails/blob/main/actionpack/lib/abstract_controller/callbacks.rb</a>.</p>\n<p dir=\"auto\">The questions to consider are:</p>\n<ol dir=\"auto\">\n<li>Should the mailer callbacks really depend on the internals of controller callbacks, considering that it already includes it <div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/776626ff987a96201b0bdbd86d716ca6698fa8b3/actionmailer/lib/action_mailer/base.rb#L493\">rails/actionmailer/lib/action_mailer/base.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 493\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/776626ff987a96201b0bdbd86d716ca6698fa8b3\">776626f</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L493\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"493\"></td>\n          <td id=\"LC493\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-en\">include</span> <span class=\"pl-v\">AbstractController</span>::<span class=\"pl-v\">Callbacks</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</li>\n<li>Controllers callbacks have a <code class=\"notranslate\">raise_on_missing_callbacks_action</code>, see <div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/776626ff987a96201b0bdbd86d716ca6698fa8b3/actionpack/lib/abstract_controller/callbacks.rb#L36\">rails/actionpack/lib/abstract_controller/callbacks.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 36\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/776626ff987a96201b0bdbd86d716ca6698fa8b3\">776626f</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L36\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"36\"></td>\n          <td id=\"LC36\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-en\">mattr_accessor</span> <span class=\"pl-pds\">:raise_on_missing_callback_actions</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-c1\">false</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n which can be set via <code class=\"notranslate\">config.action_controller. raise_on_missing_callbacks_action</code>. This kinda makes sense for action mailer too, so should we introduce <code class=\"notranslate\">config.action_mailer.raise_on_missing_callbacks_action</code> config?</li>\n<li>Controller callbacks use the word <code class=\"notranslate\">\"controller\"</code>, see <div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/776626ff987a96201b0bdbd86d716ca6698fa8b3/actionpack/lib/abstract_controller/callbacks.rb#L54\">rails/actionpack/lib/abstract_controller/callbacks.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 54\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/776626ff987a96201b0bdbd86d716ca6698fa8b3\">776626f</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L54\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"54\"></td>\n          <td id=\"LC54\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s\">              callback on <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">controller</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">class</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span><span class=\"pl-kos\">}</span></span>, but it is listed in the controller's</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n, while for mailer we should use the <code class=\"notranslate\">\"mailer\"</code> word or should we make the message text more generic?</li>\n</ol>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/bensheldon/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/bensheldon\">@bensheldon</a></p>",
            "url": "https://github.com/rails/rails/pull/50858",
            "title": "Support options for ActionMailer delivery callbacks",
            "date_modified": "2024-01-23T23:16:31.000Z",
            "date_published": "2024-01-23T23:16:27.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        }
    ]
}