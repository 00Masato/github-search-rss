{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Inspired by <a href=\"https://railsatscale.com/2024-01-25-catching-assertionless-tests/\" rel=\"nofollow\">https://railsatscale.com/2024-01-25-catching-assertionless-tests/</a>.</p>\n<p dir=\"auto\">It is very easy to write a \"false positive\" broken test (as can be seen from the linked article) that actually tests nothing (or can become such in the future). A simple example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"def test_active\n  active_users = User.active.to_a\n  active_users.each do |user|\n    assert user.active?\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">def</span> <span class=\"pl-en\">test_active</span>\n  <span class=\"pl-s1\">active_users</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_a</span>\n  <span class=\"pl-s1\">active_users</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">user</span>|\n    <span class=\"pl-en\">assert</span> <span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active?</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">We have some assertions used in the test case, so, looks good? But if we change the scope and it will now return 0 records, this test will still pass and none of the assertions will be run. For this test to be more robust, we need at least to test that <code class=\"notranslate\">active_users</code> contains any records.</p>\n<p dir=\"auto\">This PR now allows to easily detect such tests.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# config/environments/test.rb\nconfig.active_support.assertionless_tests_behavior = :raise # also available :ignore and :log\"><pre class=\"notranslate\"><span class=\"pl-c\"># config/environments/test.rb</span>\n<span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_support</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">assertionless_tests_behavior</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:raise</span> <span class=\"pl-c\"># also available :ignore and :log</span></pre></div>\n<p dir=\"auto\">With this configuration, assertionless tests we will now be marked as failed and not silently pass.</p>\n<p dir=\"auto\">Currently, this feature is configured to <code class=\"notranslate\">:ignore</code> such tests by default, but we can rollout it to eventually <code class=\"notranslate\">:log</code> and then <code class=\"notranslate\">:raise</code> in the future.</p>\n<p dir=\"auto\">Some of such problematic tests were already fixed before, like in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1683920985\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48065\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48065/hovercard\" href=\"https://github.com/rails/rails/pull/48065\">#48065</a>.</p>\n<p dir=\"auto\">As a follow up to this PR, I would like to enable <code class=\"notranslate\">:raise</code> behavior for all the frameworks. Currently there are a few offences fixing which will make this PR bigger than is needed.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/nvasilevski/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nvasilevski\">@nvasilevski</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a> (interested in your thoughts about this)</p>",
            "url": "https://github.com/rails/rails/pull/51625",
            "title": "Allow assertionless tests to be reported",
            "date_modified": "2024-04-21T21:38:13.000Z",
            "date_published": "2024-04-21T18:53:16.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39980734?u=d74e4445138b4753c03c1b9f5f086d3f9eafec13&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51621.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2255037914\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51621\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51621/hovercard\" href=\"https://github.com/rails/rails/issues/51621\">#51621</a></p>\n<p dir=\"auto\">When we defined the enum in Rails, methods for the enums were generated on the fly. However, these enums do not adhere to the naming convention of the methods.</p>\n<p dir=\"auto\">When listing the methods for a particular instance in the script below, Rails defines two methods for the same key: one with the naming convention and the other with the same name as the key.</p>\n<p dir=\"auto\">For example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"[1] pry(#&lt;BugTest&gt;)&gt; john.methods.select { |method| method.to_s.include? &quot;US&quot;}\n=&gt; [:&quot;US West (Oregon)!&quot;, :US_West_Oregon_?, :US_West_Oregon_!, :&quot;US West (Oregon)?&quot;]\"><pre class=\"notranslate\"><span class=\"pl-kos\">[</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">]</span> <span class=\"pl-en\">pry</span><span class=\"pl-kos\">(</span><span class=\"pl-c\">#&lt;BugTest&gt;)&gt; john.methods.select { |method| method.to_s.include? \"US\"}</span>\n<span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">[</span><span class=\"pl-pds\">:\"US West (Oregon)!\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:US_West_Oregon_?</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:US_West_Oregon_!</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:\"US West (Oregon)?\"</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\"></span></pre></div>\n<p dir=\"auto\">The method :<code class=\"notranslate\">\"US West (Oregon)!\"</code> contains spaces and round brackets in the name which doesn't follow the naming convention.</p>\n<p dir=\"auto\">This PR addresses the above issue.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">In the previous version, within <code class=\"notranslate\">activerecord/lib/active_record/enum.rb</code>, there was a practice of defining two variants of the same key:</p>\n<ol dir=\"auto\">\n<li>One adhering to the method name convention.</li>\n<li>Another method with the same name as the enum key.</li>\n</ol>\n<p dir=\"auto\">This PR modifies the code to create the method only once, adhering to the naming convention.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #51621 ]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51622",
            "title": "[FIX] Enum methods should follow method naming convention",
            "date_modified": "2024-04-21T14:33:15.000Z",
            "date_published": "2024-04-21T12:03:06.000Z",
            "author": {
                "name": "maniSHarma7575",
                "url": "https://github.com/maniSHarma7575"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Ref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2194633942\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51349\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51349/hovercard\" href=\"https://github.com/rails/rails/pull/51349\">#51349</a></p>\n<p dir=\"auto\">Seeing as <code class=\"notranslate\">ActiveRecord::Base.connection</code> is soft deprecated, it's probably worth updating this <code class=\"notranslate\">#inspect</code> to encourage the use of one of the suggested alternatives instead.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Updates <code class=\"notranslate\">#inspect</code> for non-abstract AR model classes to suggest the use of <code class=\"notranslate\">#lease_connection</code> instead of the soft deprecated <code class=\"notranslate\">#connection</code> when the model does not have an established connection.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51620",
            "title": "Encourage `#lease_connection` over `#connection` on AR model `#inspect` without connection",
            "date_modified": "2024-04-21T10:44:10.000Z",
            "date_published": "2024-04-21T10:41:50.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14981592?u=11406fb0121b15a93b3305388377a57b4d9c96f9&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Followup to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2107745328\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50923\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50923/hovercard\" href=\"https://github.com/rails/rails/pull/50923\">#50923</a>. On Ruby 3.4 with rails main I get a bunch of deprecation warnings that look like this:</p>\n<blockquote>\n<p dir=\"auto\">... If automatic inference is not intended, you can silence this warning by defining the association with <code class=\"notranslate\">inverse_of: nil</code>. (called from Array#each at internal:array:54)</p>\n</blockquote>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This test fails for me locally on 3.4 without this change:</p>\n<blockquote>\n<p dir=\"auto\">Expected \"DEPRECATION WARNING: You are using deprecated behavior which will be removed from the next major or minor release. (called from Array#each at internal:array:54)\" to not include \"internal\".</p>\n</blockquote>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51619",
            "title": "Filter internal frames in deprecation warnings for Ruby 3.4",
            "date_modified": "2024-04-20T13:37:45.000Z",
            "date_published": "2024-04-20T13:37:41.000Z",
            "author": {
                "name": "Earlopain",
                "url": "https://github.com/Earlopain"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/33099255?u=a09ef31037b7383aac8510ce616bbd09b8ad3a42&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because to fix valid Mime::Type parsing of media range parameters <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2249773236\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51594\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51594/hovercard\" href=\"https://github.com/rails/rails/issues/51594\">#51594</a> .</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">Mime::Type.lookup</code> (indirectly <code class=\"notranslate\">Mime::Type.parse</code>) to strip out custom media range parameters before falling back to default type creation.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">It looks like the break was initially introduced in 7.1 from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1741521786\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48397\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48397/hovercard\" href=\"https://github.com/rails/rails/pull/48397\">#48397</a> .</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51616",
            "title": "Fix `Mime::Type.parse` for HTTP Accept with parameters",
            "date_modified": "2024-04-20T11:19:29.000Z",
            "date_published": "2024-04-20T11:18:09.000Z",
            "author": {
                "name": "notchairmk",
                "url": "https://github.com/notchairmk"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because apps with lots of routes take a long time to boot. A developer could boot an app for reasons that don't involve routes at all (like running unit tests, migrations, rake tasks, etc.) so I think this should be deferred in dev and test.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes engine and app route sets to a <code class=\"notranslate\">Rails::Engine::RouteSet</code>, which knows about the current Rails application. The default middleware stack has also changed to include a <code class=\"notranslate\">ActionDispatch::Once</code> middleware that loads routes if needed. This PR loads routes under the following circumstances:</p>\n<p dir=\"auto\">In dev/test:</p>\n<ul dir=\"auto\">\n<li>The first request via middleware</li>\n<li>When application or engine <code class=\"notranslate\">url_helpers.some_path</code> is called via <code class=\"notranslate\">method_missing?</code></li>\n<li>When application or engine <code class=\"notranslate\">url_helpers.respond_to?(:some_path)</code> is called via <code class=\"notranslate\">respond_to_missing?</code></li>\n</ul>\n<p dir=\"auto\">In production:</p>\n<ul dir=\"auto\">\n<li>In the finisher eagerly, which is the previous behaviour</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This is loosely inspired by <a href=\"https://github.com/amatsuda/routes_lazy_routes\">https://github.com/amatsuda/routes_lazy_routes</a></p>\n<p dir=\"auto\">I'm a bit concerned this is too much of a hack, but I think the speed benefit might be worth it. In an app with 2000 routes:</p>\n<p dir=\"auto\">Before:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"% time bin/rails runner &quot;&quot;\nbin/rails runner &quot;&quot;  0.66s user 0.33s system 95% cpu 1.036 total\"><pre class=\"notranslate\"><code class=\"notranslate\">% time bin/rails runner \"\"\nbin/rails runner \"\"  0.66s user 0.33s system 95% cpu 1.036 total\n</code></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"% time bin/rails runner &quot;&quot;\nbin/rails runner &quot;&quot;  0.47s user 0.32s system 98% cpu 0.791 total\"><pre class=\"notranslate\"><code class=\"notranslate\">% time bin/rails runner \"\"\nbin/rails runner \"\"  0.47s user 0.32s system 98% cpu 0.791 total\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51614",
            "title": "Defer route drawing to the first request, or when url_helpers called",
            "date_modified": "2024-04-20T07:44:33.000Z",
            "date_published": "2024-04-19T21:42:17.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2223?u=01d20ee07241d135f5b4f55bec2930dc41399d07&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/2223/324107502-853e26ac-3245-485c-b2fe-8f5f5410325c.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM3MzcxOTksIm5iZiI6MTcxMzczNjg5OSwicGF0aCI6Ii8yMjIzLzMyNDEwNzUwMi04NTNlMjZhYy0zMjQ1LTQ4NWMtYjJmZS04ZjVmNTQxMDMyNWMuanBlZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDIxVDIyMDEzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTVmYmRmY2UyYWUxNmFjNGM0OGM0OWE3ZGE0NWQxMzExYjAzMGVmZjgxMjVmODJiNTYxYmI1YjVjNmY1MzA4OGQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.vWRkMA56t5Oh1dCZQO5vuASNd___phDiSzgV5QcFdmg\"><img src=\"https://private-user-images.githubusercontent.com/2223/324107502-853e26ac-3245-485c-b2fe-8f5f5410325c.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM3MzcxOTksIm5iZiI6MTcxMzczNjg5OSwicGF0aCI6Ii8yMjIzLzMyNDEwNzUwMi04NTNlMjZhYy0zMjQ1LTQ4NWMtYjJmZS04ZjVmNTQxMDMyNWMuanBlZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDIxVDIyMDEzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTVmYmRmY2UyYWUxNmFjNGM0OGM0OWE3ZGE0NWQxMzExYjAzMGVmZjgxMjVmODJiNTYxYmI1YjVjNmY1MzA4OGQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.vWRkMA56t5Oh1dCZQO5vuASNd___phDiSzgV5QcFdmg\" alt=\"rtl_example\" style=\"max-width: 100%;\"></a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This PR provides improved RTL language support, specifically focused on Arabic (MSA), Farsi, and Hebrew languages, including custom fonts for those languages, a javascript to detect auto-translation and shift the <code class=\"notranslate\">dir</code> attribute, and other cleanup based on volunteer feedback.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51613",
            "title": "RTL Rendering for Guides",
            "date_modified": "2024-04-19T21:01:42.000Z",
            "date_published": "2024-04-19T16:32:17.000Z",
            "author": {
                "name": "jathayde",
                "url": "https://github.com/jathayde"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/384364?u=4fc3824b37944fc752160718eee736cecde57a67&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">As <a href=\"https://github.com/rails/rails/blob/1428ef984e8be2e301c562c01b34f8d8c90bd4cf/actionpack/lib/action_dispatch/middleware/remote_ip.rb#L25-L32\">pointed out</a> in the documentation, using <code class=\"notranslate\">RemoteIp</code> while accessible without a reverse proxy opens you to IP spoofing. Returning <code class=\"notranslate\">REMOTE_ADDR</code> when that is not considered a trusted proxy should make that less likely.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The current implementation of <code class=\"notranslate\">RemoteIp</code> assumes the Rails server is only directly accessible through a trusted reverse-proxy and requires users to filter the header or remove the middleware when that is not the case.</p>\n<p dir=\"auto\">While such misconfigurations are unlikely, it is also somewhat of an unsafe fallback mode, and returning <code class=\"notranslate\">REMOTE_ADDR</code> instead of trusting <code class=\"notranslate\">X-Forwarded-For</code> from an untrusted client should be better.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">In the test suite, there are cases where <code class=\"notranslate\">REMOTE_ADDR</code> is unset. I don't know in which real-life situations this could happen, but if it does, the code essentially falls back to the old behavior of trusting the last <code class=\"notranslate\">X-Forwarded-For</code>.</p>\n<p dir=\"auto\">An alternative might be to raise an error when <code class=\"notranslate\">REMOTE_ADDR</code> does not match one of the trusted proxies, as is done when <code class=\"notranslate\">Client-Ip</code> and <code class=\"notranslate\">X-Forwarded-For</code> are mismatched.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51610",
            "title": "Change `ActionDispatch::RemoteIp` to not use `HTTP_X_FORWARDED_FOR` when `REMOTE_ADDR` is not a trusted proxy",
            "date_modified": "2024-04-19T13:47:18.000Z",
            "date_published": "2024-04-19T13:12:47.000Z",
            "author": {
                "name": "ClearlyClaire",
                "url": "https://github.com/ClearlyClaire"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/111995?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51602.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2251712040\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51602\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51602/hovercard\" href=\"https://github.com/rails/rails/issues/51602\">#51602</a>, whereby select prompts are shown for <code class=\"notranslate\">false</code> boolean attributes, when that should be reserved for when they're <code class=\"notranslate\">nil</code>.</p>\n<p dir=\"auto\">I wasn't sure whether to put it in the CHANGELOG, so I haven't.</p>",
            "url": "https://github.com/rails/rails/pull/51605",
            "title": "Stop showing select prompts for false attributes",
            "date_modified": "2024-04-19T02:14:29.000Z",
            "date_published": "2024-04-19T02:14:25.000Z",
            "author": {
                "name": "mrj",
                "url": "https://github.com/mrj"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/384364?u=4fc3824b37944fc752160718eee736cecde57a67&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">While Rails 7.1 has added support for writing Common Table Expressions, this support does not extend to recursive CTEs.</p>\n<p dir=\"auto\">This PR adds a <code class=\"notranslate\">.with.recursive</code> construct to enable recursive CTEs.</p>\n<p dir=\"auto\">In addition, it enables passing arrays of queries as <code class=\"notranslate\">with</code> hash values, as recursive CTEs are generally only useful with <code class=\"notranslate\">UNION</code> or <code class=\"notranslate\">UNION ALL</code>, which, to my knowledge, are currently not exposed outside of Arel.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a <code class=\"notranslate\">WithChain</code> placeholder object to chain <code class=\"notranslate\">with</code> and <code class=\"notranslate\">recursive</code>, in the manner of <code class=\"notranslate\">where.not</code>. Calling <code class=\"notranslate\">with.recursive</code> returns a scope with a <code class=\"notranslate\">with_is_recursive</code> flag turned on, which is then used in <code class=\"notranslate\">build_with</code> to pass <code class=\"notranslate\">:recursive</code> to Arel.</p>\n<p dir=\"auto\">The Pull Request also changes <code class=\"notranslate\">build_with_value_from_hash</code> to allow arrays of values as queries, in which case the subqueries are joined with <code class=\"notranslate\">UNION ALL</code>.</p>\n<p dir=\"auto\">This enables writing queries such as:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.with.recursive(\n  post_and_replies: [\n    Post.where(id: 42),\n    Post.joins('JOIN post_and_replies ON posts.in_reply_to_id = post_and_replies.id'),\n  ]\n)\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">with</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">recursive</span><span class=\"pl-kos\">(</span>\n  <span class=\"pl-pds\">post_and_replies</span>: <span class=\"pl-kos\">[</span>\n    <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">id</span>: <span class=\"pl-c1\">42</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">joins</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'JOIN post_and_replies ON posts.in_reply_to_id = post_and_replies.id'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-kos\">]</span>\n<span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">Generating the following SQL:</p>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"WITH RECURSIVE &quot;post_and_replies&quot; AS (\n  (SELECT &quot;posts&quot;.* FROM &quot;posts&quot; WHERE &quot;posts&quot;.&quot;id&quot; = 42)\n  UNION ALL\n  (SELECT &quot;posts&quot;.* FROM &quot;posts&quot; JOIN post_and_replies ON posts.in_reply_to_id = post_and_replies.id)\n)\nSELECT &quot;posts&quot;.* FROM &quot;posts&quot;\"><pre class=\"notranslate\">WITH RECURSIVE <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>post_and_replies<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">AS</span> (\n  (<span class=\"pl-k\">SELECT</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-k\">*</span> <span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">WHERE</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">42</span>)\n  <span class=\"pl-k\">UNION ALL</span>\n  (<span class=\"pl-k\">SELECT</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-k\">*</span> <span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">JOIN</span> post_and_replies <span class=\"pl-k\">ON</span> <span class=\"pl-c1\">posts</span>.<span class=\"pl-c1\">in_reply_to_id</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">post_and_replies</span>.<span class=\"pl-c1\">id</span>)\n)\n<span class=\"pl-k\">SELECT</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-k\">*</span> <span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Several syntaxes have previously been discussed to support recursive CTEs, as well as unions.</p>\n<ul dir=\"auto\">\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"536810238\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/37944\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/37944/hovercard?comment_id=565796643&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/pull/37944#issuecomment-565796643\">#37944 (comment)</a> proposes <code class=\"notranslate\">.with(:recursive, …)</code></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"536810238\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/37944\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/37944/hovercard?comment_id=565803484&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/pull/37944#issuecomment-565803484\">#37944 (comment)</a> also suggests <code class=\"notranslate\">.with.recursive(…)</code> (which this PR implements) and <code class=\"notranslate\">.with_recursive(…)</code></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1583198310\" data-permission-text=\"Title is private\" data-url=\"https://github.com/vlado/activerecord-cte/issues/16\" data-hovercard-type=\"issue\" data-hovercard-url=\"/vlado/activerecord-cte/issues/16/hovercard?comment_id=1433043310&amp;comment_type=issue_comment\" href=\"https://github.com/vlado/activerecord-cte/issues/16#issuecomment-1433043310\">vlado/activerecord-cte#16 (comment)</a> suggests <code class=\"notranslate\">.with_recursive(cte_name, base_case, recursive_case)</code></li>\n</ul>\n<p dir=\"auto\">I took a lot of inspiration from that last monkey-patch, but the API felt significantly at odds with the existing <code class=\"notranslate\">QueryMethods#with</code>, so I decided to go with the <code class=\"notranslate\">.with.recursive</code> approach and extend that interface to offer to <code class=\"notranslate\">UNION ALL</code> sub-queries.</p>\n<p dir=\"auto\">I have decided to put both the array support and the <code class=\"notranslate\">.with.recursive</code> support in the same PR, as they are closely related, but I can split it into two PRs if preferred.</p>\n<p dir=\"auto\">Tests are updated accordingly, but don't actually test inherently recursive queries, as I'm not sure there are existing fixtures lending themselves to that.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51601",
            "title": "Add support for recursive CTEs in ActiveRecord",
            "date_modified": "2024-04-20T11:14:47.000Z",
            "date_published": "2024-04-18T17:32:40.000Z",
            "author": {
                "name": "ClearlyClaire",
                "url": "https://github.com/ClearlyClaire"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/131752?u=32ddf1119b1d189c9bd241a721b36ea01c29f61e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">In Ruby 3.4+ backtraces are going to use a single quote rather than a backtick <a href=\"https://bugs.ruby-lang.org/issues/16495\" rel=\"nofollow\">https://bugs.ruby-lang.org/issues/16495</a></p>\n<p dir=\"auto\">This adjusts our backtrace cleaner regex to work with either format. I considered making it just work on whatever output we expect to see from the current Ruby version, but we are already using a regex here and this seemed much simpler.</p>",
            "url": "https://github.com/rails/rails/pull/51590",
            "title": "Fix ActionView backtrace filtering on Ruby 3.4+",
            "date_modified": "2024-04-18T17:31:36.000Z",
            "date_published": "2024-04-17T23:18:59.000Z",
            "author": {
                "name": "jhawthorn",
                "url": "https://github.com/jhawthorn"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/622516?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">When using the following code you'd expect that you can pass <code class=\"notranslate\">expire_in</code> as you can with rendering individual partials.</p>\n<div class=\"highlight highlight-text-html-erb notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"&lt;%= render(collection: @posts, partial: 'post', cached: true, expires_in: 1.hour) %&gt;\"><pre class=\"notranslate\"><span class=\"pl-k\">&lt;%=</span> render(collection: @posts, partial: 'post', cached: true, expires_in: 1.hour) <span class=\"pl-k\">%&gt;</span><span class=\"pl-en\"></span><span class=\"pl-kos\"></span><span class=\"pl-pds\"></span><span class=\"pl-c1\"></span><span class=\"pl-kos\"></span><span class=\"pl-pds\"></span><span class=\"pl-s\"></span><span class=\"pl-kos\"></span><span class=\"pl-pds\"></span><span class=\"pl-c1\"></span><span class=\"pl-kos\"></span><span class=\"pl-pds\"></span><span class=\"pl-c1\"></span><span class=\"pl-kos\"></span><span class=\"pl-en\"></span><span class=\"pl-kos\"></span></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<ul dir=\"auto\">\n<li>Pass <code class=\"notranslate\">expires_in</code> to <code class=\"notranslate\">write_multi</code> so the cache key is written with the expiration.</li>\n<li>Added tests.</li>\n<li>Added documentation.</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51579",
            "title": "Add support for `expires_in:` when using `render` with `collection:`",
            "date_modified": "2024-04-17T14:04:55.000Z",
            "date_published": "2024-04-16T17:28:40.000Z",
            "author": {
                "name": "jclusso",
                "url": "https://github.com/jclusso"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6097?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">&gt;= AND &lt;=</code> is bad</li>\n<li><code class=\"notranslate\">&gt;= AND &lt;</code> is good</li>\n</ul>\n<p dir=\"auto\"><a href=\"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_BETWEEN_.28especially_with_timestamps.29\" rel=\"nofollow\">https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_BETWEEN_.28especially_with_timestamps.29</a></p>\n<h2 dir=\"auto\">Why is it okay to change this behavior?</h2>\n<blockquote>\n<p dir=\"auto\">I doubt anyone actually wants the possibility of being infinite points of precision away from tomorrow<br>\n— <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/natematykiewicz/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/natematykiewicz\">@natematykiewicz</a></p>\n</blockquote>\n<h2 dir=\"auto\">ToDo</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> tests for new methods</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> DRY new methods?</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51575",
            "title": "Use exact date spans instead of multi-nine approximations for `all_day`, `all_week`, etc. methods",
            "date_modified": "2024-04-16T13:39:45.000Z",
            "date_published": "2024-04-15T21:01:05.000Z",
            "author": {
                "name": "jjb",
                "url": "https://github.com/jjb"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5512772?u=bbae6d87b3499e6b3662664cf4be0e84cc40f6d2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This PR adds a deprecation warning for the <code class=\"notranslate\">query_constraints:</code> association option. This option will change behavior in the future versions of Rails and applications are encouraged to switch to <code class=\"notranslate\">foreign_key:</code> to preserve the current behavior.</p>\n<p dir=\"auto\">Related to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1947207719\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49671\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49671/hovercard?comment_id=1997955187&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/issues/49671#issuecomment-1997955187\">#49671 (comment)</a></p>\n<h3 dir=\"auto\">Deprecation location</h3>\n<p dir=\"auto\">Currently Rails will issue a deprecation during boot but there is an option to move it and only warn on runtime when a reflection with <code class=\"notranslate\">query_constraints</code> is used.<br>\nI chose to put it in the <code class=\"notranslate\">initialize</code> just because it's the simplest available solution and moving it to runtime will require a bit of renaming.<br>\nLet me know if you think there is a reason to have this deprecation issued in runtime or if we should have both.</p>\n<h3 dir=\"auto\">Test models</h3>\n<p dir=\"auto\">To avoid having this deprecation in tests I migrated all models to <code class=\"notranslate\">foreign_key:</code> but the long term intention is for <code class=\"notranslate\">Sharded::</code> namespace models to use the new behavior of <code class=\"notranslate\">query_constrainsts</code> and <code class=\"notranslate\">Cpk::</code> to keep using <code class=\"notranslate\">foreign_key</code></p>\n<p dir=\"auto\">Also passing CI is an assurance that <code class=\"notranslate\">foreign_key</code> is indeed a safe substitution for <code class=\"notranslate\">query_constraints:</code></p>",
            "url": "https://github.com/rails/rails/pull/51571",
            "title": "Warn about changing `query_constraints:` behavior",
            "date_modified": "2024-04-17T14:40:10.000Z",
            "date_published": "2024-04-15T16:03:42.000Z",
            "author": {
                "name": "nvasilevski",
                "url": "https://github.com/nvasilevski"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/17678162?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This is my first PR to rails, I couldn't locate any similar or identical issues documented or discussed.</p>\n<p dir=\"auto\">The backtrace of errors starts exhibiting the following output post the Rails 7.08 =&gt; Rails 7.1 update:<br>\nThe last attempt I made was to create a new database migration, which hasn't been migrated yet. An error occurred, indicating 'You have 1 pending migration.' The error traceback is as follows when I tried to fetch kaminari paginated page from api:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Puma caught this error: undefined method `built_templates' for #&lt;ActionView::FileSystemResolver:0x000000011b4f9540 @unbound_templates=#&lt;Concurrent::Map:0x000000011b4f94a0 entries=0 default_proc=nil&gt;, @path_parser=#&lt;ActionView::Resolver::PathParser:0x00000001283b1748&gt;, @path=&quot;/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/kaminari-core-1.2.2/app/views&quot;&gt; (NoMethodError)\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:269:in `block in build_backtrace'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:268:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:268:in `build_backtrace'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:56:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:35:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:35:in `rescue in call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:37:in `call_app'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:24:in `block in call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:135:in `block in tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:39:in `tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:135:in `tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/broadcast_logger.rb:240:in `method_missing'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:24:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/sprockets-rails-3.4.2/lib/sprockets/rails/quiet_assets.rb:13:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/remote_ip.rb:92:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/request_store-1.5.1/lib/request_store/middleware.rb:19:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/request_id.rb:28:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/method_override.rb:28:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/runtime.rb:24:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/executor.rb:14:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/static.rb:25:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/sendfile.rb:114:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/host_authorization.rb:141:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/rack-cors-2.0.2/lib/rack/cors.rb:102:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/engine.rb:536:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/configuration.rb:272:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/request.rb:100:in `block in handle_request'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:378:in `with_force_shutdown'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/request.rb:99:in `handle_request'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/server.rb:464:in `process_client'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/server.rb:245:in `block in run'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:155:in `block in spawn_thread'\"><pre class=\"notranslate\"><code class=\"notranslate\">Puma caught this error: undefined method `built_templates' for #&lt;ActionView::FileSystemResolver:0x000000011b4f9540 @unbound_templates=#&lt;Concurrent::Map:0x000000011b4f94a0 entries=0 default_proc=nil&gt;, @path_parser=#&lt;ActionView::Resolver::PathParser:0x00000001283b1748&gt;, @path=\"/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/kaminari-core-1.2.2/app/views\"&gt; (NoMethodError)\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:269:in `block in build_backtrace'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:268:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:268:in `build_backtrace'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:56:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:35:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:35:in `rescue in call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:37:in `call_app'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:24:in `block in call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:135:in `block in tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:39:in `tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:135:in `tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/broadcast_logger.rb:240:in `method_missing'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:24:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/sprockets-rails-3.4.2/lib/sprockets/rails/quiet_assets.rb:13:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/remote_ip.rb:92:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/request_store-1.5.1/lib/request_store/middleware.rb:19:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/request_id.rb:28:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/method_override.rb:28:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/runtime.rb:24:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/executor.rb:14:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/static.rb:25:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/sendfile.rb:114:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/host_authorization.rb:141:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/rack-cors-2.0.2/lib/rack/cors.rb:102:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/engine.rb:536:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/configuration.rb:272:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/request.rb:100:in `block in handle_request'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:378:in `with_force_shutdown'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/request.rb:99:in `handle_request'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/server.rb:464:in `process_client'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/server.rb:245:in `block in run'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:155:in `block in spawn_thread'\n</code></pre></div>\n<p dir=\"auto\">This error isn't exclusive to Kaminari. I've attempted to isolate the issue by removing gems individually, but each time, I encounter the same backtrace, albeit with a different gem's view route (such as Active Admin or Devise).</p>\n<p dir=\"auto\">There could be other gems interfering with the middleware, but I'm uncertain what's necessary to establish a backtrace at the initialization stage.</p>\n<p dir=\"auto\">This Pull Request has been created because, I believe it resolves the initialization backtrace error, thereby resolving the main issue at hand.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes ActionDispatch ExeptionWrapper class, and removes backtrace attribute to be set on initializing stage.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">N/A</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51568",
            "title": "ExceptionWrapper take out backtrace setter from initialize stage",
            "date_modified": "2024-04-18T18:03:35.000Z",
            "date_published": "2024-04-15T10:46:50.000Z",
            "author": {
                "name": "erimicel",
                "url": "https://github.com/erimicel"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2291064?u=9d30765b16bbc19b3fbd3a160a262e8044ed42ab&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">… association instead of authors because has_many associations uses 2 queries with eager_load while belongs_to uses 1 query</p>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because because the eager_load example in active record query uses 1 query while it is mentioned in the doc that it uses 2 queries.</p>\n<p dir=\"auto\">This PR changes the example to use reviews <code class=\"notranslate\">has_many</code> association which uses 2 queries when using eager_load. <code class=\"notranslate\">belongs_to</code> relationship uses 1 query with eager_load.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">eager_load</code> example given in <code class=\"notranslate\">guides/source/active_record_querying.md</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The books author example uses only 1 query, I've noticed that it happens with <code class=\"notranslate\">belongs_to</code> association:</p>\n<h4 dir=\"auto\">books author example</h4>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"books = Book.eager_load(:author).limit(10)\n  SQL (0.4ms)  SELECT &quot;books&quot;.&quot;id&quot; AS t0_r0, &quot;books&quot;.&quot;title&quot; AS t0_r1, ...\n   FROM &quot;books&quot; LEFT OUTER JOIN &quot;authors&quot; ON &quot;authors&quot;.&quot;id&quot; = &quot;books&quot;.&quot;author_id&quot; LIMIT 10\"><pre class=\"notranslate\"><code class=\"notranslate\">books = Book.eager_load(:author).limit(10)\n  SQL (0.4ms)  SELECT \"books\".\"id\" AS t0_r0, \"books\".\"title\" AS t0_r1, ...\n   FROM \"books\" LEFT OUTER JOIN \"authors\" ON \"authors\".\"id\" = \"books\".\"author_id\" LIMIT 10\n</code></pre></div>\n<h4 dir=\"auto\">fetching books supplier which is also a <code class=\"notranslate\">belongs_to</code> relationship</h4>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"3.2.3 :004 &gt; books = Book.eager_load(:supplier).limit(10)\n  SQL (0.2ms)  SELECT &quot;books&quot;.&quot;id&quot; AS t0_r0, &quot;books&quot;.&quot;title&quot; AS t0_r1,...\n  FROM &quot;books&quot; LEFT OUTER JOIN &quot;suppliers&quot; ON &quot;suppliers&quot;.&quot;id&quot; = &quot;books&quot;.&quot;supplier_id&quot; LIMIT 10\"><pre class=\"notranslate\"><code class=\"notranslate\">3.2.3 :004 &gt; books = Book.eager_load(:supplier).limit(10)\n  SQL (0.2ms)  SELECT \"books\".\"id\" AS t0_r0, \"books\".\"title\" AS t0_r1,...\n  FROM \"books\" LEFT OUTER JOIN \"suppliers\" ON \"suppliers\".\"id\" = \"books\".\"supplier_id\" LIMIT 10\n</code></pre></div>\n<p dir=\"auto\">While for a <code class=\"notranslate\">has_many</code> association, <code class=\"notranslate\">eager_load</code> requires 2 queries:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"books = Book.eager_load(:reviews).limit(10)\n  SQL (0.4ms)  SELECT DISTINCT &quot;books&quot;.&quot;id&quot; FROM &quot;books&quot; LEFT OUTER JOIN &quot;reviews&quot; ON &quot;reviews&quot;.&quot;book_id&quot; = &quot;books&quot;.&quot;id&quot; LIMIT 10\n  SQL (0.2ms)  SELECT &quot;books&quot;.&quot;id&quot; AS t0_r0, &quot;books&quot;.&quot;title&quot; AS t0_r1, ...\n    FROM &quot;books&quot; LEFT OUTER JOIN &quot;reviews&quot; ON &quot;reviews&quot;.&quot;book_id&quot; = &quot;books&quot;.&quot;id&quot; WHERE &quot;books&quot;.&quot;id&quot; IN (1,2,3,4,5,6)\"><pre class=\"notranslate\"><code class=\"notranslate\">books = Book.eager_load(:reviews).limit(10)\n  SQL (0.4ms)  SELECT DISTINCT \"books\".\"id\" FROM \"books\" LEFT OUTER JOIN \"reviews\" ON \"reviews\".\"book_id\" = \"books\".\"id\" LIMIT 10\n  SQL (0.2ms)  SELECT \"books\".\"id\" AS t0_r0, \"books\".\"title\" AS t0_r1, ...\n    FROM \"books\" LEFT OUTER JOIN \"reviews\" ON \"reviews\".\"book_id\" = \"books\".\"id\" WHERE \"books\".\"id\" IN (1,2,3,4,5,6)\n</code></pre></div>\n<h4 dir=\"auto\">Alternate Suggestions</h4>\n<ol dir=\"auto\">\n<li>We can also use the same books author example and specify that it uses 1 query. However, it might be better to also cover the <code class=\"notranslate\">has_many</code> association example so readers don't assume that <code class=\"notranslate\">eager_loads</code> uses only 1 query.</li>\n<li>I was thinking about changing the example for all previous associations to make things consistent but I thought about discussing it first since that will be a relatively larger change.</li>\n</ol>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51566",
            "title": "[ci skip] doc: updated the eager load query example to use reviews as…",
            "date_modified": "2024-04-14T08:18:35.000Z",
            "date_published": "2024-04-14T08:18:31.000Z",
            "author": {
                "name": "ashish91",
                "url": "https://github.com/ashish91"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5913106?u=b6d2266389cde0ac89e38f3bde69a10459e27de5&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">We noticed when making our own cache store that options were not being passed correctly to writes in some cases. Upon further investigation the <code class=\"notranslate\">handle_expired_entry</code> method calls <code class=\"notranslate\">write_entry</code> during the <code class=\"notranslate\">race_condition_ttl</code> period. However, this call to <code class=\"notranslate\">write_entry</code> does not pass along the correct options meaning that in some cases (like the test case I provided with compression) does not correctly write the data.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">handle_expired_entry</code> method to use options when writing the key back with a <code class=\"notranslate\">race_condition_ttl</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I am unsure of the implications of this for uses of this. It could be implicitly breaking as now options are used when they weren't being used before in this niche case.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51557",
            "title": "[Bugfix] Pass options along to write_entry in handle_expired_entry method",
            "date_modified": "2024-04-12T14:07:36.000Z",
            "date_published": "2024-04-12T14:07:31.000Z",
            "author": {
                "name": "grcooper",
                "url": "https://github.com/grcooper"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/651800?u=21b86d520450fb8dc4b62c0c4f59afc2c22366e0&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I'm using PostgreSQL and I don't allow any user to connect to it using <code class=\"notranslate\">postgres</code> database. Instead all users need to connect using their own database.</p>\n<p dir=\"auto\">Currently Rails applications don't work with such configuration because of hardcoded <code class=\"notranslate\">postgres</code> database that can't be changed. That is I set database in <code class=\"notranslate\">config/database.yml</code> but Rails will still attempt to connect using <code class=\"notranslate\">postgres</code> database.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Use database from <code class=\"notranslate\">config/database.yml</code>  instead of hardcoded  <code class=\"notranslate\">postgres</code> .</p>\n<p dir=\"auto\">Note that there is one issue with this PR - what if the specified database in <code class=\"notranslate\">config/database.yml</code> doesn't exist?<br>\nI see 2 ways to solve that:</p>\n<ul dir=\"auto\">\n<li>ask user to create it manually, it's very trivial just execute <code class=\"notranslate\">createdb $NAME</code> which is provided by PostgreSQL.</li>\n<li>in case we fail, try again using <code class=\"notranslate\">postgres</code> database but note that even then our user might not have <code class=\"notranslate\">CREATEDB</code> permissions.</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Which users are allowed to connect with which databases can be configured in <code class=\"notranslate\">pg_hba.conf</code>.</p>\n<p dir=\"auto\">For example config like:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"local    rails    rails   peer\"><pre class=\"notranslate\"><code class=\"notranslate\">local    rails    rails   peer\n</code></pre></div>\n<p dir=\"auto\">Means that <code class=\"notranslate\">rails</code> user is allowed to connect using Unix domain socket with <code class=\"notranslate\">rails</code> DB user using <code class=\"notranslate\">rails</code> database. So connecting using <code class=\"notranslate\">postgres</code> database will be denied.<br>\nNote that this doesn't affect database permissions and <code class=\"notranslate\">rails</code> user might be allowed to query and modify <code class=\"notranslate\">postgres</code> database even while being connected using <code class=\"notranslate\">rails</code> database.</p>\n<p dir=\"auto\">It took me a while to hunt down this issue but basically application I was trying to setup (<code class=\"notranslate\">rails db:setup</code>) was failing with:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ rails db:setup --trace\n** Invoke db:setup (first_time)\n** Invoke db:create (first_time)\n** Invoke db:load_config (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Execute db:load_config\n** Execute db:create\nWe could not find your database: postgres. Which can be found in the database configuration file located at config/database.yml.\n\nTo resolve this issue:\n\n- Did you create the database for this app, or delete it? You may need to create your database.\n- Has the database name changed? Check your database.yml config has the correct database name.\n\nTo create your database, run:\n\n        bin/rails db:create\nCouldn't create 'rails' database. Please check your configuration.\nrails aborted!\nActiveRecord::NoDatabaseError: We could not find your database: postgres. Which can be found in the database configuration file located at config/database.yml.\n\nTo resolve this issue:\n\n- Did you create the database for this app, or delete it? You may need to create your database.\n- Has the database name changed? Check your database.yml config has the correct database name.\n\nTo create your database, run:\n\n        bin/rails db:create\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/postgresql_adapter.rb:81:in `rescue in new_client'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_handling.rb:313:in `retrieve_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_handling.rb:280:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/postgresql_database_tasks.rb:12:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/postgresql_database_tasks.rb:26:in `create'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:122:in `create'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:184:in `block in create_current'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:557:in `block (2 levels) in each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:554:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:554:in `block in each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:553:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:553:in `each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:184:in `create_current'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/railties/databases.rake:45:in `block (2 levels) in &lt;main&gt;'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `block in execute'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `execute'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:219:in `block in invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `synchronize'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:243:in `block in invoke_prerequisites'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:241:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:241:in `invoke_prerequisites'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:218:in `block in invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `synchronize'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:188:in `invoke'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:160:in `invoke_task'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `block in top_level'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:125:in `run_with_threads'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:110:in `top_level'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:24:in `block (2 levels) in perform'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:186:in `standard_exception_handling'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:24:in `block in perform'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/rake_module.rb:59:in `with_application'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:18:in `perform'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/command.rb:51:in `invoke'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands.rb:18:in `&lt;main&gt;'\n&lt;internal:/usr/lib/ruby/site_ruby/3.0.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n&lt;internal:/usr/lib/ruby/site_ruby/3.0.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n/usr/lib/ruby/gems/3.0.0/gems/bootsnap-1.16.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require'\nbin/rails:4:in `&lt;main&gt;'\n\nCaused by:\nPG::ConnectionBad: connection to server on socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot; failed: FATAL:  pg_hba.conf rejects connection for host &quot;[local]&quot;, user &quot;rails&quot;, database &quot;postgres&quot;, no encryption\n/usr/lib/ruby/gems/3.0.0/gems/pg-1.5.5/lib/pg/connection.rb:696:in `async_connect_or_reset'\n/usr/lib/ruby/gems/3.0.0/gems/pg-1.5.5/lib/pg/connection.rb:824:in `connect_to_hosts'\n/usr/lib/ruby/gems/3.0.0/gems/pg-1.5.5/lib/pg/connection.rb:759:in `new'\n/usr/lib/ruby/gems/3.0.0/gems/pg-1.5.5/lib/pg.rb:63:in `connect'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/postgresql_adapter.rb:78:in `new_client'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_handling.rb:313:in `retrieve_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_handling.rb:280:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/postgresql_database_tasks.rb:12:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/postgresql_database_tasks.rb:26:in `create'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:122:in `create'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:184:in `block in create_current'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:557:in `block (2 levels) in each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:554:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:554:in `block in each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:553:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:553:in `each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:184:in `create_current'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/railties/databases.rake:45:in `block (2 levels) in &lt;main&gt;'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `block in execute'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `execute'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:219:in `block in invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `synchronize'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:243:in `block in invoke_prerequisites'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:241:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:241:in `invoke_prerequisites'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:218:in `block in invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `synchronize'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:188:in `invoke'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:160:in `invoke_task'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `block in top_level'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:125:in `run_with_threads'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:110:in `top_level'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:24:in `block (2 levels) in perform'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:186:in `standard_exception_handling'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:24:in `block in perform'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/rake_module.rb:59:in `with_application'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:18:in `perform'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/command.rb:51:in `invoke'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands.rb:18:in `&lt;main&gt;'\n&lt;internal:/usr/lib/ruby/site_ruby/3.0.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n&lt;internal:/usr/lib/ruby/site_ruby/3.0.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n/usr/lib/ruby/gems/3.0.0/gems/bootsnap-1.16.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require'\nbin/rails:4:in `&lt;main&gt;'\nTasks: TOP =&gt; db:setup =&gt; db:create\"><pre class=\"notranslate\"><code class=\"notranslate\">$ rails db:setup --trace\n** Invoke db:setup (first_time)\n** Invoke db:create (first_time)\n** Invoke db:load_config (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Execute db:load_config\n** Execute db:create\nWe could not find your database: postgres. Which can be found in the database configuration file located at config/database.yml.\n\nTo resolve this issue:\n\n- Did you create the database for this app, or delete it? You may need to create your database.\n- Has the database name changed? Check your database.yml config has the correct database name.\n\nTo create your database, run:\n\n        bin/rails db:create\nCouldn't create 'rails' database. Please check your configuration.\nrails aborted!\nActiveRecord::NoDatabaseError: We could not find your database: postgres. Which can be found in the database configuration file located at config/database.yml.\n\nTo resolve this issue:\n\n- Did you create the database for this app, or delete it? You may need to create your database.\n- Has the database name changed? Check your database.yml config has the correct database name.\n\nTo create your database, run:\n\n        bin/rails db:create\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/postgresql_adapter.rb:81:in `rescue in new_client'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_handling.rb:313:in `retrieve_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_handling.rb:280:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/postgresql_database_tasks.rb:12:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/postgresql_database_tasks.rb:26:in `create'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:122:in `create'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:184:in `block in create_current'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:557:in `block (2 levels) in each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:554:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:554:in `block in each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:553:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:553:in `each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:184:in `create_current'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/railties/databases.rake:45:in `block (2 levels) in &lt;main&gt;'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `block in execute'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `execute'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:219:in `block in invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `synchronize'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:243:in `block in invoke_prerequisites'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:241:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:241:in `invoke_prerequisites'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:218:in `block in invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `synchronize'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:188:in `invoke'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:160:in `invoke_task'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `block in top_level'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:125:in `run_with_threads'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:110:in `top_level'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:24:in `block (2 levels) in perform'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:186:in `standard_exception_handling'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:24:in `block in perform'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/rake_module.rb:59:in `with_application'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:18:in `perform'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/command.rb:51:in `invoke'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands.rb:18:in `&lt;main&gt;'\n&lt;internal:/usr/lib/ruby/site_ruby/3.0.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n&lt;internal:/usr/lib/ruby/site_ruby/3.0.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n/usr/lib/ruby/gems/3.0.0/gems/bootsnap-1.16.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require'\nbin/rails:4:in `&lt;main&gt;'\n\nCaused by:\nPG::ConnectionBad: connection to server on socket \"/var/run/postgresql/.s.PGSQL.5432\" failed: FATAL:  pg_hba.conf rejects connection for host \"[local]\", user \"rails\", database \"postgres\", no encryption\n/usr/lib/ruby/gems/3.0.0/gems/pg-1.5.5/lib/pg/connection.rb:696:in `async_connect_or_reset'\n/usr/lib/ruby/gems/3.0.0/gems/pg-1.5.5/lib/pg/connection.rb:824:in `connect_to_hosts'\n/usr/lib/ruby/gems/3.0.0/gems/pg-1.5.5/lib/pg/connection.rb:759:in `new'\n/usr/lib/ruby/gems/3.0.0/gems/pg-1.5.5/lib/pg.rb:63:in `connect'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/postgresql_adapter.rb:78:in `new_client'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_handling.rb:313:in `retrieve_connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/connection_handling.rb:280:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/postgresql_database_tasks.rb:12:in `connection'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/postgresql_database_tasks.rb:26:in `create'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:122:in `create'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:184:in `block in create_current'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:557:in `block (2 levels) in each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:554:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:554:in `block in each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:553:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:553:in `each_current_configuration'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/tasks/database_tasks.rb:184:in `create_current'\n/usr/lib/ruby/gems/3.0.0/gems/activerecord-7.0.8.1/lib/active_record/railties/databases.rake:45:in `block (2 levels) in &lt;main&gt;'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `block in execute'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:281:in `execute'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:219:in `block in invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `synchronize'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:243:in `block in invoke_prerequisites'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:241:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:241:in `invoke_prerequisites'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:218:in `block in invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `synchronize'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:199:in `invoke_with_call_chain'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/task.rb:188:in `invoke'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:160:in `invoke_task'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `each'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:116:in `block in top_level'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:125:in `run_with_threads'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:110:in `top_level'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:24:in `block (2 levels) in perform'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/application.rb:186:in `standard_exception_handling'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:24:in `block in perform'\n/usr/lib/ruby/gems/3.0.0/gems/rake-13.0.6/lib/rake/rake_module.rb:59:in `with_application'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands/rake/rake_command.rb:18:in `perform'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/command.rb:51:in `invoke'\n/usr/lib/ruby/gems/3.0.0/gems/railties-7.0.8.1/lib/rails/commands.rb:18:in `&lt;main&gt;'\n&lt;internal:/usr/lib/ruby/site_ruby/3.0.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n&lt;internal:/usr/lib/ruby/site_ruby/3.0.0/rubygems/core_ext/kernel_require.rb&gt;:37:in `require'\n/usr/lib/ruby/gems/3.0.0/gems/bootsnap-1.16.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require'\nbin/rails:4:in `&lt;main&gt;'\nTasks: TOP =&gt; db:setup =&gt; db:create\n</code></pre></div>\n<p dir=\"auto\">Notice the very misleading messages:</p>\n<blockquote>\n<p dir=\"auto\">We could not find your database: <strong>postgres</strong>. Which can be found in the database configuration file located at <em>config/database.yml</em>.<br>\nCouldn't create '<strong>rails</strong>' database. Please check your configuration.<br>\n...<br>\nActiveRecord::NoDatabaseError: We could not find your database: <strong>postgres</strong>. Which can be found in the database configuration file located at <em>config/database.yml</em>.</p>\n</blockquote>\n<p dir=\"auto\">While in <code class=\"notranslate\">config/database.yml</code> I have <code class=\"notranslate\">database: rails</code> - really a hair pulling moment 🤯</p>\n<p dir=\"auto\">And also you can see there</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"PG::ConnectionBad: connection to server on socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot; failed: FATAL:  pg_hba.conf rejects connection for host &quot;[local]&quot;, user &quot;rails&quot;, database &quot;postgres&quot;, no encryption\"><pre class=\"notranslate\"><code class=\"notranslate\">PG::ConnectionBad: connection to server on socket \"/var/run/postgresql/.s.PGSQL.5432\" failed: FATAL:  pg_hba.conf rejects connection for host \"[local]\", user \"rails\", database \"postgres\", no encryption\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51547",
            "title": "ActiveRecord suppport authentication with non-postgres database",
            "date_modified": "2024-04-11T10:14:22.000Z",
            "date_published": "2024-04-11T09:59:43.000Z",
            "author": {
                "name": "davispuh",
                "url": "https://github.com/davispuh"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/245443?u=a95b823cd933875b07547e7bd1a81ae227e83603&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Rails 6.0 upgrade mentioned that behaviour will change in 7.1 (see <a href=\"https://guides.rubyonrails.org/upgrading_ruby_on_rails.html#active-storage-assignment-behavior-change\" rel=\"nofollow\">https://guides.rubyonrails.org/upgrading_ruby_on_rails.html#active-storage-assignment-behavior-change</a>). But it at least formally did not, see <a href=\"https://guides.rubyonrails.org/7_1_release_notes.html#active-storage-removals\" rel=\"nofollow\">https://guides.rubyonrails.org/7_1_release_notes.html#active-storage-removals</a></p>",
            "url": "https://github.com/rails/rails/pull/51538",
            "title": "[ci skip] Fix documented version for `multiple_file_field_include_hidden`",
            "date_modified": "2024-04-13T07:58:34.000Z",
            "date_published": "2024-04-10T09:09:31.000Z",
            "author": {
                "name": "schmijos",
                "url": "https://github.com/schmijos"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Javascript and CSS is part of the View layer of MVC. These guides can be grouped under the View section of the guides.</p>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/28561/320984001-eae8a155-24a4-4e11-a914-94dc76437431.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM3MzcxOTksIm5iZiI6MTcxMzczNjg5OSwicGF0aCI6Ii8yODU2MS8zMjA5ODQwMDEtZWFlOGExNTUtMjRhNC00ZTExLWE5MTQtOTRkYzc2NDM3NDMxLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDIxVDIyMDEzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWUwYzkyMmIwNjRiOTU5YjEzYjk4MmYyMzgxMzY0ZTMxNWNiNmI0ZmNiYWY2NDUxMzVlNzhkMzA0Yzg1Mjc3N2UmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.PZbtWxodiELE8SqcJxmtqP2wCrPrcsFQOOVuSRhieco\"><img width=\"1054\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/28561/320984001-eae8a155-24a4-4e11-a914-94dc76437431.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM3MzcxOTksIm5iZiI6MTcxMzczNjg5OSwicGF0aCI6Ii8yODU2MS8zMjA5ODQwMDEtZWFlOGExNTUtMjRhNC00ZTExLWE5MTQtOTRkYzc2NDM3NDMxLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDIxVDIyMDEzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWUwYzkyMmIwNjRiOTU5YjEzYjk4MmYyMzgxMzY0ZTMxNWNiNmI0ZmNiYWY2NDUxMzVlNzhkMzA0Yzg1Mjc3N2UmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.PZbtWxodiELE8SqcJxmtqP2wCrPrcsFQOOVuSRhieco\" style=\"max-width: 100%;\"></a>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51534",
            "title": "Move Javascript and Asset Pipeline guides under Views section",
            "date_modified": "2024-04-09T19:52:52.000Z",
            "date_published": "2024-04-09T19:52:39.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        }
    ]
}