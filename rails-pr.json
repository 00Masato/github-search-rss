{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/24068?u=93d718fa5371367f608deae2aa9a7759bd367a2d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The asset pipeline really shouldn't be checked for remote images regardless, but this also happens to fix an issue with images pasted into Trix that get serialized as action-text-attachments with \"blob:\" urls.</p>",
            "url": "https://github.com/rails/rails/pull/50849",
            "title": "Fixes ActionView::Template::Error when pasting images via Trix",
            "date_modified": "2024-01-23T02:15:02.000Z",
            "date_published": "2024-01-23T02:14:58.000Z",
            "author": {
                "name": "schristm",
                "url": "https://github.com/schristm"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1946610?u=a3b5a8c410b2f492e84364b49ae235caef4ecb4f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because I am writing some tests for my app around records being deleted by calling <code class=\"notranslate\">reload</code>, and there was no easy way to assert that the record raising the <code class=\"notranslate\">ActiveRecord::RecordNotFound</code> exception was the record I was expecting</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">raise_record_not_found_exception!</code> to find IDs based on the primary key from the where condition, if no IDs are explicitly passed</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50846",
            "title": "Set ActiveRecord::RecordNotFound#id when raised from a call to #reload a deleted record",
            "date_modified": "2024-01-23T00:04:41.000Z",
            "date_published": "2024-01-23T00:04:37.000Z",
            "author": {
                "name": "segiddins",
                "url": "https://github.com/segiddins"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5512772?u=bbae6d87b3499e6b3662664cf4be0e84cc40f6d2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Follow-up for <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1759527409\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48490\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48490/hovercard\" href=\"https://github.com/rails/rails/pull/48490\">#48490</a></p>\n<p dir=\"auto\">Previous code wrongly assumed that <code class=\"notranslate\">keys.map { |key| row[key] }</code> returns an array of ids while it actually returns an identifier of a single model. For a single-column PK models it will return an array with 1 element and for a composite primary key model it will return an array of N elements where N is the number of composite primary key columns.</p>\n<p dir=\"auto\">It lead to a bug where the constructed objects were wrongly populated in the cache due to cache key collision. For example <code class=\"notranslate\">posts</code> records with composite keys like <code class=\"notranslate\">[\"post1\", \"the_same_author\"]</code> and <code class=\"notranslate\">[\"post2\", \"the_same_author\"]</code> end up sharing the same cache entry under the <code class=\"notranslate\">the_same_author</code> key.</p>\n<p dir=\"auto\">This commit fixes the issue by using full composite primary key values as a whole identifier.</p>",
            "url": "https://github.com/rails/rails/pull/50845",
            "title": "Fix eager loading of composite primary key associations",
            "date_modified": "2024-01-22T23:01:15.000Z",
            "date_published": "2024-01-22T23:01:11.000Z",
            "author": {
                "name": "nvasilevski",
                "url": "https://github.com/nvasilevski"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5077225?u=e9f968c9eb790ee7734442f6b7998155400ad1d8&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request fixes a bug in the low-level SQLite adapter introspection logic. I came across the bug when working with virtual columns and JSON, but there are many possible cases where this would cause problems. Here is one reproducible bug script though:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# frozen_string_literal: true\n\nrequire &quot;bundler/inline&quot;\n\ngemfile(true) do\n  source &quot;https://rubygems.org&quot;\n\n  git_source(:github) { |repo| &quot;https://github.com/#{repo}.git&quot; }\n\n  gem &quot;rails&quot;, github: &quot;rails/rails&quot;, branch: &quot;main&quot;\n  gem &quot;sqlite3&quot;\nend\n\nrequire &quot;active_record&quot;\nrequire &quot;minitest/autorun&quot;\nrequire &quot;logger&quot;\n\nActiveRecord::Base.establish_connection(adapter: &quot;sqlite3&quot;, database: &quot;:memory:&quot;);\nActiveRecord::Base.logger = Logger.new(STDOUT)\n\nActiveRecord::Schema.define do\n  create_table :posts, force: true do |t|\n    t.json :payload, null: false, default: {}\n    t.virtual :external_id, type: :string, as: &quot;JSON_EXTRACT(payload, '$.id')&quot;, stored: true, null: false, index: true\n  end\nend\n\nclass Post &lt; ActiveRecord::Base; end\n\nclass BugTest &lt; Minitest::Test\n  def test_virtual_column_with_comma_in_definition_is_autopopulated\n    post = Post.create!(payload: { id: 'pst_1' })\n\n    assert_equal 'pst_1', post.external_id\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># frozen_string_literal: true</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"bundler/inline\"</span>\n\n<span class=\"pl-en\">gemfile</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">source</span> <span class=\"pl-s\">\"https://rubygems.org\"</span>\n\n  <span class=\"pl-en\">git_source</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:github</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">repo</span>| <span class=\"pl-s\">\"https://github.com/<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">repo</span><span class=\"pl-kos\">}</span></span>.git\"</span> <span class=\"pl-kos\">}</span>\n\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">github</span>: <span class=\"pl-s\">\"rails/rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">branch</span>: <span class=\"pl-s\">\"main\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"sqlite3\"</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_record\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"minitest/autorun\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"logger\"</span>\n\n<span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">establish_connection</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">adapter</span>: <span class=\"pl-s\">\"sqlite3\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">database</span>: <span class=\"pl-s\">\":memory:\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">;</span>\n<span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDOUT</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Schema</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">define</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:posts</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-c1\">true</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n    <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">json</span> <span class=\"pl-pds\">:payload</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span>\n    <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">virtual</span> <span class=\"pl-pds\">:external_id</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">type</span>: <span class=\"pl-pds\">:string</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">as</span>: <span class=\"pl-s\">\"JSON_EXTRACT(payload, '$.id')\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">stored</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">index</span>: <span class=\"pl-c1\">true</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Post</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">;</span> <span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">BugTest</span> &lt; <span class=\"pl-v\">Minitest</span>::<span class=\"pl-v\">Test</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_virtual_column_with_comma_in_definition_is_autopopulated</span>\n    <span class=\"pl-s1\">post</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">payload</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">id</span>: <span class=\"pl-s\">'pst_1'</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n\n    <span class=\"pl-en\">assert_equal</span> <span class=\"pl-s\">'pst_1'</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">external_id</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request more intelligently parses the SQL string description of the table to ensure that we only split by commas that mark a new column definition. In order to accomplish this, the table parsing method needs the list of column names for the table. When <code class=\"notranslate\">table_structure_sql</code> is called by <code class=\"notranslate\">table_structure_with_collation</code>, these can be supplied as they are already present; when it is called by <code class=\"notranslate\">foreign_keys</code>, however, they are not present and thus must be fetched.</p>\n<p dir=\"auto\">I also added a simple regression test as a part of the virtual column test case.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This bug has existed for a long time, but I most recently touched the relevant code in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1910980756\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49376\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49376/hovercard\" href=\"https://github.com/rails/rails/pull/49376\">#49376</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<p dir=\"auto\">cc: <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a> (this is related to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1907061730\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49346\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49346/hovercard\" href=\"https://github.com/rails/rails/pull/49346\">#49346</a>), <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/tenderlove/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tenderlove\">@tenderlove</a> (this is related to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1898859181\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49290\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49290/hovercard\" href=\"https://github.com/rails/rails/pull/49290\">#49290</a>), <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/yahonda/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yahonda\">@yahonda</a> (this is related to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1910980756\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49376\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49376/hovercard\" href=\"https://github.com/rails/rails/pull/49376\">#49376</a>)</p>",
            "url": "https://github.com/rails/rails/pull/50838",
            "title": "Fix SQLite table definition parsing bug to handle commas in default function definitions",
            "date_modified": "2024-01-22T13:18:26.000Z",
            "date_published": "2024-01-22T13:18:21.000Z",
            "author": {
                "name": "fractaledmind",
                "url": "https://github.com/fractaledmind"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50833.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2092932851\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50833\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50833/hovercard\" href=\"https://github.com/rails/rails/issues/50833\">#50833</a>.<br>\nFollow up to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1638188755\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47753\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47753/hovercard\" href=\"https://github.com/rails/rails/pull/47753\">#47753</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1654618259\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47863\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47863/hovercard\" href=\"https://github.com/rails/rails/pull/47863\">#47863</a>.</p>\n<p dir=\"auto\">The easiest way to preserve the old behavior is to rename indexes back after the <code class=\"notranslate\">rename_table</code> was run.</p>",
            "url": "https://github.com/rails/rails/pull/50837",
            "title": "Ensure pre-7.1 migrations use legacy index names when using `rename_table`",
            "date_modified": "2024-01-22T12:59:04.000Z",
            "date_published": "2024-01-22T12:59:00.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">RDoc can't extract the name of accessors defined with <code class=\"notranslate\">singleton_class.attr_accessor</code>, resulting in methods called <code class=\"notranslate\">unknown</code> in RDoc.</p>\n<h2 dir=\"auto\">Before</h2>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/28561/298565070-ef21546b-15de-41b6-94b8-f4b965b62fc0.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDYwMDc5OTksIm5iZiI6MTcwNjAwNzY5OSwicGF0aCI6Ii8yODU2MS8yOTg1NjUwNzAtZWYyMTU0NmItMTVkZS00MWI2LTk0YjgtZjRiOTY1YjYyZmMwLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAxMjMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMTIzVDExMDEzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTU5MjMzZWEyZDlkZjBiN2RiZDVjNjE0Y2I3OTgzODc5YjA0YjNjNTJmZjRmNDAyODI1OWMwOThmMzRkOWNjNGMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.Rjwd92thzZ8lY0_8_Zv16aK09g9akWqUYGLDUSPlVac\"><img width=\"1033\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/28561/298565070-ef21546b-15de-41b6-94b8-f4b965b62fc0.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDYwMDc5OTksIm5iZiI6MTcwNjAwNzY5OSwicGF0aCI6Ii8yODU2MS8yOTg1NjUwNzAtZWYyMTU0NmItMTVkZS00MWI2LTk0YjgtZjRiOTY1YjYyZmMwLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAxMjMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMTIzVDExMDEzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTU5MjMzZWEyZDlkZjBiN2RiZDVjNjE0Y2I3OTgzODc5YjA0YjNjNTJmZjRmNDAyODI1OWMwOThmMzRkOWNjNGMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.Rjwd92thzZ8lY0_8_Zv16aK09g9akWqUYGLDUSPlVac\" style=\"max-width: 100%;\"></a>\n<p dir=\"auto\"><a href=\"https://edgeapi.rubyonrails.org/classes/ActiveJob.html#method-c-unknown\" rel=\"nofollow\">https://edgeapi.rubyonrails.org/classes/ActiveJob.html#method-c-unknown</a></p>\n<h2 dir=\"auto\">After</h2>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/28561/298569057-f749fb18-5818-4a87-8b7a-6269f2a45ba5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDYwMDc5OTksIm5iZiI6MTcwNjAwNzY5OSwicGF0aCI6Ii8yODU2MS8yOTg1NjkwNTctZjc0OWZiMTgtNTgxOC00YTg3LThiN2EtNjI2OWYyYTQ1YmE1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAxMjMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMTIzVDExMDEzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWNlYmMwMzhhOTQ3YTQ1OWM3MDI2NWQzYzdmY2ZlNjBjOTA1OGM4MTUxM2JjYjkwZDkzYzQyMzA1Mjk5ZTAxOGYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.uPfCZN0KgqrROZ6Vacag-HFsuZB9P0uISYizM9ePD8k\"><img width=\"1010\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/28561/298569057-f749fb18-5818-4a87-8b7a-6269f2a45ba5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDYwMDc5OTksIm5iZiI6MTcwNjAwNzY5OSwicGF0aCI6Ii8yODU2MS8yOTg1NjkwNTctZjc0OWZiMTgtNTgxOC00YTg3LThiN2EtNjI2OWYyYTQ1YmE1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAxMjMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMTIzVDExMDEzOVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWNlYmMwMzhhOTQ3YTQ1OWM3MDI2NWQzYzdmY2ZlNjBjOTA1OGM4MTUxM2JjYjkwZDkzYzQyMzA1Mjk5ZTAxOGYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.uPfCZN0KgqrROZ6Vacag-HFsuZB9P0uISYizM9ePD8k\" style=\"max-width: 100%;\"></a>\n<h3 dir=\"auto\">Additional Information</h3>\n<p dir=\"auto\">If the method can't be found RDoc will output a warning when the <code class=\"notranslate\">verbose</code> option is set.<br>\nI'd would be nice if this would raise an error instead.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50836",
            "title": "Specify RDoc method name for accessors defined on singleton_class",
            "date_modified": "2024-01-22T12:54:51.000Z",
            "date_published": "2024-01-22T11:38:14.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/108208?u=31587544126ab4506d05644fcccb8621f893ef1b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to address <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2092163791\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50824\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50824/hovercard\" href=\"https://github.com/rails/rails/issues/50824\">#50824</a>.</p>\n<p dir=\"auto\">when there is a MySQL server running on localhost, and the gem translates the hostname to a socket.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the raised exception while attempting to connect to a MySQL server running on localhost, which is the case for a container running on local machine on default port.</p>\n<p dir=\"auto\">Turns out the MySQL client library translates the hostname <code class=\"notranslate\">localhost</code> to a socket, but there is the server up and running.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The new exception instructs you to use the IP address instead of the hostname when using the MySQL adapter.</p>\n<p dir=\"auto\">FYI, it doesn't happen when using Trilogy as the adapter to connect to MySQL servers.</p>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50832",
            "title": "Add new exception when attempting to connect to MySQL running on localhost.",
            "date_modified": "2024-01-22T01:58:22.000Z",
            "date_published": "2024-01-22T01:58:18.000Z",
            "author": {
                "name": "ruyrocha",
                "url": "https://github.com/ruyrocha"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6979737?u=e5fc89c5f1b12b1fb83f942c742af204df2d1ca1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR fixes an issue where non-hash where-clause values for associations would not set <code class=\"notranslate\">references_values</code>. This could (and often does) end up causing hard-to-debug SQL errors due to association name vs table name mismatch, e.g. querying on a singular association name while the actual join table is plural, or vice-versa due to a prior scope.</p>\n<p dir=\"auto\">More detailed reproduction script:  <a href=\"https://gist.github.com/ezekg/5969735eb8c5092fb25198bd8fac4053\">https://gist.github.com/ezekg/5969735eb8c5092fb25198bd8fac4053</a></p>\n<h4 dir=\"auto\">Before</h4>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"scope = Comment.where(post: { id: post })\nscope.references_values # =&gt; [&quot;post&quot;]\n\nscope = Comment.where(post: post)\nscope.references_values # =&gt; []\"><pre class=\"notranslate\"><span class=\"pl-s1\">scope</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Comment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">post</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">id</span>: <span class=\"pl-en\">post</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">scope</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">references_values</span> <span class=\"pl-c\"># =&gt; [\"post\"]</span>\n\n<span class=\"pl-s1\">scope</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Comment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">post</span>: <span class=\"pl-en\">post</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">scope</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">references_values</span> <span class=\"pl-c\"># =&gt; []</span></pre></div>\n<p dir=\"auto\">I'd expect these to be synonymous since <a href=\"https://github.com/ezekg/rails/blob/c37450b76b24cac7951032c4210db17a9c1b7f51/activerecord/lib/active_record/relation/predicate_builder.rb#L58\"><code class=\"notranslate\">#id</code> is called on <code class=\"notranslate\">post</code></a> for the second case.</p>\n<h4 dir=\"auto\">After</h4>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"scope = Comment.where(post: { id: post })\nscope.references_values # =&gt; [&quot;post&quot;]\n\nscope = Comment.where(post: post)\nscope.references_values # =&gt; [&quot;post&quot;]\"><pre class=\"notranslate\"><span class=\"pl-s1\">scope</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Comment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">post</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">id</span>: <span class=\"pl-en\">post</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">scope</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">references_values</span> <span class=\"pl-c\"># =&gt; [\"post\"]</span>\n\n<span class=\"pl-s1\">scope</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Comment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">post</span>: <span class=\"pl-en\">post</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">scope</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">references_values</span> <span class=\"pl-c\"># =&gt; [\"post\"]</span></pre></div>\n<p dir=\"auto\">With this patch, they're now more or less synonymous, both setting <code class=\"notranslate\">references_values</code>.</p>\n<p dir=\"auto\">Since this is likely a breaking change (it broke a few tests in <a href=\"https://github.com/keygen-sh/keygen-api\">keygen-sh/keygen-api</a> when testing against the patch), this may require some more thought. But it is worth noting that all broken tests were related to various workarounds for this particular bug.</p>\n<p dir=\"auto\">Let me know what you guys think is the best course of action here.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50829",
            "title": "Fix query references for non-hash association where clause values",
            "date_modified": "2024-01-22T04:18:24.000Z",
            "date_published": "2024-01-21T06:11:40.000Z",
            "author": {
                "name": "ezekg",
                "url": "https://github.com/ezekg"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22231095?u=4b9ed50e760e192f3d22f1327a15326e70eb5ed4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request add examples for <code class=\"notranslate\">FormTagHelper</code> methods.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50828",
            "title": "Add examples for form helper tags [ci skip]",
            "date_modified": "2024-01-22T03:26:06.000Z",
            "date_published": "2024-01-21T05:48:04.000Z",
            "author": {
                "name": "akhilgkrishnan",
                "url": "https://github.com/akhilgkrishnan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/707418?u=6db58e19ff96ec2cc83fce4df6ba18fab6497d34&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><code class=\"notranslate\">#in_order_of</code> is an excellent method and makes ordering enum columns easier, and many complex order case/when queries can be refactored to use it.</p>\n<p dir=\"auto\">This PR was created because I believe having more examples would help people understand this method a bit better.</p>\n<p dir=\"auto\">Also, I think it's useful to document that this method will order results, but also FILTER them, excluding rows in which the column doesn't match any of the given values.</p>\n<p dir=\"auto\">So I expanded the description and added these examples:</p>\n<ul dir=\"auto\">\n<li>what happens when dealing with <code class=\"notranslate\">enum</code> +columns+</li>\n<li>what happens when passing <code class=\"notranslate\">nil</code> as a +value+ for nullable columns</li>\n</ul>\n<p dir=\"auto\">I'd be happy to add other examples for other usecases you think are relevant, just let me know!</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request expands the documentation for <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-in_order_of\" rel=\"nofollow\">in_order_of</a></p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">n/a</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li><del>[ ] Tests are added or updated if you fix a bug or add a feature.</del> not applicable</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50826",
            "title": "[docs] Add more examples to `#in_order_of` [ci-skip]",
            "date_modified": "2024-01-21T00:30:02.000Z",
            "date_published": "2024-01-21T00:21:26.000Z",
            "author": {
                "name": "thdaraujo",
                "url": "https://github.com/thdaraujo"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/16135423?u=38f165bf46fc0a714cd8e4ae396b2657592a7da9&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I've had to check in a few places if a relation had exactly or less than or more than N records. On top of that, if the collection contains a lot of records, counting on the entire collection not only is slower but also unnecessary and limiting the count the first N or N+1 records is sufficient and faster.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Adds the following methods to <code class=\"notranslate\">ActiveRecord::Relation::FinderMethods</code>:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">exactly?</code> returns true if the relation contains exactly N records, false otherwise.</li>\n<li><code class=\"notranslate\">at_least?</code> returns true if the relation contains at least N records, false otherwise.</li>\n<li><code class=\"notranslate\">at_most?</code> returns true if the relation contains at most N records, false otherwise.</li>\n<li><code class=\"notranslate\">less_than?</code> returns true if the relation contains less than N records, false otherwise.</li>\n<li><code class=\"notranslate\">more_than?</code> returns true if the relation contains more than N records, false otherwise.</li>\n</ul>\n<p dir=\"auto\">These methods perform a <code class=\"notranslate\">limit(M).count</code> (where M = N or N + 1) under the hood.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I think the naming of these methods is fine as is. Don't know if others would prefer to prefix these with <code class=\"notranslate\">has_</code> or <code class=\"notranslate\">contains_</code>, ie <code class=\"notranslate\">has_exactly?</code> or <code class=\"notranslate\">contains_exactly?</code>.</p>\n<p dir=\"auto\">With regards to performance of doing the count with and without the limit. Without the limit when there are 8M records I get:</p>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  Referral Count (135.2ms)  SELECT COUNT(*) FROM &quot;referrals&quot; WHERE &quot;referrals&quot;.&quot;company_id&quot; = $1  [[&quot;company_id&quot;, &quot;29f1dfa2-01d0-4e5d-b482-7aa1f3ba7535&quot;]]\n=&gt; 8467786\"><pre class=\"notranslate\">  Referral <span class=\"pl-c1\">Count</span> (<span class=\"pl-c1\">135</span>.2ms)  <span class=\"pl-k\">SELECT</span> <span class=\"pl-c1\">COUNT</span>(<span class=\"pl-k\">*</span>) <span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>referrals<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">WHERE</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>referrals<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>company_id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> $<span class=\"pl-c1\">1</span>  [[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>company_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>29f1dfa2-01d0-4e5d-b482-7aa1f3ba7535<span class=\"pl-pds\">\"</span></span>]]\n<span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">8467786</span></pre></div>\n<p dir=\"auto\">With a limit of a 100:</p>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  Referral Count (0.4ms)  SELECT COUNT(*) FROM (SELECT 1 AS one FROM &quot;referrals&quot; WHERE &quot;referrals&quot;.&quot;company_id&quot; = $1 LIMIT $2) subquery_for_count  [[&quot;company_id&quot;,&quot;29f1dfa2-01d0-4e5d-b482-7aa1f3ba7535&quot;, [&quot;LIMIT&quot;, 100]]\n=&gt; 100\"><pre class=\"notranslate\">  Referral <span class=\"pl-c1\">Count</span> (<span class=\"pl-c1\">0</span>.4ms)  <span class=\"pl-k\">SELECT</span> <span class=\"pl-c1\">COUNT</span>(<span class=\"pl-k\">*</span>) <span class=\"pl-k\">FROM</span> (<span class=\"pl-k\">SELECT</span> <span class=\"pl-c1\">1</span> <span class=\"pl-k\">AS</span> one <span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>referrals<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">WHERE</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>referrals<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>company_id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> $<span class=\"pl-c1\">1</span> <span class=\"pl-k\">LIMIT</span> $<span class=\"pl-c1\">2</span>) subquery_for_count  [[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>company_id<span class=\"pl-pds\">\"</span></span>,<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>29f1dfa2-01d0-4e5d-b482-7aa1f3ba7535<span class=\"pl-pds\">\"</span></span>, [<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>LIMIT<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">100</span>]]\n<span class=\"pl-k\">=&gt;</span> <span class=\"pl-c1\">100</span></pre></div>\n<p dir=\"auto\">So it's 300x faster even when doing an index only scan:</p>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"explain SELECT COUNT(*) FROM &quot;referrals&quot; WHERE &quot;referrals&quot;.&quot;company_id&quot; ='29f1dfa2-01d0-4e5d-b482-7aa1f3ba7535';\n\n                                                                          QUERY PLAN                                                                           \n---------------------------------------------------------------------------------------------------------------------------------------------------------------\n Finalize Aggregate  (cost=136744.58..136744.59 rows=1 width=8)\n   -&gt;  Gather  (cost=136744.36..136744.57 rows=2 width=8)\n         Workers Planned: 2\n         -&gt;  Partial Aggregate  (cost=135744.36..135744.37 rows=1 width=8)\n               -&gt;  Parallel Index Only Scan using index_referrals_on_company_id_and_conversion_state on referrals  (cost=0.56..127008.31 rows=3494420 width=0)\n                     Index Cond: (company_id = '29f1dfa2-01d0-4e5d-b482-7aa1f3ba7535'::uuid)\"><pre class=\"notranslate\">explain <span class=\"pl-k\">SELECT</span> <span class=\"pl-c1\">COUNT</span>(<span class=\"pl-k\">*</span>) <span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>referrals<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">WHERE</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>referrals<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>company_id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span><span class=\"pl-s\"><span class=\"pl-pds\">'</span>29f1dfa2-01d0-4e5d-b482-7aa1f3ba7535<span class=\"pl-pds\">'</span></span>;\n\n                                                                          QUERY PLAN                                                                           \n<span class=\"pl-c\"><span class=\"pl-c\">--</span>-------------------------------------------------------------------------------------------------------------------------------------------------------------</span>\n Finalize Aggregate  (cost<span class=\"pl-k\">=</span><span class=\"pl-c1\">136744</span>.<span class=\"pl-c1\">58</span>..<span class=\"pl-c1\">136744</span>.<span class=\"pl-c1\">59</span> rows<span class=\"pl-k\">=</span><span class=\"pl-c1\">1</span> width<span class=\"pl-k\">=</span><span class=\"pl-c1\">8</span>)\n   <span class=\"pl-k\">-</span><span class=\"pl-k\">&gt;</span>  Gather  (cost<span class=\"pl-k\">=</span><span class=\"pl-c1\">136744</span>.<span class=\"pl-c1\">36</span>..<span class=\"pl-c1\">136744</span>.<span class=\"pl-c1\">57</span> rows<span class=\"pl-k\">=</span><span class=\"pl-c1\">2</span> width<span class=\"pl-k\">=</span><span class=\"pl-c1\">8</span>)\n         Workers Planned: <span class=\"pl-c1\">2</span>\n         <span class=\"pl-k\">-</span><span class=\"pl-k\">&gt;</span>  Partial Aggregate  (cost<span class=\"pl-k\">=</span><span class=\"pl-c1\">135744</span>.<span class=\"pl-c1\">36</span>..<span class=\"pl-c1\">135744</span>.<span class=\"pl-c1\">37</span> rows<span class=\"pl-k\">=</span><span class=\"pl-c1\">1</span> width<span class=\"pl-k\">=</span><span class=\"pl-c1\">8</span>)\n               <span class=\"pl-k\">-</span><span class=\"pl-k\">&gt;</span>  Parallel Index Only Scan using index_referrals_on_company_id_and_conversion_state <span class=\"pl-k\">on</span> referrals  (cost<span class=\"pl-k\">=</span><span class=\"pl-c1\">0</span>.<span class=\"pl-c1\">56</span>..<span class=\"pl-c1\">127008</span>.<span class=\"pl-c1\">31</span> rows<span class=\"pl-k\">=</span><span class=\"pl-c1\">3494420</span> width<span class=\"pl-k\">=</span><span class=\"pl-c1\">0</span>)\n                     Index Cond: (company_id <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>29f1dfa2-01d0-4e5d-b482-7aa1f3ba7535<span class=\"pl-pds\">'</span></span>::uuid)</pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50823",
            "title": "Add methods to `ActiveRecord::Relation::FinderMethods` to determine if it contains exactly/more than/less than N records",
            "date_modified": "2024-01-22T14:27:44.000Z",
            "date_published": "2024-01-20T16:56:20.000Z",
            "author": {
                "name": "jordinl",
                "url": "https://github.com/jordinl"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/78952006?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This Pull Request has been created to enlighten users that validations are enabled by default when autosave is True for the  <code class=\"notranslate\">has_one</code> and <code class=\"notranslate\">belongs_to</code>.</p>",
            "url": "https://github.com/rails/rails/pull/50820",
            "title": "docs: Update validation status based on autosave status",
            "date_modified": "2024-01-22T07:16:22.000Z",
            "date_published": "2024-01-20T09:24:46.000Z",
            "author": {
                "name": "MONSURU-rgb",
                "url": "https://github.com/MONSURU-rgb"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Adds a <code class=\"notranslate\">Queue Priority</code> section to <code class=\"notranslate\">active_job_basics.md</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\"><a href=\"https://edgeguides.rubyonrails.org/active_job_basics.html\" rel=\"nofollow\">Active Job Basics</a> contains a <a href=\"https://edgeguides.rubyonrails.org/active_job_basics.html#queues\" rel=\"nofollow\">section on queues</a>, but doesn't have one on queue priority (using <code class=\"notranslate\">queue_with_priority</code> or <code class=\"notranslate\">set(priority: priority)</code>).</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">None.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50817",
            "title": "[Docs] Add section on Queue Priority to `ActiveJob` docs",
            "date_modified": "2024-01-20T11:53:08.000Z",
            "date_published": "2024-01-20T01:34:27.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/11673?u=ef80073b0bb2ee07a241e85af0bb51e892955811&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">As a followup to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2061815924\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50528\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50528/hovercard\" href=\"https://github.com/rails/rails/pull/50528\">#50528</a>, which added default pwa manifest and service worker routes and files to the new app generator, I'd like to associate the new routes with the expected mime types.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">We expect the <code class=\"notranslate\">pwa#manifest</code> request to be limited to json, i.e. <code class=\"notranslate\">manifest.json</code> and we expect the <code class=\"notranslate\">pwa#service_worker</code> request to be limited to js, i.e. <code class=\"notranslate\">service-worker.js</code>. This change adds format constraints to the generated routes.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I didn't see associated tests with the previous change but would be open to adding some if desired.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50815",
            "title": "Add format constraints for generated pwa routes",
            "date_modified": "2024-01-22T12:00:23.000Z",
            "date_published": "2024-01-19T23:10:41.000Z",
            "author": {
                "name": "rossta",
                "url": "https://github.com/rossta"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/47484308?u=1d6070e1d8468e41afb88dfcbe3eb982b0a82114&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because there are a few PRs we'd like to open that relate to the multiple database code in Rails but there was no existing template for a multiple database setup. 🙂</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit adds a new bug report template that's based off of the existing <a href=\"https://github.com/rails/rails/blob/main/guides/bug_report_templates/active_record.rb\">Active Record bug report<br>\ntemplate</a> but creates a multiple database setup.</p>\n<p dir=\"auto\">The template creates an <code class=\"notranslate\">UnshardedModel</code> abstract <code class=\"notranslate\">ActiveRecord</code> model that connects to a single database (with a replica configured) and a <code class=\"notranslate\">ShardedModel</code> abstract <code class=\"notranslate\">ActiveRecord</code> model that has two shards configured, each with their own replica.</p>\n<p dir=\"auto\">Each sqlite3 in-memory database is separate because <a href=\"https://www.sqlite.org/inmemorydb.html\" rel=\"nofollow\">opening multiple database connections each with the filename \":memory:\" will create independent in-memory databases</a>.</p>\n<p dir=\"auto\">Note, that while replica databases are configured, sqlite3 does not support database replication and therefore records written to the writer databases will not auto-populate on the replica/reader databases. The replica configurations are included to allow for testing role switching, not for validating replication itself.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">You can test that the template works by running:</p>\n<p dir=\"auto\"><code class=\"notranslate\">ruby guides/bug_report_templates/active_record_multiple_databases.rb</code></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50811",
            "title": "Add multiple databases AR bug template [ci skip]",
            "date_modified": "2024-01-19T12:58:25.000Z",
            "date_published": "2024-01-19T12:54:28.000Z",
            "author": {
                "name": "HeyNonster",
                "url": "https://github.com/HeyNonster"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The Rails README that is shown as the homepage of <a href=\"https://api.rubyonrails.org/\" rel=\"nofollow\">https://api.rubyonrails.org/</a> has links to the different frameworks. However, these links link to the framework README's instead of the framework main page, which results in a page that misses links to the framework methods and namespaces.</p>\n<p dir=\"auto\">For example, clicking on \"ActionView\" results in the following page, which misses any navigation to methods and namespaces.<br>\n<a href=\"https://api.rubyonrails.org/v7.1/files/actionview/README_rdoc.html\" rel=\"nofollow\">https://api.rubyonrails.org/v7.1/files/actionview/README_rdoc.html</a></p>\n<p dir=\"auto\">By linking to the framework main page the navigation is present:<br>\n<a href=\"https://api.rubyonrails.org/v7.1/classes/ActionView.html\" rel=\"nofollow\">https://api.rubyonrails.org/v7.1/classes/ActionView.html</a></p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The README's files can probably be removed when generating the docs as the content of the README is already inlined in the framework homepage.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50806",
            "title": "Link to framework main page instead of README in API docs [ci-skip]",
            "date_modified": "2024-01-22T10:37:18.000Z",
            "date_published": "2024-01-19T10:35:07.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/44640?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Context</h3>\n<p dir=\"auto\">In part for performance and simplicity reasons, and in part because of its historical lack of threading support, Active Record rely quite heavily on <code class=\"notranslate\">ActiveRecord::Base.connection</code> checking out and holding a connection inside a thread of fiber local variable.</p>\n<p dir=\"auto\">Concretly, every request or job lazily checkout connections when it needs to perform a database operations, and then holds onto it until the request or job completes, at which point the <code class=\"notranslate\">Executor</code> hook automatically check it back in the pool.</p>\n<p dir=\"auto\">For the overwhelming majority of Rails application, which don't do enough IOs to benefit from more than a handful of threads, it's a perfectly adequate solution, as it pretty much remove connection management as a concern.</p>\n<p dir=\"auto\">However for applications that spent most of their time on IOs others than the database (e.g. 3rd party APIs), and would benefit from much higher levels of concurrency, this strategy is problematic because it requires about as many database connections as there is threads or fibers, even though most connections are idle but can't be used because they checked out of the pool and held by another thead or fiber.</p>\n<h3 dir=\"auto\">Goal</h3>\n<p dir=\"auto\">I believe the current model is still preferable for the vast majority of Rails users, and changing the way <code class=\"notranslate\">ActiveRecord::Base.connection</code> behaves would break a ton of code anyway. So I believe it should remain the default.</p>\n<p dir=\"auto\">However I think we could support an alternative mode, in which <code class=\"notranslate\">ActiveRecord::Base.connection</code> doesn't hold onto the connection until the end of the request cycle, but instead immediately check it back in, allowing it to be re-used immediately.</p>\n<h3 dir=\"auto\">Implementation</h3>\n<p dir=\"auto\">First, nothing changes unless you disable <code class=\"notranslate\">ActiveRecord.cache_connection_checkout</code>.</p>\n<p dir=\"auto\">Then, since a lot of code in Rails itself, in third party libraries, and in private Rails applications do rely on <code class=\"notranslate\">Model.connection.something()</code>, we must make it work without caching the connection.</p>\n<p dir=\"auto\">To solve this, when caching is disabled, <code class=\"notranslate\">Model.connection</code> returns a proxy object, that delegates the methods it receive to a freshly checked out connection, and then check it back in. See <code class=\"notranslate\">LazyConnectionProxy</code> in <code class=\"notranslate\">connection_pool.rb</code> for the details.</p>\n<p dir=\"auto\">That is the key to permitting this feature while retaining backward compatibility. It's not perfect, as code might assume that subsequent calls to <code class=\"notranslate\">Model.connection</code> will return the same connection instance, but in most case it's not necessary.</p>\n<p dir=\"auto\">Also, while the proxy holds the connection, it caches in on the thread or fiber, so subsequent calls to <code class=\"notranslate\">Model.connection</code> will return the same connection until it's checked back in. This solves most of the statefulness issues, like opening a transaction etc, as long as the APIs are blocked based.</p>\n<h3 dir=\"auto\">Status</h3>\n<p dir=\"auto\">This is a proof of concept, it's nowhere near ready to merge, it's mostly to explore whether it's doable with some work, or just not possible.</p>\n<p dir=\"auto\">Most of the Active Record test suite passes against Sqlite3, except for 3 tests that do disconnect and reconnect. In general all the tests had to be opted out of the feature, I still need to dig into why exactly.</p>\n<p dir=\"auto\">I also had to disable the feature for a few test suites that rely too much on the caching, and would need a bit of refactoring to pass without, but at first glance it doesn't look like a fundamental incompatibility.</p>\n<h3 dir=\"auto\">Concerns</h3>\n<p dir=\"auto\">There is a number of Active Record methods that currently cause more than one checkout/checkin cycle and would benefit from a strategically placed <code class=\"notranslate\">with_connection do</code> call to optimize that. But that is mostly a performance concern, not a fundamental incompatibility.</p>\n<p dir=\"auto\">One more major concern is the query cache. As it stand it's pretty much useless when checkout caching is disabled, because when we check the connection back in, we have to clear the cache, so it's pretty much always empty. To make it usable again, we need a substantial refactoring. At first glance it looks possible, just not trivial.</p>\n<h3 dir=\"auto\">Conclusion</h3>\n<p dir=\"auto\">I'm a bit on the fence about this. I think we can make it work, but I already spent most of one day on just the proof of concept, and would need substantially more work to iron out all the issues.</p>\n<p dir=\"auto\">The actual code changes needed in Active Record itself are relatively small, it's really all the test suite and 3rd party code that would need to be updated to properly work with this option that is the big can of worm I'm worried about.</p>",
            "url": "https://github.com/rails/rails/pull/50793",
            "title": "PoC: Add an option to disable connection checkout caching",
            "date_modified": "2024-01-19T22:11:55.000Z",
            "date_published": "2024-01-18T16:54:17.000Z",
            "author": {
                "name": "byroot",
                "url": "https://github.com/byroot"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1148320?u=bee10f326f6f222152823082a3ac6c2f43897452&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Newbies tend to misunderstand <code class=\"notranslate\">params</code> hash is a plain old Hash. So I added a note that <code class=\"notranslate\">params</code> hash is ActionController::Parameters.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes \"4 Parameters\" in Action Controller Overview.</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/1148320/297570895-de0dc860-35d1-4d3b-b209-ab4abbac5a17.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDYwMDc5OTksIm5iZiI6MTcwNjAwNzY5OSwicGF0aCI6Ii8xMTQ4MzIwLzI5NzU3MDg5NS1kZTBkYzg2MC0zNWQxLTRkM2ItYjIwOS1hYjRhYmJhYzVhMTcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDEyMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAxMjNUMTEwMTM5WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OTZiMjBjOGRmMDIwZTc4ZGEzNTUyOGFhZTQzZWE0MjlmZTc3NDc1N2JkMDgyMzlkOTQ3YWY1NmMzYzRhNDMwNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ._bXXgCPaQf1ty3RMfUEsG_e4zICgxv1PLmPZ6hZtFro\"><img src=\"https://private-user-images.githubusercontent.com/1148320/297570895-de0dc860-35d1-4d3b-b209-ab4abbac5a17.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDYwMDc5OTksIm5iZiI6MTcwNjAwNzY5OSwicGF0aCI6Ii8xMTQ4MzIwLzI5NzU3MDg5NS1kZTBkYzg2MC0zNWQxLTRkM2ItYjIwOS1hYjRhYmJhYzVhMTcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDEyMyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAxMjNUMTEwMTM5WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OTZiMjBjOGRmMDIwZTc4ZGEzNTUyOGFhZTQzZWE0MjlmZTc3NDc1N2JkMDgyMzlkOTQ3YWY1NmMzYzRhNDMwNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ._bXXgCPaQf1ty3RMfUEsG_e4zICgxv1PLmPZ6hZtFro\" alt=\"Screenshot 2024-01-18 at 10 31 55\" style=\"max-width: 100%;\"></a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50785",
            "title": "Add note about `params` hash in Action Controller Overview [ci skip] ",
            "date_modified": "2024-01-18T17:22:33.000Z",
            "date_published": "2024-01-18T01:26:00.000Z",
            "author": {
                "name": "JunichiIto",
                "url": "https://github.com/JunichiIto"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/986290?u=4d733016cf0aff060b84f4084595e5ace35d3b42&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because <code class=\"notranslate\">skip_sprockets?</code> wasn't being preserved when running <code class=\"notranslate\">app:update</code> in a project using <code class=\"notranslate\">propshaft</code>. Helpful when <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2056739647\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50444\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50444/hovercard\" href=\"https://github.com/rails/rails/issues/50444\">#50444</a> lands.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request sets <code class=\"notranslate\">options[:asset_pipeline]</code> in <code class=\"notranslate\">AppUpdater</code> based on whether Sprockets/Propshaft Railtie is defined.</p>\n<p dir=\"auto\">Without this change, <code class=\"notranslate\">app:update</code> will suggest injecting sprocket configuration in a propshaft project.</p>",
            "url": "https://github.com/rails/rails/pull/50780",
            "title": "Preserve `--asset-pipeline propshaft` when running `app:update`",
            "date_modified": "2024-01-17T12:02:48.000Z",
            "date_published": "2024-01-17T12:02:43.000Z",
            "author": {
                "name": "zachasme",
                "url": "https://github.com/zachasme"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/101501?u=b9368cd286f05d7b8998746f81d8cb3c2bd247c1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">In these last years we have been using a monkey patch at our company that smartly detects domain and subdomains according to the <a href=\"https://publicsuffix.org/\" rel=\"nofollow\">Public Suffix database</a>. There are a few gems in our ecosystems like <a href=\"https://github.com/weppos/publicsuffix-ruby\">public_suffix</a> and <a href=\"https://github.com/discourse/mini_suffix\">mini_suffix</a> that does exactly that. But Rails uses an older and primitive method that splits the domain tld using <code class=\"notranslate\">config.action_dispatch.tld_length</code> option. This pull request changes that by allowing developers to specify a custom domain extractor class.</p>\n<p dir=\"auto\">This is really useful for any SaaS company that offers custom domain and subdomains.</p>",
            "url": "https://github.com/rails/rails/pull/50763",
            "title": "Allow custom domain extractor class on ActionDispatch::Http::URL",
            "date_modified": "2024-01-18T20:47:53.000Z",
            "date_published": "2024-01-15T23:32:04.000Z",
            "author": {
                "name": "rainerborene",
                "url": "https://github.com/rainerborene"
            }
        }
    ]
}