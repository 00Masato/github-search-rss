{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/35061?u=948386299a45ab279b5d657bf028751fc6d3767f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This is a solution to confusion around receiving \"unsupported browser\" as explained in an Issue, it's to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52534.\">Fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2454149889\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52534\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52534/hovercard\" href=\"https://github.com/rails/rails/issues/52534\">#52534</a></p>\n<p dir=\"auto\">To restate succinctly here: I just got confused why my latest-updated Chrome was resulting in an \"unsupported browser\" error message. It took me a bit of digging to even discover that <code class=\"notranslate\">allow_browser</code> is now a configurable directive so I could comment it out. But it took me even longer to figure out why my latest-updated Chrome was not being considered <code class=\"notranslate\">:modern</code>.</p>\n<p dir=\"auto\">When I read DHH's original pull request that introduced this feature, it was notable that the same confusion was discussed on there: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2061123087\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50505\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50505/hovercard?comment_id=1892965985&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/pull/50505#issuecomment-1892965985\">#50505 (comment)</a></p>\n<p dir=\"auto\">I think a lot of people are going to hit this issue and be confused. It would be nice if we can enable people to self-diagnose this problem.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request simply adds two hints to developers to help them figure out what's going on. (1) The default 406 error page that is generated now includes mention of the \"allow_browser\" setting, so someone knows to look for that within their code. And (2) the default \"allow_browser\" setting already had a comment explaining the goal of :modern, but this comment has been expanded. I tried to do it in such a way that this comment will age slowly. For example, the comment does not mention the browser versions but instead refers to <code class=\"notranslate\">ActionController::AllowBrowser::BrowserBlocker::SETS</code> which someone can reference in rails console or within rails source. This way future version bumps for :modern won't cause a comment to get out of sync.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li>[ X Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52538",
            "title": "Improve the explanation for unsupported browsers",
            "date_modified": "2024-08-07T20:55:57.000Z",
            "date_published": "2024-08-07T20:40:38.000Z",
            "author": {
                "name": "krschacht",
                "url": "https://github.com/krschacht"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes pull request #52501.\">Fix</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2446689893\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52501\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52501/hovercard\" href=\"https://github.com/rails/rails/pull/52501\">#52501</a></p>\n<p dir=\"auto\">Since MySQL require to set the isolation level as a statement before the <code class=\"notranslate\">BEGIN</code>, if the <code class=\"notranslate\">begin</code> statement fails and we retry it we're opening a transaction with the default level.</p>\n<p dir=\"auto\">To handle this we can send both statement at once so that if we retry both are sent.</p>\n<p dir=\"auto\">A much simpler alternative would be to just disallow retrying <code class=\"notranslate\">BEGIN</code> when opening an isolated DB transaction.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/kirs/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/kirs\">@kirs</a></p>\n<p dir=\"auto\">Also cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a> as I'd love your opinion on this. In the future I'd really like to leverage batches more to save on roundtrips as explained in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2335181050\" data-permission-text=\"Title is private\" data-url=\"https://github.com/trilogy-libraries/trilogy/issues/189\" data-hovercard-type=\"issue\" data-hovercard-url=\"/trilogy-libraries/trilogy/issues/189/hovercard\" href=\"https://github.com/trilogy-libraries/trilogy/issues/189\">trilogy-libraries/trilogy#189</a>, but right now it's actually worse because instead of 2 roundtrips we're doing 3:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">set_server_options OPTION_MULTI_STATEMENTS_ON</code></li>\n<li><code class=\"notranslate\">query \"SET TRANSACTION ISOLATION LEVEL...; BEGIN;</code></li>\n<li><code class=\"notranslate\">set_server_options OPTION_MULTI_STATEMENTS_OFF</code></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52529",
            "title": "Preserve isolation level when retrying MySQL transactions",
            "date_modified": "2024-08-07T13:57:54.000Z",
            "date_published": "2024-08-07T10:10:30.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because while working on <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2449558710\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52512\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52512/hovercard\" href=\"https://github.com/rails/rails/pull/52512\">#52512</a>, I noticed that <code class=\"notranslate\">ActionDispatch::Routing::Mapper::Scope#[]</code> lookup was iterating an array, which means access time isn't constant, and doesn't actually behave like a hash. Instead, we can simply merge hashes when we create nested scopes to save us having to lookup values.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the scope implementation. Scopes are backed by an array of hashes, but we could make lookup faster by just merging inherited values into the immediate hash. This us from needless iterations for deeply nested routes.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Benchmark:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# frozen_string_literal: true\n\nrequire &quot;bundler/inline&quot;\n\ngemfile(true) do\n  source &quot;https://rubygems.org&quot;\n\n  gem &quot;rails&quot;, path: &quot;.&quot;\n  gem &quot;benchmark-ips&quot;\n  gem &quot;stringio&quot;\nend\n\nrequire &quot;benchmark/ips&quot;\nrequire &quot;action_controller/railtie&quot;\n\nclass TestApp &lt; Rails::Application\n  config.root = __dir__\n  config.hosts &lt;&lt; &quot;example.org&quot;\n  config.secret_key_base = &quot;secret_key_base&quot;\n\n  config.logger = Logger.new($stdout)\n  Rails.logger  = config.logger\nend\n\nclass TestController &lt; ActionController::Base\n  include Rails.application.routes.url_helpers\n\n  def index\n    render plain: &quot;Home&quot;\n  end\nend\n\nBenchmark.ips do |x|\n  x.report(&quot;draw&quot;) do\n    Rails.application.routes.draw do\n      resources(:posts) do\n        get :hello\n        post :goodbye\n        scope(path: &quot;/path&quot;) do\n          put :test\n        end\n      end\n    end\n    Rails.application.instance_variable_set(:@routes, nil)\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># frozen_string_literal: true</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"bundler/inline\"</span>\n\n<span class=\"pl-en\">gemfile</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">source</span> <span class=\"pl-s\">\"https://rubygems.org\"</span>\n\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">path</span>: <span class=\"pl-s\">\".\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"benchmark-ips\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"stringio\"</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"benchmark/ips\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"action_controller/railtie\"</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">TestApp</span> &lt; <span class=\"pl-v\">Rails</span>::<span class=\"pl-v\">Application</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">root</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">__dir__</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">hosts</span> &lt;&lt; <span class=\"pl-s\">\"example.org\"</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">secret_key_base</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">\"secret_key_base\"</span>\n\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span>$stdout<span class=\"pl-kos\">)</span>\n  <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span>  <span class=\"pl-c1\">=</span> <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">TestController</span> &lt; <span class=\"pl-v\">ActionController</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">include</span> <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">routes</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">url_helpers</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">index</span>\n    <span class=\"pl-en\">render</span> <span class=\"pl-pds\">plain</span>: <span class=\"pl-s\">\"Home\"</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-v\">Benchmark</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ips</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">x</span>|\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"draw\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">routes</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">draw</span> <span class=\"pl-k\">do</span>\n      <span class=\"pl-en\">resources</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:posts</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n        <span class=\"pl-en\">get</span> <span class=\"pl-pds\">:hello</span>\n        <span class=\"pl-en\">post</span> <span class=\"pl-pds\">:goodbye</span>\n        <span class=\"pl-en\">scope</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">path</span>: <span class=\"pl-s\">\"/path\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n          <span class=\"pl-en\">put</span> <span class=\"pl-pds\">:test</span>\n        <span class=\"pl-k\">end</span>\n      <span class=\"pl-k\">end</span>\n    <span class=\"pl-k\">end</span>\n    <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">instance_variable_set</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:@routes</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">nil</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Before:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw   146.000 i/100ms\nCalculating -------------------------------------\n                draw      1.482k (± 3.0%) i/s -      7.446k in   5.029998s\"><pre class=\"notranslate\"><code class=\"notranslate\">ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw   146.000 i/100ms\nCalculating -------------------------------------\n                draw      1.482k (± 3.0%) i/s -      7.446k in   5.029998s\n</code></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw   181.000 i/100ms\nCalculating -------------------------------------\n                draw      1.797k (± 2.8%) i/s -      9.050k in   5.040444s\"><pre class=\"notranslate\"><code class=\"notranslate\">ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw   181.000 i/100ms\nCalculating -------------------------------------\n                draw      1.797k (± 2.8%) i/s -      9.050k in   5.040444s\n</code></pre></div>\n<p dir=\"auto\">~1.2x faster</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52525",
            "title": "Make route mapping scope lookups faster",
            "date_modified": "2024-08-07T18:51:52.000Z",
            "date_published": "2024-08-07T05:28:57.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2786819?u=722b21f1f48dc9a97c9494aba04c4f657d31e941&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Update the Active Record Association Documentation.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The images used to show the relationships of the different types of associations have both the table declarations, as well as a code sample, but the code sample is also in the guide. We could probably simplify the images by cutting off the code samples from them and leaving them in the guide code.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> belongs_to section mentions bi-directional association and links to it within the same guide, but doesn't do the same for has_one and has_many, mentioned right after in the same paragraph.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> There's a note about using bigint :supplier_id in the section between belongs_to and has_one, but up until that point it's always been using belongs_to in migrations... it's probably something that doesn't need to be in this area of the guide.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The has_many :through vs has_and_belongs_to_many section ends with a composite keys mention, we could link to the new guide there.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Associations between models with composite PKs may be simplified.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> One example in bi-directional associations mentions Book belongs_to :writer, but then uses book.author a few lines below, which is incorrect.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> STI section could be expanded, it's very useful in certain situations.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add more info and make it clear</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Group sections better</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Amend the References section to be integrated with associations</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Abstract and remove duplications for options and scopes</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52523",
            "title": "[RF-DOCS]Active Record Associations Guide [ci-skip]",
            "date_modified": "2024-08-06T21:56:23.000Z",
            "date_published": "2024-08-06T20:48:18.000Z",
            "author": {
                "name": "Ridhwana",
                "url": "https://github.com/Ridhwana"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1966473?u=fe117732163d3610f051fca80df4e04c1b91335d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request is for updating and improving the \"Rails Routing from the Outside In\" Rails Guide documentation.</p>\n<h3 dir=\"auto\">Testing</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Run <code class=\"notranslate\">guides:generate</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Run <code class=\"notranslate\">guides:lint</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Run rubocop on code samples</li>\n</ul>\n<h3 dir=\"auto\">Details</h3>\n<p dir=\"auto\">Here are some of the things addressed from this Guide.</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> We mention Rack application right away, good place to link to the <a href=\"https://edgeguides.rubyonrails.org/rails_on_rack.html\" rel=\"nofollow\">Rack guide</a>.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Would it make sense to link \"CRUD operation\" to something like the <a href=\"https://edgeguides.rubyonrails.org/active_record_basics.html#crud-reading-and-writing-data\" rel=\"nofollow\">AR Basics CRUD</a> section? We don't <em>always</em> need to tie CRUD to database, it's more about the concept.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under Path and URL helpers, it might make sense to turn that list into a table to make it easier to scan?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Singular resources starts with examples of using get, maybe it should be specific to resource and leave get to Non-Resourceful Routes section? That section doesn't start with \"simple\" examples.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> \"Because you might want to use the same controller for a singular route (/account) and a plural route (/accounts/45), singular resources map to plural controllers.\" =&gt; I've never seen this be the case, I think this can be reworded to explain that singular resources map to plural controllers, without this idea of \"use the same controller\".</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under shallow nesting, there's a long example with three child resources to demonstrante that \"all get the same shallow behavior\"... maybe that'd be better with just 2 so that the table doesn't get so big/long.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under creating paths and URLs from objects, it explains how to create paths from objects (i.e. polymorphic routing), that may be a good segway to show that it uses the route key / singular route key from ActiveModel::Naming to figure that out. (could be a note/tip of sorts for example, just thought it'd be good to make that connection somewhere) Also ActiveModel::Conversion#to_param would be used to convert the IDs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> member and collection are explained under \"Adding more RESTful actions\", but there's not a good clarification of what the terms represent, i.e. that member refers to routes acting on a single element, much like show/update/destroy, and collection referes to routes acting on multiple (or a collection of) elements like index. Is it worth clarifying further?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Consider: Constraints could be a main section rather than live under non-resourceful routes, because generally speaking, they can be applied anywhere, even for resources. The only specific one would be match...via:<br>\n--&gt; Good point. Tried to move the 3 or 4 sub-sections related to constraints, but couldn't decide where they fit, after non-resource routes or before, and how to transition into them...leaving it as is for now.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under Route Globbing and Wildcard Segments there's a waning about passing format: false related to \"old 3.0.x behavior\" which can either be explained better (what's the meaning of passing format: false), and/or potentially removed (at least the mention to \"3.0.x behavior\" could be removed)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> When explaining about using draw to break down very large route files, that subsection could be a caution/warning of sorts to call more attention to the fact that most people shouldn't need it.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> We could explain how to check routes via console with Rails.application.routes.url_helpers under inspecting routes.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Document the somewhat recent <code class=\"notranslate\">--unused</code> option to rails routes. (<a href=\"https://github.com/rails/rails/pull/51316#issuecomment-1994428608\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51316/hovercard\">Reference</a>)</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52521",
            "title": "[RF-DOCS] Rails Routing Guide [ci-skip]",
            "date_modified": "2024-08-07T12:00:30.000Z",
            "date_published": "2024-08-06T19:40:58.000Z",
            "author": {
                "name": "bhumi1102",
                "url": "https://github.com/bhumi1102"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The current documentation <code class=\"notranslate\">RenderingHelper#render</code> doesn't document all options and documents an the outdated <code class=\"notranslate\">:update</code> argument.</p>\n<p dir=\"auto\">The <a href=\"https://edgeapi.rubyonrails.org/classes/ActionController/Rendering.html#method-i-render\" rel=\"nofollow\">documentation</a> of <code class=\"notranslate\">ActionController::Rendering#render</code> is much more complete. It shows example code for the different rendering modes, has a separate section for other arguments and reads a lot better as well.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This change copies the documentation from <code class=\"notranslate\">ActionController::Rendering</code> and updates it to make sense for ActionView:</p>\n<ul dir=\"auto\">\n<li>The <code class=\"notranslate\">response formats</code> is replaced with <code class=\"notranslate\">formats</code>.</li>\n<li>Removes the <code class=\"notranslate\">:json</code> rendering mode, which isn't supported.</li>\n<li>The <code class=\"notranslate\">assigns</code>, <code class=\"notranslate\">status</code> and <code class=\"notranslate\">layout</code> options are removed as the aren't supported.</li>\n<li>The <code class=\"notranslate\">:formats</code>, <code class=\"notranslate\">:variants</code>, and <code class=\"notranslate\">:handlers</code> options are added.</li>\n</ul>\n<p dir=\"auto\">This also removes the <code class=\"notranslate\">:update</code> option which is no longer supported.</p>\n<p dir=\"auto\">The following script allows reproducing the render modes and options:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# frozen_string_literal: true\n\nrequire &quot;bundler/inline&quot;\n\ngemfile(true) do\n  source &quot;https://rubygems.org&quot;\n\n  git_source(:github) { |repo| &quot;https://github.com/#{repo}.git&quot; }\n\n  gem &quot;rails&quot;\n  # If you want to test against edge Rails replace the previous line with this:\n  # gem &quot;rails&quot;, github: &quot;rails/rails&quot;, branch: &quot;main&quot;\nend\n\nrequire &quot;minitest/autorun&quot;\nrequire &quot;action_view&quot;\n\nclass Greeting\n  def render_in(view_context)\n    view_context.render html: &quot;Rendering: renderable!&quot;\n  end\n\n  def format\n    :html\n  end\nend\n\nclass BugTest &lt; ActionView::TestCase\n  def setup\n    @controller.append_view_path &quot;.&quot;\n    File.write(&quot;_partial.html.erb&quot;, &quot;Rendering as html: &lt;%= @name %&gt;!&quot;)\n    File.write(&quot;_partial.text.erb&quot;, &quot;Rendering as text: &lt;%= name %&gt;!&quot;)\n  end\n\n  def test_supported_render_modes\n    page = &lt;&lt;~ERB\n    Test Render Modes\n    &lt;%= render 'partial', name: 'implicit' %&gt;\n    &lt;%= render partial: 'partial', locals: { name: 'partial' } %&gt;\n    &lt;%= render template: '_partial', locals: { name: 'template' } %&gt;\n    &lt;%= render template: '_partial', formats: [:text], locals: { name: 'template' } %&gt;\n    &lt;%= render inline: 'Rendering: inline!' %&gt;\n    &lt;%= render body: 'Rendering: body!' %&gt;\n    &lt;%= render file: '_partial.html.erb' %&gt;\n    &lt;%= render html: &quot;&lt;script&gt;alert('hi!')&lt;/script&gt;&quot; %&gt;\n    &lt;%= render plain: &quot;&lt;script&gt;alert('hi!')&lt;/script&gt;&quot; %&gt;\n    &lt;%= render Greeting.new %&gt;\n    &lt;%= render renderable: Greeting.new %&gt;\n    ERB\n\n    puts render inline: page\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># frozen_string_literal: true</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"bundler/inline\"</span>\n\n<span class=\"pl-en\">gemfile</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">source</span> <span class=\"pl-s\">\"https://rubygems.org\"</span>\n\n  <span class=\"pl-en\">git_source</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:github</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">repo</span>| <span class=\"pl-s\">\"https://github.com/<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">repo</span><span class=\"pl-kos\">}</span></span>.git\"</span> <span class=\"pl-kos\">}</span>\n\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"rails\"</span>\n  <span class=\"pl-c\"># If you want to test against edge Rails replace the previous line with this:</span>\n  <span class=\"pl-c\"># gem \"rails\", github: \"rails/rails\", branch: \"main\"</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"minitest/autorun\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"action_view\"</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Greeting</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">render_in</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">view_context</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-s1\">view_context</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">render</span> <span class=\"pl-pds\">html</span>: <span class=\"pl-s\">\"Rendering: renderable!\"</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">format</span>\n    <span class=\"pl-pds\">:html</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">BugTest</span> &lt; <span class=\"pl-v\">ActionView</span>::<span class=\"pl-v\">TestCase</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">setup</span>\n    <span class=\"pl-c1\">@controller</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">append_view_path</span> <span class=\"pl-s\">\".\"</span>\n    <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">write</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"_partial.html.erb\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"Rendering as html: &lt;%= @name %&gt;!\"</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">write</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"_partial.text.erb\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"Rendering as text: &lt;%= name %&gt;!\"</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_supported_render_modes</span>\n    <span class=\"pl-s1\">page</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">&lt;&lt;~ERB</span><span class=\"pl-s\"></span>\n<span class=\"pl-s\">    Test Render Modes</span>\n<span class=\"pl-s\">    <span class=\"pl-k\">&lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-s\">'partial'</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">'implicit'</span> <span class=\"pl-k\">%&gt;</span><span class=\"pl-k\"></span></span>\n<span class=\"pl-s\"><span class=\"pl-k\">    &lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-pds\">partial</span>: <span class=\"pl-s\">'partial'</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">locals</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">'partial'</span> <span class=\"pl-kos\">}</span> <span class=\"pl-k\">%&gt;</span><span class=\"pl-k\"></span></span>\n<span class=\"pl-s\"><span class=\"pl-k\">    &lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-pds\">template</span>: <span class=\"pl-s\">'_partial'</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">locals</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">'template'</span> <span class=\"pl-kos\">}</span> <span class=\"pl-k\">%&gt;</span><span class=\"pl-k\"></span></span>\n<span class=\"pl-s\"><span class=\"pl-k\">    &lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-pds\">template</span>: <span class=\"pl-s\">'_partial'</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">formats</span>: <span class=\"pl-kos\">[</span><span class=\"pl-pds\">:text</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">locals</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">'template'</span> <span class=\"pl-kos\">}</span> <span class=\"pl-k\">%&gt;</span><span class=\"pl-k\"></span></span>\n<span class=\"pl-s\"><span class=\"pl-k\">    &lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-pds\">inline</span>: <span class=\"pl-s\">'Rendering: inline!'</span> <span class=\"pl-k\">%&gt;</span><span class=\"pl-k\"></span></span>\n<span class=\"pl-s\"><span class=\"pl-k\">    &lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-pds\">body</span>: <span class=\"pl-s\">'Rendering: body!'</span> <span class=\"pl-k\">%&gt;</span><span class=\"pl-k\"></span></span>\n<span class=\"pl-s\"><span class=\"pl-k\">    &lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-pds\">file</span>: <span class=\"pl-s\">'_partial.html.erb'</span> <span class=\"pl-k\">%&gt;</span><span class=\"pl-k\"></span></span>\n<span class=\"pl-s\"><span class=\"pl-k\">    &lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-pds\">html</span>: <span class=\"pl-s\">\"&lt;script&gt;alert('hi!')&lt;/script&gt;\"</span> <span class=\"pl-k\">%&gt;</span><span class=\"pl-k\"></span></span>\n<span class=\"pl-s\"><span class=\"pl-k\">    &lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-pds\">plain</span>: <span class=\"pl-s\">\"&lt;script&gt;alert('hi!')&lt;/script&gt;\"</span> <span class=\"pl-k\">%&gt;</span><span class=\"pl-k\"></span></span>\n<span class=\"pl-s\"><span class=\"pl-k\">    &lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-v\">Greeting</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span> <span class=\"pl-k\">%&gt;</span><span class=\"pl-k\"></span></span>\n<span class=\"pl-s\"><span class=\"pl-k\">    &lt;%=</span> <span class=\"pl-en\">render</span> <span class=\"pl-pds\">renderable</span>: <span class=\"pl-v\">Greeting</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span> <span class=\"pl-k\">%&gt;</span></span>\n<span class=\"pl-s\">    ERB</span>\n\n    <span class=\"pl-en\">puts</span> <span class=\"pl-en\">render</span> <span class=\"pl-pds\">inline</span>: <span class=\"pl-s1\">page</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Which results in:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Test Render Modes\nRendering as html: !\nRendering as html: !\nRendering as html: !\nRendering as text: template!\nRendering: inline!\nRendering: body!\nRendering as html: &amp;lt;%= @name %&amp;gt;!\n&amp;lt;script&amp;gt;alert(&amp;#39;hi!&amp;#39;)&amp;lt;/script&amp;gt;\n&amp;lt;script&amp;gt;alert(&amp;#39;hi!&amp;#39;)&amp;lt;/script&amp;gt;\nRendering: renderable!\nRendering: renderable!\"><pre class=\"notranslate\"><code class=\"notranslate\">Test Render Modes\nRendering as html: !\nRendering as html: !\nRendering as html: !\nRendering as text: template!\nRendering: inline!\nRendering: body!\nRendering as html: &amp;lt;%= @name %&amp;gt;!\n&amp;lt;script&amp;gt;alert(&amp;#39;hi!&amp;#39;)&amp;lt;/script&amp;gt;\n&amp;lt;script&amp;gt;alert(&amp;#39;hi!&amp;#39;)&amp;lt;/script&amp;gt;\nRendering: renderable!\nRendering: renderable!\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52520",
            "title": "Improve documentation of `ActionView:RenderingHelper#render`",
            "date_modified": "2024-08-07T20:49:14.000Z",
            "date_published": "2024-08-06T17:00:39.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1709692?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The current implementation does not respect the layout parameter in case of mixed collections.</p>\n<p dir=\"auto\">This commit fixes the issue by ensuring that the code path for mixed collections render the partial inside the provided layout.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49590.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1938859635\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49590\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49590/hovercard\" href=\"https://github.com/rails/rails/issues/49590\">#49590</a></p>\n<p dir=\"auto\">The current implementation of <code class=\"notranslate\">render_collection_derive_partial</code> ignores the layout parameter in case of mixed collections.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes<code class=\"notranslate\">render_collection_derive_partial</code> to call a new <code class=\"notranslate\">render_collection_with_no_partial</code> method which renders the partial inside the specified layout.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This is my second attempt at fixing it. I have double checked that there are no negative side effects.</p>\n<ol dir=\"auto\">\n<li>Benchmark between rendering with a layout vs rendering without a layout:</li>\n</ol>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ruby 3.3.2 (2024-05-30 revision e5a195edf6) [aarch64-linux]\nWarming up --------------------------------------\n           no layout   436.000 i/100ms\n         with layout   350.000 i/100ms\nCalculating -------------------------------------\n           no layout      4.313k (± 3.4%) i/s -     21.800k in   5.061356s\n         with layout      3.999k (± 3.9%) i/s -     20.300k in   5.083979s\n\nComparison:\n           no layout:     4312.6 i/s\n         with layout:     3999.4 i/s - 1.08x  slower\"><pre class=\"notranslate\"><code class=\"notranslate\">ruby 3.3.2 (2024-05-30 revision e5a195edf6) [aarch64-linux]\nWarming up --------------------------------------\n           no layout   436.000 i/100ms\n         with layout   350.000 i/100ms\nCalculating -------------------------------------\n           no layout      4.313k (± 3.4%) i/s -     21.800k in   5.061356s\n         with layout      3.999k (± 3.9%) i/s -     20.300k in   5.083979s\n\nComparison:\n           no layout:     4312.6 i/s\n         with layout:     3999.4 i/s - 1.08x  slower\n</code></pre></div>\n<ol start=\"2\" dir=\"auto\">\n<li>No generation of multiple layout templates</li>\n</ol>\n<p dir=\"auto\">The layout template is generated only once in <code class=\"notranslate\">render_collection_with_multiple_partials</code>.</p>\n<ol start=\"3\" dir=\"auto\">\n<li>Generation of partial templates is no different</li>\n</ol>\n<p dir=\"auto\">The generation is the partial templates happen in the same way as in main and it's not affected by this change.</p>",
            "url": "https://github.com/rails/rails/pull/52515",
            "title": "Render Partial Collection with a layout parameter",
            "date_modified": "2024-08-07T09:18:12.000Z",
            "date_published": "2024-08-06T07:42:10.000Z",
            "author": {
                "name": "cmaruz",
                "url": "https://github.com/cmaruz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Followup <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2431148073\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52422\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52422/hovercard\" href=\"https://github.com/rails/rails/pull/52422\">#52422</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the routing mapper to use keywords instead of hashes, which results in a speed boost.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Using the <a href=\"https://github.com/rails/rails/pull/52409#issue-2426595281\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52409/hovercard\">benchmark</a> in the initial deprecation PR:</p>\n<p dir=\"auto\">Before:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw   113.000 i/100ms\nCalculating -------------------------------------\n                draw      1.110k (± 3.1%) i/s -      5.650k in   5.095601s\"><pre class=\"notranslate\"><code class=\"notranslate\">ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw   113.000 i/100ms\nCalculating -------------------------------------\n                draw      1.110k (± 3.1%) i/s -      5.650k in   5.095601s\n</code></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw   116.000 i/100ms\nCalculating -------------------------------------\n                draw      1.174k (± 3.2%) i/s -      5.916k in   5.042676s\"><pre class=\"notranslate\"><code class=\"notranslate\">ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]\nWarming up --------------------------------------\n                draw   116.000 i/100ms\nCalculating -------------------------------------\n                draw      1.174k (± 3.2%) i/s -      5.916k in   5.042676s\n</code></pre></div>\n<p dir=\"auto\">It turns out the real speed difference is next to nothing, which is unfortunate. There was a bug in my <a href=\"https://github.com/Shopify/rails/tree/routing_mapper_opt\">initial</a> implementation that made it faster 🤦. However, I think now that the mapper is easier to reason about, we should be able to do see optimization potential a little bit easier. I can see two in the scopes and AST parsing that I'll work on next.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52512",
            "title": "Mapper with keywords",
            "date_modified": "2024-08-06T20:27:12.000Z",
            "date_published": "2024-08-05T22:07:06.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><a href=\"https://guides.rubyonrails.org/active_storage_overview.html#authenticated-controllers\" rel=\"nofollow\">https://guides.rubyonrails.org/active_storage_overview.html#authenticated-controllers</a> discusses how to secure the Active Storage rendering controllers (potentially of interest: <a href=\"https://github.com/rails/rails/pull/52388\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52388/hovercard\">my PR</a> that improves the docs). These controllers are easy to secure becuase most of the functionality is extracted to modules so they're easy enough to re-implement.</p>\n<p dir=\"auto\">The same isn't true for <code class=\"notranslate\">DirectUploadsController</code>. But you should secure that controller too. If you don't, then unauthenticated users can create <code class=\"notranslate\">ActiveStorage::Blob</code> records in your database, and get secured URLs they can use to directly upload files into your S3 (etc) bucket.</p>\n<p dir=\"auto\">This PR makes it easier to secure the controller:</p>\n<ul dir=\"auto\">\n<li>Functionality is extracted to a module.</li>\n<li>Docs are updated to point you in the right direction.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52505",
            "title": "Make it possible to secure `ActiveStorage::DirectUploadsController`",
            "date_modified": "2024-08-05T01:45:42.000Z",
            "date_published": "2024-08-05T01:28:41.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/3153380?u=64d7e2eb60d27ff064dbccc83e60ea491b24b464&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Regarding new authentication generator. Why store a long string in database and then run a sequential find by query for finding a Session? Even adding an index to token would be a waste of disk space when we can use signed_id for this purpose here so that the look up would be done using the integer primary key.</p>\n<p dir=\"auto\">So, we can drop the token column for sessions and instead of doing</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Session.find_by(token: token)\n\n# and \n\ncookies.signed.permanent[:session_token] = { value: session.token, httponly: true, same_site: :lax }\"><pre class=\"notranslate\"><span class=\"pl-v\">Session</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find_by</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">token</span>: <span class=\"pl-en\">token</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-c\"># and </span>\n\n<span class=\"pl-en\">cookies</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">signed</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">permanent</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:session_token</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">value</span>: <span class=\"pl-en\">session</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">token</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">httponly</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">same_site</span>: <span class=\"pl-pds\">:lax</span> <span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">we could do</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Session.find_signed(token)\n\n# and \n\ncookies.signed.permanent[:session_token] = { value: session.signed_id, httponly: true, same_site: :lax }\"><pre class=\"notranslate\"><span class=\"pl-v\">Session</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find_signed</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">token</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-c\"># and </span>\n\n<span class=\"pl-en\">cookies</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">signed</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">permanent</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:session_token</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">value</span>: <span class=\"pl-en\">session</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">signed_id</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">httponly</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">same_site</span>: <span class=\"pl-pds\">:lax</span> <span class=\"pl-kos\">}</span></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request removes token column from Session model and rely on signed_id for finding the record</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52504",
            "title": "Authentication: Using signed_id for finding and setting session record",
            "date_modified": "2024-08-05T20:20:08.000Z",
            "date_published": "2024-08-04T23:01:02.000Z",
            "author": {
                "name": "uxxman",
                "url": "https://github.com/uxxman"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22231095?u=009beb45d45553063bf76db6597ad7865fa22029&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created to introduce a dedicated <code class=\"notranslate\">reset_tag</code> helper method for creating reset buttons in forms. Currently, we are using <code class=\"notranslate\">button_tag</code> for adding reset buttons, which requires additional parameters to function as a reset button. A dedicated <code class=\"notranslate\">reset_tag</code> helper will provide a more intuitive and straightforward way to add reset functionality to forms.</p>\n<p dir=\"auto\">This Pull Request has been created because [REPLACE ME]</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the way reset buttons can be created in Rails forms by introducing a new <code class=\"notranslate\">reset_tag</code> helper method. The new method follows the convention of other form tag helpers like <code class=\"notranslate\">submit_tag</code>, making it more consistent with the Rails API.</p>\n<p dir=\"auto\">Example usage:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"&lt;%= reset_tag %&gt;\n&lt;%= reset_tag('Clear Form') %&gt;\n&lt;%= reset_tag('Reset', class: 'btn btn-secondary') %&gt;\"><pre class=\"notranslate\">&lt;%= <span class=\"pl-en\">reset_tag</span> <span class=\"pl-s\">%&gt;</span>\n<span class=\"pl-s\">&lt;%= reset_tag('Clear Form') %&gt;</span>\n&lt;%= <span class=\"pl-en\">reset_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'Reset'</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">class</span>: <span class=\"pl-s\">'btn btn-secondary'</span><span class=\"pl-kos\">)</span> %&gt;</pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52503",
            "title": "Add `reset_tag` form tag helper",
            "date_modified": "2024-08-07T01:40:20.000Z",
            "date_published": "2024-08-04T18:23:55.000Z",
            "author": {
                "name": "akhilgkrishnan",
                "url": "https://github.com/akhilgkrishnan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/522155?u=2e71ed2ab56545207a94b885fafc434ee7350cf1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">ActiveRecord provides a way to set isolation level per transaction:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.transaction(isolation: :read_committed) do\n  ...\nend\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">transaction</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">isolation</span>: <span class=\"pl-pds\">:read_committed</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  ...\n<span class=\"pl-en\">end</span></pre></div>\n<p dir=\"auto\">Underneath, that ends up calling:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"def begin_isolated_db_transaction(isolation) # :nodoc:\n  internal_execute(&quot;SET TRANSACTION ISOLATION LEVEL #{transaction_isolation_levels.fetch(isolation)}&quot;, &quot;TRANSACTION&quot;, allow_retry: true, materialize_transactions: false)\n  begin_db_transaction\nend\"><pre class=\"notranslate\"><code class=\"notranslate\">def begin_isolated_db_transaction(isolation) # :nodoc:\n  internal_execute(\"SET TRANSACTION ISOLATION LEVEL #{transaction_isolation_levels.fetch(isolation)}\", \"TRANSACTION\", allow_retry: true, materialize_transactions: false)\n  begin_db_transaction\nend\n</code></pre></div>\n<p dir=\"auto\">However, it's possible that <code class=\"notranslate\">BEGIN</code> triggered by <code class=\"notranslate\">begin_db_transaction</code> would fail for connectivity reasons. ActiveRecord's behaviour it to reestablish the connection and to retry the <code class=\"notranslate\">BEGIN</code>.</p>\n<p dir=\"auto\">But that means any <code class=\"notranslate\">SET ISOLATION LEVEL ...</code> that happened prior to it would be lost.</p>\n<p dir=\"auto\">Rather than try building isolation level awareness into reconnects, I think it's a lot more reliable to have a separate connection pool, one that runs <code class=\"notranslate\">SET SESSION TRANSACTION ISOLATION LEVEL ...</code> every time it connects to the DB.</p>\n<p dir=\"auto\">This PR allows to introduce that setting on connection config.</p>",
            "url": "https://github.com/rails/rails/pull/52501",
            "title": "Allow to set isolation level on AR connection config",
            "date_modified": "2024-08-07T10:12:30.000Z",
            "date_published": "2024-08-04T01:05:12.000Z",
            "author": {
                "name": "kirs",
                "url": "https://github.com/kirs"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/706220?u=5d1df33ffca934dd9c1e9042df87131a348da6c4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This PR adds a SAX-based parser with REXML as with other XmlMini.</p>\n<p dir=\"auto\">Use cases: Provide faster parsing than REXML(DOM) in situations where libxml-ruby or nokogiri is not available.</p>\n\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request requires the latest REXML 3.3.4 or higher to pass the XMLMiniEngineTest::EngineTests.test_exception_thrown_on_expansion_attack test.</p>\n<p dir=\"auto\">See: <a href=\"https://www.ruby-lang.org/en/news/2024/08/01/dos-rexml-cve-2024-41946/\" rel=\"nofollow\">https://www.ruby-lang.org/en/news/2024/08/01/dos-rexml-cve-2024-41946/</a></p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<ul dir=\"auto\">\n<li>sax_bench.yaml</li>\n</ul>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"loop_count: 100\ncontexts:\n  - name: YJIT=OFF\n  - name: YJIT=ON\n    prelude: |\n      RubyVM::YJIT.enable\n\nprelude: |\n  $LOAD_PATH.unshift(File.expand_path(&quot;activesupport/lib&quot;))\n  require 'active_support'\n  require 'active_support/core_ext'\n\n  n_elements = 5000\n  n_attributes = 10\n\n  def build_xml(n_elements, n_attributes)\n    xml = '&lt;?xml version=&quot;1.0&quot;?&gt;&lt;root&gt;'\n    n_elements.times do |i|\n      xml &lt;&lt; '&lt;child '\n      n_attributes.times {|j| xml &lt;&lt; &quot;id#{j}=\\&quot;#{i}\\&quot; &quot; }\n      xml &lt;&lt; '/&gt;'\n    end\n    xml &lt;&lt; '&lt;/root&gt;'\n  end\n  xml = build_xml(n_elements, n_attributes)\n\nbenchmark:\n  'LibXML'       : |\n    ActiveSupport::XmlMini.backend = 'LibXML'\n    hash = Hash.from_xml(xml)\n  'LibXMLSAX'       : |\n    ActiveSupport::XmlMini.backend = 'LibXMLSAX'\n    hash = Hash.from_xml(xml)\n  'Nokogiri'       : |\n    ActiveSupport::XmlMini.backend = 'Nokogiri'\n    hash = Hash.from_xml(xml)\n  'NokogiriSAX'       : |\n    ActiveSupport::XmlMini.backend = 'NokogiriSAX'\n    hash = Hash.from_xml(xml)\n  'REXML'       : |\n    ActiveSupport::XmlMini.backend = 'REXML'\n    hash = Hash.from_xml(xml)\n  'REXMLSAX'       : |\n    ActiveSupport::XmlMini.backend = 'REXMLSAX'\n    hash = Hash.from_xml(xml)\"><pre class=\"notranslate\"><code class=\"notranslate\">loop_count: 100\ncontexts:\n  - name: YJIT=OFF\n  - name: YJIT=ON\n    prelude: |\n      RubyVM::YJIT.enable\n\nprelude: |\n  $LOAD_PATH.unshift(File.expand_path(\"activesupport/lib\"))\n  require 'active_support'\n  require 'active_support/core_ext'\n\n  n_elements = 5000\n  n_attributes = 10\n\n  def build_xml(n_elements, n_attributes)\n    xml = '&lt;?xml version=\"1.0\"?&gt;&lt;root&gt;'\n    n_elements.times do |i|\n      xml &lt;&lt; '&lt;child '\n      n_attributes.times {|j| xml &lt;&lt; \"id#{j}=\\\"#{i}\\\" \" }\n      xml &lt;&lt; '/&gt;'\n    end\n    xml &lt;&lt; '&lt;/root&gt;'\n  end\n  xml = build_xml(n_elements, n_attributes)\n\nbenchmark:\n  'LibXML'       : |\n    ActiveSupport::XmlMini.backend = 'LibXML'\n    hash = Hash.from_xml(xml)\n  'LibXMLSAX'       : |\n    ActiveSupport::XmlMini.backend = 'LibXMLSAX'\n    hash = Hash.from_xml(xml)\n  'Nokogiri'       : |\n    ActiveSupport::XmlMini.backend = 'Nokogiri'\n    hash = Hash.from_xml(xml)\n  'NokogiriSAX'       : |\n    ActiveSupport::XmlMini.backend = 'NokogiriSAX'\n    hash = Hash.from_xml(xml)\n  'REXML'       : |\n    ActiveSupport::XmlMini.backend = 'REXML'\n    hash = Hash.from_xml(xml)\n  'REXMLSAX'       : |\n    ActiveSupport::XmlMini.backend = 'REXMLSAX'\n    hash = Hash.from_xml(xml)\n</code></pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ ruby -v\nruby 3.3.3 (2024-06-12 revision f1c7b6f435) [arm64-darwin22]\n$ gem list rexml libxml-ruby nokogiri\n\n*** LOCAL GEMS ***\n\nrexml (3.3.4)\n\n*** LOCAL GEMS ***\n\nlibxml-ruby (5.0.3)\n\n*** LOCAL GEMS ***\n\nnokogiri (1.16.7 arm64-darwin, 1.16.6 arm64-darwin, 1.16.5)\"><pre class=\"notranslate\"><code class=\"notranslate\">$ ruby -v\nruby 3.3.3 (2024-06-12 revision f1c7b6f435) [arm64-darwin22]\n$ gem list rexml libxml-ruby nokogiri\n\n*** LOCAL GEMS ***\n\nrexml (3.3.4)\n\n*** LOCAL GEMS ***\n\nlibxml-ruby (5.0.3)\n\n*** LOCAL GEMS ***\n\nnokogiri (1.16.7 arm64-darwin, 1.16.6 arm64-darwin, 1.16.5)\n</code></pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ benchmark-driver sax_bench.yaml\nCalculating -------------------------------------\n                       YJIT=OFF     YJIT=ON \n              LibXML     16.818      19.854 i/s -     100.000 times in 5.946048s 5.036691s\n           LibXMLSAX     18.235      23.218 i/s -     100.000 times in 5.483908s 4.306973s\n            Nokogiri     16.512      16.512 i/s -     100.000 times in 6.056280s 6.056372s\n         NokogiriSAX     13.469      15.905 i/s -     100.000 times in 7.424489s 6.287452s\n               REXML      3.341       5.426 i/s -     100.000 times in 29.928804s 18.428204s\n            REXMLSAX      4.390       6.301 i/s -     100.000 times in 22.777792s 15.869573s\"><pre class=\"notranslate\"><code class=\"notranslate\">$ benchmark-driver sax_bench.yaml\nCalculating -------------------------------------\n                       YJIT=OFF     YJIT=ON \n              LibXML     16.818      19.854 i/s -     100.000 times in 5.946048s 5.036691s\n           LibXMLSAX     18.235      23.218 i/s -     100.000 times in 5.483908s 4.306973s\n            Nokogiri     16.512      16.512 i/s -     100.000 times in 6.056280s 6.056372s\n         NokogiriSAX     13.469      15.905 i/s -     100.000 times in 7.424489s 6.287452s\n               REXML      3.341       5.426 i/s -     100.000 times in 29.928804s 18.428204s\n            REXMLSAX      4.390       6.301 i/s -     100.000 times in 22.777792s 15.869573s\n</code></pre></div>\n<ul dir=\"auto\">\n<li>YJIT=OFF : REXMLSAX is 1.31x  faster than REXML(DOM)</li>\n<li>YJIT=ON  : REXMLSAX is 1.16x  faster than REXML(DOM)</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52498",
            "title": "feature: Add SAX-based parser for XmlMini, using REXML",
            "date_modified": "2024-08-03T07:02:25.000Z",
            "date_published": "2024-08-03T07:02:20.000Z",
            "author": {
                "name": "naitoh",
                "url": "https://github.com/naitoh"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/99586?u=b4abd791d83e768c72cb832147b4a210caecf47d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Problem:</p>\n<p dir=\"auto\"><a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/f6c0a35b1b8b4fb4d033aa6c09c4efaaf6652bdc/hovercard\" href=\"https://github.com/rails/rails/commit/f6c0a35b1b8b4fb4d033aa6c09c4efaaf6652bdc\"><tt>f6c0a35</tt></a> changed <code class=\"notranslate\">human_attribute_name</code> to raise error if <code class=\"notranslate\">raise_on_missing_translations</code> is <code class=\"notranslate\">true</code>. This change had a major impact on existing applications (i.e., too many missing translation errors).</p>\n<p dir=\"auto\">Solution:</p>\n<p dir=\"auto\">Allow each model to decide whether to raise an error on missing translations.</p>",
            "url": "https://github.com/rails/rails/pull/52495",
            "title": "Enable raising an error for missing translations on a per-model basis",
            "date_modified": "2024-08-03T02:50:48.000Z",
            "date_published": "2024-08-03T02:50:43.000Z",
            "author": {
                "name": "shouichi",
                "url": "https://github.com/shouichi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The problem:</p>\n<p dir=\"auto\">Active Model support for JSON serialization and deserialization assumes underscored keys.</p>\n<p dir=\"auto\">Support for assigning Ruby attributes from snake_case JSON properties is well supported through <a href=\"https://edgeapi.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-from_json\" rel=\"nofollow\">ActiveModel::Serializers::JSON#from_json</a>:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User\n  include ActiveModel::API\n  include ActiveModel::Serializers::JSON\n\n  attr_accessor :name, :born_on\n\n  def attributes\n    { name: name, born_on: born_on }\n  end\nend\n\nuser = User.new\nuser.from_json(&lt;&lt;~JSON)\n  {\n    &quot;name&quot;: &quot;Ruby on Rails&quot;,\n    &quot;born_on&quot;: &quot;2004-11-24&quot;\n  }\nJSON\n\nuser.name       # =&gt; &quot;Ruby on Rails&quot;\nuser.born_on    # =&gt; &quot;2004-11-24&quot;\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span>\n  <span class=\"pl-en\">include</span> <span class=\"pl-v\">ActiveModel</span>::<span class=\"pl-c1\">API</span>\n  <span class=\"pl-en\">include</span> <span class=\"pl-v\">ActiveModel</span>::<span class=\"pl-v\">Serializers</span>::<span class=\"pl-c1\">JSON</span>\n\n  <span class=\"pl-en\">attr_accessor</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:born_on</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">attributes</span>\n    <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-en\">name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">born_on</span>: <span class=\"pl-en\">born_on</span> <span class=\"pl-kos\">}</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n<span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">from_json</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">&lt;&lt;~JSON</span><span class=\"pl-kos\">)</span><span class=\"pl-s\"></span>\n<span class=\"pl-s\">  {</span>\n<span class=\"pl-s\">    \"name\": \"Ruby on Rails\",</span>\n<span class=\"pl-s\">    \"born_on\": \"2004-11-24\"</span>\n<span class=\"pl-s\">  }</span>\n<span class=\"pl-s\">JSON</span>\n\n<span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span>       <span class=\"pl-c\"># =&gt; \"Ruby on Rails\"</span>\n<span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">born_on</span>    <span class=\"pl-c\"># =&gt; \"2004-11-24\"</span></pre></div>\n<p dir=\"auto\">However, assigning Ruby attributes from camelCase JSON properties is incompatible with <code class=\"notranslate\">ActiveModel::Serializers::JSON#from_json</code>. If the <code class=\"notranslate\">born_on</code> property were <code class=\"notranslate\">bornOn</code>, attribute assignment would fail for classes that also include <a href=\"https://edgeapi.rubyonrails.org/classes/ActiveModel/AttributeAssignment.html#method-i-attributes-3D\" rel=\"nofollow\">ActiveModel::AttributeAssignment</a> (like <code class=\"notranslate\">ActiveModel::Model</code> and <code class=\"notranslate\">ActiveRecord::Base</code>). Since <code class=\"notranslate\">ActiveModel::AttributeAssignment</code> calls <code class=\"notranslate\">send(\"#{attribute}=\", value)</code>, the most likely scenario is a <code class=\"notranslate\">NoMethodError</code>.</p>\n<p dir=\"auto\">To work around this shortcoming, models can declare aliases (<code class=\"notranslate\">alias_method :bornOn, :born_on</code> in the above example). This can be tedious, and feel incomplete as <em>not all</em> keys require aliases (for example, <code class=\"notranslate\">:name</code> yields the same property name regardless of casing).</p>\n<p dir=\"auto\">Similarly, serializing an instance to JSON assumes underscored keys. Unlike <code class=\"notranslate\">#from_json</code>, there are existing seams to modify keys before they are serialized. For example, models can override either <code class=\"notranslate\">#serializable_hash</code> or <code class=\"notranslate\">#as_json</code>. While viable, there are issues with both approach.</p>\n<p dir=\"auto\">Overriding <code class=\"notranslate\">#serializable_hash</code> with JSON-specific details is a breach of the abstraction. In theory, <code class=\"notranslate\">#serializable_hash</code> aims to transform attributes into a <code class=\"notranslate\">Hash</code> that is ready to be serialized into another format (JSON, XML, or otherwise).</p>\n<p dir=\"auto\">Overriding <code class=\"notranslate\">#as_json</code> is more appropriate, but lacks a corresponding abstraction for de-serializing and assigning values in a method like <code class=\"notranslate\">#from_json</code>. <a href=\"https://github.com/rails/rails/pull/51282\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51282/hovercard\">#51282</a> aims to introduce a corollary abstraction, but feels incomplete and awkward in comparison to what's proposed below.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The proposal:</p>\n<p dir=\"auto\">This commit proposes the introduction of<br>\n<code class=\"notranslate\">ActiveModel::Serializers::JSON.key_format</code> to configure key transformations at the class level. The name and invocation style draw inspiration from <a href=\"https://github.com/rails/jbuilder\">jbuilder</a>, specifically its <a href=\"https://github.com/rails/jbuilder/tree/v2.12.0?tab=readme-ov-file#formatting-keys\">key_format</a> and <code class=\"notranslate\">key_format!</code> methods. For example, consider the following:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User\n  include ActiveModel::API\n  include ActiveModel::Serializers::JSON\n\n  key_format from_json: :underscore,\n             to_json: -&gt;(key) { key.camelize :lower }\n\n  attr_accessor :name, :born_on\n\n  def attributes\n    { name: name, born_on: born_on }\n  end\nend\n\njson = { name: &quot;Ruby on Rails&quot;, bornOn: &quot;2004-11-24&quot; }.to_json\n\nuser = User.new\nuser.from_json(json)\nuser.name                       # =&gt; &quot;Ruby on Rails&quot;\nuser.born_on                    # =&gt; &quot;2004-11-24&quot;\nuser.to_json == json            # =&gt; true\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span>\n  <span class=\"pl-en\">include</span> <span class=\"pl-v\">ActiveModel</span>::<span class=\"pl-c1\">API</span>\n  <span class=\"pl-en\">include</span> <span class=\"pl-v\">ActiveModel</span>::<span class=\"pl-v\">Serializers</span>::<span class=\"pl-c1\">JSON</span>\n\n  <span class=\"pl-en\">key_format</span> <span class=\"pl-pds\">from_json</span>: <span class=\"pl-pds\">:underscore</span><span class=\"pl-kos\">,</span>\n             <span class=\"pl-pds\">to_json</span>: <span class=\"pl-c1\">-&gt;</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> <span class=\"pl-s1\">key</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">camelize</span> <span class=\"pl-pds\">:lower</span> <span class=\"pl-kos\">}</span>\n\n  <span class=\"pl-en\">attr_accessor</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:born_on</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">attributes</span>\n    <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-en\">name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">born_on</span>: <span class=\"pl-en\">born_on</span> <span class=\"pl-kos\">}</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">json</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"Ruby on Rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">bornOn</span>: <span class=\"pl-s\">\"2004-11-24\"</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_json</span>\n\n<span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n<span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">from_json</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">json</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span>                       <span class=\"pl-c\"># =&gt; \"Ruby on Rails\"</span>\n<span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">born_on</span>                    <span class=\"pl-c\"># =&gt; \"2004-11-24\"</span>\n<span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_json</span> == <span class=\"pl-s1\">json</span>            <span class=\"pl-c\"># =&gt; true</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52494",
            "title": "Add `ActiveModel::Serializers::JSON.key_format`",
            "date_modified": "2024-08-05T20:57:32.000Z",
            "date_published": "2024-08-02T21:04:35.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/437?u=198b3dc94d58b619dc6e27f59bd4386945017d56&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Requiring <code class=\"notranslate\">action_dispatch/http/request</code> outside of Rails results in an error due to <code class=\"notranslate\">MimeNegotiation</code> depending on <code class=\"notranslate\">ActiveSupport::Concern</code> without requiring it.</p>",
            "url": "https://github.com/rails/rails/pull/52492",
            "title": "Adds missing require to action_dispatch/http/mime_negotiation",
            "date_modified": "2024-08-02T15:04:00.000Z",
            "date_published": "2024-08-02T15:03:55.000Z",
            "author": {
                "name": "foca",
                "url": "https://github.com/foca"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/97030518?u=44f65a79575affbfae38d5a4e75393694efa9d6c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because while reading the output from <code class=\"notranslate\">bin/rails credentials:help</code> I felt that some wording could have been improved.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request:</p>\n<ul dir=\"auto\">\n<li>Adds a few commas in a sentence in order to make it easier to read and syntactically correct;</li>\n<li>In a sentence where the implicit subject felt weird, I have replaced it with an explicit <code class=\"notranslate\">bin/rails credentials:edit</code> subject.</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52490",
            "title": "Improve wording of `bin/rails credentials:help` command",
            "date_modified": "2024-08-02T14:13:30.000Z",
            "date_published": "2024-08-02T14:13:16.000Z",
            "author": {
                "name": "Uaitt",
                "url": "https://github.com/Uaitt"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1334409?u=09d7ca64a9fcce78c0f5fd4267a9cc1ee4a1b60c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This PR adds the ability to skip validations on an instantiated AR record.</p>\n<p dir=\"auto\">Use cases:</p>\n<h4 dir=\"auto\">1. Creating associated records and you don't care about validations.</h4>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User &lt; ApplicationRecord\n  validates :name, presence: true\nend\n\nclass Item &lt; ApplicationRecord\n  belongs_to :record, polymorphic: true\nend\n\nrecord = User.first # the name is blank for some reason\n\nrecord.skip_validations\n\nItem.create!(record:) # this will not raise validation errors because the name is missing\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">validates</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">presence</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Item</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">belongs_to</span> <span class=\"pl-pds\">:record</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">polymorphic</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">record</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">first</span> <span class=\"pl-c\"># the name is blank for some reason</span>\n\n<span class=\"pl-s1\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">skip_validations</span>\n\n<span class=\"pl-v\">Item</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">record</span>:<span class=\"pl-kos\">)</span> <span class=\"pl-c\"># this will not raise validation errors because the name is missing</span></pre></div>\n<h4 dir=\"auto\">2. Helps with orchestration in cases where we don't own the model file</h4>\n<p dir=\"auto\">This is common in libraries.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# In app code where we don't have access to\nclass User &lt; ApplicationRecord\n  validates :name, presence: true\nend\n\n# In library code we have access to the instantiated record\n\nrecord # User.first - the name is blank for some reason\nproperty # &quot;role&quot; - this is received from the app somehow (properly sanitised)\nvalue # &quot;admin&quot; - same, received from the app\n\nrecord.skip_validations\nrecord.update!(property, value) # the name validation won't be triggered\"><pre class=\"notranslate\"><span class=\"pl-c\"># In app code where we don't have access to</span>\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">validates</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">presence</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-c\"># In library code we have access to the instantiated record</span>\n\n<span class=\"pl-en\">record</span> <span class=\"pl-c\"># User.first - the name is blank for some reason</span>\n<span class=\"pl-en\">property</span> <span class=\"pl-c\"># \"role\" - this is received from the app somehow (properly sanitised)</span>\n<span class=\"pl-en\">value</span> <span class=\"pl-c\"># \"admin\" - same, received from the app</span>\n\n<span class=\"pl-en\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">skip_validations</span>\n<span class=\"pl-en\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">update!</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">property</span><span class=\"pl-kos\">,</span> <span class=\"pl-en\">value</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># the name validation won't be triggered</span></pre></div>\n\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds the <code class=\"notranslate\">skip_validations</code> and <code class=\"notranslate\">reset_validations</code> methods which control the <code class=\"notranslate\">@skip_validations</code> ivar. This ivar in turn disabled the <code class=\"notranslate\">valid?</code> method if set to true.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">I don't know exactly the internal styling of these kinds of things (ex: should the ivar start with an underscore? or should the <code class=\"notranslate\">skip</code> and <code class=\"notranslate\">reset</code> methods end in <code class=\"notranslate\">!</code>) so I'll appreciate any guidance there.</p>\n<p dir=\"auto\">Thank you for evaluating this change.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52488",
            "title": "feature: Skip validations",
            "date_modified": "2024-08-06T16:31:55.000Z",
            "date_published": "2024-08-02T11:23:23.000Z",
            "author": {
                "name": "adrianthedev",
                "url": "https://github.com/adrianthedev"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/99586?u=b4abd791d83e768c72cb832147b4a210caecf47d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Problem:</p>\n<p dir=\"auto\"><a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/f6c0a35b1b8b4fb4d033aa6c09c4efaaf6652bdc/hovercard\" href=\"https://github.com/rails/rails/commit/f6c0a35b1b8b4fb4d033aa6c09c4efaaf6652bdc\"><tt>f6c0a35</tt></a> changed <code class=\"notranslate\">human_attribute_name</code> to raise error if <code class=\"notranslate\">raise_on_missing_translations</code> is <code class=\"notranslate\">true</code>. This change had a major impact on existing applications (i.e., too many missing translation errors).</p>\n<p dir=\"auto\">Solution:</p>\n<p dir=\"auto\">Change <code class=\"notranslate\">human_attribute_name</code> to raise an error iff <code class=\"notranslate\">raise_on_missing_translations</code> is <code class=\"notranslate\">:strict</code>.</p>",
            "url": "https://github.com/rails/rails/pull/52487",
            "title": "Change human_attribute_name to raise an error iff in strict mode",
            "date_modified": "2024-08-02T23:18:01.000Z",
            "date_published": "2024-08-02T09:01:57.000Z",
            "author": {
                "name": "shouichi",
                "url": "https://github.com/shouichi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5122678?u=204301f9f9fe8930fd26fe3bfe65b6ffaffd8b59&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52478.\">Closes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2442642275\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52478\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52478/hovercard\" href=\"https://github.com/rails/rails/issues/52478\">#52478</a></p>\n<p dir=\"auto\">Prior to this commit, tests using <a href=\"https://edgeapi.rubyonrails.org/classes/ActiveJob/TestHelper.html#method-i-assert_enqueued_with\" rel=\"nofollow\">assert_enqueued_with</a> asserting against the <code class=\"notranslate\">at</code> argument would incorrectly pass if testing with values that used second-level precision.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class BuggyJobTest &lt; ActiveJob::TestCase\n  def test_should_not_find_job\n    at =  Time.new(&quot;1989-12-31T12:00:01&quot;)\n    wait_until = Time.new(&quot;1989-12-31T12:00:02&quot;)\n\n    assert_enqueued_with(job: BuggyJob, at:) do\n      BuggyJob.set(wait_until:).perform_later\n    end\n\n    fail &quot;Should not reach this line because assert_enqueued_with should have failed&quot;\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">BuggyJobTest</span> &lt; <span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">TestCase</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_should_not_find_job</span>\n    <span class=\"pl-s1\">at</span> <span class=\"pl-c1\">=</span>  <span class=\"pl-v\">Time</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"1989-12-31T12:00:01\"</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-s1\">wait_until</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Time</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"1989-12-31T12:00:02\"</span><span class=\"pl-kos\">)</span>\n\n    <span class=\"pl-en\">assert_enqueued_with</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">job</span>: <span class=\"pl-v\">BuggyJob</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">at</span>:<span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n      <span class=\"pl-v\">BuggyJob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">wait_until</span>:<span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">perform_later</span>\n    <span class=\"pl-k\">end</span>\n\n    <span class=\"pl-en\">fail</span> <span class=\"pl-s\">\"Should not reach this line because assert_enqueued_with should have failed\"</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52479",
            "title": "Support second-level precision for `assert_enqueued_with`",
            "date_modified": "2024-08-02T23:58:44.000Z",
            "date_published": "2024-08-01T14:45:12.000Z",
            "author": {
                "name": "stevepolitodesign",
                "url": "https://github.com/stevepolitodesign"
            }
        }
    ]
}