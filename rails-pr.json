{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/31967792?u=b672b683650711ed2924c55229eda332eff189e6&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">If you try to destroy a model that does not exist using the generator, you'll see a message like this one:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/31967792/370089695-b3d57ed3-6809-40cf-85f1-59be17688bc5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjcxNDE2MDgsIm5iZiI6MTcyNzE0MTMwOCwicGF0aCI6Ii8zMTk2Nzc5Mi8zNzAwODk2OTUtYjNkNTdlZDMtNjgwOS00MGNmLTg1ZjEtNTliZTE3Njg4YmM1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MjQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTI0VDAxMjgyOFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTFmMjEyNzA5OGNkNmM3YTJhZjY4M2I0MmUzZTRjNjMwOWIxMmU4ZWVmZGY1MzYwNDgxYmYzMDIyY2Y2ZjgwYTMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.1l4xUzZgZ71H-ERs6lA1of1RRRQvanHWd-apvhEt4Uo\"><img src=\"https://private-user-images.githubusercontent.com/31967792/370089695-b3d57ed3-6809-40cf-85f1-59be17688bc5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjcxNDE2MDgsIm5iZiI6MTcyNzE0MTMwOCwicGF0aCI6Ii8zMTk2Nzc5Mi8zNzAwODk2OTUtYjNkNTdlZDMtNjgwOS00MGNmLTg1ZjEtNTliZTE3Njg4YmM1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MjQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTI0VDAxMjgyOFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTFmMjEyNzA5OGNkNmM3YTJhZjY4M2I0MmUzZTRjNjMwOWIxMmU4ZWVmZGY1MzYwNDgxYmYzMDIyY2Y2ZjgwYTMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.1l4xUzZgZ71H-ERs6lA1of1RRRQvanHWd-apvhEt4Uo\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">In the case of a typo, a developer could think the model was destroyed even though it wasn't.</p>\n<p dir=\"auto\">This is the suggested behavior with these changes:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/31967792/370090150-a9550c0f-9f97-458e-8493-ce04fe3119ef.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjcxNDE2MDgsIm5iZiI6MTcyNzE0MTMwOCwicGF0aCI6Ii8zMTk2Nzc5Mi8zNzAwOTAxNTAtYTk1NTBjMGYtOWY5Ny00NThlLTg0OTMtY2UwNGZlMzExOWVmLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MjQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTI0VDAxMjgyOFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTg2ZjcwZTg1NWY0MTg1MThjOTNlNDNlNDUwMjY5YWI3YzI0M2I2YmZhMjI0MDA4YmM0NDJlYzUyZGYzMmNmOTMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.SHdKBhKPEInvSOn2NBuJQ3EkLbMFmj_qILlthnqUNB8\"><img src=\"https://private-user-images.githubusercontent.com/31967792/370090150-a9550c0f-9f97-458e-8493-ce04fe3119ef.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjcxNDE2MDgsIm5iZiI6MTcyNzE0MTMwOCwicGF0aCI6Ii8zMTk2Nzc5Mi8zNzAwOTAxNTAtYTk1NTBjMGYtOWY5Ny00NThlLTg0OTMtY2UwNGZlMzExOWVmLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA5MjQlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwOTI0VDAxMjgyOFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTg2ZjcwZTg1NWY0MTg1MThjOTNlNDNlNDUwMjY5YWI3YzI0M2I2YmZhMjI0MDA4YmM0NDJlYzUyZGYzMmNmOTMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.SHdKBhKPEInvSOn2NBuJQ3EkLbMFmj_qILlthnqUNB8\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a check to the <code class=\"notranslate\">model_generator</code> to see if the model exists before deleting it</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53024",
            "title": "Improve model generator error handling for non-existent models",
            "date_modified": "2024-09-24T00:54:10.000Z",
            "date_published": "2024-09-24T00:46:48.000Z",
            "author": {
                "name": "AlexisChavez97",
                "url": "https://github.com/AlexisChavez97"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Calling <code class=\"notranslate\">load_schema</code> is not necessary because <code class=\"notranslate\">columns_hash</code> method already does this.</p>\n<p dir=\"auto\">This change prevents from implementing one use case I will describe below and least to an infinite loop.</p>\n<p dir=\"auto\">For some models having many columns I want to mark only certain fields to be updatable. I can use <code class=\"notranslate\">attr_readonly</code> for this and mark all other columns as readonly. I also want avoid the need to update the list passed to <code class=\"notranslate\">attr_readonly</code> when new columns are added/removed, so I also use <code class=\"notranslate\">column_names</code>. Something like:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class MyModel &lt; ApplicationRecord\n  attr_readonly column_names - [:updatable_column1, :updatable_column2]\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">MyModel</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">attr_readonly</span> <span class=\"pl-en\">column_names</span> - <span class=\"pl-kos\">[</span><span class=\"pl-pds\">:updatable_column1</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:updatable_column2</span><span class=\"pl-kos\">]</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">But using <code class=\"notranslate\">column_names</code> inside the model class body can establish the connection too early. So I implemented this:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class ApplicationRecord &lt; ActiveRecord::Base\n  class_attribute :_attr_updatable, instance_accessor: false, default: []\n\n  def self.attr_updatable(*attributes)\n    self._attr_updatable |= attributes.map(&amp;:to_s)\n  end\n\n  def self.load_schema!\n    super\n    if _attr_updatable.any?\n      readonly_attributes = column_names - _attr_updatable  # &lt;------- `column_names` causes infinite loop calling `load_schema!` over and over\n      attr_readonly(*readonly_attributes)\n    end\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">ApplicationRecord</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">class_attribute</span> <span class=\"pl-pds\">:_attr_updatable</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">instance_accessor</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attr_updatable</span><span class=\"pl-kos\">(</span>*<span class=\"pl-s1\">attributes</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">_attr_updatable</span> |= <span class=\"pl-s1\">attributes</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">map</span><span class=\"pl-kos\">(</span>&amp;<span class=\"pl-pds\">:to_s</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">load_schema!</span>\n    <span class=\"pl-smi\">super</span>\n    <span class=\"pl-k\">if</span> <span class=\"pl-en\">_attr_updatable</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">any?</span>\n      <span class=\"pl-s1\">readonly_attributes</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">column_names</span> - <span class=\"pl-en\">_attr_updatable</span>  <span class=\"pl-c\"># &lt;------- `column_names` causes infinite loop calling `load_schema!` over and over</span>\n      <span class=\"pl-en\">attr_readonly</span><span class=\"pl-kos\">(</span>*<span class=\"pl-s1\">readonly_attributes</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">and then:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class MyModel &lt; ApplicationRecord\n  attr_updatable :updatable_column1, :updatable_column2\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">MyModel</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">attr_updatable</span> <span class=\"pl-pds\">:updatable_column1</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:updatable_column2</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Am I doing it wrong?</p>\n<p dir=\"auto\">We have a few classes in ActiveRecord overriding <code class=\"notranslate\">load_schema!</code> method. Maybe we need some callback (or something else) for people to define some custom code to be run when model schema is loaded?</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a> (we had a discussion about <code class=\"notranslate\">load_schema!</code> method in another PR earlier)</p>",
            "url": "https://github.com/rails/rails/pull/53023",
            "title": "Simplify `ActiveRecord::ModelSchema.columns` method",
            "date_modified": "2024-09-23T22:56:24.000Z",
            "date_published": "2024-09-23T22:55:17.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4815?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Prior to Rails 8, the default was one database per app, and you didn't even need to change the configuration for production, you only had to provide a single secret: DATABASE_URL.</p>\n<p dir=\"auto\">Sure, you could install solid_queue and others, but then you would need to update your configuration.</p>\n<p dir=\"auto\">Now with Rails 8, the default is four databases per app.  There are a number of PaaS cloud providers which will happily provide a single secret, and the first deploy will inevitably fail with an obscure error message when postgres looks for a unix socket on local host for the other three.</p>\n<p dir=\"auto\">This patch mitigates that by inferring the named URL by modifying the path portion of the DATABASE_URL, but only if both DATABASE_URL IS set and the named version of this environment variable is NOT set.</p>\n<p dir=\"auto\">This is mildly not backwards compatible as it is theoretically possible that somebody could intentionally have set that combination, but that seems unlikely.  Arguably this level of backwards incompatibility is permissible on a major Rails release.</p>\n<p dir=\"auto\">Based on glancing at the test cases, it doesn't look like this would break the existing test, but if there is interest in pursuing this change it would make sense to add an additional test.  I'll save doing that work until I get confirmation that there is interest in this change.</p>",
            "url": "https://github.com/rails/rails/pull/53022",
            "title": "Inject named database into DATABASE_URL (if present)",
            "date_modified": "2024-09-24T00:38:11.000Z",
            "date_published": "2024-09-23T22:31:34.000Z",
            "author": {
                "name": "rubys",
                "url": "https://github.com/rubys"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/27960597?u=904b6121d6eef688d7e3f8f448fc2704a21a0c1e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">I was creating a new Rails application some days ago, and I noticed <code class=\"notranslate\">propshaft</code> was the new default asset pipeline 🎉</p>\n<p dir=\"auto\">With this in mind, the <code class=\"notranslate\">require_tree</code> and <code class=\"notranslate\">require_self</code> clauses in <code class=\"notranslate\">application.css</code> are no longer necessary, as they were specific to Sprockets.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the template of the <code class=\"notranslate\">application.css</code> file so that it does not include <code class=\"notranslate\">require_tree</code> and <code class=\"notranslate\">require_self</code> clauses.</p>\n<p dir=\"auto\">Additionally, the comment in the file has been updated to clarify that CSS precedence now follows standard cascading order without automatic prioritization by the asset pipeline. Since I'm not an expert in <code class=\"notranslate\">propshaft</code> yet, I'm open to suggestions on how this explaining comment can be improved, but from my understanding, the asset pipeline with <code class=\"notranslate\">propshaft</code> does not ensure the order of the file loading, as <code class=\"notranslate\">sprockets</code> did.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53021",
            "title": "Remove `require_*` statements from application.css",
            "date_modified": "2024-09-23T22:12:12.000Z",
            "date_published": "2024-09-23T20:06:16.000Z",
            "author": {
                "name": "jeduardo824",
                "url": "https://github.com/jeduardo824"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Prior to this commit, delegated types were unable to infer their inverse associations, so saving records built with the generated <code class=\"notranslate\">#build_ASSOCIATION</code> methods weren't writing to all the necessary places. For example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"entry = Entry.create! entryable: Message.new(subject: &quot;Hello world!&quot;)\nentry.message.subject # =&gt; &quot;Hello world!&quot;\n\nentry.build_entryable(subject: &quot;Goodbye world!&quot;).save!\nentry.reload.message.subject # =&gt; &quot;Hello world!&quot;\"><pre class=\"notranslate\"><span class=\"pl-s1\">entry</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Entry</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span> <span class=\"pl-pds\">entryable</span>: <span class=\"pl-v\">Message</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">subject</span>: <span class=\"pl-s\">\"Hello world!\"</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">entry</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">message</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">subject</span> <span class=\"pl-c\"># =&gt; \"Hello world!\"</span>\n\n<span class=\"pl-s1\">entry</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">build_entryable</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">subject</span>: <span class=\"pl-s\">\"Goodbye world!\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">save!</span>\n<span class=\"pl-s1\">entry</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">reload</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">message</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">subject</span> <span class=\"pl-c\"># =&gt; \"Hello world!\"</span></pre></div>\n<p dir=\"auto\">This commit changes that behavior to automatically infer <code class=\"notranslate\">delegated_type</code> declarations' <code class=\"notranslate\">:inverse_of</code> options when <a href=\"https://edgeguides.rubyonrails.org/configuring.html#config-active-record-automatic-scope-inversing\" rel=\"nofollow\">config.active_record.automatic_scope_inversing</a> is true.</p>\n<p dir=\"auto\">If passed either an <code class=\"notranslate\">:inverse_of</code> option or a <code class=\"notranslate\">:foreign_key</code> option, calls to <code class=\"notranslate\">delegated_type</code> will skip automatic inference.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Re-submission of <a href=\"https://github.com/rails/rails/pull/50280\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50280/hovercard\">#50280</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53020",
            "title": "Infer default `:inverse_of` option for `delegated_type`",
            "date_modified": "2024-09-24T00:57:43.000Z",
            "date_published": "2024-09-23T20:03:17.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/111?u=698df752d6ea3357a89cb8edd8571b446038d525&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The Guide on Multiple Databases has a NOTE added that addresses a potential gotcha (thatgotma’) where migrating to a multi-database setup means that the DATABASE_URL configuration method that is often used in simpler application stops working entirely.</p>\n<p dir=\"auto\">The solution to this is shown if the user wants to keep using that method with an explicit <code class=\"notranslate\">url:</code> configuration example.</p>\n<p dir=\"auto\">Hopefully this will help out the next person from not being surprised!</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">When you move from a single-database setup to a multi-database configuration (which is how SolidQueue recommends, even for simple apps), the DATABASE_URL autoconfiguration method of the <code class=\"notranslate\">primary</code> database stops working.</p>\n<p dir=\"auto\">This caused me to crash my production environment and I couldn't figure out what was wrong for many hours.</p>\n<p dir=\"auto\">Hopefully this will give someone else a heads up!</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The guide is updated with a NOTE, and also some sample configuration that allows you to continue to use DATABASE_URL.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53019",
            "title": "Update Guide on Multi-Database Configuration to mention DATABASE_URL impacts [ci skip]",
            "date_modified": "2024-09-23T20:04:49.000Z",
            "date_published": "2024-09-23T19:46:23.000Z",
            "author": {
                "name": "HamptonMakes",
                "url": "https://github.com/HamptonMakes"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39735028?u=91330295c614cf3cec0b64bf242a14fc2ceb358f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Lately I have been working on not loading constants from autoload directories during my app's boot process.</p>\n<p dir=\"auto\">To get a list of constants that are being autoloaded during the boot process I have been doing something like:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"bin/rails runner &quot;puts Rails.autoloaders.main.__to_unload.keys&quot;\"><pre class=\"notranslate\"><code class=\"notranslate\">bin/rails runner \"puts Rails.autoloaders.main.__to_unload.keys\"\n</code></pre></div>\n<p dir=\"auto\">But I think this might be useful for others so why not make it a Rake task.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">I added a new task in the <code class=\"notranslate\">zeitwerk</code> namespace. It boots the app and iterates over all the autloaders and gets a list of \"to unload\" constants. I realize this is a private api in zeitwerk, so if it's not okay to use in a Rake task like this, or if there is an alternative way to get this info I am missing let me know.</p>\n<p dir=\"auto\">Also I called this <code class=\"notranslate\">zeitwerk:check:boot</code> but I am open to alternative suggestions.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53012",
            "title": "Introduce zeitwerk:check:boot task",
            "date_modified": "2024-09-23T16:47:13.000Z",
            "date_published": "2024-09-22T15:15:29.000Z",
            "author": {
                "name": "andrewn617",
                "url": "https://github.com/andrewn617"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/236461?u=cd87f40664f26021ba65daabaf812a036c1f4c8e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Follow-up of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2539995965\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/53003\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/53003/hovercard\" href=\"https://github.com/rails/rails/pull/53003\">#53003</a>.</p>\n<h3 dir=\"auto\">Problem</h3>\n<p dir=\"auto\"><code class=\"notranslate\">kamal dbc</code>'s <code class=\"notranslate\">bin/rails dbconsole</code> works as is for sqlite3 because it doesn't need a password. But for databases like Postgres, which are typically deployed with passwords on production, you are prompted to enter a password:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Password for user myapp1:\"><pre class=\"notranslate\"><code class=\"notranslate\">Password for user myapp1:\n</code></pre></div>\n<h3 dir=\"auto\">Solution</h3>\n<p dir=\"auto\">Use <code class=\"notranslate\">bin/rails dbconsole -p</code> to reuse the password from database.yml.</p>",
            "url": "https://github.com/rails/rails/pull/53011",
            "title": "Don’t ask for DB password when running `kamal dbc`",
            "date_modified": "2024-09-23T22:23:07.000Z",
            "date_published": "2024-09-22T09:20:04.000Z",
            "author": {
                "name": "jeromedalbert",
                "url": "https://github.com/jeromedalbert"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/417169?u=c2493d95f73a831b40e1d1043d95ab25ed44b82a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The main motivation for this pull request is maintain a similar constraints for the belongs_to association if the foreign key is enlisted in the <code class=\"notranslate\">.ignored_columns</code>.</p>\n<p dir=\"auto\">Reference: <a href=\"https://github.com/rails/rails/issues/52645\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52645/hovercard\">issues/52645</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes</p>\n<p dir=\"auto\">This Pull Request  raise Argument error if someone defines a belongs_to that relies on the ignored column.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"if self.ignored_columns.include?(reflection.foreign_key.to_s)\n  raise ArgumentError, &quot;You tried to define a belongs_to association for #{name}, but the column #{reflection.foreign_key} is ignored. You can remove it from the ignored_columns list if you want to use it.&quot;\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">if</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ignored_columns</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">include?</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">reflection</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">foreign_key</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_s</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-en\">raise</span> <span class=\"pl-v\">ArgumentError</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"You tried to define a belongs_to association for <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-en\">name</span><span class=\"pl-kos\">}</span></span>, but the column <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-en\">reflection</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">foreign_key</span><span class=\"pl-kos\">}</span></span> is ignored. You can remove it from the ignored_columns list if you want to use it.\"</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix 52645](https://github.com/rails/rails/issues/52645)</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53007",
            "title": "Should raise Argument error for belongs_to association on ignored column",
            "date_modified": "2024-09-23T12:00:50.000Z",
            "date_published": "2024-09-21T16:33:13.000Z",
            "author": {
                "name": "rubyrider",
                "url": "https://github.com/rubyrider"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/108363864?u=666a350994af414f0ef3f9ad6f113dd795cee639&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52998.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2539591533\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52998\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52998/hovercard\" href=\"https://github.com/rails/rails/issues/52998\">#52998</a></p>\n<p dir=\"auto\">This commit ensures that Ruby preview versions are correctly formatted in the Dockerfile generator by replacing the period before 'preview' with a dash. Ruby preview versions like <code class=\"notranslate\">3.4.0.preview1</code> would previously cause issues in Docker image generation, as Docker expects the format <code class=\"notranslate\">3.4.0-preview1</code>.</p>\n<p dir=\"auto\">To resolve this:</p>\n<ul dir=\"auto\">\n<li>Used <code class=\"notranslate\">sub</code> instead of <code class=\"notranslate\">sub!</code> to avoid modifying a frozen string</li>\n<li>Ensured the final version string is frozen for immutability</li>\n<li>Handled preview versions conditionally and returned the modified version only when necessary</li>\n</ul>\n<p dir=\"auto\">Example of the <code class=\"notranslate\">gem_ruby_version</code> method:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"def gem_ruby_version\n   version = Gem::Version.new(Gem::VERSION) &gt;= Gem::Version.new(&quot;3.3.13&quot;) ? Gem.ruby_version.to_s : RUBY_VERSION\n\n   version.include?(&quot;preview&quot;) ? version.sub(&quot;.preview&quot;, &quot;-preview&quot;).freeze : version\nend\"><pre class=\"notranslate\"><code class=\"notranslate\">def gem_ruby_version\n   version = Gem::Version.new(Gem::VERSION) &gt;= Gem::Version.new(\"3.3.13\") ? Gem.ruby_version.to_s : RUBY_VERSION\n\n   version.include?(\"preview\") ? version.sub(\".preview\", \"-preview\").freeze : version\nend\n</code></pre></div>\n<p dir=\"auto\">This change prevents errors when generating Docker images using preview Ruby versions and follows best practices for immutability.</p>\n",
            "url": "https://github.com/rails/rails/pull/53006",
            "title": "Fix Dockerfile generation for Ruby preview versions",
            "date_modified": "2024-09-23T08:20:05.000Z",
            "date_published": "2024-09-21T14:02:21.000Z",
            "author": {
                "name": "himanshu123456789000",
                "url": "https://github.com/himanshu123456789000"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/85547207?u=f0a8efe07ea247ca0cd6d425572fdd2d2f5efa53&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52998.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2539591533\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52998\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52998/hovercard\" href=\"https://github.com/rails/rails/issues/52998\">#52998</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">If you specify a version when generating a Dockerfile, if the version is postfixed with <code class=\"notranslate\">.preview</code>, it will be replaced with <code class=\"notranslate\">-preview</code>.</p>\n<p dir=\"auto\">Example:<br>\n<code class=\"notranslate\">3.4.0.preview1</code> → <code class=\"notranslate\">3.4.0-preview</code></p>\n<p dir=\"auto\">This should fix the bug where the Docker image could not be found.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53004",
            "title": "fix #52998: Handle `.preview` suffix in gem_ruby_version method",
            "date_modified": "2024-09-21T07:17:03.000Z",
            "date_published": "2024-09-21T06:55:15.000Z",
            "author": {
                "name": "whtsht",
                "url": "https://github.com/whtsht"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8219340?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Currently, values are converted on <code class=\"notranslate\">ActionController::Parameters#[]</code>, but not on <code class=\"notranslate\">[]=</code>, which can cause unexpected behavior changes before and after reading a value.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"require &quot;bundler/inline&quot;\n\ngemfile(true) do\n  source &quot;https://rubygems.org&quot;\n  gem &quot;rails&quot;\nend\n\nrequire &quot;action_controller/railtie&quot;\nrequire &quot;minitest/autorun&quot;\n\nclass BugTest &lt; Minitest::Test\n  def test_accessing_subkey_does_not_break_to_h\n    params = ActionController::Parameters.new(name: &quot;Bruce&quot;).permit(:name)\n    params[:guitar] = { make: &quot;Fender&quot;, model: &quot;Telecaster&quot; }\n    expected_params_hash = { &quot;name&quot; =&gt; &quot;Bruce&quot;, &quot;guitar&quot; =&gt; { &quot;make&quot; =&gt; &quot;Fender&quot;, &quot;model&quot; =&gt; &quot;Telecaster&quot; } }\n\n    assert_equal(expected_params_hash, params.to_h) # works\n    assert_equal(&quot;Telecaster&quot;, params[:guitar][:model])\n    assert_equal(expected_params_hash, params.to_h) # raises ActionController::UnfilteredParameters\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">require</span> <span class=\"pl-s\">\"bundler/inline\"</span>\n\n<span class=\"pl-en\">gemfile</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">source</span> <span class=\"pl-s\">\"https://rubygems.org\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"rails\"</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"action_controller/railtie\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"minitest/autorun\"</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">BugTest</span> &lt; <span class=\"pl-v\">Minitest</span>::<span class=\"pl-v\">Test</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_accessing_subkey_does_not_break_to_h</span>\n    <span class=\"pl-s1\">params</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActionController</span>::<span class=\"pl-v\">Parameters</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"Bruce\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">permit</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:name</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-s1\">params</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:guitar</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">make</span>: <span class=\"pl-s\">\"Fender\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">model</span>: <span class=\"pl-s\">\"Telecaster\"</span> <span class=\"pl-kos\">}</span>\n    <span class=\"pl-s1\">expected_params_hash</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span> <span class=\"pl-s\">\"name\"</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-s\">\"Bruce\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"guitar\"</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span> <span class=\"pl-s\">\"make\"</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-s\">\"Fender\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"model\"</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-s\">\"Telecaster\"</span> <span class=\"pl-kos\">}</span> <span class=\"pl-kos\">}</span>\n\n    <span class=\"pl-en\">assert_equal</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">expected_params_hash</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">params</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_h</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># works</span>\n    <span class=\"pl-en\">assert_equal</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"Telecaster\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">params</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:guitar</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:model</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-en\">assert_equal</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">expected_params_hash</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">params</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_h</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># raises ActionController::UnfilteredParameters</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR starts by adding tests which document the existing behavior.</p>\n<p dir=\"auto\">Then, <code class=\"notranslate\">ActionController::Parameters#[]=</code> is updated to convert the given <code class=\"notranslate\">value</code> as needed, and the tests are updated accordingly.</p>\n<p dir=\"auto\">Keeping the commits separate makes it clear what has changed.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.<br>\n<em>It is unclear if this change warrants a changelog entry.</em></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52997",
            "title": "Convert values in `ActionController::Parameters#[]=`",
            "date_modified": "2024-09-23T20:20:55.000Z",
            "date_published": "2024-09-20T19:54:49.000Z",
            "author": {
                "name": "sambostock",
                "url": "https://github.com/sambostock"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/3558?u=f7f72304920a2725a0ce8399bb0ea10e2dd17c49&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">It is useful to iterate and test in the console by reloading and executing something in a single line command. Something like:</p>\n<p dir=\"auto\">reload!; Post.find(123).test_a_thing</p>\n<p dir=\"auto\">This makes it easy to quickly switch to the console, hit up and enter to re-execute after a code change.</p>\n<p dir=\"auto\">This restores functionality that used to work until a few months ago.</p>",
            "url": "https://github.com/rails/rails/pull/52996",
            "title": "Add reload! as a IRB::HelperMethod so it can be combined with other calls in a single statement. Fixes rails/rails#52982",
            "date_modified": "2024-09-20T19:39:46.000Z",
            "date_published": "2024-09-20T19:39:42.000Z",
            "author": {
                "name": "pbhogan",
                "url": "https://github.com/pbhogan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Follow up to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2526614555\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52935\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52935/hovercard\" href=\"https://github.com/rails/rails/pull/52935\">#52935</a> as requested by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a></p>\n<p dir=\"auto\">This gives people a chance to fix their apps while upgrading Rails, with a warning that tells them about the <code class=\"notranslate\">async</code> adapter.</p>",
            "url": "https://github.com/rails/rails/pull/52990",
            "title": "Turn SuckerPunch removal into deprecation and point to async adapter",
            "date_modified": "2024-09-20T15:47:18.000Z",
            "date_published": "2024-09-20T15:17:39.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/131752?u=32ddf1119b1d189c9bd241a721b36ea01c29f61e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><code class=\"notranslate\">.to_json</code> has a fast path when we pass it no options. Previously <code class=\"notranslate\">render json:</code> would pass through a bunch of Action View related options.</p>\n<p dir=\"auto\">This aims to avoid that by only adding the additional Action View options when we are rendering a template, which <em>should</em> be faster and more desirable anyways.</p>\n<p dir=\"auto\">The second commit additionally skips <code class=\"notranslate\">:callback</code>, <code class=\"notranslate\">:content_type</code>, and <code class=\"notranslate\">:status</code>, which are handled inside Action Controller (I'm less happy with this fix, but think it's a pragmatic improvement).</p>\n<p dir=\"auto\">I'm not 100% sure nothing external would have depended on these, though I think nothing <em>should</em>.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"class InspectOptions\n  def as_json(options = {})\n    options\n  end\nend\n\nrender json: InspectOptions.new\"><pre class=\"notranslate\"><code class=\"notranslate\">class InspectOptions\n  def as_json(options = {})\n    options\n  end\nend\n\nrender json: InspectOptions.new\n</code></pre></div>\n<p dir=\"auto\"><strong>Before:</strong> <code class=\"notranslate\">{\"prefixes\":[\"controller_name\"],\"template\":\"action_name\",\"layout\":{}}</code><br>\n<strong>After:</strong> <code class=\"notranslate\">{}</code></p>",
            "url": "https://github.com/rails/rails/pull/52984",
            "title": "Avoid passing extraneous options to Renderers like `render json:`",
            "date_modified": "2024-09-20T21:26:25.000Z",
            "date_published": "2024-09-20T00:38:15.000Z",
            "author": {
                "name": "jhawthorn",
                "url": "https://github.com/jhawthorn"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/752058?u=44e59103a64d58f779cbbe49a559906aad9d23dd&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">I just noticed that the rate limiter is not mention in the security guides.</p>",
            "url": "https://github.com/rails/rails/pull/52981",
            "title": "mention the rate limiter in the security guides [ci-skip]",
            "date_modified": "2024-09-21T11:18:07.000Z",
            "date_published": "2024-09-19T20:13:43.000Z",
            "author": {
                "name": "gregmolnar",
                "url": "https://github.com/gregmolnar"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/18742907?u=7ea76c7166927d568e67a111532ebf14da8697c0&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2056791296\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50453\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50453/hovercard\" href=\"https://github.com/rails/rails/issues/50453\">#50453</a>, it was proposed to include a language server with Rails by default. We were already working on the <a href=\"https://github.com/Shopify/ruby-lsp-rails\">Rails addon for the Ruby LSP</a> and at the time believed that Rails was the place for it to live.</p>\n<p dir=\"auto\">After several experiments with different approaches, we found a way to extract runtime information from Rails without the need to implement anything inside of Rails itself. This was important to us since development tools can be released at a more aggressive cadence.</p>\n<p dir=\"auto\">Despite not including the language server related code inside the Rails codebase, we should still provide documentation on setting up the development environment and getting editor integrations that help people building with Rails be as productive as they can be.</p>\n<p dir=\"auto\">We have just finished a complete revamp of the <a href=\"https://shopify.github.io/ruby-lsp\" rel=\"nofollow\">Ruby LSP documentation</a>, which includes a section on the <a href=\"https://shopify.github.io/ruby-lsp/rails-addon.html\" rel=\"nofollow\">Rails addon</a>.</p>\n<p dir=\"auto\">Additionally, we just shipped support for <a href=\"https://shopify.github.io/ruby-lsp/#erb-support\" rel=\"nofollow\">request delegation in ERB</a>. I'm quite excited about it as it makes all of the rich features language servers provide (like completion, definition, hover, etc) work in the embedded Ruby portion of the file, but also in the HTML parts of the file (including support for JavaScript and CSS inside relevant attributes).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR simply includes a new section in getting started, with a few sentences about setting up editor integrations with the Ruby LSP.</p>\n<p dir=\"auto\">Based on what the team told me, this part of the guides are due for a content review, so I didn't invest a lot of effort and just added a brief explanation with the relevant links.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52979",
            "title": "Add section for editor integrations to in getting started",
            "date_modified": "2024-09-20T13:25:04.000Z",
            "date_published": "2024-09-19T16:13:59.000Z",
            "author": {
                "name": "vinistock",
                "url": "https://github.com/vinistock"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/890117?u=daf06f9b440341f7850bfaab74b48001acf4a41a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Background</h3>\n<p dir=\"auto\">The <code class=\"notranslate\">ActiveStorage::Blob.create_and_upload!</code> method calculates a checksum of the IO stream it's given before storing it. Once the IO stream has been stored, it performs an integrity check by comparing the checksum it has calculated against the checksum of the stored object. If the two differ, it raises an <code class=\"notranslate\">ActiveStorage::IntegrityError</code>.</p>\n<p dir=\"auto\">When the IO stream given to the method has been partially or fully consumed, the integrity check will systematically fail. That's because the checksum is not computed on the whole stream but the part that hasn't been consumed (which is typically empty if the stream has been fully consumed).</p>\n<h3 dir=\"auto\">Solution</h3>\n<p dir=\"auto\">I'm proposing to rewind the IO stream before computing its checksum.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Multiple people seem to have run into this issue: <a href=\"https://stackoverflow.com/questions/52335835/when-is-activestorageintegrityerror-raised\" rel=\"nofollow\">https://stackoverflow.com/questions/52335835/when-is-activestorageintegrityerror-raised</a></p>\n<p dir=\"auto\">An alternative approach I considered was raising an error hinting the caller to rewind the stream but I can't see any downside of doing that on behalf of the caller, given that the <code class=\"notranslate\">compute_checksum_in_chunks</code> method already rewinds the stream when it's done calculating the checksum.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52977",
            "title": "Rewind IO stream before computing its checksum",
            "date_modified": "2024-09-19T20:08:53.000Z",
            "date_published": "2024-09-19T15:03:23.000Z",
            "author": {
                "name": "matthieuprat",
                "url": "https://github.com/matthieuprat"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1148165?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">We use rails with multiple tenants and wanted a way to segregate stored files within a bucket by tenant id. This pull requests adds a global configuration option that allows to set this prefix on active storage blob key model:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Can be a string or a block\nRails.application.configure.active_storage.key_prefix = &quot;tenant/&quot;\"><pre class=\"notranslate\"><span class=\"pl-c\"># Can be a string or a block</span>\n<span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">configure</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_storage</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">key_prefix</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">\"tenant/\"</span></pre></div>\n<p dir=\"auto\">This generates following blob key: <code class=\"notranslate\">tenant/mh9n0fker6q7k0qjd2ctgc42n2mo</code></p>\n<p dir=\"auto\">On some s3 providers, a prefix separated with <code class=\"notranslate\">/</code> is treated like a folder</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52971",
            "title": "Allow for configurable active strorage blob keys to use prefix",
            "date_modified": "2024-09-19T09:42:38.000Z",
            "date_published": "2024-09-19T08:33:56.000Z",
            "author": {
                "name": "kitsane",
                "url": "https://github.com/kitsane"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8604410?u=f6a87a0974ee77de4a8280063371c97b51ca5301&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The db migrations for ActiveStorage use static plural table names. If Rails runs with <code class=\"notranslate\">config.active_record.pluralize_table_names = false</code>, this leads to an error as soon as ActiveStorage tries to access the DB.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The static strings for the table names in the migrations are replaced by the <code class=\"notranslate\">table_name</code> method of the corresponding model class. This ensures that the tables are named correctly in plural or singular respectively.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Earlier versions (prior to Rails 7.1) are not affected by this issue. However, as soon as a project is updated, the tables must be renamed with a separate database migration.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52970",
            "title": "Fix: Replace static tables names in ActiveStorage db migrations",
            "date_modified": "2024-09-23T03:06:48.000Z",
            "date_published": "2024-09-19T08:18:18.000Z",
            "author": {
                "name": "m2meier",
                "url": "https://github.com/m2meier"
            }
        }
    ]
}