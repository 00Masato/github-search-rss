{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">As of Selenium 4.6, <a href=\"https://github.com/titusfortner/webdrivers/tree/43f8ac436cc4121c903c1c611dfe76088ef6cbab#update-selenium-manager\">the Selenium Manager is capable of managing Chrome Driver installations and integrations</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">By omitting the <code class=\"notranslate\">gem</code> declaration from the <code class=\"notranslate\">Gemfile.tt</code>, newly generated applications and applications updating their <code class=\"notranslate\">Gemfile</code> in lockstep with newer Rails versions can shed the dependency and avoid test failures introduced by newly released Chrome versions (like, for example, <a href=\"https://github.com/titusfortner/webdrivers/issues/247\" data-hovercard-type=\"issue\" data-hovercard-url=\"/titusfortner/webdrivers/issues/247/hovercard\">titusfortner/webdrivers#247</a>).</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48847",
            "title": "Omit `webdrivers` gem from `Gemfile` template",
            "date_modified": "2023-07-29T11:30:04.000Z",
            "date_published": "2023-07-29T10:43:40.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22231095?u=fc75f9764434943effe06d6c1dc48d40a5003b0c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This adds test coverage to ActionDispatch::Reloader to validate that its behavior conforms to Rack SPEC.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This adds additional test coverage to ActionDispatch::Loader to validate that its input and output follow the Rack SPEC.</p>\n<p dir=\"auto\">This also removes some tests that were asserting the body object passed to ActionDispatch::Loader and not the Rack SPEC. See also <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1822603416\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rack/rack/issues/2100\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rack/rack/issues/2100/hovercard\" href=\"https://github.com/rack/rack/issues/2100\">rack/rack#2100</a>.<br>\nref: <a href=\"https://github.com/rails/rails/pull/48825/files#r1275947386\">https://github.com/rails/rails/pull/48825/files#r1275947386</a></p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1822315973\" data-permission-text=\"Title is private\" data-url=\"https://github.com/skipkayhil/rails/issues/5\" data-hovercard-type=\"issue\" data-hovercard-url=\"/skipkayhil/rails/issues/5/hovercard\" href=\"https://github.com/skipkayhil/rails/issues/5\">skipkayhil#5</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48846",
            "title": "Add Rack::Lint to ActionDispatch::Reloader tests",
            "date_modified": "2023-07-29T08:53:47.000Z",
            "date_published": "2023-07-29T08:52:41.000Z",
            "author": {
                "name": "akhilgkrishnan",
                "url": "https://github.com/akhilgkrishnan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5512772?u=bbae6d87b3499e6b3662664cf4be0e84cc40f6d2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Substitutes <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1826948365\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48843\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48843/hovercard\" href=\"https://github.com/rails/rails/pull/48843\">#48843</a></p>\n<p dir=\"auto\"><code class=\"notranslate\">define_proxy_call</code> accepts <code class=\"notranslate\">call_args</code> as an argument which impacts method body generation but it doesn't use <code class=\"notranslate\">call_args</code> in the <code class=\"notranslate\">namespace</code> generation which leads to the same cached method to be reused even if <code class=\"notranslate\">call_args</code> differ.</p>\n<p dir=\"auto\">It has never been an issue since <code class=\"notranslate\">define_proxy_call</code> was only used to generate Active Record attribute methods and we were always passing the same <code class=\"notranslate\">call_args</code> per method name.</p>\n<p dir=\"auto\">However, since <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1765797832\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48533\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48533/hovercard\" href=\"https://github.com/rails/rails/pull/48533\">#48533</a> we are using <code class=\"notranslate\">define_proxy_call</code> to generate alias attribute methods where <code class=\"notranslate\">call_args</code> differ for the same method name which leads to the same cached method being reused in wrong places.</p>\n<p dir=\"auto\">This commit fixes the issue by making sure <code class=\"notranslate\">call_args</code> are being considered when generating the <code class=\"notranslate\">namespace</code> for the method as anything that results in a different body being generated should be accounted when building the cache key</p>\n<h3 dir=\"auto\">Problem example</h3>\n<p dir=\"auto\">Consider the following models:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Message &lt; ActiveRecord::Base\n  alias_attribute :subject, :header\nend\n\nclass Topic &lt; ActiveRecord::Base\n  alias_attribute :subject, :title\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Message</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">alias_attribute</span> <span class=\"pl-pds\">:subject</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:header</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Topic</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">alias_attribute</span> <span class=\"pl-pds\">:subject</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:title</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Since <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1765797832\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48533\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48533/hovercard\" href=\"https://github.com/rails/rails/pull/48533\">#48533</a> we expect Rails to generate the following getters for aliases:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Message &lt; ActiveRecord::Base\n  def subject\n     attribute(:header)\n  end\nend\n\nclass Topic &lt; ActiveRecord::Base\n  def subject\n     attribute(:title)\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Message</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">subject</span>\n     <span class=\"pl-en\">attribute</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:header</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Topic</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">subject</span>\n     <span class=\"pl-en\">attribute</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:title</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Due to Rails using caching mechanism for method generation and the cache key consists of the hardcoded <code class=\"notranslate\">proxy_alias_attribute</code> plus the <code class=\"notranslate\">proxy_target</code> which is <code class=\"notranslate\">\"attribute\"</code>  only one <code class=\"notranslate\">subject</code> getter method will actually be generated and it depends on whichever of the models gets loaded first, the other model will reuse the cached method with a wrong body</p>",
            "url": "https://github.com/rails/rails/pull/48844",
            "title": "Use `call_args` in the `define_proxy_method` namespace.",
            "date_modified": "2023-07-28T19:29:52.000Z",
            "date_published": "2023-07-28T19:29:48.000Z",
            "author": {
                "name": "nvasilevski",
                "url": "https://github.com/nvasilevski"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22918438?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This wraps test coverage for <code class=\"notranslate\">ActionDispatch::ShowExpections</code> in <code class=\"notranslate\">Rack::Lint</code> middleware in order to validate that both <code class=\"notranslate\">ActionDispatch::ShowExceptions</code> and <code class=\"notranslate\">ActionDispatch::PublicExceptions</code> conform to the Rack SPEC.</p>\n<p dir=\"auto\">It also ensures that the response headers returned by the *Exceptions middleware respect casing (mixed case for Rack 2, lower case for Rack 3).</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48842",
            "title": "Add `Rack::Lint` to `ActionDispatch::ShowExceptions` tests",
            "date_modified": "2023-07-28T19:53:11.000Z",
            "date_published": "2023-07-28T18:37:09.000Z",
            "author": {
                "name": "adrianna-chang-shopify",
                "url": "https://github.com/adrianna-chang-shopify"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/280452?u=489e9bc7d9a133609b8e1ce458b6b851ebaec0fc&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because at GitHub we are trying to upgrade our Rails version with the latest changes in <code class=\"notranslate\">main</code>. While doing so, we detected an issue where schema <code class=\"notranslate\">.dump</code> files generated by a previous version of Rails would be ignored with a message like this:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Ignoring db/schema/schema.dump because it has expired. The current schema version is 0, but the one in the schema cache file is abcdv1.\"><pre class=\"notranslate\"><code class=\"notranslate\">Ignoring db/schema/schema.dump because it has expired. The current schema version is 0, but the one in the schema cache file is abcdv1.\n</code></pre></div>\n<p dir=\"auto\">The version number <code class=\"notranslate\">abcdv1</code> comes from a custom implementation of <code class=\"notranslate\">ActiveRecord::ConnectionAdapters::AbstractAdapter#schema_version</code> that we need to use because we don't use standard migrations. However the latest changes in Rails around <code class=\"notranslate\">ActiveRecord::SchemaCache</code> don't use this method but <code class=\"notranslate\">ActiveRecord::ConnectionAdapters::AbstractAdapter#migration_context.current_version</code>.</p>\n<p dir=\"auto\">I believe the changes around this part of the code were introduced here <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1799258482\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48716\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48716/hovercard\" href=\"https://github.com/rails/rails/pull/48716\">#48716</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes calls to <code class=\"notranslate\">connection.migration_context.current_version</code> with <code class=\"notranslate\">connection.schema_version</code> inside <code class=\"notranslate\">ActiveRecord::SchemaVersion</code> and <code class=\"notranslate\">ActiveRecord::SchemaReflection</code>. By default <code class=\"notranslate\">#schema_version</code> uses <code class=\"notranslate\">migration_context.current_version</code>, so everything should work as before, but for cases where an app is using custom <code class=\"notranslate\">schema_version</code> numbers, this fix would allow them to upgrade without issues.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">N/A</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48838",
            "title": "Use connection.schema_version inside ActiveRecord::SchemaCache",
            "date_modified": "2023-07-28T15:41:54.000Z",
            "date_published": "2023-07-28T15:41:51.000Z",
            "author": {
                "name": "jhbabon",
                "url": "https://github.com/jhbabon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Ref <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1822315973\" data-permission-text=\"Title is private\" data-url=\"https://github.com/skipkayhil/rails/issues/5\" data-hovercard-type=\"issue\" data-hovercard-url=\"/skipkayhil/rails/issues/5/hovercard\" href=\"https://github.com/skipkayhil/rails/issues/5\">skipkayhil#5</a></p>\n<p dir=\"auto\">This adds additional test coverage to DebugExceptions to validate that its behavior conforms to the Rack SPEC.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The only changes necessary were to use dynamic header casing for X-Cascade, Content-Type, and Content-Length</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48837",
            "title": "Add Rack::Lint to DebugExceptions tests",
            "date_modified": "2023-07-28T17:47:55.000Z",
            "date_published": "2023-07-28T15:03:21.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1113178?u=8f52f76dba58e5f01ac0520f1a137edb52d33cbb&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">To ensure Rails is and remains compliant with <a href=\"https://github.com/rack/rack/blob/6d16306192349e665e4ec820a9bfcc0967009b6a/UPGRADE-GUIDE.md\">the Rack 3 spec</a> we can add <code class=\"notranslate\">Rack::Lint</code> to the Rails middleware tests.</p>\n<p dir=\"auto\">This adds additional test coverage to<br>\n<code class=\"notranslate\">ActionDispatch::RemoteIp</code> to validate that its input and output follow the Rack SPEC.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The only code testing this middleware are the ones for <code class=\"notranslate\">ActionDispatch::Request</code>.</p>\n<p dir=\"auto\">Several changes were required to make the tests pass:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">CONTENT_LENGTH</code> must be a string</li>\n<li><code class=\"notranslate\">SERVER_PORT</code> must be a string</li>\n<li><code class=\"notranslate\">HTTP_HOST</code> must be a string</li>\n<li><code class=\"notranslate\">rack.input</code> must be an IO object, with ASCII-8BIT encoding - By leveraging <code class=\"notranslate\">Rack::MockRequest</code>, we can pass the symbol :input, and the string value, and it will be converted to an IO object with the correct encoding. - See <a href=\"https://github.com/rack/rack/blob/444dc8a130663159ed490f25948b73ff9b5fbba0/lib/rack/mock_request.rb#L89-L97\">definition here</a></li>\n<li>using <code class=\"notranslate\">Rack::MockRequest</code> also means that any symbol keys being passed to setup the env, will be discarded. <a href=\"https://github.com/rack/rack/blob/444dc8a130663159ed490f25948b73ff9b5fbba0/lib/rack/mock_request.rb#L156\">Only string keys are copied.</a></li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n<ul dir=\"auto\">\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1822315973\" data-permission-text=\"Title is private\" data-url=\"https://github.com/skipkayhil/rails/issues/5\" data-hovercard-type=\"issue\" data-hovercard-url=\"/skipkayhil/rails/issues/5/hovercard\" href=\"https://github.com/skipkayhil/rails/issues/5\">skipkayhil#5</a></li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48835",
            "title": "Add Rack::Lint to `ActionDispatch::RemoteIp` tests",
            "date_modified": "2023-07-28T18:03:29.000Z",
            "date_published": "2023-07-28T14:55:16.000Z",
            "author": {
                "name": "nunosilva800",
                "url": "https://github.com/nunosilva800"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/7873686?u=d262bc0cfc3c5b4b1cc328877c093adc45b802c4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This prevents possible data loss where a non-nil value could be silently cast as <code class=\"notranslate\">nil</code>.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">See <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1820814581\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48802\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48802/hovercard\" href=\"https://github.com/rails/rails/issues/48802\">#48802</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48834",
            "title": "Raise if unable to cast a string to a date [fixes #48802]",
            "date_modified": "2023-07-28T16:07:33.000Z",
            "date_published": "2023-07-28T14:45:58.000Z",
            "author": {
                "name": "elebow",
                "url": "https://github.com/elebow"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I'd like to add support for <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1196712633\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/globalid/issues/141\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/globalid/issues/141/hovercard\" href=\"https://github.com/rails/globalid/issues/141\">rails/globalid#141</a>. As noted in that issue, the <code class=\"notranslate\">expired?</code> method needs to be added to Active Support first. This PR adds it.</p>\n<h3 dir=\"auto\">Detail</h3>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"verifier = ActiveSupport::MessageVerifier.new(&quot;secret&quot;)\nmessage = verifier.generate(&quot;hello&quot;, expires_at: Time.now.tomorrow)\nverifier.expired?(message) # false\n# 24 hours later...\nverifier.expired?(message) # true\"><pre class=\"notranslate\"><span class=\"pl-s1\">verifier</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-v\">MessageVerifier</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"secret\"</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">message</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">verifier</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">generate</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"hello\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">expires_at</span>: <span class=\"pl-v\">Time</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">now</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">tomorrow</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">verifier</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">expired?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">message</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># false</span>\n<span class=\"pl-c\"># 24 hours later...</span>\n<span class=\"pl-s1\">verifier</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">expired?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">message</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># true</span></pre></div>",
            "url": "https://github.com/rails/rails/pull/48820",
            "title": "Add `ActiveSupport::MessageVerifier#expired?`",
            "date_modified": "2023-07-28T15:43:31.000Z",
            "date_published": "2023-07-27T07:27:56.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">For the <code class=\"notranslate\">7-0-stable</code> branch, this reverts the tests added in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1748309647\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48425\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48425/hovercard\" href=\"https://github.com/rails/rails/pull/48425\">#48425</a>, and the original breaking change from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1507204629\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46790\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46790/hovercard\" href=\"https://github.com/rails/rails/pull/46790\">#46790</a>.</p>\n<p dir=\"auto\">While this breaks the behavior expected from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1498296167\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46737\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46737/hovercard\" href=\"https://github.com/rails/rails/issues/46737\">#46737</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1606489873\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47554\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/47554/hovercard\" href=\"https://github.com/rails/rails/issues/47554\">#47554</a>, it restores the original behavior expected of <code class=\"notranslate\">create_record</code> on a singular association which has persisted for many years. Due to this change, reports came in about the uniqueness validation failing, such as <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1785808864\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48632\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48632/hovercard\" href=\"https://github.com/rails/rails/issues/48632\">#48632</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1730182935\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48330\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48330/hovercard\" href=\"https://github.com/rails/rails/issues/48330\">#48330</a>, as well as breaking many tests in one of the applications at work.</p>\n<p dir=\"auto\">This lead to attempts to circumvent this breaking change like <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1787232963\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48643\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48643/hovercard\" href=\"https://github.com/rails/rails/pull/48643\">#48643</a>, and others to try and prevent the support of the original behavior by raising in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1792862016\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48683\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48683/hovercard\" href=\"https://github.com/rails/rails/pull/48683\">#48683</a>.</p>\n<p dir=\"auto\">These are hard problems to solve, and after discussing with <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a>, the best path forward is to revert and start from scratch. Then we can discuss future changes to this behavior over new PRs.</p>\n<hr>\n<p dir=\"auto\">There is an equivalent PR for <code class=\"notranslate\">main</code> at <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1821669498\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48808\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48808/hovercard\" href=\"https://github.com/rails/rails/pull/48808\">#48808</a></p>\n<p dir=\"auto\">/cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a></p>",
            "url": "https://github.com/rails/rails/pull/48809",
            "title": "[7-0-stable] Revert singular association breaking changes",
            "date_modified": "2023-07-26T22:27:50.000Z",
            "date_published": "2023-07-26T06:22:30.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Pumping the breaks on the recent changes to singular create associations.</p>\n<p dir=\"auto\">This reverts the tests added in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1745303016\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48416\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48416/hovercard\" href=\"https://github.com/rails/rails/pull/48416\">#48416</a> (which added back the behavior from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1507204629\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46790\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46790/hovercard\" href=\"https://github.com/rails/rails/pull/46790\">#46790</a>), and the original breaking change from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1428636877\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46386\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46386/hovercard\" href=\"https://github.com/rails/rails/pull/46386\">#46386</a>.</p>\n<p dir=\"auto\">While this breaks the behavior expected from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1498296167\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46737\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46737/hovercard\" href=\"https://github.com/rails/rails/issues/46737\">#46737</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1606489873\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47554\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/47554/hovercard\" href=\"https://github.com/rails/rails/issues/47554\">#47554</a>, it restores the original behavior expected of <code class=\"notranslate\">create_record</code> on a singular association which has persisted for many years. Due to this change, reports came in about the uniqueness validation failing, such as <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1785808864\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48632\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48632/hovercard\" href=\"https://github.com/rails/rails/issues/48632\">#48632</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1730182935\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48330\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48330/hovercard\" href=\"https://github.com/rails/rails/issues/48330\">#48330</a>, as well as breaking many tests in one of the applications at work.</p>\n<p dir=\"auto\">This lead to attempts to circumvent this breaking change like <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1787232963\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48643\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48643/hovercard\" href=\"https://github.com/rails/rails/pull/48643\">#48643</a>, and others to try and prevent the support of the original behavior by raising in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1792862016\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48683\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48683/hovercard\" href=\"https://github.com/rails/rails/pull/48683\">#48683</a>.</p>\n<p dir=\"auto\">These are hard problems to solve, and after discussing with <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a>, the best path forward is to revert and start from scratch. Then we can discuss future changes to this behavior over new PRs.</p>\n<hr>\n<p dir=\"auto\">There is an equivalent PR for <code class=\"notranslate\">7-0-stable</code> at <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1821669532\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48809\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48809/hovercard\" href=\"https://github.com/rails/rails/pull/48809\">#48809</a></p>\n<p dir=\"auto\">/cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a></p>",
            "url": "https://github.com/rails/rails/pull/48808",
            "title": "Revert singular association breaking changes",
            "date_modified": "2023-07-26T09:05:25.000Z",
            "date_published": "2023-07-26T06:22:28.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/99586?u=b4abd791d83e768c72cb832147b4a210caecf47d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The new syntax allows you to filter tests by line ranges. For example, the following command runs tests from line 10 to 20.</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"$ rails test test/models/user_test.rb:10-20\"><pre class=\"notranslate\">$ rails <span class=\"pl-c1\">test</span> test/models/user_test.rb:10-20</pre></div>",
            "url": "https://github.com/rails/rails/pull/48807",
            "title": "Support filtering tests by line ranges",
            "date_modified": "2023-07-26T06:00:16.000Z",
            "date_published": "2023-07-26T05:57:52.000Z",
            "author": {
                "name": "shouichi",
                "url": "https://github.com/shouichi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22231095?u=fc75f9764434943effe06d6c1dc48d40a5003b0c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR includes grammatical changes and added some missing punctuation to the active record multiple database guide.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48806",
            "title": "Added some grammatical changes and missing punctuations",
            "date_modified": "2023-07-26T05:25:24.000Z",
            "date_published": "2023-07-26T05:09:20.000Z",
            "author": {
                "name": "akhilgkrishnan",
                "url": "https://github.com/akhilgkrishnan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This address the bug identified in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1561049658\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47171\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/47171/hovercard\" href=\"https://github.com/rails/rails/issues/47171\">#47171</a>, which is occurs when an autosave is triggered in a before_create, resulting in a the create callbacks occurring twice. The second time on a record that was already persisted, but since there are no attributes changed (it's a clean record), the new record receives the default values.</p>\n<p dir=\"auto\">Now when an autosave occurs in a before_create, we run the update callbacks as well as any create callbacks to avoid confusing situation.</p>\n<h3 dir=\"auto\">Alternatives Considered</h3>\n<h4 dir=\"auto\">1) Call an aliased method <code class=\"notranslate\">_update_record_without_callbacks</code> and return</h4>\n<p dir=\"auto\">This would avoid creating the duplicate record, but may surprise the developer if any <code class=\"notranslate\">after_*</code> callbacks they were expecting didn't occur.</p>\n<p dir=\"auto\">We wanted to retain that same guarantee.</p>\n<h4 dir=\"auto\">2) Raise if the record is already persisted</h4>\n<p dir=\"auto\">The previous behavior of creating multiple records may have simply gone unnoticed to users, and raising would be a breaking change.</p>\n<p dir=\"auto\">We could roll out that behavior behind a flag and deprecation warning, but we wanted to try and solve for this edge-case.</p>\n<h4 dir=\"auto\">3) Return if record is already persisted and no dirty changes</h4>\n<p dir=\"auto\">Similar to the second option, silently allowing this behavior to change could have unexpected consequences.</p>\n<p dir=\"auto\">The interesting thing was also non of the Active Record tests failed if we just stopped the callback chain there.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #47171.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1561049658\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47171\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/47171/hovercard\" href=\"https://github.com/rails/rails/issues/47171\">#47171</a></p>",
            "url": "https://github.com/rails/rails/pull/48804",
            "title": "Change lanes to update callbacks when an autosaved record already exists",
            "date_modified": "2023-07-26T04:24:53.000Z",
            "date_published": "2023-07-26T04:05:40.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2661?u=7639a5a525578b2a1cb4231a04e720645eeec96b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h4 dir=\"auto\">Motivation</h4>\n<p dir=\"auto\">I was bitten by a subtle bug where code was depending on the order of records being returned by <code class=\"notranslate\">.find</code>, however turns out <code class=\"notranslate\">reorder(\"\")</code> does not actually clear the order scope, which meant that the order of results was not the order of the ids being passed in.</p>\n<p dir=\"auto\">This change makes it clearer what is required to have records be returned in order.</p>",
            "url": "https://github.com/rails/rails/pull/48799",
            "title": "Clarify on how to return records in order of ids in ActiveRecord",
            "date_modified": "2023-07-25T07:11:35.000Z",
            "date_published": "2023-07-25T07:01:29.000Z",
            "author": {
                "name": "chendo",
                "url": "https://github.com/chendo"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Followup: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1807536420\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48743\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48743/hovercard\" href=\"https://github.com/rails/rails/pull/48743\">#48743</a></p>\n<p dir=\"auto\">After careful consideration, unless users have a schema cache dump loaded and <code class=\"notranslate\">check_schema_cache_dump_version = false</code>, we have no choice but to arbitrate between resiliency and performance.</p>\n<p dir=\"auto\">If we define attribute methods during boot, we allow them to be shared between forked workers, and prevent the first requests to be slower.</p>\n<p dir=\"auto\">However, by doing so we'd trigger a connection to the datase, which if it's unresponsive could lead to workers not being able to restart triggering a cascading failure.</p>\n<p dir=\"auto\">Previously Rails used to be in some sort of middle-ground where it would define attribute methods during boot if for some reason it was already connected to the database at this point.</p>\n<p dir=\"auto\">But this is now deemed undesirable, as an application initializer inadvertantly establishing the database connection woudl lead to a readically different behavior.</p>\n<p dir=\"auto\">FYI: <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/zarqman/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/zarqman\">@zarqman</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a></p>",
            "url": "https://github.com/rails/rails/pull/48793",
            "title": "Never connect to the database in define_attribute_methods initializer",
            "date_modified": "2023-07-24T14:38:03.000Z",
            "date_published": "2023-07-24T13:31:16.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2439912?u=608c1cefdc88b469df75e0de3f48c95bdc5ba48e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Strict loading in <code class=\"notranslate\">:n_plus_one_only</code> mode is designed to prevent performance issues when deeply traversing associations. It allows <code class=\"notranslate\">Person.find(1).posts</code>, but <em>not</em> <code class=\"notranslate\">Person.find(1).posts.map(&amp;:category)</code>. This fix avoids the surprise that occurs when <code class=\"notranslate\">person.posts.first</code> eagerly loads the whole association rather than allowing the user to manage the child association.</p>\n<p dir=\"auto\">This fixes a serious correctness issue as well. Without strict loading, <code class=\"notranslate\">person.posts.first</code> is guaranteed to return the first post in primary key order. On the other hand, <code class=\"notranslate\">person.posts.load.first</code> is nondeterministic. The database is not guaranteed to return in a consistent order, in particular under load with other operations occurring. This is a rude surprise when trying to use <code class=\"notranslate\">:n_plus_one_only</code> mode.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Before:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"person = Person.find(1)\nperson.strict_loading!(mode: :n_plus_one_only)\nperson.posts.first\n# SELECT * FROM posts WHERE person_id = 1;\"><pre class=\"notranslate\"><span class=\"pl-s1\">person</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">strict_loading!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">mode</span>: <span class=\"pl-pds\">:n_plus_one_only</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">posts</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">first</span>\n<span class=\"pl-c\"># SELECT * FROM posts WHERE person_id = 1;</span></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"person = Person.find(1)\nperson.strict_loading!(mode: :n_plus_one_only)\nperson.posts.first # this is 1+1, not N+1\n# SELECT * FROM posts WHERE person_id = 1 ORDER BY id LIMIT 1;\"><pre class=\"notranslate\"><span class=\"pl-s1\">person</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">strict_loading!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">mode</span>: <span class=\"pl-pds\">:n_plus_one_only</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">posts</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">first</span> <span class=\"pl-c\"># this is 1+1, not N+1</span>\n<span class=\"pl-c\"># SELECT * FROM posts WHERE person_id = 1 ORDER BY id LIMIT 1;</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48785",
            "title": "Fix child association loading in `:n_plus_one_only` mode",
            "date_modified": "2023-07-27T22:38:48.000Z",
            "date_published": "2023-07-21T21:44:39.000Z",
            "author": {
                "name": "reid-rigo",
                "url": "https://github.com/reid-rigo"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/111346?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation</h3>\n<p dir=\"auto\">The SMTP envelope recipient usually reflects the <code class=\"notranslate\">To</code>, <code class=\"notranslate\">Cc</code> and <code class=\"notranslate\">Bcc</code> email headers. The mailer preview only shows SMTP the envelope recipient (SMTP-To) if it differs from <code class=\"notranslate\">To</code>, but it does not take Cc and Bcc into account.</p>\n<p dir=\"auto\">Screenshot:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/111346/255164062-5ea59067-4c5c-480e-b550-e22ecfdc306c.png\"><img src=\"https://user-images.githubusercontent.com/111346/255164062-5ea59067-4c5c-480e-b550-e22ecfdc306c.png\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request extends the check for SMTP-To to cover also <code class=\"notranslate\">Cc</code> and <code class=\"notranslate\">Bcc</code>, so it is only displayed in the rare event that the envelope recipient has been manually overriden.</p>\n<p dir=\"auto\">Also, show the list of email addresses without array brackets and quotes.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48782",
            "title": "Only show SMTP envelope recipient when relevant",
            "date_modified": "2023-07-25T11:18:47.000Z",
            "date_published": "2023-07-21T17:03:49.000Z",
            "author": {
                "name": "c960657",
                "url": "https://github.com/c960657"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/282447?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The current code for commands such as <code class=\"notranslate\">credentials:edit</code> detects whether $EDITOR or $VISUAL are set, and tells the developer to set them to something like <code class=\"notranslate\">EDITOR=mate --wait</code> if they are not. On systems where $EDITOR is set, but it launches a forking process, the message is not displayed and may never be seen by the developer.</p>\n<h3 dir=\"auto\">Description</h3>\n<p dir=\"auto\">This change detects whether the editor for commands like <code class=\"notranslate\">credentials:edit</code> exits in less than one second, such as when <code class=\"notranslate\">EDITOR</code> is set to <code class=\"notranslate\">mate</code> without the wait flag. This is a sign that the editor process is forking and exited immediately, and that the developer didn't have a chance to edit the file.</p>\n<p dir=\"auto\">If an immediate exit is detected, a message is printed that the editor command should be changed to wait instead of exiting.</p>",
            "url": "https://github.com/rails/rails/pull/48781",
            "title": "Detect if the editor is missing a wait flag and print a warning",
            "date_modified": "2023-07-21T16:40:49.000Z",
            "date_published": "2023-07-21T16:37:31.000Z",
            "author": {
                "name": "LukasSkywalker",
                "url": "https://github.com/LukasSkywalker"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/3387?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Docs improvements for <code class=\"notranslate\">ActiveRecord::TransactionRollbackError</code> and subclasses after some discussions today.</p>",
            "url": "https://github.com/rails/rails/pull/48780",
            "title": "Improve the docs of ActiveRecord::TransactionRollbackError",
            "date_modified": "2023-07-24T17:31:42.000Z",
            "date_published": "2023-07-21T16:07:39.000Z",
            "author": {
                "name": "fxn",
                "url": "https://github.com/fxn"
            }
        }
    ]
}