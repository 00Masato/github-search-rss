{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/224488?u=8ba5d071516f0981681d9518cc59fc519e238d04&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">If a <code class=\"notranslate\">method_added</code>/<code class=\"notranslate\">singleton_method_added</code> method on a constant doesn't call <code class=\"notranslate\">super</code> then none of the <code class=\"notranslate\">method_added</code>/<code class=\"notranslate\">singleton_method_added</code> methods on ancestors of the constant ever get called by Ruby.</p>\n<p dir=\"auto\">This breaks any code that might want to instrument classes to collect method definition locations, or to do other things when methods are added.</p>\n<p dir=\"auto\">In order to be a good citizen, it is best practice to call <code class=\"notranslate\">super</code> from these methods.</p>\n<p dir=\"auto\">This Pull Request has been created to fix the instances where the Rails codebase does not call <code class=\"notranslate\">super</code> from these methods.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52634",
            "title": "Call `super` from `method_added`/`singleton_method_added` methods",
            "date_modified": "2024-08-16T22:41:15.000Z",
            "date_published": "2024-08-16T22:41:11.000Z",
            "author": {
                "name": "paracycle",
                "url": "https://github.com/paracycle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/761956?u=51347a55448ba4bebf4bb58b56ae4e63d47af47b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because, when working on encrypted Active Record attributes, I found a couple of small documentation errors.</p>\n<h3 dir=\"auto\">Detail</h3>\n<h4 dir=\"auto\">Fix <code class=\"notranslate\">ActiveRecord::Encryptor#decrypt</code> documentation</h4>\n<p dir=\"auto\"><code class=\"notranslate\">ActiveRecord::Encryptor#decrypt</code> documentation mentions that it decrypts a <code class=\"notranslate\">clean_text</code>, when, in fact, it decrypts an <code class=\"notranslate\">encrypted_text</code>. This commit fixes this issue.</p>\n<h4 dir=\"auto\">Add missing <code class=\"notranslate\">_</code> on the Active Record Encryption guides</h4>\n<p dir=\"auto\">The Custom Key Providers section mentions the expected API for custom key providers. The <code class=\"notranslate\">decryption_keys</code> description is missing an underscore character.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52633",
            "title": "Fix Active Record Encryption documentation [ci skip]",
            "date_modified": "2024-08-16T20:57:08.000Z",
            "date_published": "2024-08-16T20:28:37.000Z",
            "author": {
                "name": "neilvcarvalho",
                "url": "https://github.com/neilvcarvalho"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/32403?u=aa26cb47f88c03aae081c9e99ce921f750e425fc&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Fix Encoding::CompatibilityError: incompatible character encodings: ASCII-8BIT and UTF-8</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This error happens because the <code class=\"notranslate\">quote_string</code> method from the <code class=\"notranslate\">ActiveRecord::ConnectionAdapters::PostgreSQL::Quoting</code> module on Rails 6.1 is using PG::Connection instead of the <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/connection/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/connection\">@connection</a> variable to escape the string the same way Rails 6.0 did.</p>\n<p dir=\"auto\">This commit changes the <code class=\"notranslate\">quote_string</code> method to use the <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/connection/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/connection\">@connection</a> variable instead of PG::Connection.</p>\n<h3 dir=\"auto\">Example:</h3>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"account = UserAccount.first\naccount.twitter=&quot;www.h√∂l√†.com&quot;.force_encoding(&quot;ASCII-8BIT&quot;)\naccount.facebook=&quot;www.h√∂l√†.com&quot;.force_encoding(&quot;UTF-8&quot;)\naccount.save!\"><pre class=\"notranslate\"><span class=\"pl-s1\">account</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">UserAccount</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">first</span>\n<span class=\"pl-s1\">account</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">twitter</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\"www.h√∂l√†.com\"</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">force_encoding</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"ASCII-8BIT\"</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">account</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">facebook</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\"www.h√∂l√†.com\"</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">force_encoding</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"UTF-8\"</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">account</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">save!</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52630",
            "title": "Fix Encoding::CompatibilityError on Postgresql::Quoting",
            "date_modified": "2024-08-16T16:49:26.000Z",
            "date_published": "2024-08-16T16:47:19.000Z",
            "author": {
                "name": "eduresende",
                "url": "https://github.com/eduresende"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2377?u=d3cff5e4910d850a36ced404d0a45304547f88f8&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The docs on has_one_attached / has_many_attached include this confusing sentence:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"The system has been designed to having you go through the ActiveStorage::Attached::One\nproxy that provides the dynamic proxy to the associations and factory methods, like +attach+.\"><pre class=\"notranslate\"><code class=\"notranslate\">The system has been designed to having you go through the ActiveStorage::Attached::One\nproxy that provides the dynamic proxy to the associations and factory methods, like +attach+.\n</code></pre></div>\n<p dir=\"auto\">Perhaps something like this is clearer?</p>",
            "url": "https://github.com/rails/rails/pull/52628",
            "title": "Clarify ActiveStorage::Attached::Model docs [ci skip]",
            "date_modified": "2024-08-16T20:54:20.000Z",
            "date_published": "2024-08-16T15:39:26.000Z",
            "author": {
                "name": "jdelStrother",
                "url": "https://github.com/jdelStrother"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/44640?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The reaper was introduced back in <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/cde7692d4e3e0e67e480cc6172f6e2bacaceeb5e/hovercard\" href=\"https://github.com/rails/rails/commit/cde7692d4e3e0e67e480cc6172f6e2bacaceeb5e\"><tt>cde7692</tt></a> The goal is to detect checked out connections owned by dead threads, and make them available again.</p>\n<p dir=\"auto\">To do this, a thread check connections every 60 seconds, which IMO isn't nearly enough. But more importabtly since <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"29269347\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/14360\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/14360/hovercard\" href=\"https://github.com/rails/rails/pull/14360\">#14360</a> the reaper isn't really useful because in the checkout path, if we can't immediately checkout a connection, we execute the reaping routine, so IMO it's not really justified to have a background thread for this.</p>\n<p dir=\"auto\"><a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/tenderlove/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tenderlove\">@tenderlove</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a> any opinion?</p>",
            "url": "https://github.com/rails/rails/pull/52627",
            "title": "Get rid of Active Record connection reaper",
            "date_modified": "2024-08-16T15:14:32.000Z",
            "date_published": "2024-08-16T15:14:28.000Z",
            "author": {
                "name": "byroot",
                "url": "https://github.com/byroot"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This makes sure no stale stylesheets and javascript are shown to the visitors.</p>\n<p dir=\"auto\">This doesn't include images yet.</p>\n<p dir=\"auto\">Co-authored-by: John Athayde <a href=\"mailto:jmpa@meticulous.com\">jmpa@meticulous.com</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52626",
            "title": "Add digests to guide assets",
            "date_modified": "2024-08-16T15:38:52.000Z",
            "date_published": "2024-08-16T14:39:26.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/25246024?u=45bc5dab950868e9945f9455cff98e7196ef5a27&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In the example about RESTful downloads and PDFs, the Guides ask to register the <code class=\"notranslate\">application/pdf</code> MIME type in Rails explicitly. This step doesn't seem necessary because the <a href=\"https://github.com/rails/rails/blob/main/actionpack/lib/action_dispatch/http/mime_types.rb\">PDF type is already registered by Rails </a> by default.</p>\n<p dir=\"auto\">This Pull Request has been created to clarify that Rails supports the <code class=\"notranslate\">application/pdf</code> type, and others, out of the box.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52597",
            "title": "Explains that `application/pdf` is already registered by Rails [ci skip]",
            "date_modified": "2024-08-15T21:57:47.000Z",
            "date_published": "2024-08-13T19:18:10.000Z",
            "author": {
                "name": "flavio-b",
                "url": "https://github.com/flavio-b"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4910785?u=bb262553df264faad2f515f6ea75067266e0d129&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The \"Suppressing Callbacks\" section of the ActiveRecord Suppressing Callback guide is incorrect.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The <a href=\"https://edgeguides.rubyonrails.org/active_record_callbacks.html#suppressing-callbacks\" rel=\"nofollow\">https://edgeguides.rubyonrails.org/active_record_callbacks.html#suppressing-callbacks</a> section describes the <code class=\"notranslate\">ActiveRecord::Suppressor</code> as a way to suppress callbacks. This is only partially true. It does not suppress callbacks per se, but disables saving the receiving class. This skips all callbacks that are related to a successful save.</p>\n<p dir=\"auto\">The given example and the given explanation is incorrect:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User &lt; ApplicationRecord\n  after_create :send_welcome_email\n\n  def send_welcome_email\n    puts &quot;Welcome email sent to #{self.email}&quot;\n  end\nend\n\nUser.suppress do\n  User.create(name: &quot;Jane&quot;, email: &quot;jane@example.com&quot;)\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">after_create</span> <span class=\"pl-pds\">:send_welcome_email</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">send_welcome_email</span>\n    <span class=\"pl-en\">puts</span> <span class=\"pl-s\">\"Welcome email sent to <span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">email</span><span class=\"pl-kos\">}</span></span>\"</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">suppress</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">name</span>: <span class=\"pl-s\">\"Jane\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">email</span>: <span class=\"pl-s\">\"jane@example.com\"</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">This would suppress the callback, but it will also <strong>not</strong> save the user.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Some additional thoughts:</p>\n<ul dir=\"auto\">\n<li>Maybe the suppressor should not be part of the callback guide at all, but rather a more general ActiveRecord one</li>\n<li>I think an official api that would actually suppress specific callbacks during a block, as described in the original example, would be nice :)</li>\n</ul>\n<p dir=\"auto\">I'd be happy to adapt/improve the section üëç</p>",
            "url": "https://github.com/rails/rails/pull/52596",
            "title": "Adapt the incorrect \"Supressing Callbacks\" guide section [ci skip]",
            "date_modified": "2024-08-15T22:08:06.000Z",
            "date_published": "2024-08-13T17:32:04.000Z",
            "author": {
                "name": "codergeek121",
                "url": "https://github.com/codergeek121"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">If you have a form that contains includes a rich text field that's optional, you can end up with lots of <code class=\"notranslate\">ActionText::RichText</code> records in the database with empty values. See <a href=\"https://stackoverflow.com/questions/64580428/is-it-possible-to-prevent-empty-action-text-entries\" rel=\"nofollow\">https://stackoverflow.com/questions/64580428/is-it-possible-to-prevent-empty-action-text-entries</a> for an example of folks trying to avoid this. To me this seems like something we could handle at the framework level.</p>\n<p dir=\"auto\">This PR introduces a store_if_blank<code class=\"notranslate\">option on</code>has_rich_text<code class=\"notranslate\">. It defaults to </code>true<code class=\"notranslate\">(the current behaviour); if you pass</code>false<code class=\"notranslate\">, AT won't create </code>ActionText::RichText` records when saving with a blank value.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Message\n  has_rich_text :content, store_if_blank: false\nend\n\nMessage.create(content: &quot;hi&quot;) # creates an ActionText::RichText\nMessage.create(content: &quot;&quot;) # does not create an ActionText::RichText\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Message</span>\n  <span class=\"pl-en\">has_rich_text</span> <span class=\"pl-pds\">:content</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">store_if_blank</span>: <span class=\"pl-c1\">false</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-v\">Message</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">content</span>: <span class=\"pl-s\">\"hi\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># creates an ActionText::RichText</span>\n<span class=\"pl-v\">Message</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">content</span>: <span class=\"pl-s\">\"\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># does not create an ActionText::RichText</span></pre></div>",
            "url": "https://github.com/rails/rails/pull/52573",
            "title": "Add `store_if_blank` option to `has_rich_text`",
            "date_modified": "2024-08-12T20:43:19.000Z",
            "date_published": "2024-08-12T01:38:20.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/617116?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #38755.\">Fixes</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"582941692\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/38755\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/38755/hovercard\" href=\"https://github.com/rails/rails/issues/38755\">#38755</a></p>\n<p dir=\"auto\">Similar to how Solid Queue and Solid Cache are configured:<br>\n<a href=\"https://github.com/rails/solid_queue/blob/main/app/models/solid_queue/record.rb\">https://github.com/rails/solid_queue/blob/main/app/models/solid_queue/record.rb</a><br>\n<a href=\"https://github.com/rails/solid_cache/blob/main/app/models/solid_cache/record.rb\">https://github.com/rails/solid_cache/blob/main/app/models/solid_cache/record.rb</a></p>",
            "url": "https://github.com/rails/rails/pull/52569",
            "title": "Add support for multiple databases for Active Storage/Action Text/Action Mailbox",
            "date_modified": "2024-08-12T18:36:48.000Z",
            "date_published": "2024-08-11T21:56:14.000Z",
            "author": {
                "name": "n-studio",
                "url": "https://github.com/n-studio"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/30030?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">There are three cases for error handling:</p>\n<p dir=\"auto\">1/ Normal job submission, and the job executes successfully.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"::ActiveJob::Base.execute(GoodJob.new.serialize)\"><pre class=\"notranslate\">::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">GoodJob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">serialize</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">2/ Normal job submission, but the job fails, and there is no appropriate error handler (<code class=\"notranslate\">retry_on</code>). The job is discarded as expected, and the error is logged, but this method still raises an exception.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"::ActiveJob::Base.execute(BadJob.new.serialize)\"><pre class=\"notranslate\">::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">BadJob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">serialize</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">3/ Bad job submission (or other internal error). The job is not processed, an error is raised, but there is no log.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"::ActiveJob::Base.execute({})\"><pre class=\"notranslate\">::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">The problem is, the error raised by (2) is logged, but the error raised by (3) is not.</p>\n<p dir=\"auto\">A job server may wrap <code class=\"notranslate\">ActiveJob::Base.execute</code> like so:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Execute the given job.\nwhile job = read_job\n\tbegin\n\t\t::ActiveJob::Base.execute(job)\n\trescue =&gt; error\n\t\tlog_error(error)\n\tend\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># Execute the given job.</span>\n<span class=\"pl-k\">while</span> <span class=\"pl-s1\">job</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">read_job</span>\n\t<span class=\"pl-k\">begin</span>\n\t\t::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">job</span><span class=\"pl-kos\">)</span>\n\t<span class=\"pl-k\">rescue</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-en\">error</span>\n\t\t<span class=\"pl-en\">log_error</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">error</span><span class=\"pl-kos\">)</span>\n\t<span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">In case (2) above, this will lead to two log messages being emitted for the failure, one from ActiveJob and one from the Job runner. This is not ideal from a usability point of view, ideally only one log message should be emitted.</p>\n<p dir=\"auto\">One way to solve the problem is this:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Execute the given job.\nwhile job = read_job\n\tbegin\n\t\t::ActiveJob::Base.execute(job)\n\trescue =&gt; error\n\t\t# Ignore errors, logged by ActiveJob.\n\tend\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># Execute the given job.</span>\n<span class=\"pl-k\">while</span> <span class=\"pl-s1\">job</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">read_job</span>\n\t<span class=\"pl-k\">begin</span>\n\t\t::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">job</span><span class=\"pl-kos\">)</span>\n\t<span class=\"pl-k\">rescue</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-en\">error</span>\n\t\t<span class=\"pl-c\"># Ignore errors, logged by ActiveJob.</span>\n\t<span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Now ActiveJob is fully responsible for logging. However, there are some situations as shown in case (3) where <code class=\"notranslate\">ActiveJob::Base.execute</code> can raise errors which are not logged. That is problematic as that would result in a silent failure which is a very bad user experience.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This proposal changes case (2) to not re-raise the exception if the job is not retried. The error is still logged by ActiveJob, but the error is not propagated up, as it's normal and expected that the job is discarded in that case.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52557",
            "title": "If a job fails due to an error, it is discarded, and don't re-raise.",
            "date_modified": "2024-08-12T15:35:42.000Z",
            "date_published": "2024-08-09T23:29:35.000Z",
            "author": {
                "name": "ioquatix",
                "url": "https://github.com/ioquatix"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/142498048?u=ef62fa9962bb2e26413478ff05f28a98a59d9b9d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52530.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2453364344\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52530\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52530/hovercard\" href=\"https://github.com/rails/rails/issues/52530\">#52530</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request addresses an issue where adding a merge with an <code class=\"notranslate\">or</code> condition to a scope in ActiveRecord could unintentionally widen the scope if the scope contains raw SQL strings. The fix ensures that scopes behave as expected, returning only the records that match the intended query criteria.</p>\n<h3 dir=\"auto\">Details</h3>\n<p dir=\"auto\">This Pull Request includes changes to the <code class=\"notranslate\">merger.rb</code> file to properly handle the merging of scopes that involve raw SQL strings. Specifically, the logic was updated as follows:</p>\n<ul dir=\"auto\">\n<li><strong>Conditional Check for Raw SQL</strong>:\n<ul dir=\"auto\">\n<li>Added a check to determine if either of the <code class=\"notranslate\">where</code> clauses being merged contains raw SQL using the <code class=\"notranslate\">raw_sql_involved?</code> method.</li>\n</ul>\n</li>\n<li><strong>Proper Handling of <code class=\"notranslate\">or</code> Merging</strong>:\n<ul dir=\"auto\">\n<li>When raw SQL is involved, the merge is handled with the <code class=\"notranslate\">merge_with_proper_or_handling</code> method, which ensures that the conditions are grouped correctly and the scope is not widened unintentionally.</li>\n</ul>\n</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52550",
            "title": "Added changes in the merger.rb file for merge logic",
            "date_modified": "2024-08-12T06:46:42.000Z",
            "date_published": "2024-08-08T19:26:59.000Z",
            "author": {
                "name": "Demon-Sheriff",
                "url": "https://github.com/Demon-Sheriff"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/97030518?u=44f65a79575affbfae38d5a4e75393694efa9d6c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request improves the wording of the <code class=\"notranslate\">config.assets.quiet</code> configuration option.<br>\n<code class=\"notranslate\">development.rb</code> =&gt; <code class=\"notranslate\">config/environments/development.rb</code></p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52546",
            "title": "Improve documentation of `config.assets.quiet` [ci skip]",
            "date_modified": "2024-08-16T09:33:20.000Z",
            "date_published": "2024-08-08T12:52:17.000Z",
            "author": {
                "name": "Uaitt",
                "url": "https://github.com/Uaitt"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/97030518?u=44f65a79575affbfae38d5a4e75393694efa9d6c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because the documentation for the <code class=\"notranslate\">config.assets.debug</code> configuration option is incorrect.</p>\n<p dir=\"auto\">Fixes issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2280577750\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51747\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51747/hovercard\" href=\"https://github.com/rails/rails/issues/51747\">#51747</a> and closes PR <a href=\"https://github.com/rails/rails/pull/51845\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51845/hovercard\">#51845</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request fixes the <code class=\"notranslate\">config.assets.debug</code> documentation and makes it correct.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52544",
            "title": "Fix wrong `config.assets.debug` documentation [ci skip]",
            "date_modified": "2024-08-12T08:23:51.000Z",
            "date_published": "2024-08-08T12:25:42.000Z",
            "author": {
                "name": "Uaitt",
                "url": "https://github.com/Uaitt"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes pull request #52501.\">Fix</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2446689893\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52501\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52501/hovercard\" href=\"https://github.com/rails/rails/pull/52501\">#52501</a></p>\n<p dir=\"auto\">Since MySQL require to set the isolation level as a statement before the <code class=\"notranslate\">BEGIN</code>, if the <code class=\"notranslate\">begin</code> statement fails and we retry it we're opening a transaction with the default level.</p>\n<p dir=\"auto\">To handle this we can send both statement at once so that if we retry both are sent.</p>\n<p dir=\"auto\">A much simpler alternative would be to just disallow retrying <code class=\"notranslate\">BEGIN</code> when opening an isolated DB transaction.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/kirs/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/kirs\">@kirs</a></p>\n<p dir=\"auto\">Also cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a> as I'd love your opinion on this. In the future I'd really like to leverage batches more to save on roundtrips as explained in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2335181050\" data-permission-text=\"Title is private\" data-url=\"https://github.com/trilogy-libraries/trilogy/issues/189\" data-hovercard-type=\"issue\" data-hovercard-url=\"/trilogy-libraries/trilogy/issues/189/hovercard\" href=\"https://github.com/trilogy-libraries/trilogy/issues/189\">trilogy-libraries/trilogy#189</a>, but right now it's actually worse because instead of 2 roundtrips we're doing 3:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">set_server_options OPTION_MULTI_STATEMENTS_ON</code></li>\n<li><code class=\"notranslate\">query \"SET TRANSACTION ISOLATION LEVEL...; BEGIN;</code></li>\n<li><code class=\"notranslate\">set_server_options OPTION_MULTI_STATEMENTS_OFF</code></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52529",
            "title": "Preserve isolation level when retrying MySQL transactions",
            "date_modified": "2024-08-12T19:02:43.000Z",
            "date_published": "2024-08-07T10:10:30.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2786819?u=722b21f1f48dc9a97c9494aba04c4f657d31e941&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Update the Active Record Association Documentation.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The images used to show the relationships of the different types of associations have both the table declarations, as well as a code sample, but the code sample is also in the guide. We could probably simplify the images by cutting off the code samples from them and leaving them in the guide code.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> belongs_to section mentions bi-directional association and links to it within the same guide, but doesn't do the same for has_one and has_many, mentioned right after in the same paragraph.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> There's a note about using bigint :supplier_id in the section between belongs_to and has_one, but up until that point it's always been using belongs_to in migrations... it's probably something that doesn't need to be in this area of the guide.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The has_many :through vs has_and_belongs_to_many section ends with a composite keys mention, we could link to the new guide there.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Associations between models with composite PKs may be simplified.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> One example in bi-directional associations mentions Book belongs_to :writer, but then uses book.author a few lines below, which is incorrect.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> STI section could be expanded, it's very useful in certain situations.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add more info and make it clear</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Group sections better</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Amend the References section to be integrated with associations</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Abstract and remove duplications for options and scopes</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52523",
            "title": "[RF-DOCS]Active Record Associations Guide [ci-skip]",
            "date_modified": "2024-08-15T13:28:52.000Z",
            "date_published": "2024-08-06T20:48:18.000Z",
            "author": {
                "name": "Ridhwana",
                "url": "https://github.com/Ridhwana"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1966473?u=fe117732163d3610f051fca80df4e04c1b91335d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request is for updating and improving the \"Rails Routing from the Outside In\" Rails Guide documentation.</p>\n<h3 dir=\"auto\">Testing</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Run <code class=\"notranslate\">guides:generate</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Run <code class=\"notranslate\">guides:lint</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Run rubocop on code samples</li>\n</ul>\n<h3 dir=\"auto\">Details</h3>\n<p dir=\"auto\">Here are some of the things addressed from this Guide.</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> We mention Rack application right away, good place to link to the <a href=\"https://edgeguides.rubyonrails.org/rails_on_rack.html\" rel=\"nofollow\">Rack guide</a>.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Would it make sense to link \"CRUD operation\" to something like the <a href=\"https://edgeguides.rubyonrails.org/active_record_basics.html#crud-reading-and-writing-data\" rel=\"nofollow\">AR Basics CRUD</a> section? We don't <em>always</em> need to tie CRUD to database, it's more about the concept.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under Path and URL helpers, it might make sense to turn that list into a table to make it easier to scan?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Singular resources starts with examples of using get, maybe it should be specific to resource and leave get to Non-Resourceful Routes section? That section doesn't start with \"simple\" examples.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> \"Because you might want to use the same controller for a singular route (/account) and a plural route (/accounts/45), singular resources map to plural controllers.\" =&gt; I've never seen this be the case, I think this can be reworded to explain that singular resources map to plural controllers, without this idea of \"use the same controller\".</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under shallow nesting, there's a long example with three child resources to demonstrante that \"all get the same shallow behavior\"... maybe that'd be better with just 2 so that the table doesn't get so big/long.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under creating paths and URLs from objects, it explains how to create paths from objects (i.e. polymorphic routing), that may be a good segway to show that it uses the route key / singular route key from ActiveModel::Naming to figure that out. (could be a note/tip of sorts for example, just thought it'd be good to make that connection somewhere) Also ActiveModel::Conversion#to_param would be used to convert the IDs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> member and collection are explained under \"Adding more RESTful actions\", but there's not a good clarification of what the terms represent, i.e. that member refers to routes acting on a single element, much like show/update/destroy, and collection referes to routes acting on multiple (or a collection of) elements like index. Is it worth clarifying further?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Consider: Constraints could be a main section rather than live under non-resourceful routes, because generally speaking, they can be applied anywhere, even for resources. The only specific one would be match...via:<br>\n--&gt; Good point. Tried to move the 3 or 4 sub-sections related to constraints, but couldn't decide where they fit, after non-resource routes or before, and how to transition into them...leaving it as is for now.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under Route Globbing and Wildcard Segments there's a waning about passing format: false related to \"old 3.0.x behavior\" which can either be explained better (what's the meaning of passing format: false), and/or potentially removed (at least the mention to \"3.0.x behavior\" could be removed)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> When explaining about using draw to break down very large route files, that subsection could be a caution/warning of sorts to call more attention to the fact that most people shouldn't need it.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> We could explain how to check routes via console with Rails.application.routes.url_helpers under inspecting routes.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Document the somewhat recent <code class=\"notranslate\">--unused</code> option to rails routes. (<a href=\"https://github.com/rails/rails/pull/51316#issuecomment-1994428608\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51316/hovercard\">Reference</a>)</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52521",
            "title": "[RF-DOCS] Rails Routing Guide [ci-skip]",
            "date_modified": "2024-08-16T21:17:03.000Z",
            "date_published": "2024-08-06T19:40:58.000Z",
            "author": {
                "name": "bhumi1102",
                "url": "https://github.com/bhumi1102"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1709692?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The current implementation does not respect the layout parameter in case of mixed collections.</p>\n<p dir=\"auto\">This commit fixes the issue by ensuring that the code path for mixed collections render the partial inside the provided layout.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49590.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1938859635\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49590\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49590/hovercard\" href=\"https://github.com/rails/rails/issues/49590\">#49590</a></p>\n<p dir=\"auto\">The current implementation of <code class=\"notranslate\">render_collection_derive_partial</code> ignores the layout parameter in case of mixed collections.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes<code class=\"notranslate\">render_collection_derive_partial</code> to call a new <code class=\"notranslate\">render_collection_with_no_partial</code> method which renders the partial inside the specified layout.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This is my second attempt at fixing it. I have double checked that there are no negative side effects.</p>\n<ol dir=\"auto\">\n<li>Benchmark between rendering with a layout vs rendering without a layout:</li>\n</ol>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ruby 3.3.2 (2024-05-30 revision e5a195edf6) [aarch64-linux]\nWarming up --------------------------------------\n           no layout   436.000 i/100ms\n         with layout   350.000 i/100ms\nCalculating -------------------------------------\n           no layout      4.313k (¬± 3.4%) i/s -     21.800k in   5.061356s\n         with layout      3.999k (¬± 3.9%) i/s -     20.300k in   5.083979s\n\nComparison:\n           no layout:     4312.6 i/s\n         with layout:     3999.4 i/s - 1.08x  slower\"><pre class=\"notranslate\"><code class=\"notranslate\">ruby 3.3.2 (2024-05-30 revision e5a195edf6) [aarch64-linux]\nWarming up --------------------------------------\n           no layout   436.000 i/100ms\n         with layout   350.000 i/100ms\nCalculating -------------------------------------\n           no layout      4.313k (¬± 3.4%) i/s -     21.800k in   5.061356s\n         with layout      3.999k (¬± 3.9%) i/s -     20.300k in   5.083979s\n\nComparison:\n           no layout:     4312.6 i/s\n         with layout:     3999.4 i/s - 1.08x  slower\n</code></pre></div>\n<ol start=\"2\" dir=\"auto\">\n<li>No generation of multiple layout templates</li>\n</ol>\n<p dir=\"auto\">The layout template is generated only once in <code class=\"notranslate\">render_collection_with_multiple_partials</code>.</p>\n<ol start=\"3\" dir=\"auto\">\n<li>Generation of partial templates is no different</li>\n</ol>\n<p dir=\"auto\">The generation is the partial templates happen in the same way as in main and it's not affected by this change.</p>",
            "url": "https://github.com/rails/rails/pull/52515",
            "title": "Render Partial Collection with a layout parameter",
            "date_modified": "2024-08-08T08:50:40.000Z",
            "date_published": "2024-08-06T07:42:10.000Z",
            "author": {
                "name": "cmaruz",
                "url": "https://github.com/cmaruz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><a href=\"https://guides.rubyonrails.org/active_storage_overview.html#authenticated-controllers\" rel=\"nofollow\">https://guides.rubyonrails.org/active_storage_overview.html#authenticated-controllers</a> discusses how to secure the Active Storage rendering controllers (potentially of interest: <a href=\"https://github.com/rails/rails/pull/52388\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52388/hovercard\">my PR</a> that improves the docs). These controllers are easy to secure becuase most of the functionality is extracted to modules so they're easy enough to re-implement.</p>\n<p dir=\"auto\">The same isn't true for <code class=\"notranslate\">DirectUploadsController</code>. But you should secure that controller too. If you don't, then unauthenticated users can create <code class=\"notranslate\">ActiveStorage::Blob</code> records in your database, and get secured URLs they can use to directly upload files into your S3 (etc) bucket.</p>\n<p dir=\"auto\">This PR makes it easier to secure the controller:</p>\n<ul dir=\"auto\">\n<li>Functionality is extracted to a module.</li>\n<li>Docs are updated to point you in the right direction.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52505",
            "title": "Make it possible to secure `ActiveStorage::DirectUploadsController`",
            "date_modified": "2024-08-05T01:45:42.000Z",
            "date_published": "2024-08-05T01:28:41.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/522155?u=2e71ed2ab56545207a94b885fafc434ee7350cf1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">ActiveRecord provides a way to set isolation level per transaction:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.transaction(isolation: :read_committed) do\n  ...\nend\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">transaction</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">isolation</span>: <span class=\"pl-pds\">:read_committed</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  ...\n<span class=\"pl-en\">end</span></pre></div>\n<p dir=\"auto\">Underneath, that ends up calling:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"def begin_isolated_db_transaction(isolation) # :nodoc:\n  internal_execute(&quot;SET TRANSACTION ISOLATION LEVEL #{transaction_isolation_levels.fetch(isolation)}&quot;, &quot;TRANSACTION&quot;, allow_retry: true, materialize_transactions: false)\n  begin_db_transaction\nend\"><pre class=\"notranslate\"><code class=\"notranslate\">def begin_isolated_db_transaction(isolation) # :nodoc:\n  internal_execute(\"SET TRANSACTION ISOLATION LEVEL #{transaction_isolation_levels.fetch(isolation)}\", \"TRANSACTION\", allow_retry: true, materialize_transactions: false)\n  begin_db_transaction\nend\n</code></pre></div>\n<p dir=\"auto\">However, it's possible that <code class=\"notranslate\">BEGIN</code> triggered by <code class=\"notranslate\">begin_db_transaction</code> would fail for connectivity reasons. ActiveRecord's behaviour it to reestablish the connection and to retry the <code class=\"notranslate\">BEGIN</code>.</p>\n<p dir=\"auto\">But that means any <code class=\"notranslate\">SET ISOLATION LEVEL ...</code> that happened prior to it would be lost.</p>\n<p dir=\"auto\">Rather than try building isolation level awareness into reconnects, I think it's a lot more reliable to have a separate connection pool, one that runs <code class=\"notranslate\">SET SESSION TRANSACTION ISOLATION LEVEL ...</code> every time it connects to the DB.</p>\n<p dir=\"auto\">This PR allows to introduce that setting on connection config.</p>",
            "url": "https://github.com/rails/rails/pull/52501",
            "title": "Allow to set isolation level on AR connection config",
            "date_modified": "2024-08-07T10:12:30.000Z",
            "date_published": "2024-08-04T01:05:12.000Z",
            "author": {
                "name": "kirs",
                "url": "https://github.com/kirs"
            }
        }
    ]
}