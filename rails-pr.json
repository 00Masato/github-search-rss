{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1688137?u=6e2ec05e392b37648521c2f1cd824a9bf4415b8e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The change in PR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1006201228\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/43302\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/43302/hovercard\" href=\"https://github.com/rails/rails/pull/43302\">#43302</a> introduced a bug where unsaved records are not displayed in pretty_print. The following code will not show unsaved records until this PR is merged.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"post = Post.create!\npost.comments.build\n\npp(post.comments) #=&gt; expected &quot;[#&lt;Comment:0x000000014c0b48a0 ...&gt;]&quot;, got &quot;[]&quot;\"><pre class=\"notranslate\"><span class=\"pl-s1\">post</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span>\n<span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">comments</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">build</span>\n\n<span class=\"pl-en\">pp</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">comments</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\">#=&gt; expected \"[#&lt;Comment:0x000000014c0b48a0 ...&gt;]\", got \"[]\"</span></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Fixed to call <code class=\"notranslate\">#load_target</code> before display as well as <a href=\"https://github.com/alpaca-tc/rails/blob/fe6b96afd/activerecord/lib/active_record/associations/collection_proxy.rb#L1105-L1108\"><code class=\"notranslate\">#inspect</code></a>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48653",
            "title": "Fix a bug that prevented #pretty_print from displaying records unsaved in collection association.",
            "date_modified": "2023-07-05T03:09:21.000Z",
            "date_published": "2023-07-05T02:42:45.000Z",
            "author": {
                "name": "alpaca-tc",
                "url": "https://github.com/alpaca-tc"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because composite primary key records cannot be build when using <code class=\"notranslate\">has_many</code> through singular (<code class=\"notranslate\">has_one</code>) associations.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">build_record</code> on <code class=\"notranslate\">ActiveRecord::Associations::ThroughAssociation</code> to support composite primary key associations.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I noticed some odd behaviour for <code class=\"notranslate\">build_record</code> that I'll be submitting fixes for in separate patches.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48650",
            "title": "Make has_many through singular associations build CPK records",
            "date_modified": "2023-07-04T21:15:34.000Z",
            "date_published": "2023-07-04T19:16:01.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/15172605?u=c9831ccf188358c7be46eb4c634002b47ebb1068&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #47559.\">Resolves</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1607337313\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47559\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/47559/hovercard\" href=\"https://github.com/rails/rails/issues/47559\">#47559</a></p>\n<p dir=\"auto\">Properly handle an intermediate model with has_many_inversing when creating two records with the same references.</p>\n<ul dir=\"auto\">\n<li>Prevents database error when references have a NOT NULL constraint</li>\n<li>When NULLS are permitted avoid an extra UPDATE statement by inserting the correct values from the outset</li>\n</ul>\n<h3 dir=\"auto\">Detail</h3>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"ActiveRecord::Base.has_many_inversing = true\n\nclass Comment &lt; ActiveRecord::Base\n  belongs_to :post, inverse_of: :comments\n  belongs_to :author, inverse_of: :comments\nend\n\nclass Post &lt; ActiveRecord::Base\n  has_many :comments\nend\n\nclass Author &lt; ActiveRecord::Base\n  has_many :comments\nend\n\npost = Post.new\nauthor = Author.new\npost.comments.build(author: author)\npost.comments.build(author: author)\npost.save!\"><pre class=\"notranslate\"><span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">has_many_inversing</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">true</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Comment</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">belongs_to</span> <span class=\"pl-pds\">:post</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">inverse_of</span>: <span class=\"pl-pds\">:comments</span>\n  <span class=\"pl-en\">belongs_to</span> <span class=\"pl-pds\">:author</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">inverse_of</span>: <span class=\"pl-pds\">:comments</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Post</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:comments</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Author</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:comments</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">post</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n<span class=\"pl-s1\">author</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Author</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n<span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">comments</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">build</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">author</span>: <span class=\"pl-s1\">author</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">comments</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">build</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">author</span>: <span class=\"pl-s1\">author</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">save!</span></pre></div>\n<p dir=\"auto\">Before:</p>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"BEGIN\n  INSERT INTO &quot;posts&quot; DEFAULT VALUES RETURNING &quot;id&quot;\n  INSERT INTO &quot;authors&quot; DEFAULT VALUES RETURNING &quot;id&quot;\n  INSERT INTO &quot;comments&quot; (&quot;post_id&quot;, &quot;author_id&quot;) VALUES ($1, $2) RETURNING &quot;id&quot;  [[&quot;post_id&quot;, 1], [&quot;author_id&quot;, 1]]\n  INSERT INTO &quot;comments&quot; (&quot;author_id&quot;) VALUES ($1) RETURNING &quot;id&quot;  [[&quot;author_id&quot;, 1]]\n  -- Error if NOT NULL constraint on post_id\n  UPDATE &quot;comments&quot; SET &quot;post_id&quot; = $1 WHERE &quot;comments&quot;.&quot;id&quot; = $2  [[&quot;post_id&quot;, 1], [&quot;id&quot;, 2]]\nCOMMIT\"><pre class=\"notranslate\"><span class=\"pl-k\">BEGIN</span>\n  <span class=\"pl-k\">INSERT INTO</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span> DEFAULT <span class=\"pl-k\">VALUES</span> RETURNING <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span>\n  <span class=\"pl-k\">INSERT INTO</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>authors<span class=\"pl-pds\">\"</span></span> DEFAULT <span class=\"pl-k\">VALUES</span> RETURNING <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span>\n  <span class=\"pl-k\">INSERT INTO</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>comments<span class=\"pl-pds\">\"</span></span> (<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>post_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>author_id<span class=\"pl-pds\">\"</span></span>) <span class=\"pl-k\">VALUES</span> ($<span class=\"pl-c1\">1</span>, $<span class=\"pl-c1\">2</span>) RETURNING <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span>  [[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>post_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">1</span>], [<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>author_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">1</span>]]\n  <span class=\"pl-k\">INSERT INTO</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>comments<span class=\"pl-pds\">\"</span></span> (<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>author_id<span class=\"pl-pds\">\"</span></span>) <span class=\"pl-k\">VALUES</span> ($<span class=\"pl-c1\">1</span>) RETURNING <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span>  [[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>author_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">1</span>]]\n  <span class=\"pl-c\"><span class=\"pl-c\">--</span> Error if NOT NULL constraint on post_id</span>\n  <span class=\"pl-k\">UPDATE</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>comments<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">SET</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>post_id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> $<span class=\"pl-c1\">1</span> <span class=\"pl-k\">WHERE</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>comments<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> $<span class=\"pl-c1\">2</span>  [[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>post_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">1</span>], [<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">2</span>]]\n<span class=\"pl-k\">COMMIT</span></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"BEGIN\n  INSERT INTO &quot;posts&quot; DEFAULT VALUES RETURNING &quot;id&quot;\n  INSERT INTO &quot;authors&quot; DEFAULT VALUES RETURNING &quot;id&quot;\n  INSERT INTO &quot;comments&quot; (&quot;post_id&quot;, &quot;author_id&quot;) VALUES ($1, $2) RETURNING &quot;id&quot;  [[&quot;post_id&quot;, 1], [&quot;author_id&quot;, 1]]\n  INSERT INTO &quot;comments&quot; (&quot;post_id&quot;, &quot;author_id&quot;) VALUES ($1, $2) RETURNING &quot;id&quot;  [[&quot;post_id&quot;, 1], [&quot;author_id&quot;, 1]]\nCOMMIT\"><pre class=\"notranslate\"><span class=\"pl-k\">BEGIN</span>\n  <span class=\"pl-k\">INSERT INTO</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span> DEFAULT <span class=\"pl-k\">VALUES</span> RETURNING <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span>\n  <span class=\"pl-k\">INSERT INTO</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>authors<span class=\"pl-pds\">\"</span></span> DEFAULT <span class=\"pl-k\">VALUES</span> RETURNING <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span>\n  <span class=\"pl-k\">INSERT INTO</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>comments<span class=\"pl-pds\">\"</span></span> (<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>post_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>author_id<span class=\"pl-pds\">\"</span></span>) <span class=\"pl-k\">VALUES</span> ($<span class=\"pl-c1\">1</span>, $<span class=\"pl-c1\">2</span>) RETURNING <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span>  [[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>post_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">1</span>], [<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>author_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">1</span>]]\n  <span class=\"pl-k\">INSERT INTO</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>comments<span class=\"pl-pds\">\"</span></span> (<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>post_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>author_id<span class=\"pl-pds\">\"</span></span>) <span class=\"pl-k\">VALUES</span> ($<span class=\"pl-c1\">1</span>, $<span class=\"pl-c1\">2</span>) RETURNING <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span>  [[<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>post_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">1</span>], [<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>author_id<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">1</span>]]\n<span class=\"pl-k\">COMMIT</span></pre></div>\n<p dir=\"auto\"><code class=\"notranslate\">insert_record</code> within <code class=\"notranslate\">save_collection_association</code> will trigger a recursive call. By fully processing <code class=\"notranslate\">set_inverse_instance</code> for each layer we ensure associations are up to date before <code class=\"notranslate\">INSERT INTO comments</code> statements are sent to the database.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48647",
            "title": "Fix has_many_inversing records with same references",
            "date_modified": "2023-07-04T15:06:39.000Z",
            "date_published": "2023-07-04T14:08:03.000Z",
            "author": {
                "name": "abaldwin88",
                "url": "https://github.com/abaldwin88"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Ref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1780472225\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48611\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48611/hovercard\" href=\"https://github.com/rails/rails/issues/48611\">#48611</a></p>\n<p dir=\"auto\">Individual fragments have been cached as bare string since forever, but somehow fragment cached via collection caching were stored as <code class=\"notranslate\">ActionView::OutputBuffer</code> instances.</p>\n<p dir=\"auto\">This is both bad for performance, but also can cause issues on Rails upgrades if the internal representation of <code class=\"notranslate\">AV::OutputBuffer</code> changes.</p>\n<p dir=\"auto\">I think we should consider this PR as a bug fix, and backport it accordingly.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a>, <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthutchinson/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthutchinson\">@matthutchinson</a>, <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/skipkayhil/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/skipkayhil\">@skipkayhil</a></p>",
            "url": "https://github.com/rails/rails/pull/48645",
            "title": "Fix Action View collection caching to store fragments as bare strings",
            "date_modified": "2023-07-04T14:47:23.000Z",
            "date_published": "2023-07-04T13:16:17.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/248174?u=679698ae9aa6ac1cd046737efadd767c154326c6&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Uniqueness validators no longer works on <code class=\"notranslate\">create_association</code> when using <code class=\"notranslate\">dependent: :destroy</code> option in the commit below.<br>\nrefs: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/bdbe58b50461dc44c42df4d5427fa78aeb1debcb/hovercard\" href=\"https://github.com/rails/rails/commit/bdbe58b50461dc44c42df4d5427fa78aeb1debcb\"><tt>bdbe58b</tt></a>, <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/3255411981f4a64eea77ff65431ce92d201b4d0a/hovercard\" href=\"https://github.com/rails/rails/commit/3255411981f4a64eea77ff65431ce92d201b4d0a\"><tt>3255411</tt></a></p>\n<p dir=\"auto\">However, we often expect validation errors as well.<br>\nrefs <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1730182935\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48330\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48330/hovercard\" href=\"https://github.com/rails/rails/issues/48330\">#48330</a>, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1785808864\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48632\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48632/hovercard\" href=\"https://github.com/rails/rails/issues/48632\">#48632</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit adds new option <code class=\"notranslate\">existing</code> to <code class=\"notranslate\">has_one</code> to run validations before deleting an existing record.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48643",
            "title": "Add a new option `existing` to `has_one` to run validations before deleting",
            "date_modified": "2023-07-04T06:46:52.000Z",
            "date_published": "2023-07-04T06:23:56.000Z",
            "author": {
                "name": "sinsoku",
                "url": "https://github.com/sinsoku"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Ensure <code class=\"notranslate\">ActiveRecord::Encryption.config.previous_schemes.clear</code> is called after setting it to downcase.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48641",
            "title": "Fix flaky encryption tests",
            "date_modified": "2023-07-04T00:16:24.000Z",
            "date_published": "2023-07-03T19:47:05.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/9624059?u=0a4d0129b07a8c5e4a643891f16861edd9658e5c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48633.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1785850610\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48633\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48633/hovercard\" href=\"https://github.com/rails/rails/issues/48633\">#48633</a></p>\n<p dir=\"auto\">Previously, failure to autosave a <code class=\"notranslate\">has_one</code> association returned <code class=\"notranslate\">nil</code> instead of raising an exception.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Supplier &lt; ActiveRecord::Base\n  has_one :account, autosave: true\nend\n\nclass Account &lt; ActiveRecord::Base\n  before_save { throw(:abort) }\nend\n\nsupplier = Supplier.new\nsupplier.build_account\nsupplier.save! # =&gt; nil\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Supplier</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">has_one</span> <span class=\"pl-pds\">:account</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">autosave</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Account</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">before_save</span> <span class=\"pl-kos\">{</span> <span class=\"pl-en\">throw</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:abort</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">supplier</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Supplier</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n<span class=\"pl-s1\">supplier</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">build_account</span>\n<span class=\"pl-s1\">supplier</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">save!</span> <span class=\"pl-c\"># =&gt; nil</span></pre></div>\n<p dir=\"auto\">But it's counter-intuitive for <code class=\"notranslate\">save!</code> to fail without raising an exception.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This pull request changes the <code class=\"notranslate\">save_has_one_association</code> to raise <code class=\"notranslate\">ActiveRecord::RecordInvalid</code> instead of <code class=\"notranslate\">ActiveRecord::Rollback</code>. This allows it to raise an exception if it fails to autosave the <code class=\"notranslate\">has_one</code> association with <code class=\"notranslate\">save!</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">This pull request is very similar to <a href=\"https://github.com/rails/rails/pull/36210\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/36210/hovercard\">the pull request for <code class=\"notranslate\">has_many</code> association</a>.</p>\n<p dir=\"auto\">Also, it seems that the reason why <code class=\"notranslate\">ActiveRecord::Rollback</code> was raised was to return <code class=\"notranslate\">false</code> while rolling back with <code class=\"notranslate\">save</code>, but there is also no problem with <code class=\"notranslate\">ActiveRecord::RecordInvalid</code>.<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/f2aacd51405724cdf7cfd36a439c9dbfce16973a/hovercard\" href=\"https://github.com/rails/rails/commit/f2aacd51405724cdf7cfd36a439c9dbfce16973a\"><tt>f2aacd5</tt></a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48640",
            "title": "fix: Raise an exception on `has_one` failed to autosave",
            "date_modified": "2023-07-04T23:31:33.000Z",
            "date_published": "2023-07-03T17:12:25.000Z",
            "author": {
                "name": "wata727",
                "url": "https://github.com/wata727"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">These were introduced when the cache_format_version warning was <a href=\"https://github.com/rails/rails/commit/088551c802bb4005a667aaa33814cfbb1feb3927\">moved</a> to initialization of an ActiveSupport::Cache.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">7.0 was chosen as the new default cache_format in tests because other tests started to fail when 7.1 was made the default.</p>\n<p dir=\"auto\">This also uncovered that the moved deprecation warning did not cover the MemCacheStore since it overrides the <code class=\"notranslate\">default_coder</code> method for the 6.1 format.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48639",
            "title": "Fix deprecation warnings in Active Support tests",
            "date_modified": "2023-07-03T19:28:00.000Z",
            "date_published": "2023-07-03T16:27:32.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><code class=\"notranslate\">Rails.cache.delete('key')</code> is supposed to return <code class=\"notranslate\">true</code> if an entry exists and <code class=\"notranslate\">false</code> otherwise. This is how most stores behave.</p>\n<p dir=\"auto\">However, the <code class=\"notranslate\">RedisCacheStore</code> would return a <code class=\"notranslate\">1</code> when deleting an entry that does exist and a <code class=\"notranslate\">0</code> otherwise.<br>\nAs <code class=\"notranslate\">0</code> is truthy this is unexpected behaviour.</p>\n<p dir=\"auto\"><code class=\"notranslate\">RedisCacheStore</code> now returns <code class=\"notranslate\">true</code> if the entry exists and <code class=\"notranslate\">false</code> otherwise, making it consistent with the other cache stores.</p>\n<p dir=\"auto\">Similarly the <code class=\"notranslate\">FileCacheStore</code> now returns <code class=\"notranslate\">false</code> instead of <code class=\"notranslate\">nil</code> if the entry doesn't exist.</p>\n<p dir=\"auto\">A test is added to make sure this behaviour applies to all stores.</p>\n<p dir=\"auto\">The documentation for <code class=\"notranslate\">delete</code> has been updated to make the behaviour explicit.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48638",
            "title": "Ensure `Rails.cache.delete('key')` returns a boolean",
            "date_modified": "2023-07-04T13:24:59.000Z",
            "date_published": "2023-07-03T13:55:16.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This is just a shot in the dark, but my gut tells me this commit fixes this flaky test.</p>\n<p dir=\"auto\">Most recently failed today in CI:<br>\n<a href=\"https://buildkite.com/rails/rails/builds/97733#018919b9-fd8e-4fef-8536-671e68ffd2ac/1080-2620\" rel=\"nofollow\">https://buildkite.com/rails/rails/builds/97733#018919b9-fd8e-4fef-8536-671e68ffd2ac/1080-2620</a></p>\n<p dir=\"auto\">/cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a></p>",
            "url": "https://github.com/rails/rails/pull/48636",
            "title": "[7-0-stable] Backport: \"Warm-up to avoid autoloads interfering with class serial\"",
            "date_modified": "2023-07-03T12:19:18.000Z",
            "date_published": "2023-07-03T12:19:14.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Backports <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1529617947\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46965\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46965/hovercard\" href=\"https://github.com/rails/rails/pull/46965\">#46965</a> to <code class=\"notranslate\">7-0-stable</code> branch.</p>\n<p dir=\"auto\">This error occurred today in CI:<br>\n<a href=\"https://buildkite.com/rails/rails/builds/97733#018919b9-fc7c-4441-b5c6-64c45a6e4474\" rel=\"nofollow\">https://buildkite.com/rails/rails/builds/97733#018919b9-fc7c-4441-b5c6-64c45a6e4474</a></p>",
            "url": "https://github.com/rails/rails/pull/48635",
            "title": "[7-0-stable] Backport \"Fix flaky test in railties/test/applications/rake/dbs_test.rb\"",
            "date_modified": "2023-07-03T12:05:25.000Z",
            "date_published": "2023-07-03T12:05:22.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/15172605?u=c9831ccf188358c7be46eb4c634002b47ebb1068&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Extends Active Record to automatically reload virtual attributes on update when using PostgreSQL. This is done by issuing a single UPDATE query that includes a RETURNING clause.</p>\n<h3 dir=\"auto\">Motivation</h3>\n<p dir=\"auto\">Saves an extra round trip to the database for reload and removes a developer pitfall around stale virtual attribute values.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Given a <code class=\"notranslate\">Post</code> model represented by the following schema:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"create_table :posts do |t|\n  t.integer :upvotes_count\n  t.integer :downvotes_count\n  t.virtual :total_votes_count, type: :integer, as: &quot;upvotes_count + downvotes_count&quot;, stored: true\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:posts</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">integer</span> <span class=\"pl-pds\">:upvotes_count</span>\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">integer</span> <span class=\"pl-pds\">:downvotes_count</span>\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">virtual</span> <span class=\"pl-pds\">:total_votes_count</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">type</span>: <span class=\"pl-pds\">:integer</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">as</span>: <span class=\"pl-s\">\"upvotes_count + downvotes_count\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">stored</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\"><code class=\"notranslate\">total_votes_count</code> will reflect the sum of upvotes and downvotes after <code class=\"notranslate\">update</code> is successfully called. Prior to this change calling <code class=\"notranslate\">reload</code> would have been necessary to obtain the value calculated by the database.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"post = Post.find(1)\npost.update(upvotes_count: 2, downvotes_count: 2)\n# Calling `post.reload` no longer necessary\npost.total_votes =&gt; 4\"><pre class=\"notranslate\"><span class=\"pl-s1\">post</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">update</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">upvotes_count</span>: <span class=\"pl-c1\">2</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">downvotes_count</span>: <span class=\"pl-c1\">2</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\"># Calling `post.reload` no longer necessary</span>\n<span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">total_votes</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-c1\">4</span></pre></div>\n<ul dir=\"auto\">\n<li>At this moment MySQL and SQLite adapters do not support this behavior</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n<ul dir=\"auto\">\n<li>Follow-up from PR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1712735611\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48241\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48241/hovercard\" href=\"https://github.com/rails/rails/pull/48241\">#48241</a></li>\n<li>Related to PR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1750183204\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48434\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48434/hovercard\" href=\"https://github.com/rails/rails/pull/48434\">#48434</a></li>\n<li><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48423.\">Closes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1747958155\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48423\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48423/hovercard\" href=\"https://github.com/rails/rails/issues/48423\">#48423</a> when using Postgresql</li>\n</ul>\n<p dir=\"auto\">CC: <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/nvasilevski/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nvasilevski\">@nvasilevski</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.<br>\n<del>* [ ] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</del>.</li>\n<li>I'll update the docs and changelog after a core team member confirms this is the right approach</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48628",
            "title": "PostgreSQL reload virtual attributes on update",
            "date_modified": "2023-07-02T11:30:40.000Z",
            "date_published": "2023-07-02T11:30:36.000Z",
            "author": {
                "name": "abaldwin88",
                "url": "https://github.com/abaldwin88"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/18253416?u=034aae4fab87712e64aa0db80bf6c653bb434339&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because get attributes with aliases.</p>\n<p dir=\"auto\">For more information, please check here.<br>\n<a href=\"https://discuss.rubyonrails.org/t/i-would-like-an-idea-to-create-an-issue-about-add-alias-attribute-to-method-attributes/82793\" rel=\"nofollow\">https://discuss.rubyonrails.org/t/i-would-like-an-idea-to-create-an-issue-about-add-alias-attribute-to-method-attributes/82793</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes ActiveModel and ActiveRecord</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"% cd activemodel\n% bin/test test/cases/attributes_test.rb \nRun options: --seed 887\n\n# Running:\n\n................\n\nFinished in 0.009967s, 1605.2975 runs/s, 3411.2571 assertions/s.\n16 runs, 34 assertions, 0 failures, 0 errors, 0 skips\"><pre class=\"notranslate\"><code class=\"notranslate\">% cd activemodel\n% bin/test test/cases/attributes_test.rb \nRun options: --seed 887\n\n# Running:\n\n................\n\nFinished in 0.009967s, 1605.2975 runs/s, 3411.2571 assertions/s.\n16 runs, 34 assertions, 0 failures, 0 errors, 0 skips\n</code></pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"% cd activerecord\n% bin/test test/cases/attribute_methods_test.rb\nUsing sqlite3\nRun options: --seed 19232\n\n# Running:\n\n................................................................................................................\n\nFinished in 0.629886s, 177.8100 runs/s, 779.5061 assertions/s.\n112 runs, 491 assertions, 0 failures, 0 errors, 0 skips\"><pre class=\"notranslate\"><code class=\"notranslate\">% cd activerecord\n% bin/test test/cases/attribute_methods_test.rb\nUsing sqlite3\nRun options: --seed 19232\n\n# Running:\n\n................................................................................................................\n\nFinished in 0.629886s, 177.8100 runs/s, 779.5061 assertions/s.\n112 runs, 491 assertions, 0 failures, 0 errors, 0 skips\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48619",
            "title": "Add attributes_with_aliases and attribute_names_with_aliases",
            "date_modified": "2023-07-01T03:21:54.000Z",
            "date_published": "2023-06-30T21:34:32.000Z",
            "author": {
                "name": "kawamotosatoshi",
                "url": "https://github.com/kawamotosatoshi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8122246?u=2dbe607a66a7616297b78647eeb4e0dbff657c3a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Context</h3>\n<p dir=\"auto\">While working on <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1169368712\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/44695\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/44695/hovercard\" href=\"https://github.com/rails/rails/pull/44695\">#44695</a>, I realised that Broadcasting was still a private API, although its commonly used. <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a> mentioned that making it public would require some refactor because of the original implementation which was hard<br>\nto understand and maintain.</p>\n<h3 dir=\"auto\">Broadcasting</h3>\n<p dir=\"auto\">Broadcasting in a nutshell worked by transforming an existing logger into a broadcasted one.<br>\nThe logger would then be responsible to log and format its own messages as well as passing the message along to other logger it broadcasts to.</p>\n<p dir=\"auto\">The problem with this approach was the following:</p>\n<ul dir=\"auto\">\n<li>\n<p dir=\"auto\">Heavy use of metaprogramming.</p>\n</li>\n<li>\n<p dir=\"auto\">Accessing the loggers in the broadcast wasnt possible. Removing a logger from the broadcast either.</p>\n</li>\n<li>\n<p dir=\"auto\">More importantly, modifying the main logger (the one that broadcasts logs to the others) wasnt possible and the main source of misunderstanding.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  logger = Logger.new(STDOUT)\n  stderr_logger = Logger.new(STDER))\n  logger.extend(AS::Logger.broadcast(stderr_logger))\n\n  logger.level = DEBUG # This modifies the level on all other loggers\n  logger.formatter =  # Modified the formatter on all other loggers\"><pre class=\"notranslate\">  <span class=\"pl-s1\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDOUT</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-s1\">stderr_logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDER</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-s1\">logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">extend</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">AS</span>::<span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">broadcast</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">stderr_logger</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n\n  <span class=\"pl-s1\">logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">level</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">DEBUG</span> <span class=\"pl-c\"># This modifies the level on all other loggers</span>\n  <span class=\"pl-s1\">logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">formatter</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\"></span> <span class=\"pl-c\"># Modified the formatter on all other loggers</span></pre></div>\n</li>\n</ul>\n<p dir=\"auto\">To keep the contract unchanged on what <code class=\"notranslate\">Rails.logger</code> returns, the new <code class=\"notranslate\">BroadcastLogger</code> class implement duck typing with all methods that has the vanilla Ruby Logger class.<br>\nIt's a simple and boring PORO that keeps an array of all the loggers that are part of the broadcast and iterate over whenever a log is sent.</p>\n<p dir=\"auto\">Now, users can access all loggers inside the broadcast and modify them on the fly. They can also remove any logger from the broadcast at any time.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Before\n\nstdout_logger = Logger.new(STDOUT)\nstderr_logger = Logger.new(STDER)\nfile_logger = Logger.new(development.log)\nstdout_logger.extend(AS::Logger.broadcast(stderr_logger))\nstdout_logger.extend(AS::Logger.broadcast(file_logger))\n\n# After\n\nbroadcast = BroadcastLogger.new(stdout_logger, stderr_logger, file_logger)\"><pre class=\"notranslate\"><span class=\"pl-c\"># Before</span>\n\n<span class=\"pl-s1\">stdout_logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDOUT</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">stderr_logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDER</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">file_logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">development</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">stdout_logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">extend</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">AS</span>::<span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">broadcast</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">stderr_logger</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">stdout_logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">extend</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">AS</span>::<span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">broadcast</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">file_logger</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-c\"># After</span>\n\n<span class=\"pl-s1\">broadcast</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">BroadcastLogger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">stdout_logger</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">stderr_logger</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">file_logger</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">I also think that now, it should be more clear for users that the broadcast sole job is to pass everything to the whole loggers in the broadcast. So there should be no surprise that all loggers in the broadcast get their level modified when they call <code class=\"notranslate\">broadcast.level = DEBUG</code> .</p>\n<p dir=\"auto\">Its also easier to wrap your head around more complex setup such as broadcasting logs to another broadcast: <code class=\"notranslate\">broadcast.broadcast_to(stdout_logger, other_broadcast)</code></p>",
            "url": "https://github.com/rails/rails/pull/48615",
            "title": "Add a public API for broadcasting logs",
            "date_modified": "2023-07-04T14:57:07.000Z",
            "date_published": "2023-06-30T02:55:14.000Z",
            "author": {
                "name": "Edouard-chin",
                "url": "https://github.com/Edouard-chin"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/67890?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">PostgreSQL 15 introduced <code class=\"notranslate\">NULLS NOT DISTINCT</code> in order to support unique indexes where you want to treat NULLs as equal. Otherwise, and by default, unique indexes allow any rows with null column values.</p>\n<p dir=\"auto\">This Pull Request has been created because creating unique indexes where rows can have only one null value is helpful, and it is a good idea to keep up with new PostgreSQL features.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the PostgreSQL connection adapter, schema detection, and schema generation. Prior work was done in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1480756107\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46659\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46659/hovercard\" href=\"https://github.com/rails/rails/pull/46659\">#46659</a> but was incomplete--a DB created from schema.rb would not have <code class=\"notranslate\">NULLS NOT DISTINCT</code> set. Additionally, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1185784153\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/44803\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/44803/hovercard\" href=\"https://github.com/rails/rails/pull/44803\">#44803</a> added <code class=\"notranslate\">INCLUDE</code> to the index schema regex, but this must come <strong>before</strong> <code class=\"notranslate\">NULLS [NOT] DISTINCT</code> per the <a href=\"https://www.postgresql.org/docs/15/sql-createindex.html\" rel=\"nofollow\">Postgres</a> docs.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Check out the PostreSQL docs <a href=\"https://www.postgresql.org/docs/15/sql-createindex.html\" rel=\"nofollow\">here</a>, in particular to confirm the correct ordering of SQL parts. My intent was to put it immediately after <code class=\"notranslate\">INCLUDE</code> in regex detection and ruby argument order.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48608",
            "title": "Support NULLS NOT DISTINCT in Postgres 15+",
            "date_modified": "2023-07-02T15:49:58.000Z",
            "date_published": "2023-06-29T03:38:44.000Z",
            "author": {
                "name": "grjones",
                "url": "https://github.com/grjones"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2651240?u=97e6903620ef2874e2231cee9eb2654b7811d750&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Add option to merge association scopes to subqueries.</p>\n<p dir=\"auto\">It removes a breaking change introduced by <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1759321614\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48487\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48487/hovercard\" href=\"https://github.com/rails/rails/pull/48487\">#48487</a>. Conditions that were not applied in<br>\nprevious versions would be applied giving people different results.</p>\n<p dir=\"auto\">Set the option on an association:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Author &lt; ApplicationRecord\n  has_many :welcome_posts, -&gt; { where(title: &quot;welcome&quot;) } , class_name: &quot;Post&quot;\n  has_many :welcome_posts_scoped, -&gt; { where(title: &quot;Welcome&quot;) }, class_name: &quot;Post&quot;, apply_on_subqueries: true\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Author</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:welcome_posts</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">-&gt;</span> <span class=\"pl-kos\">{</span> <span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"welcome\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span> <span class=\"pl-kos\">,</span> <span class=\"pl-pds\">class_name</span>: <span class=\"pl-s\">\"Post\"</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:welcome_posts_scoped</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">-&gt;</span> <span class=\"pl-kos\">{</span> <span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"Welcome\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">class_name</span>: <span class=\"pl-s\">\"Post\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">apply_on_subqueries</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Then the association scope will be merged into the subquery.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Author.where(welcome_posts: Post.all)\n#=&gt; SELECT (...) WHERE &quot;authors&quot;.&quot;id&quot; IN (SELECT &quot;posts&quot;.&quot;author_id&quot; FROM &quot;posts&quot;)\n\nAuthor.where(welcome_posts_scoped: Post.all)\n#=&gt; SELECT (...) WHERE &quot;authors&quot;.&quot;id&quot; IN (SELECT &quot;posts&quot;.&quot;author_id&quot; FROM &quot;posts&quot; WHERE &quot;posts&quot;.&quot;title&quot; = 'welcome')    \"><pre class=\"notranslate\"><span class=\"pl-v\">Author</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">welcome_posts</span>: <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">all</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#=&gt; SELECT (...) WHERE \"authors\".\"id\" IN (SELECT \"posts\".\"author_id\" FROM \"posts\")</span>\n\n<span class=\"pl-v\">Author</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">welcome_posts_scoped</span>: <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">all</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#=&gt; SELECT (...) WHERE \"authors\".\"id\" IN (SELECT \"posts\".\"author_id\" FROM \"posts\" WHERE \"posts\".\"title\" = 'welcome')    </span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1759321614\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48487\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48487/hovercard?comment_id=1612150489&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/pull/48487#issuecomment-1612150489\">#48487 (comment)</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48607",
            "title": "Add option apply_on_subqueries to associations",
            "date_modified": "2023-06-29T15:45:49.000Z",
            "date_published": "2023-06-29T02:35:40.000Z",
            "author": {
                "name": "lazaronixon",
                "url": "https://github.com/lazaronixon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because stale stack checking for <code class=\"notranslate\">has_many</code> / <code class=\"notranslate\">has_one</code> through relations doesn't currently work for composite primary key relations.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes stale states so that they are tracked as an array of columns to properly check through associations with composite primary keys.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">My tests might be too close to the implementation. Let me know if I should improve that.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48606",
            "title": "Support stale state detections in CPK through associations",
            "date_modified": "2023-07-04T07:14:41.000Z",
            "date_published": "2023-06-29T02:21:02.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #45017.\">Fix</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1225413007\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/45017\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/45017/hovercard\" href=\"https://github.com/rails/rails/issues/45017\">#45017</a><br>\nRef: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"233272702\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/29333\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/29333/hovercard\" href=\"https://github.com/rails/rails/pull/29333\">#29333</a><br>\nRef: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1723090266\" data-permission-text=\"Title is private\" data-url=\"https://github.com/ruby/timeout/issues/30\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/ruby/timeout/pull/30/hovercard\" href=\"https://github.com/ruby/timeout/pull/30\">ruby/timeout#30</a></p>\n<p dir=\"auto\">Historically only raised errors would trigger a rollback, but in Ruby <code class=\"notranslate\">2.3</code>, the <code class=\"notranslate\">timeout</code> library started using <code class=\"notranslate\">throw</code> to interupt execution which had the adverse effect of committing open transactions.</p>\n<p dir=\"auto\">To solve this, in Active Record 6.1 the behavior was changed to instead rollback the transaction as it was safer than to potentially commit an incomplete transaction.</p>\n<p dir=\"auto\">Using <code class=\"notranslate\">return</code>, <code class=\"notranslate\">break</code> or <code class=\"notranslate\">throw</code> inside a <code class=\"notranslate\">transaction</code> block was essentially deprecated from Rails 6.1 onwards.</p>\n<p dir=\"auto\">However with the release of <code class=\"notranslate\">timeout 0.4.0</code>, <code class=\"notranslate\">Timeout.timeout</code> now raises an error again, and Active Record is able to return to its original, less surprising, behavior.</p>",
            "url": "https://github.com/rails/rails/pull/48600",
            "title": "Active Record commit transaction on `return`, `break` and `throw`",
            "date_modified": "2023-06-29T12:42:38.000Z",
            "date_published": "2023-06-28T14:09:44.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/259568?u=088346ff0867534d6f143c32b5486953e158a6e4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Our application is multi-tenant and storing files in S3 was an organizational issue due to ActiveStorage storing the files at the root level in a flat structure. Instead we would like some semantic structure, for example we would like to have all files related  to active storage to be in the active_storage top folder, and then for each tenant our of application we will further namespace. Example of the intended structure:</p>\n<p dir=\"auto\">S3/active_storage/tenant_id/some_file_uid<br>\nS3/active_storage/tenant_id/some_file_uid</p>\n<p dir=\"auto\">This Pull Request has been created in order to support this kind of structure.</p>\n<p dir=\"auto\">Allows for configuring a custom prefix for Blob keys.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"    Rails.application.configure do\n      config.active_storage.blob_prefix = 'active_storage'\n    end\"><pre class=\"notranslate\"><code class=\"notranslate\">    Rails.application.configure do\n      config.active_storage.blob_prefix = 'active_storage'\n    end\n</code></pre></div>\n<p dir=\"auto\">This will store Blobs in a path like active_storage/&lt;random_key&gt;. You may also configure an additional level of prefix on each relation.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"    class User &lt; ActiveRecord::Base\n      has_one_attached :avatar, prefix: 'avatars'\n    end\"><pre class=\"notranslate\"><code class=\"notranslate\">    class User &lt; ActiveRecord::Base\n      has_one_attached :avatar, prefix: 'avatars'\n    end\n</code></pre></div>\n<p dir=\"auto\">This will store Blobs in a path like active_storage/avatars/&lt;random_key&gt;. Or even generate it using information on the record:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"    class User &lt; ActiveRecord::Base\n      belongs_to :tenant\n      has_one_attached :avatar, prefix: -&gt; (record, attachment) { record.tenant.name }\n    end\"><pre class=\"notranslate\"><code class=\"notranslate\">    class User &lt; ActiveRecord::Base\n      belongs_to :tenant\n      has_one_attached :avatar, prefix: -&gt; (record, attachment) { record.tenant.name }\n    end\n</code></pre></div>\n<p dir=\"auto\">This will store Blobs in a path like active_storage/account_1/&lt;random_key&gt;</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes to Active Storage. Particularly it makes the association macros determine the blob id, if given the option <code class=\"notranslate\">:prefix</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">We are using this in production right now. Working fine so far. We do not use direct upload. Unsure if this may affect it.</p>\n<p dir=\"auto\">Other people interested in this sort of functionality:</p>\n<ul dir=\"auto\">\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"545629944\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/38161\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/38161/hovercard\" href=\"https://github.com/rails/rails/issues/38161\">#38161</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"319441008\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/32790\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/32790/hovercard\" href=\"https://github.com/rails/rails/issues/32790\">#32790</a></li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48591",
            "title": "Add support for :prefix option in relations.",
            "date_modified": "2023-06-27T12:11:09.000Z",
            "date_published": "2023-06-27T12:00:28.000Z",
            "author": {
                "name": "Nerian",
                "url": "https://github.com/Nerian"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Currently if you set <code class=\"notranslate\">config.active_job.queue_adapter = (anything)</code> in <code class=\"notranslate\">config/application.rb</code> or <code class=\"notranslate\">config/environments/test.rb</code>, this config will be respected by some test cases but not others.</p>\n<p dir=\"auto\">Specifically, in <code class=\"notranslate\">ActionDispatch::IntegrationTest</code>, <code class=\"notranslate\">ActionMailer::TestCase</code>, and <code class=\"notranslate\">ActiveJob::TestCase</code>, the test adapter will still be <code class=\"notranslate\">TestAdapter</code>, while in other test cases it will be <code class=\"notranslate\">InlineAdapter</code>.</p>\n<p dir=\"auto\">I think you'd expect that if you set the test adapter for an environment, that test adapter would be available everywhere in that environment. For example, you might want to use the Delayed Job test adapter in your test environment so that you can have your test code more closely match production. The feedback on <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"496901128\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/37270\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/37270/hovercard\" href=\"https://github.com/rails/rails/issues/37270\">#37270</a> echoes this, but the workaround suggested there of disabling the test adapter on specific klasses is not reliable.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The logic to determine which queue adapter a job uses is quite confusing.</p>\n<p dir=\"auto\">Here is how it works on <code class=\"notranslate\">main</code> currently:</p>\n<ol dir=\"auto\">\n<li>If running in a test, and the test class includes <code class=\"notranslate\">ActiveJob::TestHelper</code> and overrides <code class=\"notranslate\">queue_adapter_for_test</code>, then the <code class=\"notranslate\">queue_adapter_for_test</code> adapter is used.</li>\n<li>Otherwise, if running in a test, and the test class includes <code class=\"notranslate\">ActiveJob::TestHelper</code>, then the <code class=\"notranslate\">:test</code> adapter is used.</li>\n<li>Otherwise, if <code class=\"notranslate\">self.queue_adapter</code> is set on the job class, that adapter is used.</li>\n<li>Otherwise, if <code class=\"notranslate\">self.queue_adapter</code> is set on the job's superclass (eg. <code class=\"notranslate\">ApplicationJob</code>), that adapter is used.</li>\n<li>Fall back to <code class=\"notranslate\">Rails.application.config.active_job.queue_adapter</code> as configured by the user.</li>\n<li>If not configured by the user, <code class=\"notranslate\">Rails.application.config.active_job.queue_adapter</code> defaults to <code class=\"notranslate\">:async</code>.</li>\n<li>Fall back to <code class=\"notranslate\">:async</code> if no Rails config set (eg. using Active Job as a standalone).</li>\n</ol>\n<p dir=\"auto\">As noted above, only some of the built in test classes include <code class=\"notranslate\">ActiveJob::TestHelper</code>. Also, setting a queue adapter on a specific job class is rare (typically you would not want different jobs to be performed by different backends). So in practice, in development/production, option 5 is used. And in test, options 2 and 5 are used, depending on the type of test.</p>\n<p dir=\"auto\">This PR changes the logic to work as follows:</p>\n<ol dir=\"auto\">\n<li>If <code class=\"notranslate\">self.queue_adapter</code> is set on the job class, that adapter is used.</li>\n<li>Otherwise, if <code class=\"notranslate\">self.queue_adapter</code> is set on the job's superclass (eg. <code class=\"notranslate\">ApplicationJob</code>), that adapter is used.</li>\n<li>If running in a test, and the test class includes <code class=\"notranslate\">ActiveJob::TestHelper</code> and overrides <code class=\"notranslate\">queue_adapter_for_test</code>, then the <code class=\"notranslate\">queue_adapter_for_test</code> adapter is used.</li>\n<li>Fall back to <code class=\"notranslate\">Rails.application.config.active_job.queue_adapter</code> as configured by the user.</li>\n<li>If not configured by the user, <code class=\"notranslate\">Rails.application.config.active_job.queue_adapter</code> defaults to <code class=\"notranslate\">:test</code> if <code class=\"notranslate\">Rails.env.test?</code>, otherwise it defaults to <code class=\"notranslate\">:async</code>.</li>\n<li>If running in a test, and the test class includes <code class=\"notranslate\">ActiveJob::TestHelper</code>, and no other adapter has been set (eg. using Active Job as a standalone), then use <code class=\"notranslate\">:test</code>.</li>\n<li>Otherwise, fall back to <code class=\"notranslate\">:async</code>.</li>\n</ol>\n<p dir=\"auto\">The key changes are:</p>\n<ul dir=\"auto\">\n<li>Now, if you set a <code class=\"notranslate\">queue_adapter</code> on a test class, that will always be respected.</li>\n<li>The <code class=\"notranslate\">queue_adapter_for_test</code> override still works, but it no longer takes priority over a queue adapter set on a specific test class. Since I think both of these techniques are rare, and the impact of this change only exists in a test environment, I think it is a relatively safe change.</li>\n<li>The default queue adapter in Rails config is now env-dependent.</li>\n</ul>\n<p dir=\"auto\">The default rails environment templates suggest <a href=\"https://github.com/rails/rails/blob/f46d3452ae30c46d3e213c687decbbca0cee9119/railties/lib/rails/generators/rails/app/templates/config/environments/production.rb.tt#L79C12-L79C12\">setting a specific queue adapter only in production</a>. For users who do that, there will be no changes to behaviour with this PR.</p>\n<p dir=\"auto\">For users who are more granular, by setting per-job queue adapters, things should continue to work as expected with this PR.</p>\n<p dir=\"auto\">But for users who set a queue adapter across all environments (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"496901128\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/37270\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/37270/hovercard\" href=\"https://github.com/rails/rails/issues/37270\">#37270</a>), this PR solves the issue where some tests use the desired queue adapter, and other tests don't.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #37270.\">Fixes</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"496901128\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/37270\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/37270/hovercard\" href=\"https://github.com/rails/rails/issues/37270\">#37270</a></p>\n<p dir=\"auto\">ref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1584425335\" data-permission-text=\"Title is private\" data-url=\"https://github.com/bensheldon/good_job/issues/846\" data-hovercard-type=\"issue\" data-hovercard-url=\"/bensheldon/good_job/issues/846/hovercard\" href=\"https://github.com/bensheldon/good_job/issues/846\">bensheldon/good_job#846</a><br>\nref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"174675110\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/26360\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/26360/hovercard\" href=\"https://github.com/rails/rails/issues/26360\">#26360</a> - this PR changes the behavior here, which I think was overzealous.</p>\n<p dir=\"auto\">I extracted out some other PRs to fix internal issues while working on this: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1784479707\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48623\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48623/hovercard\" href=\"https://github.com/rails/rails/pull/48623\">#48623</a>, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1784505846\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48626\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48626/hovercard\" href=\"https://github.com/rails/rails/pull/48626\">#48626</a>. I also extracted <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1778604419\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48599\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48599/hovercard\" href=\"https://github.com/rails/rails/pull/48599\">#48599</a> out as a non-controversial fix prior to this PR.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48585",
            "title": "Active Job: Correctly use the desired test adapter in tests",
            "date_modified": "2023-07-03T00:44:45.000Z",
            "date_published": "2023-06-27T01:01:04.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        }
    ]
}