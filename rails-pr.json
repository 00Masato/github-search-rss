{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/13203?u=60f42a553b09bc71f5e399845142fba0ca9e9bb5&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h2 dir=\"auto\">Motivation / Background</h2>\n<p dir=\"auto\">Continuous Integrating rubocop-rails_config after upgrading from Rails 7.0.7.2 to Rails 7.0.8 now fails:</p>\n<div class=\"highlight highlight-text-shell-session notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"(snip)\nrubocop --except=Style/StringLiterals,Style/FrozenStringLiteralComment .\ncp ./test/fixture/.rubocop.yml rails_test/.rubocop.yml\ncd rails_test\nInspecting 28 files\nC...........................\n\nOffenses:\n\nGemfile:71:1: C: [Correctable] Layout/EmptyLinesAroundBlockBody: Extra empty line detected at block body end.\n\n28 files inspected, 1 offense detected, 1 offense autocorrectable\nrake aborted!\"><pre class=\"notranslate\"><span class=\"pl-c1\">(snip)</span>\n<span class=\"pl-c1\">rubocop --except=Style/StringLiterals,Style/FrozenStringLiteralComment .</span>\n<span class=\"pl-c1\">cp ./test/fixture/.rubocop.yml rails_test/.rubocop.yml</span>\n<span class=\"pl-c1\">cd rails_test</span>\n<span class=\"pl-c1\">Inspecting 28 files</span>\n<span class=\"pl-c1\">C...........................</span>\n\n<span class=\"pl-c1\">Offenses:</span>\n\n<span class=\"pl-c1\">Gemfile:71:1: C: [Correctable] Layout/EmptyLinesAroundBlockBody: Extra empty line detected at block body end.</span>\n\n<span class=\"pl-c1\">28 files inspected, 1 offense detected, 1 offense autocorrectable</span>\n<span class=\"pl-c1\">rake aborted!</span></pre></div>\n<p dir=\"auto\"><a href=\"https://github.com/toshimaru/rubocop-rails_config/actions/runs/6167995304/job/16739825926\">https://github.com/toshimaru/rubocop-rails_config/actions/runs/6167995304/job/16739825926</a></p>\n<p dir=\"auto\">Upon checking, redundant blank was added from version 7.0.8. This was <code class=\"notranslate\">gem \"webdrivers\"</code> before 7.0.7.2.</p>\n<h3 dir=\"auto\">Rails 7.0.7.2</h3>\n<div class=\"highlight highlight-text-shell-session notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"$ ruby -v\nruby 3.3.0dev (2023-09-08T16:09:30Z master af5df9ee5e) [x86_64-darwin22]\n\n$ cat Gemfile\n# frozen_string_literal: true\n\nsource &quot;https://rubygems.org&quot;\n\ngem &quot;rails&quot;, &quot;7.0.7.2&quot;\n\n$ bundle install\n(snip)\n\n$ bundle exec rails new example &amp;&amp; cd $_\n(snip)\n\n% tail -n5 Gemfile\n  # Use system testing [https://guides.rubyonrails.org/testing.html#system-testing]\n  gem &quot;capybara&quot;\n  gem &quot;selenium-webdriver&quot;\n  gem &quot;webdrivers&quot;\nend\"><pre class=\"notranslate\">$ <span class=\"pl-s1\">ruby -v</span>\n<span class=\"pl-c1\">ruby 3.3.0dev (2023-09-08T16:09:30Z master af5df9ee5e) [x86_64-darwin22]</span>\n\n$ <span class=\"pl-s1\">cat Gemfile</span>\n# <span class=\"pl-s1\">frozen_string_literal: <span class=\"pl-c1\">true</span></span>\n\n<span class=\"pl-c1\">source \"https://rubygems.org\"</span>\n\n<span class=\"pl-c1\">gem \"rails\", \"7.0.7.2\"</span>\n\n$ <span class=\"pl-s1\">bundle install</span>\n<span class=\"pl-c1\">(snip)</span>\n\n$ <span class=\"pl-s1\">bundle <span class=\"pl-c1\">exec</span> rails new example <span class=\"pl-k\">&amp;&amp;</span> <span class=\"pl-c1\">cd</span> <span class=\"pl-smi\">$_</span></span>\n<span class=\"pl-c1\">(snip)</span>\n\n% <span class=\"pl-s1\">tail -n5 Gemfile</span>\n<span class=\"pl-c1\">  # Use system testing [https://guides.rubyonrails.org/testing.html#system-testing]</span>\n<span class=\"pl-c1\">  gem \"capybara\"</span>\n<span class=\"pl-c1\">  gem \"selenium-webdriver\"</span>\n<span class=\"pl-c1\">  gem \"webdrivers\"</span>\n<span class=\"pl-c1\">end</span></pre></div>\n<h3 dir=\"auto\">Rails 7.0.8</h3>\n<div class=\"highlight highlight-text-shell-session notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"$ cat Gemfile\n# frozen_string_literal: true\n\nsource &quot;https://rubygems.org&quot;\n\ngem &quot;rails&quot;, &quot;7.0.8&quot;\n\n$ bundle install\n(snip)\n\n$ bundle exec rails new example &amp;&amp; cd $_\n(snip)\n\n% tail -n5 Gemfile\n  # Use system testing [https://guides.rubyonrails.org/testing.html#system-testing]\n  gem &quot;capybara&quot;\n  gem &quot;selenium-webdriver&quot;\n\nend\"><pre class=\"notranslate\">$ <span class=\"pl-s1\">cat Gemfile</span>\n# <span class=\"pl-s1\">frozen_string_literal: <span class=\"pl-c1\">true</span></span>\n\n<span class=\"pl-c1\">source \"https://rubygems.org\"</span>\n\n<span class=\"pl-c1\">gem \"rails\", \"7.0.8\"</span>\n\n$ <span class=\"pl-s1\">bundle install</span>\n<span class=\"pl-c1\">(snip)</span>\n\n$ <span class=\"pl-s1\">bundle <span class=\"pl-c1\">exec</span> rails new example <span class=\"pl-k\">&amp;&amp;</span> <span class=\"pl-c1\">cd</span> <span class=\"pl-smi\">$_</span></span>\n<span class=\"pl-c1\">(snip)</span>\n\n% <span class=\"pl-s1\">tail -n5 Gemfile</span>\n<span class=\"pl-c1\">  # Use system testing [https://guides.rubyonrails.org/testing.html#system-testing]</span>\n<span class=\"pl-c1\">  gem \"capybara\"</span>\n<span class=\"pl-c1\">  gem \"selenium-webdriver\"</span>\n\n<span class=\"pl-c1\">end</span></pre></div>\n<p dir=\"auto\">This is reproduced with Rails 7.0.8, Rails 7.1.0.beta1 and the main branch.</p>\n<p dir=\"auto\">I understand this might not be of utmost importance, but I would appreciate it if it could be backported to the Rails 7.0 branch, if possible.</p>\n<h2 dir=\"auto\">Detail</h2>\n<p dir=\"auto\">The blank line is filled in by <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1827438415\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48847\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48847/hovercard\" href=\"https://github.com/rails/rails/pull/48847\">#48847</a>. This PR removes the redundant blank line from Gemfile of new app.</p>\n<h2 dir=\"auto\">Additional information</h2>\n<p dir=\"auto\">N/A</p>\n<h2 dir=\"auto\">Checklist</h2>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49247",
            "title": "Remove a redundant blank line from Gemfile of new app",
            "date_modified": "2023-09-13T05:55:56.000Z",
            "date_published": "2023-09-13T05:47:07.000Z",
            "author": {
                "name": "koic",
                "url": "https://github.com/koic"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This commit is intended to address a few separate but related problems.</p>\n<p dir=\"auto\">The first issue is that this log message is currently impossible to customize without monkey patching <code class=\"notranslate\">Rails::Rack::Logger</code>. Gems like lograge and rails_semantic_logger currently monkey patch the class in order to remove or modify the message logged. Whether or not one of these specific gems is used, apps that want to use structured logging in production will almost certainly want to change or remove this message since it does not have a uniform structure.</p>\n<p dir=\"auto\">Another issue is that this log message makes <code class=\"notranslate\">Rails::Rack::Logger</code> dependent on <code class=\"notranslate\">ActionDispatch::RemoteIp</code> if an application wants to be protected from IP spoofing (<code class=\"notranslate\">RemoteIp</code> must appear before it in the middleware stack). There is currently an issue open because <code class=\"notranslate\">RemoteIp</code> will raise an uncaught error when IP spoofing is detected, when really it should return a 4xx response. That type of issue is normally solved by <code class=\"notranslate\">ActionDispatch::ShowExceptions</code>, however, <code class=\"notranslate\">Rails::Rack::Logger</code> additionally depends on <code class=\"notranslate\">ShowExceptions</code> being below it in the middleware stack so that the proper response status is logged. By moving the <code class=\"notranslate\">started_request_message</code> out of <code class=\"notranslate\">Rails::Rack::Logger</code>, the second dependency is removed and both <code class=\"notranslate\">Rails::Rack::Logger</code> and <code class=\"notranslate\">ShowExceptions</code> could be moved up to the top of the middleware stack in the future.</p>\n<p dir=\"auto\">In addition to fixing the 5xx response for Ip spoofing requests, there is another large benefit to moving request instrumentation higher in the middleware stack. Currently, <code class=\"notranslate\">process_action.action_controller</code> is the default instrumentation enabled in Rails applications. However, it is limited to returning information about the response returned from the controller action. This has lead to another issue opened where a user reported seeing 2xx responses logged (from <code class=\"notranslate\">process_action</code>) even though the <code class=\"notranslate\">ConditionalGet</code> middleware was intercepting the response and actually returning a 3xx response. So by enabling <code class=\"notranslate\">Rails::Rack::Logger</code> to be moved higher up in the middleware stack, we are also creating an opportunity to have more realistic instrumentation and logs.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Issues references:</p>\n<ul dir=\"auto\">\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1369554829\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46003\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46003/hovercard\" href=\"https://github.com/rails/rails/issues/46003\">#46003</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1516609172\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46869\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46869/hovercard\" href=\"https://github.com/rails/rails/issues/46869\">#46869</a></li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49245",
            "title": "Move started_request_message into LogSubscriber",
            "date_modified": "2023-09-13T00:22:08.000Z",
            "date_published": "2023-09-12T22:18:50.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14993828?u=8ed3978d4be4f3a0ed1eb48dc0e5e039b5f885e7&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Looking for early feedback on notes</p>\n<p dir=\"auto\">Inspired by the <code class=\"notranslate\">rails/info/routes</code> route I am suggesting a <code class=\"notranslate\">rails/info/notes</code> internal route.</p>\n<p dir=\"auto\">This will be same as doing</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"$ bin/rails notes\n\napp/controllers/posts_controller.rb:\n  * [ 9] [TODO] Move this logic to a concern\n  * [18] [FIXME] Refactor this method\n\napp/models/post.rb:\n  * [ 2] [TODO] Refactor this validation\"><pre class=\"notranslate\">$ bin/rails notes\n\napp/controllers/posts_controller.rb:\n  <span class=\"pl-k\">*</span> [ 9] [TODO] Move this logic to a concern\n  <span class=\"pl-k\">*</span> [18] [FIXME] Refactor this method\n\napp/models/post.rb:\n  <span class=\"pl-k\">*</span> [ 2] [TODO] Refactor this validation</pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Adding an internal route for the <code class=\"notranslate\">bin/rails notes</code> so we can check the notes on UI.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\"><strong>Option 1:</strong></p>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/14993828/267357459-7bde94f3-629b-42b0-b85f-54826af9b553.png\"><img width=\"890\" alt=\"Screenshot 2023-09-12 at 19 40 07\" src=\"https://user-images.githubusercontent.com/14993828/267357459-7bde94f3-629b-42b0-b85f-54826af9b553.png\" style=\"max-width: 100%;\"></a>\n<p dir=\"auto\"><strong>Option 2:</strong></p>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/14993828/267356301-104e15cb-460b-403d-93d8-5dcfae02d991.png\"><img width=\"890\" alt=\"Screenshot 2023-09-12 at 19 36 03\" src=\"https://user-images.githubusercontent.com/14993828/267356301-104e15cb-460b-403d-93d8-5dcfae02d991.png\" style=\"max-width: 100%;\"></a>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49240",
            "title": "Add an internal route for bin/rails notes",
            "date_modified": "2023-09-12T14:16:36.000Z",
            "date_published": "2023-09-12T14:11:15.000Z",
            "author": {
                "name": "deepakmahakale",
                "url": "https://github.com/deepakmahakale"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/99586?u=b4abd791d83e768c72cb832147b4a210caecf47d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Because events are documented but not tested.</p>\n<p dir=\"auto\">(This is just a byproduct when I read the code.)</p>",
            "url": "https://github.com/rails/rails/pull/49237",
            "title": "Add tests for AJ events",
            "date_modified": "2023-09-12T10:34:12.000Z",
            "date_published": "2023-09-12T10:34:08.000Z",
            "author": {
                "name": "shouichi",
                "url": "https://github.com/shouichi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Ref <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1581201152\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47370\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47370/hovercard\" href=\"https://github.com/rails/rails/pull/47370\">#47370</a></p>",
            "url": "https://github.com/rails/rails/pull/49231",
            "title": "Backport #47370 to 7-0-stable",
            "date_modified": "2023-09-11T23:48:27.000Z",
            "date_published": "2023-09-11T23:48:23.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6373536?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because there have always been lots of complains about <code class=\"notranslate\">ActiveStorage::Current</code> not being set, especially in tests. While there are always suggestions like:</p>\n<ol dir=\"auto\">\n<li>set it in the test setup</li>\n<li>use Rails' <code class=\"notranslate\">url_for</code> instead of service urls</li>\n</ol>\n<p dir=\"auto\">there is <a href=\"https://github.com/rails/rails/issues/40855#issuecomment-1711683168\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/40855/hovercard\">another case</a> where the setting is being cleared because the way <code class=\"notranslate\">ActiveSupport::CurrentAttributes</code> work.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">ActiveStorage::Current</code> (thread-level config for the DiskService) for configs at the service level (<code class=\"notranslate\">config/storage.yml</code> or similar).</p>\n<p dir=\"auto\">Q: Is there any reason why it needs to be a thread-level config?</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">If the solution is accepted I can add more tests, a CHANGELOG entry, and we'll probably want to deprecate the old behavior rather than replacing it just like I did.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49226",
            "title": "Replace problematic `ActiveStorage::Current` for a service-level config",
            "date_modified": "2023-09-11T23:20:51.000Z",
            "date_published": "2023-09-11T20:44:59.000Z",
            "author": {
                "name": "santib",
                "url": "https://github.com/santib"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1297651?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Originally Rails::Paths::Root supported multiple directories simply by appenending them to it (path &lt;&lt; 'lib/something'), or a specific directory like:<br>\n<code class=\"notranslate\">path.add 'app/helpers', with: 'app/helpers', eager_load: true</code><br>\nwhich is the default for 'app/helpers'.</p>\n<p dir=\"auto\">As a complex app may has a complex directory layout, sometimes it's better to let add an array of directories, as the underlying Path object already supports it, and also Rails code, like: abstract_controller/helper.rb, def all_helpers_from_path</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">Rails::Paths::Root.add</code>.</p>\n<p dir=\"auto\">While the change is backward-compatible, it enables the full potential of the Path class:<br>\n<code class=\"notranslate\">path.add 'app/helpers', with: ['app/helpers', 'lib/helpers'], eager_load: true</code></p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49223",
            "title": "Rails::Paths::Root can contains multiple directories",
            "date_modified": "2023-09-12T06:48:04.000Z",
            "date_published": "2023-09-11T17:50:25.000Z",
            "author": {
                "name": "LA-Toth",
                "url": "https://github.com/LA-Toth"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">It returns true if the content type is \"application/pdf\".<br>\nSimilar to the existing <code class=\"notranslate\">audio?</code>, <code class=\"notranslate\">image?</code>, <code class=\"notranslate\">video?</code> and <code class=\"notranslate\">text?</code><br>\nmethods.</p>\n<p dir=\"auto\">We probably don't want to add methods for every content type,<br>\nbut pdf is pretty common and it's also used internally by Rails for<br>\nthe Previewers.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49217",
            "title": "Add `ActiveStorage::Blob#pdf?`",
            "date_modified": "2023-09-11T17:26:40.000Z",
            "date_published": "2023-09-11T12:08:55.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/7942714?u=ed2384a07edc1a042b5a01ccb1cfd2cb9f63442a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because when I called <code class=\"notranslate\">render_to_string(partial: 'foo')</code> in an API controller, I got back <code class=\"notranslate\">\" \"</code> whether or not the partial existed.</p>\n<p dir=\"auto\">It turns out that in API controllers, the <code class=\"notranslate\">partial</code> option on <code class=\"notranslate\">render</code> does nothing, so it's equivalent to calling <code class=\"notranslate\">render</code> with no arguments. I learned that in API controllers, calling <code class=\"notranslate\">render</code> with no arguments has the surprising response of 200 OK with a body of <code class=\"notranslate\">\" \"</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This change deprecates that surprising behavior and proposes that in the future, calling <code class=\"notranslate\">render</code> with no arguments in API controllers will raise an error.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I'm open to other approaches here! Just trying to help other developers avoid this head-scratching behavior. ðŸ˜…</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49212",
            "title": "Deprecate calling `render` with no arguments in API controllers",
            "date_modified": "2023-09-10T15:42:40.000Z",
            "date_published": "2023-09-10T01:05:59.000Z",
            "author": {
                "name": "nholden",
                "url": "https://github.com/nholden"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">ActiveStorage::Blob has methods for checking if it's an image, video, etc. In some case we might want to override the matchers or define our own matchers, for example to check if it's a PDF.</p>\n<p dir=\"auto\">Instead of adding new methods for every possible content type, we should make this configurable with<br>\n<code class=\"notranslate\">Rails.application.config.content_type_matchers</code>.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Rails.application.config.content_type_matchers[:pdf] = -&gt; (c) { c == &quot;application/pdf&quot; }\nblob = ActiveStorage::Blob.last\nblob.pdf? # =&gt; true\"><pre class=\"notranslate\"><span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">content_type_matchers</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:pdf</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">-&gt;</span> <span class=\"pl-kos\">(</span><span class=\"pl-s1\">c</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> <span class=\"pl-s1\">c</span> == <span class=\"pl-s\">\"application/pdf\"</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-s1\">blob</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">Blob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">last</span>\n<span class=\"pl-s1\">blob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">pdf?</span> <span class=\"pl-c\"># =&gt; true</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49198",
            "title": "Support custom content type matchers on ActiveStorage::Blob",
            "date_modified": "2023-09-08T09:54:42.000Z",
            "date_published": "2023-09-08T09:23:59.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Register a callable to decode rendered content for a given MIME type</p>\n<p dir=\"auto\">Each registered decoder will also define a <code class=\"notranslate\">#rendered_$MIME</code> helper method, where <code class=\"notranslate\">$MIME</code> corresponds to the value of the <code class=\"notranslate\">mime</code> argument.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\"><strong>Arguments</strong></p>\n<p dir=\"auto\"><code class=\"notranslate\">mime</code> - Symbol the MIME Type name for the rendered content <code class=\"notranslate\">callable</code> - Callable to decode the String. Accepts the String<br>\nvalue as its only argument<br>\n<code class=\"notranslate\">block</code> - Block serves as the decoder when the<br>\n<code class=\"notranslate\">callable</code> is omitted</p>\n<p dir=\"auto\">By default, ActionView::TestCase defines a decoder for:</p>\n<ul dir=\"auto\">\n<li>:html - returns an instance of Nokogiri::XML::Node</li>\n<li>:json - returns an instance of ActiveSupport::HashWithIndifferentAccess</li>\n</ul>\n<p dir=\"auto\">Each pre-registered decoder also defines a corresponding helper:</p>\n<ul dir=\"auto\">\n<li>:html - defines <code class=\"notranslate\">rendered_html</code></li>\n<li>:json - defines <code class=\"notranslate\">rendered_json</code></li>\n</ul>\n<p dir=\"auto\"><strong>Examples</strong></p>\n<p dir=\"auto\">To parse the rendered content into RSS, register a call to <code class=\"notranslate\">RSS::Parser.parse</code>:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"register_decoder :rss, -&gt; rendered { RSS::Parser.parse(rendered) }\n\ntest &quot;renders RSS&quot; do\n  article = Article.create!(title: &quot;Hello, world&quot;)\n\n  render formats: :rss, partial: article\n\n  assert_equal &quot;Hello, world&quot;, rendered_rss.items.last.title\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">register_decoder</span> <span class=\"pl-pds\">:rss</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">-&gt;</span> <span class=\"pl-s1\">rendered</span> <span class=\"pl-kos\">{</span> <span class=\"pl-c1\">RSS</span>::<span class=\"pl-v\">Parser</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">parse</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">rendered</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span>\n\n<span class=\"pl-en\">test</span> <span class=\"pl-s\">\"renders RSS\"</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-s1\">article</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Article</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"Hello, world\"</span><span class=\"pl-kos\">)</span>\n\n  <span class=\"pl-en\">render</span> <span class=\"pl-pds\">formats</span>: <span class=\"pl-pds\">:rss</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">partial</span>: <span class=\"pl-s1\">article</span>\n\n  <span class=\"pl-en\">assert_equal</span> <span class=\"pl-s\">\"Hello, world\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-en\">rendered_rss</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">items</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">last</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">title</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">To parse the rendered content into a Capybara::Simple::Node, re-register an <code class=\"notranslate\">:html</code> decoder with a call to<br>\n<code class=\"notranslate\">Capybara.string</code>:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"register_decoder :html, -&gt; rendered { Capybara.string(rendered) }\n\ntest &quot;renders HTML&quot; do\n  article = Article.create!(title: &quot;Hello, world&quot;)\n\n  render partial: article\n\n  rendered_html.assert_css &quot;h1&quot;, text: &quot;Hello, world&quot;\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">register_decoder</span> <span class=\"pl-pds\">:html</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">-&gt;</span> <span class=\"pl-s1\">rendered</span> <span class=\"pl-kos\">{</span> <span class=\"pl-v\">Capybara</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">string</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">rendered</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span>\n\n<span class=\"pl-en\">test</span> <span class=\"pl-s\">\"renders HTML\"</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-s1\">article</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Article</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"Hello, world\"</span><span class=\"pl-kos\">)</span>\n\n  <span class=\"pl-en\">render</span> <span class=\"pl-pds\">partial</span>: <span class=\"pl-s1\">article</span>\n\n  <span class=\"pl-en\">rendered_html</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">assert_css</span> <span class=\"pl-s\">\"h1\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">text</span>: <span class=\"pl-s\">\"Hello, world\"</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">For the sake of backwards compatibility, re-define existing support for <code class=\"notranslate\">document_root_element</code> in terms of <code class=\"notranslate\">rendered_html</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This proposal draws inspiration from <a href=\"https://github.com/rails/rails/blob/44bd6e7acaa91dd59c260beea6863a49b84f6039/actionpack/lib/action_dispatch/testing/request_encoder.rb\">ActionDispatch::Testing::RequestEncoder</a>, and the <code class=\"notranslate\">response.parsed_body</code> test method that it enables.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49194",
            "title": "Introduce `ActionView::TestCase.register_decoder`",
            "date_modified": "2023-09-11T18:46:03.000Z",
            "date_published": "2023-09-08T02:09:57.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">While the <code class=\"notranslate\">ActionView::TestCase</code> class isn't marked with a <code class=\"notranslate\">:nodoc:</code> comment to indicate that it's internal to Rails, there isn't much content in the guides that explains how to test view partials.</p>\n<p dir=\"auto\">Libraries like <a href=\"https://github.com/ViewComponent/view_component/\">view_component</a> have <a href=\"https://viewcomponent.org/guide/testing.html\" rel=\"nofollow\">built-in support for testing</a>, including Capybara integration.</p>\n<p dir=\"auto\">While <code class=\"notranslate\">ActionView::TestCase</code> already integrates with <code class=\"notranslate\">rails-dom-testing</code>, that integration could be better documented. Additionally, it wouldn't take much for consuming applications to mimic the ViewComponent testing experience for their Action View Partials.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">First, link to the \"Testing Rails Applications\" page from the <code class=\"notranslate\">ActionView::TestCase</code> class documentation.</p>\n<p dir=\"auto\">Next, add a \"Testing View Partials\" section to the guides that expands upon the variety of tooling available to tests that inherit from <code class=\"notranslate\">ActionView::TestCase</code>. In that section, cover topics like:</p>\n<ul dir=\"auto\">\n<li>the <code class=\"notranslate\">render</code> helper method</li>\n<li>the <code class=\"notranslate\">rendered</code> helper attribute reader</li>\n<li>calls to <code class=\"notranslate\">assert_select</code> with attribute placeholders</li>\n<li>the <code class=\"notranslate\">document_root_element</code> helper method</li>\n<li>integration with Ruby's Pattern Matching</li>\n<li>opportunities to integrate with Capybara</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Additionally, add test coverage that exercise the examples shared in the new section, including:</p>\n<ul dir=\"auto\">\n<li>Calls to <code class=\"notranslate\">assert_select</code> that utilize attribute placeholders</li>\n<li>Ruby 3.0's Pattern Matching</li>\n<li>Integration with Capybara</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49193",
            "title": "Add \"Testing View Partials\" section to the Testing Guides",
            "date_modified": "2023-09-11T18:40:51.000Z",
            "date_published": "2023-09-07T22:26:38.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/191320?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This allows a fuller feature set for managing and interacting with PostgreSQL extensions.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49189",
            "title": "Allow access to the full set of options when managing PostgreSQL extensions",
            "date_modified": "2023-09-07T20:10:12.000Z",
            "date_published": "2023-09-07T16:33:18.000Z",
            "author": {
                "name": "ccutrer",
                "url": "https://github.com/ccutrer"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/191320?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The docs already talk about how to set up deferrable constraints, but then rely on tthe user crafting custom SQL to actually use the feature. The helpers makes it easier to handle juggling multiple specific constraints, quoting issues, and automatically resetting to immediate if desired.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49187",
            "title": "Add `set_constraints` and `defer_constraints` helpers for PostgreSQL",
            "date_modified": "2023-09-08T13:11:39.000Z",
            "date_published": "2023-09-07T14:49:09.000Z",
            "author": {
                "name": "ccutrer",
                "url": "https://github.com/ccutrer"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14993828?u=8ed3978d4be4f3a0ed1eb48dc0e5e039b5f885e7&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">With <code class=\"notranslate\">create_table</code> and <code class=\"notranslate\">add_reference</code> supporting the <code class=\"notranslate\">index</code> option,<br>\nmost developers assume the <code class=\"notranslate\">index: true</code> should work with <code class=\"notranslate\">add_column</code> as well.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"create_table :users do |t|\n  t.string :email, index: { unique: true }\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:users</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">string</span> <span class=\"pl-pds\">:email</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">index</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">unique</span>: <span class=\"pl-c1\">true</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-k\">end</span></pre></div>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"add_reference(:orders, :user, index: true)\"><pre class=\"notranslate\"><span class=\"pl-en\">add_reference</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:orders</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:user</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">index</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">Which is not the case.</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/14993828/266300586-3cb6e797-a987-47df-a3d3-edf03e7015e5.png\"><img src=\"https://user-images.githubusercontent.com/14993828/266300586-3cb6e797-a987-47df-a3d3-edf03e7015e5.png\" alt=\"Screenshot 2023-09-07 at 16 51 33\" style=\"max-width: 100%;\"></a><br>\n<em>Screenshot of a discussion we had last month:</em></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This pull request adds support for the <code class=\"notranslate\">index</code> option on the <code class=\"notranslate\">add_column</code></p>\n<p dir=\"auto\"><strong>Before:</strong></p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class AddEmailAndPhoneNumberToUsers &lt; ActiveRecord::Migration[7.1]\n  def change\n    add_column :users, :email, :string\n    add_column :users, :phone_number, :string\n\n    add_index :users, :email, unique: true\n    add_index :users, :phone_number\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">AddEmailAndPhoneNumberToUsers</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Migration</span><span class=\"pl-kos\">[</span><span class=\"pl-c1\">7.1</span><span class=\"pl-kos\">]</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">change</span>\n    <span class=\"pl-en\">add_column</span> <span class=\"pl-pds\">:users</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:email</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:string</span>\n    <span class=\"pl-en\">add_column</span> <span class=\"pl-pds\">:users</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:phone_number</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:string</span>\n\n    <span class=\"pl-en\">add_index</span> <span class=\"pl-pds\">:users</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:email</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">unique</span>: <span class=\"pl-c1\">true</span>\n    <span class=\"pl-en\">add_index</span> <span class=\"pl-pds\">:users</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:phone_number</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\"><strong>After:</strong></p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class AddEmailAndPhoneNumberToUsers &lt; ActiveRecord::Migration[7.1]\n  def change\n    add_column :users, :email, :string, index: { unique: true }\n    add_column :users, :phone_number, :string, index: true\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">AddEmailAndPhoneNumberToUsers</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Migration</span><span class=\"pl-kos\">[</span><span class=\"pl-c1\">7.1</span><span class=\"pl-kos\">]</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">change</span>\n    <span class=\"pl-en\">add_column</span> <span class=\"pl-pds\">:users</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:email</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:string</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">index</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">unique</span>: <span class=\"pl-c1\">true</span> <span class=\"pl-kos\">}</span>\n    <span class=\"pl-en\">add_column</span> <span class=\"pl-pds\">:users</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:phone_number</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:string</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">index</span>: <span class=\"pl-c1\">true</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"                                           Table &quot;public.users&quot;\n    Column    |              Type              | Collation | Nullable |              Default\n--------------+--------------------------------+-----------+----------+-----------------------------------\n id           | bigint                         |           | not null | nextval('users_id_seq'::regclass)\n phone        | character varying              |           |          |\n created_at   | timestamp(6) without time zone |           | not null |\n updated_at   | timestamp(6) without time zone |           | not null |\n email        | character varying              |           |          |\n phone_number | character varying              |           |          |\nIndexes:\n    &quot;users_pkey&quot; PRIMARY KEY, btree (id)\n    &quot;index_users_on_email&quot; UNIQUE, btree (email)\n    &quot;index_users_on_phone_number&quot; btree (phone_number)\"><pre class=\"notranslate\">                                           Table <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>public.users<span class=\"pl-pds\">\"</span></span>\n    Column    |              Type              | Collation | Nullable |              Default\n<span class=\"pl-c\"><span class=\"pl-c\">--</span>------------+--------------------------------+-----------+----------+-----------------------------------</span>\n id           | <span class=\"pl-k\">bigint</span>                         |           | <span class=\"pl-k\">not null</span> | nextval(<span class=\"pl-s\"><span class=\"pl-pds\">'</span>users_id_seq<span class=\"pl-pds\">'</span></span>::regclass)\n phone        | character varying              |           |          |\n created_at   | <span class=\"pl-k\">timestamp</span>(<span class=\"pl-c1\">6</span>)<span class=\"pl-k\"> without time zone</span> |           | <span class=\"pl-k\">not null</span> |\n updated_at   | <span class=\"pl-k\">timestamp</span>(<span class=\"pl-c1\">6</span>)<span class=\"pl-k\"> without time zone</span> |           | <span class=\"pl-k\">not null</span> |\n email        | character varying              |           |          |\n phone_number | character varying              |           |          |\nIndexes:\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>users_pkey<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">PRIMARY KEY</span>, btree (id)\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>index_users_on_email<span class=\"pl-pds\">\"</span></span> UNIQUE, btree (email)\n    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>index_users_on_phone_number<span class=\"pl-pds\">\"</span></span> btree (phone_number)</pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49185",
            "title": "Add support for index option with add_column",
            "date_modified": "2023-09-09T16:44:10.000Z",
            "date_published": "2023-09-07T11:18:30.000Z",
            "author": {
                "name": "deepakmahakale",
                "url": "https://github.com/deepakmahakale"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/496367?u=e3a63a2f7db3bea0507f2a6bcc6650db58a96e6d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This is useful to configure multiple disk services for parallel testing without having to resort to something like <code class=\"notranslate\">ActiveStorage::Blob.services.send(:configurations).keys</code> to get this information.</p>",
            "url": "https://github.com/rails/rails/pull/49181",
            "title": "Expose Active Storage service names",
            "date_modified": "2023-09-06T21:44:15.000Z",
            "date_published": "2023-09-06T21:24:20.000Z",
            "author": {
                "name": "bdewater",
                "url": "https://github.com/bdewater"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22231095?u=fc75f9764434943effe06d6c1dc48d40a5003b0c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Follow-up <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1878736618\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49120\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49120/hovercard\" href=\"https://github.com/rails/rails/pull/49120\">#49120</a>, Also fixes the  empty string <code class=\"notranslate\">\"\"</code> case of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1213589208\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/44948\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/44948/hovercard\" href=\"https://github.com/rails/rails/issues/44948\">#44948</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">As per the discussion in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1878736618\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49120\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49120/hovercard?comment_id=1315644911&amp;comment_type=review_comment\" href=\"https://github.com/rails/rails/pull/49120#discussion_r1315644911\">#49120 (comment)</a>, finally decided to have validation for invalid HTML characters in <code class=\"notranslate\">content_tag</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Added validation for HTML tag names in the <code class=\"notranslate\">content_tag</code> method. The <code class=\"notranslate\">content_tag</code> method now checks that the provided tag name adheres to the HTML specification. If an invalid HTML tag name is provided, the method raises an <code class=\"notranslate\">ArgumentError</code> with an appropriate error message.</p>\n<p dir=\"auto\">Examples:<br>\nBefore:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"content_tag(&quot;12p&quot;) \n#  &quot;&lt;12p&gt;&lt;/12p&gt;&quot;\n\ncontent_tag(&quot;&quot;) \n# &quot;&lt;&gt;&lt;/&gt;&quot;\n\ncontent_tag(&quot;image file&quot;)\n#  &quot;&lt;image_file&gt;&lt;/image_file&gt;&quot;\"><pre class=\"notranslate\"><span class=\"pl-en\">content_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"12p\"</span><span class=\"pl-kos\">)</span> \n<span class=\"pl-c\">#  \"&lt;12p&gt;&lt;/12p&gt;\"</span>\n\n<span class=\"pl-en\">content_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"\"</span><span class=\"pl-kos\">)</span> \n<span class=\"pl-c\"># \"&lt;&gt;&lt;/&gt;\"</span>\n\n<span class=\"pl-en\">content_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"image file\"</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#  \"&lt;image_file&gt;&lt;/image_file&gt;\"</span></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Raises ArgumentError: Invalid HTML tag name: 12p\ncontent_tag(&quot;12p&quot;) # Starting with a number\n\n# Raises ArgumentError: Invalid HTML tag name:  \ncontent_tag(&quot;&quot;) # Empty tag name\n\n# Raises ArgumentError: Invalid HTML tag name: &quot;image file&quot;\ncontent_tag(&quot;image file&quot;) # Contains a space\"><pre class=\"notranslate\"><span class=\"pl-c\"># Raises ArgumentError: Invalid HTML tag name: 12p</span>\n<span class=\"pl-en\">content_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"12p\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># Starting with a number</span>\n\n<span class=\"pl-c\"># Raises ArgumentError: Invalid HTML tag name:  </span>\n<span class=\"pl-en\">content_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># Empty tag name</span>\n\n<span class=\"pl-c\"># Raises ArgumentError: Invalid HTML tag name: \"image file\"</span>\n<span class=\"pl-en\">content_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"image file\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># Contains a space</span></pre></div>\n<p dir=\"auto\">cc\\ <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49175",
            "title": "HTML tag validation added for content_tag",
            "date_modified": "2023-09-11T21:08:34.000Z",
            "date_published": "2023-09-06T19:22:45.000Z",
            "author": {
                "name": "akhilgkrishnan",
                "url": "https://github.com/akhilgkrishnan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/13851881?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This PR is a fix for this issue described and closed due to inactivity here <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"907682056\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/42336\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/42336/hovercard\" href=\"https://github.com/rails/rails/issues/42336\">#42336</a><br>\nIt still happens in apps with rails 7.0.7.2, ruby 3.2.2 and @rails/actioncable 7.0.4: when large number of events is sent via actioncable (in our case they are turbo broadcast messages) it prevents ping messages from coming in time (currently ping threshold is 6 seconds), so actioncable assumes connection as stale and creates a new one. However, during a downtime between closing/opening connections events could (and are) miss(ed).</p>\n<p dir=\"auto\">In this PR pings are also recorded on every normal message coming to the client.</p>\n<h3 dir=\"auto\">Expected behavior</h3>\n<p dir=\"auto\">Connection does not become stale and does not get reconnected when ping messages are delayed due to large number of normal messages.</p>\n<h3 dir=\"auto\">Actual behavior</h3>\n<p dir=\"auto\">The client is disconnected if it doesn't receive ping events within the staleThreshold even though it's receiving other events.</p>",
            "url": "https://github.com/rails/rails/pull/49168",
            "title": "Record ping on every actioncable message",
            "date_modified": "2023-09-07T07:38:39.000Z",
            "date_published": "2023-09-06T13:14:51.000Z",
            "author": {
                "name": "yauhenininjia",
                "url": "https://github.com/yauhenininjia"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/191128?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">As part of Active Record migrations, there are methods to create and drop PostgreSQL schemas.</p>\n<p dir=\"auto\">However, when you dump the schema for a database that uses the PostgreSQL schemas into the schema.rb file, there are not methods to create the schemas, so when you try to load this schema into a new database, a <code class=\"notranslate\">ActiveRecord::StatementInvalid: PG::InvalidSchemaName</code> can be raised.</p>\n<p dir=\"auto\">This PR adds <code class=\"notranslate\">create_schema</code> statements to the schema.rb file so that is can load schemas that use PostgreSQL schemas.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\">  Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49164",
            "title": "dump PostgreSQL schemas as part of the schema dump",
            "date_modified": "2023-09-06T21:37:30.000Z",
            "date_published": "2023-09-06T09:00:12.000Z",
            "author": {
                "name": "lsylvester",
                "url": "https://github.com/lsylvester"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/188464?u=a22a695eff61e658a728d3274adcc09f4b55c883&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Currently, if we call <code class=\"notranslate\">save</code> or <code class=\"notranslate\">save!</code> in an object that was already destroyed, <code class=\"notranslate\">save</code> returns <code class=\"notranslate\">false</code> and <code class=\"notranslate\">save!</code> raises an exception, but there's no information about why the save failed.</p>\n<p dir=\"auto\">I ran into this issue with a legacy app that, because of a complicated set of callbacks, was destroying an object at some point and then calling <code class=\"notranslate\">save!</code> somewhere else. This produced an exception, but there was no information about the reason.</p>\n<p dir=\"auto\">After a lot of research I realized that the issue was the record was destroyed (so <code class=\"notranslate\">.destroyed?</code> was <code class=\"notranslate\">true</code>), but I think it will help a lot to have an error added to avoid having to find this out.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR updates the <code class=\"notranslate\">create_or_update</code> method to add a <code class=\"notranslate\">:base</code> error message for this specific scenario.</p>\n<p dir=\"auto\">I added a configuration for this to keep the old behavior if needed and during upgrades, since I imagine some apps may rely on the errors hash being empty.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">No additional information.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49160",
            "title": "Add an error when saving a record that was previously destroyed",
            "date_modified": "2023-09-08T18:44:40.000Z",
            "date_published": "2023-09-05T18:40:38.000Z",
            "author": {
                "name": "arielj",
                "url": "https://github.com/arielj"
            }
        }
    ]
}