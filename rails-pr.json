{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/474442?u=d5b5e080bdb67e9d1402d3f2490398c4015555c1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because <code class=\"notranslate\">to_time</code> on TimeWithZone object does not preserve timezone information. This PR adds a config to preserve timezone information when calling <code class=\"notranslate\">to_time</code> on TimeWithZone object.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a new config value <code class=\"notranslate\">:zone</code> for <code class=\"notranslate\">ActiveSupport.to_time_preserves_timezone</code>. In addition, the existing <code class=\"notranslate\">true</code> value for <code class=\"notranslate\">ActiveSupport.to_time_preserves_timezone</code> has been changed to <code class=\"notranslate\">:offset</code> and preserves the previous behavior of using UTC offset.<br>\nWhen it's set to <code class=\"notranslate\">:zone</code>, <code class=\"notranslate\">to_time</code> will return a Time object with the same timezone as the TimeWithZone object.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">cc: <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/jhawthorn/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jhawthorn\">@jhawthorn</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52091",
            "title": "Add a config for preserving timezone information when calling `to_time` on TimeWithZone object",
            "date_modified": "2024-06-11T20:40:58.000Z",
            "date_published": "2024-06-11T19:09:34.000Z",
            "author": {
                "name": "jasonkim",
                "url": "https://github.com/jasonkim"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/10766?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">from \"unprocessable_entity\" to \"unprocessable_content\"</p>\n<p dir=\"auto\">This fixes the rack deprecation warning released recently in 3.1.0 version.</p>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2010260417\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rack/rack/issues/2137\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rack/rack/pull/2137/hovercard\" href=\"https://github.com/rack/rack/pull/2137\">rack/rack#2137</a></p>",
            "url": "https://github.com/rails/rails/pull/52087",
            "title": "Change mapping 422 response status",
            "date_modified": "2024-06-11T12:23:00.000Z",
            "date_published": "2024-06-11T09:38:02.000Z",
            "author": {
                "name": "morgoth",
                "url": "https://github.com/morgoth"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/987638?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This is a partial revert of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"783828193\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/41083\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/41083/hovercard\" href=\"https://github.com/rails/rails/pull/41083\">#41083</a>.</p>\n<p dir=\"auto\"><code class=\"notranslate\">puma.rb</code> may update by users, but  Rails has improved <code class=\"notranslate\">puma.rb</code> sometimes. For example, <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/06d614ada9e4609ff83659e842f48af3232a03a5/hovercard\" href=\"https://github.com/rails/rails/commit/06d614ada9e4609ff83659e842f48af3232a03a5\"><tt>06d614a</tt></a> and <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/f719787c582839fd2fcd886d70b43da3ddad2ceb/hovercard\" href=\"https://github.com/rails/rails/commit/f719787c582839fd2fcd886d70b43da3ddad2ceb\"><tt>f719787</tt></a>.</p>\n<p dir=\"auto\">To allow users to know those improvements, I think we should update <code class=\"notranslate\">puma.rb</code> by <code class=\"notranslate\">app:update</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52086",
            "title": "Bring back `puma.rb` to target of `app:update`",
            "date_modified": "2024-06-11T09:20:25.000Z",
            "date_published": "2024-06-11T07:08:15.000Z",
            "author": {
                "name": "y-yagi",
                "url": "https://github.com/y-yagi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/131752?u=32ddf1119b1d189c9bd241a721b36ea01c29f61e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">At one point (I believe ruby 1.9.2) Time could only represent values between 1970 and the integer overflow in 2038. On modern Ruby there does not seem to be a limit.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"&gt;&gt; Time.at(2**128)\n=&gt; 10783118943836478994022445751222-08-06 01:04:16 -0700\"><pre class=\"notranslate\"><code class=\"notranslate\">&gt;&gt; Time.at(2**128)\n=&gt; 10783118943836478994022445751222-08-06 01:04:16 -0700\n</code></pre></div>\n<p dir=\"auto\"><code class=\"notranslate\">TimeWithZone</code> will also convert a <code class=\"notranslate\">DateTime</code> to a <code class=\"notranslate\">Time</code> when initialized with one, so the code we had to catch this overflow and to deal with <code class=\"notranslate\">DateTime</code> is dead. This commit removes this code and adjusts the test to be more general (the old test passed but we might as well keep a better version of the test to check that we have a large both negative and positive range).</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ docker run -e 'ALL_RUBY_SINCE=ruby-1.8' --rm rubylang/all-ruby ./all-ruby -e 'puts Time.at(2**64)'\nruby-1.8.0            -e:1:in `at': bignum too big to convert into `int' (RangeError)\n                      \tfrom -e:1\n                  exit 1\nruby-1.8.1            -e:1:in `at': bignum too big to convert into `int' (RangeError)\n                      \tfrom -e:1\n                  exit 1\nruby-1.8.2-preview1   -e:1:in `at': bignum too big to convert into `long' (RangeError)\n                      \tfrom -e:1\n                  exit 1\n...\nruby-1.8.6-p420       -e:1:in `at': bignum too big to convert into `long' (RangeError)\n                      \tfrom -e:1\n                  exit 1\nruby-1.8.7-preview1   Thu Jan 01 00:00:00 +0000 1970\n...\nruby-1.8.7-p374       Thu Jan 01 00:00:00 +0000 1970\nruby-1.9.0-0          -e:1:in `at': bignum too big to convert into `long' (RangeError)\n                      \tfrom -e:1:in `&lt;main&gt;'\n                  exit 1\n...\nruby-1.9.1-p431       -e:1:in `at': bignum too big to convert into `long' (RangeError)\n                      \tfrom -e:1:in `&lt;main&gt;'\n                  exit 1\nruby-1.9.2-preview1   584554051223-11-09 07:00:16 +0000\n...\nruby-3.4.0-preview1   584554051223-11-09 07:00:16 +0000\"><pre class=\"notranslate\"><code class=\"notranslate\">$ docker run -e 'ALL_RUBY_SINCE=ruby-1.8' --rm rubylang/all-ruby ./all-ruby -e 'puts Time.at(2**64)'\nruby-1.8.0            -e:1:in `at': bignum too big to convert into `int' (RangeError)\n                      \tfrom -e:1\n                  exit 1\nruby-1.8.1            -e:1:in `at': bignum too big to convert into `int' (RangeError)\n                      \tfrom -e:1\n                  exit 1\nruby-1.8.2-preview1   -e:1:in `at': bignum too big to convert into `long' (RangeError)\n                      \tfrom -e:1\n                  exit 1\n...\nruby-1.8.6-p420       -e:1:in `at': bignum too big to convert into `long' (RangeError)\n                      \tfrom -e:1\n                  exit 1\nruby-1.8.7-preview1   Thu Jan 01 00:00:00 +0000 1970\n...\nruby-1.8.7-p374       Thu Jan 01 00:00:00 +0000 1970\nruby-1.9.0-0          -e:1:in `at': bignum too big to convert into `long' (RangeError)\n                      \tfrom -e:1:in `&lt;main&gt;'\n                  exit 1\n...\nruby-1.9.1-p431       -e:1:in `at': bignum too big to convert into `long' (RangeError)\n                      \tfrom -e:1:in `&lt;main&gt;'\n                  exit 1\nruby-1.9.2-preview1   584554051223-11-09 07:00:16 +0000\n...\nruby-3.4.0-preview1   584554051223-11-09 07:00:16 +0000\n</code></pre></div>",
            "url": "https://github.com/rails/rails/pull/52084",
            "title": "Remove dead code for DateTime-backed TimeWithZone",
            "date_modified": "2024-06-11T00:38:24.000Z",
            "date_published": "2024-06-11T00:38:12.000Z",
            "author": {
                "name": "jhawthorn",
                "url": "https://github.com/jhawthorn"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/743879?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1756699023\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48471\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48471/hovercard\" href=\"https://github.com/rails/rails/pull/48471\">#48471</a> made a simple change for local environments: renamed the file where <code class=\"notranslate\">secret_key_base</code> is read from <code class=\"notranslate\">txt/development_secret.txt</code> to <code class=\"notranslate\">txt/local_secret.txt</code></p>\n<p dir=\"auto\">However, this actually represents a breaking change from Rails 7.0 to Rails 7.1 for these environments, and it's not documented in the upgrade guides, which this pull request address.</p>\n<p dir=\"auto\">The change causes:</p>\n<ul dir=\"auto\">\n<li><strong>All sessions/cookies are now invalid, development environment is logged out;</strong></li>\n<li><strong>All previous ActiveStorage URLs are invalid, which also affect the persisted ones in ActionText;</strong></li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">As the file's location changed, as soon as we boot the app for the first time in Rails 7.1 (from Rails 7.0), <code class=\"notranslate\">Rails.application.secret_key_base</code>'s code will generate a brand new secret and store it in <code class=\"notranslate\">txt/local_secret.txt</code>:</p>\n<p dir=\"auto\"></p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/51f81267f8e2769d847cc563967feffefe6e2beb/railties/lib/rails/application.rb#L640-L655\">rails/railties/lib/rails/application.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 640 to 655\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/51f81267f8e2769d847cc563967feffefe6e2beb\">51f8126</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L640\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"640\"></td>\n          <td id=\"LC640\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">generate_local_secret</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L641\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"641\"></td>\n          <td id=\"LC641\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">if</span> <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">secret_key_base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">nil?</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L642\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"642\"></td>\n          <td id=\"LC642\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-s1\">key_file</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">root</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">join</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"tmp/local_secret.txt\"</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L643\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"643\"></td>\n          <td id=\"LC643\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L644\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"644\"></td>\n          <td id=\"LC644\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">if</span> <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">exist?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key_file</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L645\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"645\"></td>\n          <td id=\"LC645\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">secret_key_base</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">binread</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key_file</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L646\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"646\"></td>\n          <td id=\"LC646\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">else</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L647\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"647\"></td>\n          <td id=\"LC647\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-s1\">random_key</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">SecureRandom</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">hex</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">64</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L648\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"648\"></td>\n          <td id=\"LC648\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-v\">FileUtils</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">mkdir_p</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key_file</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">dirname</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L649\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"649\"></td>\n          <td id=\"LC649\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">binwrite</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key_file</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">random_key</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L650\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"650\"></td>\n          <td id=\"LC650\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">       <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">secret_key_base</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">File</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">binread</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">key_file</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L651\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"651\"></td>\n          <td id=\"LC651\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L652\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"652\"></td>\n          <td id=\"LC652\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L653\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"653\"></td>\n          <td id=\"LC653\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L654\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"654\"></td>\n          <td id=\"LC654\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">secret_key_base</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L655\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"655\"></td>\n          <td id=\"LC655\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">Since this happens out of sight and with no logging, anyone upgrading their apps will then be faced with:</p>\n<ul dir=\"auto\">\n<li><strong>All sessions/cookies are now invalid, development environment is logged out;</strong></li>\n<li><strong>All previous ActiveStorage URLs are invalid, which also affect the persisted ones in ActionText;</strong></li>\n</ul>\n<p dir=\"auto\">The implications are serious and will prompt any developer upgrading to understand what's going on, which ensues a non-trivial debug session which will end up, at least for me, manually decrypting cookies strings to figure out what's going on.</p>\n<p dir=\"auto\">This is compounded by the fact that <a href=\"https://guides.rubyonrails.org/upgrading_ruby_on_rails.html#key-generator-digest-class-change-requires-a-cookie-rotator\" rel=\"nofollow\">the upgrade from Rails 6.1 to Rails 7.0 involved a change in the key generator digest</a>, which caused the exact two problems listed above (invalid sessions/broken activestorage urls) unless a key rotator was installed; so the developer probably <em>will</em> not ignore these issues and try to figure out what's going wrong.</p>\n<p dir=\"auto\">After discovering the issue I also stumbled upon <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2107890298\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50925\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50925/hovercard\" href=\"https://github.com/rails/rails/issues/50925\">#50925</a>, which documents this very problem in an issue, showing this <em>has</em> been biting people.</p>",
            "url": "https://github.com/rails/rails/pull/52083",
            "title": "[ci-skip] Update the upgrade guides for Rails 7.1 regarding the breaking change of the location of secret_key_base in development/test environments",
            "date_modified": "2024-06-10T23:44:25.000Z",
            "date_published": "2024-06-10T23:44:20.000Z",
            "author": {
                "name": "feliperaul",
                "url": "https://github.com/feliperaul"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52074.\">Fixes</span>  <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2343095558\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52074\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52074/hovercard\" href=\"https://github.com/rails/rails/issues/52074\">#52074</a>.</p>\n<p dir=\"auto\">Previously, when the record was created with an enum value not in the list and then retrieved from the database, it had <code class=\"notranslate\">nil</code> as the enum's value. Now, it will have the actual value.</p>\n<p dir=\"auto\">I am not sure if this will be expected for users or not. But other methods in the <code class=\"notranslate\">EnumType</code> class seems like doing similar things, like, for example, storing the original value if there is no a match in the enum definition. </p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/0733ab511877d6b61932615ca7d51b069fbe5cb3/activerecord/lib/active_record/enum.rb#L180-L200\">rails/activerecord/lib/active_record/enum.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 180 to 200\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/0733ab511877d6b61932615ca7d51b069fbe5cb3\">0733ab5</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L180\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"180\"></td>\n          <td id=\"LC180\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">cast</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L181\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"181\"></td>\n          <td id=\"LC181\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">if</span> <span class=\"pl-en\">mapping</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">has_key?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L182\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"182\"></td>\n          <td id=\"LC182\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-s1\">value</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_s</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L183\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"183\"></td>\n          <td id=\"LC183\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">elsif</span> <span class=\"pl-en\">mapping</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">has_value?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L184\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"184\"></td>\n          <td id=\"LC184\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-en\">mapping</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">key</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L185\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"185\"></td>\n          <td id=\"LC185\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">else</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L186\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"186\"></td>\n          <td id=\"LC186\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-s1\">value</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">presence</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L187\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"187\"></td>\n          <td id=\"LC187\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L188\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"188\"></td>\n          <td id=\"LC188\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L189\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"189\"></td>\n          <td id=\"LC189\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L190\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"190\"></td>\n          <td id=\"LC190\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">deserialize</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L191\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"191\"></td>\n          <td id=\"LC191\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">mapping</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">key</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">subtype</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">deserialize</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L192\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"192\"></td>\n          <td id=\"LC192\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L193\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"193\"></td>\n          <td id=\"LC193\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L194\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"194\"></td>\n          <td id=\"LC194\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">serialize</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L195\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"195\"></td>\n          <td id=\"LC195\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">subtype</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">serialize</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">mapping</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fetch</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">value</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L196\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"196\"></td>\n          <td id=\"LC196\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L197\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"197\"></td>\n          <td id=\"LC197\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L198\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"198\"></td>\n          <td id=\"LC198\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">serializable?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">,</span> &amp;<span class=\"pl-s1\">block</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L199\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"199\"></td>\n          <td id=\"LC199\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">subtype</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">serializable?</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">mapping</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fetch</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">value</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">value</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span> &amp;<span class=\"pl-s1\">block</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L200\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"200\"></td>\n          <td id=\"LC200\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>",
            "url": "https://github.com/rails/rails/pull/52078",
            "title": "Fix creating records without partial inserts and enum with database default not in the definition",
            "date_modified": "2024-06-10T11:08:31.000Z",
            "date_published": "2024-06-10T11:08:27.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/53313927?u=5d783b260641251696757911bd0714cc8e90456f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created to reflect on Enumerable the suggestion opened on ActiveRecord <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2284378838\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51761\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51761/hovercard\" href=\"https://github.com/rails/rails/pull/51761\">#51761</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Without specify option\n[ Person.find(5), Person.find(3), Person.find(1) ].in_order_of(:id, [ 1, 5 ])\n# =&gt; [ Person.find(1), Person.find(5) ]\n\n# With option setted to false\n[ Person.find(5), Person.find(3), Person.find(1) ].in_order_of(:id, [ 1, 5 ], filter: false)\n# =&gt; [ Person.find(1), Person.find(5), Person.find(3) ]\"><pre class=\"notranslate\"><span class=\"pl-c\"># Without specify option</span>\n<span class=\"pl-kos\">[</span> <span class=\"pl-v\">Person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">5</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span> <span class=\"pl-v\">Person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">3</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span> <span class=\"pl-v\">Person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">in_order_of</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:id</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">[</span> <span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">5</span> <span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\"># =&gt; [ Person.find(1), Person.find(5) ]</span>\n\n<span class=\"pl-c\"># With option setted to false</span>\n<span class=\"pl-kos\">[</span> <span class=\"pl-v\">Person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">5</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span> <span class=\"pl-v\">Person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">3</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span> <span class=\"pl-v\">Person</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">in_order_of</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:id</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">[</span> <span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">5</span> <span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">filter</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\"># =&gt; [ Person.find(1), Person.find(5), Person.find(3) ]</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52072",
            "title": "[ActiveSupport] Add option `filter` on `in_order_of`",
            "date_modified": "2024-06-10T00:26:33.000Z",
            "date_published": "2024-06-10T00:24:26.000Z",
            "author": {
                "name": "igordepolli",
                "url": "https://github.com/igordepolli"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/25400144?u=3ec6854deffaf90c34ee2d55607075164ccfe120&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">When a new Rails app was initialized, there is a redundant database package in the test section in the <code class=\"notranslate\">.github/workflows/ci.yml</code> file.</p>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/25400144/337989779-7d5e03e3-e8f7-4b82-a070-4b2dd65c2104.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTgxMzk5OTQsIm5iZiI6MTcxODEzOTY5NCwicGF0aCI6Ii8yNTQwMDE0NC8zMzc5ODk3NzktN2Q1ZTAzZTMtZThmNy00YjgyLWEwNzAtNGIyZGQ2NWMyMTA0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA2MTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNjExVDIxMDEzNFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWZlODRkZGExMDgzM2EyN2Q5YmQ0MThjNjgzN2RlNjQwNjM3NzA0MmNlM2ExYTA1NzM2OTNiNTU1Y2JlNmQ5YjQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.wWB9MtsrmXwMpIeLMf_keIctfJfcSW0Y5ieV6sVAxqY\"><img width=\"1413\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/25400144/337989779-7d5e03e3-e8f7-4b82-a070-4b2dd65c2104.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTgxMzk5OTQsIm5iZiI6MTcxODEzOTY5NCwicGF0aCI6Ii8yNTQwMDE0NC8zMzc5ODk3NzktN2Q1ZTAzZTMtZThmNy00YjgyLWEwNzAtNGIyZGQ2NWMyMTA0LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA2MTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNjExVDIxMDEzNFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWZlODRkZGExMDgzM2EyN2Q5YmQ0MThjNjgzN2RlNjQwNjM3NzA0MmNlM2ExYTA1NzM2OTNiNTU1Y2JlNmQ5YjQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.wWB9MtsrmXwMpIeLMf_keIctfJfcSW0Y5ieV6sVAxqY\" style=\"max-width: 100%;\"></a>\n<p dir=\"auto\">I found that the reason is that <code class=\"notranslate\">database.base_package</code> has been added in <code class=\"notranslate\">dockerfile_base_packages</code> (if not skipping ActiveRecord), because of this, the append in <code class=\"notranslate\">ci.yml</code> is unnecessary.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52069",
            "title": "remove redundant database package from ci.yml.tt template",
            "date_modified": "2024-06-11T12:53:41.000Z",
            "date_published": "2024-06-09T16:10:57.000Z",
            "author": {
                "name": "otorain",
                "url": "https://github.com/otorain"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/743879?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The documentation on <code class=\"notranslate\">ActiveSupport::MessageVerifier</code> uses “sensitive data” string as an example of a message to sign/verify; that wording might induce the developer to think we’re dealing with encryption, while the payload is actually only Base64 encoded so it's actually cleartext and can be decoded by anyone.</p>\n<p dir=\"auto\">Actually, the fact that the signed string is base64 encoded and that the <code class=\"notranslate\">MessageVerifier</code> works with \"keys\" (the current docs even state about Key Rotation) might further cause the wrong impression in the developer that there's some encryption going on, whilst there is absolutely none.</p>\n<p dir=\"auto\">We add a reference to <code class=\"notranslate\">MessageEncryptor</code> to let the developer knows that, if he needs the payload to be encrypted, Rails already has that taken care of.</p>\n<p dir=\"auto\">Finally, we also improve the documentation on <code class=\"notranslate\">ActiveRecord::SignedId</code>, which uses <code class=\"notranslate\">MessageVerifier</code> and thereby will also expose the ID as encoded cleartext; we make it explicit that it’s not encryption, only signing, so the ID, albeit tamper proof, will be able to be read in cleartext by anyone.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">While working on this, I felt the desire to have <code class=\"notranslate\">ActiveRecord::EncryptedId</code>.</p>\n<p dir=\"auto\">It would behave just like <code class=\"notranslate\">ActiveRecord::SignedId</code> does, but it would use <code class=\"notranslate\">MessageEncryptor</code> instead of <code class=\"notranslate\">MessageVerifier</code>, so that the IDs would never be exposed.</p>\n<p dir=\"auto\">The API would respect the parity, so we would have <code class=\"notranslate\">user.encrypted_id</code> and <code class=\"notranslate\">User.find_encrypted(encrypted_id)</code>.</p>\n<p dir=\"auto\">I recently opened issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2341850532\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52063\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52063/hovercard\" href=\"https://github.com/rails/rails/issues/52063\">#52063</a> to discuss the last missing piece that I would use to implement <code class=\"notranslate\">ActiveRecord::EncryptedId</code>; I know this PR is just regarding documentation, but if any members could indicate if a PR for <code class=\"notranslate\">ActiveRecord::EncryptedId</code> had a chance of being accepted I would start working on it as soon as I could spare the time.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li>[ x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52064",
            "title": "[ci skip] Improve ActiveSupport::MessageVerifier and ActiveRecord::SignedId docs",
            "date_modified": "2024-06-09T10:59:38.000Z",
            "date_published": "2024-06-08T23:00:27.000Z",
            "author": {
                "name": "feliperaul",
                "url": "https://github.com/feliperaul"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The <a href=\"https://github.com/rails/rails/commit/0c76f17f2dbf0d7ad90c890e6f334743cacce41f\">deprecated secrets removal</a> ended up removing a bit of non-deprecated functionality related to config.secret_key_base:</p>\n<ul dir=\"auto\">\n<li>the original implementation prioritized the value of config.secret_key_base over other sources in all environments</li>\n<li>if unset, the value of config.secret_key_base would be updated to whichever fallback value was found</li>\n</ul>\n<p dir=\"auto\">The new implementation only sets config.secret_key_base to a fallback value when Rails.env.local?, and never considers it at all in production.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit aims to restore this missing functionality as well as simplify the implementation:</p>\n<ul dir=\"auto\">\n<li>Rails.application.secret_key_base now always delegates to config.secret_key_base (like the pre-secret-removal implementation)</li>\n<li>secret_key_base validation was moved from the reader to the writer</li>\n<li>config.secret_key_base now handles setting itself to a fallback value when unset</li>\n<li>In addition, generate_local_secret was simplified because it previously did 3 things: file manipulation, setting config.secret_key_base, and returning a value. Now it only creates the file if necessary and returns the value stored in it</li>\n</ul>\n<p dir=\"auto\">The new implementation has an additional benefit, which is that manually set config.secret_key_base values are now validated, whereas previously only fallback values were validated.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Add it back with a test</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52062",
            "title": "Restore some config.secret_key_base functionality",
            "date_modified": "2024-06-11T03:05:57.000Z",
            "date_published": "2024-06-08T15:00:53.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/12777550?u=415303ec1c626279c440cf729435fc0ee833d1c9&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51817.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2295142022\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51817\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51817/hovercard\" href=\"https://github.com/rails/rails/issues/51817\">#51817</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Currently, Rails doesn't have a mechanism to allow the main record to efficiently access its <code class=\"notranslate\">has_one :through</code> associations via the middle record.</p>\n<p dir=\"auto\">When we define a <code class=\"notranslate\">has_one :through</code> association, Rails creates a <code class=\"notranslate\">HasOneThroughAssociation</code> object within that record. Like all other Association objects, <code class=\"notranslate\">HasOneThroughAssociation</code> works independently and doesn't check the loading status of other associations. If it doesn't find the record within the object itself, it simply queries the database. And this triggers an additional query even when all associated records are preloaded.</p>\n<p dir=\"auto\">On top of that, making another query for an already loaded association results in having two identical records in memory. This can confuse developers about which record is the single source of truth. When one record is updated, the other remains unchanged. Here is an example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"member.membership.club.name = 'New Club'\n\nmember.membership.club.name # =&gt; 'New Club'\nmember.club.name            # =&gt; 'Old Club'\"><pre class=\"notranslate\"><span class=\"pl-en\">member</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">membership</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">club</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'New Club'</span>\n\n<span class=\"pl-en\">member</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">membership</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">club</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span> <span class=\"pl-c\"># =&gt; 'New Club'</span>\n<span class=\"pl-en\">member</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">club</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span>            <span class=\"pl-c\"># =&gt; 'Old Club'</span></pre></div>\n<p dir=\"auto\">The changes prevent the additional query and ensure there is a single source of truth.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I tried to apply the same approach to the <code class=\"notranslate\">has_many :through</code> association, but it is not as straightforward as the <code class=\"notranslate\">has_one :through</code> association. All the final records are stored in each middle record's association object. So, we need to find a better way to implement this. I will look into this more and create another PR if I find a solution.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52060",
            "title": "[Fix #51817] Allow a preloaded association to be accessed without querying the database",
            "date_modified": "2024-06-08T13:02:16.000Z",
            "date_published": "2024-06-08T11:11:29.000Z",
            "author": {
                "name": "Jay0921",
                "url": "https://github.com/Jay0921"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52051.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2341068288\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52051\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52051/hovercard\" href=\"https://github.com/rails/rails/issues/52051\">#52051</a> (see there for a problem description and lengthy discussion).</p>",
            "url": "https://github.com/rails/rails/pull/52059",
            "title": "Explicitly load Active Record associations related errors",
            "date_modified": "2024-06-08T11:37:58.000Z",
            "date_published": "2024-06-08T09:57:04.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14007?u=7d74620cf38d2057b13e9cbb7ee8c6ae35c1d019&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52000.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2330195177\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52000\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52000/hovercard\" href=\"https://github.com/rails/rails/issues/52000\">#52000</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52054",
            "title": "Document TestFixtures#fixture",
            "date_modified": "2024-06-09T21:59:34.000Z",
            "date_published": "2024-06-08T02:38:32.000Z",
            "author": {
                "name": "justinko",
                "url": "https://github.com/justinko"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/83998?u=8bb33de7a19d113d9f589689f6d15bb622b132bd&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">There are many cases when using double quotes is necessary to properly identify type &amp; column names in PostgreSQL. This PR aims to address one subset of cases relating to Rails's support of PG Enums in <code class=\"notranslate\">schema.rb</code>.</p>\n<p dir=\"auto\">As it stands, PG Enums that require quote identifiers can be successfully created with the migration DSL, but these type names do not currently survive the round-trip to <code class=\"notranslate\">schema.rb</code>, breaking subsequent <code class=\"notranslate\">schema:load</code> calls.</p>\n<p dir=\"auto\">(If this change is accepted, I have additional cases I would propose in follow-up PRs, but I am focusing on one change at a time.)</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Note that I'm using <code class=\"notranslate\">.</code> here as an example, but there are other reasons why quote identifiers can be necessary, including case sensitivity.</p>\n<h4 dir=\"auto\">Before:</h4>\n<p dir=\"auto\"><em>Without</em> this PR's changes, the following migration:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"create_enum '&quot;my.status&quot;', %w[complete in_progress]\ncreate_table :things do |t|\n  t.enum :status, enum_type: '&quot;my.status&quot;', default: &quot;in_progress&quot;, null: false\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">create_enum</span> <span class=\"pl-s\">'\"my.status\"'</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">%w[</span><span class=\"pl-s\">complete</span> <span class=\"pl-s\">in_progress</span><span class=\"pl-kos\">]</span>\n<span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:things</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">enum</span> <span class=\"pl-pds\">:status</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">enum_type</span>: <span class=\"pl-s\">'\"my.status\"'</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-s\">\"in_progress\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Produces the following in the <code class=\"notranslate\">schema.rb</code> file:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"create_enum &quot;my.status&quot;, [&quot;complete&quot;, &quot;in_progress&quot;]\n\ncreate_table &quot;things&quot;, force: :cascade do |t|\n  t.enum &quot;status&quot;, default: &quot;in_progress&quot;, null: false, enum_type: &quot;&quot;my.status&quot;&quot;\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">create_enum</span> <span class=\"pl-s\">\"my.status\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">[</span><span class=\"pl-s\">\"complete\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"in_progress\"</span><span class=\"pl-kos\">]</span>\n\n<span class=\"pl-en\">create_table</span> <span class=\"pl-s\">\"things\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-pds\">:cascade</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">enum</span> <span class=\"pl-s\">\"status\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-s\">\"in_progress\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">enum_type</span>: <span class=\"pl-s\">\"\"</span><span class=\"pl-en\">my</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">status</span><span class=\"pl-s\">\"\"</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">🐛 Both the <code class=\"notranslate\">create_enum</code> statement and the <code class=\"notranslate\">:enum_type</code> option do not function as expected. The former produces a <code class=\"notranslate\">PG::InvalidSchemaName</code> error (because it assumes <code class=\"notranslate\">my.</code> is a PG schema), and the latter is not even valid Ruby.</p>\n<h4 dir=\"auto\">After:</h4>\n<p dir=\"auto\"><em>With</em> this PR's changes, <code class=\"notranslate\">schema.rb</code> contains the following:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"create_enum &quot;\\&quot;my.status\\&quot;&quot;, [&quot;complete&quot;, &quot;in_progress&quot;]\n\ncreate_table &quot;things&quot;, force: :cascade do |t|\n  t.enum &quot;status&quot;, default: &quot;in_progress&quot;, null: false, enum_type: &quot;\\&quot;my.status\\&quot;&quot;\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">create_enum</span> <span class=\"pl-s\">\"<span class=\"pl-cce\">\\\"</span>my.status<span class=\"pl-cce\">\\\"</span>\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">[</span><span class=\"pl-s\">\"complete\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"in_progress\"</span><span class=\"pl-kos\">]</span>\n\n<span class=\"pl-en\">create_table</span> <span class=\"pl-s\">\"things\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-pds\">:cascade</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">enum</span> <span class=\"pl-s\">\"status\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-s\">\"in_progress\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">enum_type</span>: <span class=\"pl-s\">\"<span class=\"pl-cce\">\\\"</span>my.status<span class=\"pl-cce\">\\\"</span>\"</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">This should resolve cases where quote identifiers are necessary, without impacting cases where they are not <em>strictly</em> necessary.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52049",
            "title": "[ActiveRecord] Support PG enums with names that require quote-ident",
            "date_modified": "2024-06-10T16:33:11.000Z",
            "date_published": "2024-06-07T19:03:28.000Z",
            "author": {
                "name": "smudge",
                "url": "https://github.com/smudge"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This commit aims to clarify the types of arguments mentioned by the Association Callback documentation. In some cases, <code class=\"notranslate\">firm</code> arguments implied the object was a <code class=\"notranslate\">Firm</code>, but <code class=\"notranslate\">record</code> arguments did not imply any particular class.</p>\n<p dir=\"auto\">Similarly, the <code class=\"notranslate\">has_many</code> method documentation did not mention any of the Association Callback arguments (i.e. <code class=\"notranslate\">before_add</code>, <code class=\"notranslate\">after_add</code>, <code class=\"notranslate\">before_remove</code>, <code class=\"notranslate\">after_remove</code>). This commit includes those options in the list and links to the more thorough documentation under the Association Callbacks heading.</p>",
            "url": "https://github.com/rails/rails/pull/52047",
            "title": "Improve Active Record Association Callbacks docs [ci skip]",
            "date_modified": "2024-06-08T11:23:52.000Z",
            "date_published": "2024-06-07T17:51:03.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Based off the IRB tests: <a href=\"https://github.com/ruby/irb/blob/master/test/irb/helper.rb#L112-L120\">https://github.com/ruby/irb/blob/master/test/irb/helper.rb#L112-L120</a></p>\n<p dir=\"auto\">For example if you add this to your <code class=\"notranslate\">~/.irbrc</code>:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"IRB.conf[:PROMPT_MODE] = :SIMPLE\"><pre class=\"notranslate\"><code class=\"notranslate\">IRB.conf[:PROMPT_MODE] = :SIMPLE\n</code></pre></div>\n<p dir=\"auto\">This will result in the following test failures:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"F\n\nFailure:\nFullStackConsoleTest#test_prompt_allows_changing_irb_name [test/application/console_test.rb:32]:\n&quot;foo(test)&gt;&quot; expected, but got:\n\n&gt;&gt; a = 1\na = 1\n=&gt; ...\n&gt;&gt; .\nExpected &quot;&gt;&gt; a = 1\\r\\r\\na = 1\\r\\n=&gt; ...\\r\\n&gt;&gt; &quot; to include &quot;foo(test)&gt;&quot;.\n\nbin/test test/application/console_test.rb:120\n\n.............F\n\nFailure:\nFullStackConsoleTest#test_test_console_prompt [test/application/console_test.rb:32]:\n&quot;app-template(test)&gt; &quot; expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected &quot;\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; &quot; to include &quot;app-template(test)&gt; &quot;.\n\nbin/test test/application/console_test.rb:152\n\n...F\n\nFailure:\nFullStackConsoleTest#test_prompt_is_properly_set [test/application/console_test.rb:32]:\n&quot;app-template(test)&gt;&quot; expected, but got:\n\n&gt;&gt; a = 1\na = 1\n=&gt; ...\n&gt;&gt; .\nExpected &quot;&gt;&gt; a = 1\\r\\r\\na = 1\\r\\n=&gt; ...\\r\\n&gt;&gt; &quot; to include &quot;app-template(test)&gt;&quot;.\n\nbin/test test/application/console_test.rb:113\n\nF\n\nFailure:\nFullStackConsoleTest#test_production_console_prompt [test/application/console_test.rb:32]:\n&quot;app-template(prod)&gt;&quot; expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected &quot;\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; &quot; to include &quot;app-template(prod)&gt;&quot;.\n\nbin/test test/application/console_test.rb:138\n\n...F\n\nFailure:\nFullStackConsoleTest#test_development_console_prompt [test/application/console_test.rb:32]:\n&quot;app-template(dev)&gt; &quot; expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected &quot;\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; &quot; to include &quot;app-template(dev)&gt; &quot;.\n\nbin/test test/application/console_test.rb:145\n\nFinished in 137.655994s, 0.1743 runs/s, 1.8815 assertions/s.\n24 runs, 259 assertions, 5 failures, 0 errors, 0 skips\"><pre class=\"notranslate\"><code class=\"notranslate\">F\n\nFailure:\nFullStackConsoleTest#test_prompt_allows_changing_irb_name [test/application/console_test.rb:32]:\n\"foo(test)&gt;\" expected, but got:\n\n&gt;&gt; a = 1\na = 1\n=&gt; ...\n&gt;&gt; .\nExpected \"&gt;&gt; a = 1\\r\\r\\na = 1\\r\\n=&gt; ...\\r\\n&gt;&gt; \" to include \"foo(test)&gt;\".\n\nbin/test test/application/console_test.rb:120\n\n.............F\n\nFailure:\nFullStackConsoleTest#test_test_console_prompt [test/application/console_test.rb:32]:\n\"app-template(test)&gt; \" expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected \"\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; \" to include \"app-template(test)&gt; \".\n\nbin/test test/application/console_test.rb:152\n\n...F\n\nFailure:\nFullStackConsoleTest#test_prompt_is_properly_set [test/application/console_test.rb:32]:\n\"app-template(test)&gt;\" expected, but got:\n\n&gt;&gt; a = 1\na = 1\n=&gt; ...\n&gt;&gt; .\nExpected \"&gt;&gt; a = 1\\r\\r\\na = 1\\r\\n=&gt; ...\\r\\n&gt;&gt; \" to include \"app-template(test)&gt;\".\n\nbin/test test/application/console_test.rb:113\n\nF\n\nFailure:\nFullStackConsoleTest#test_production_console_prompt [test/application/console_test.rb:32]:\n\"app-template(prod)&gt;\" expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected \"\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; \" to include \"app-template(prod)&gt;\".\n\nbin/test test/application/console_test.rb:138\n\n...F\n\nFailure:\nFullStackConsoleTest#test_development_console_prompt [test/application/console_test.rb:32]:\n\"app-template(dev)&gt; \" expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected \"\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; \" to include \"app-template(dev)&gt; \".\n\nbin/test test/application/console_test.rb:145\n\nFinished in 137.655994s, 0.1743 runs/s, 1.8815 assertions/s.\n24 runs, 259 assertions, 5 failures, 0 errors, 0 skips\n</code></pre></div>",
            "url": "https://github.com/rails/rails/pull/52045",
            "title": "Avoid running console tests against users IRB config",
            "date_modified": "2024-06-08T10:48:48.000Z",
            "date_published": "2024-06-07T11:21:08.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This PR replaces <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2335914495\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52026\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52026/hovercard\" href=\"https://github.com/rails/rails/pull/52026\">#52026</a> by fixing the <code class=\"notranslate\">caller_locations</code>.</p>\n<p dir=\"auto\">Before:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"(called from include at /home/wojtek/.asdf/installs/ruby/3.3.2/lib/ruby/gems/3.3.0/gems/railties-7.2.0.beta2/lib/rails/console/methods.rb:6)\"><pre class=\"notranslate\"><code class=\"notranslate\">(called from include at /home/wojtek/.asdf/installs/ruby/3.3.2/lib/ruby/gems/3.3.0/gems/railties-7.2.0.beta2/lib/rails/console/methods.rb:6)\n</code></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"(called from block in &lt;class:Engine&gt; at /home/zzak/.rbenv/versions/3.4.0/lib/ruby/gems/3.4.0+0/bundler/gems/mission_control-jobs-7295d75ed735/lib/mission_control/jobs/engine.rb:73)\"><pre class=\"notranslate\"><code class=\"notranslate\">(called from block in &lt;class:Engine&gt; at /home/zzak/.rbenv/versions/3.4.0/lib/ruby/gems/3.4.0+0/bundler/gems/mission_control-jobs-7295d75ed735/lib/mission_control/jobs/engine.rb:73)\n</code></pre></div>",
            "url": "https://github.com/rails/rails/pull/52040",
            "title": "Rails::ConsoleMethods deprecation warning should point to the source",
            "date_modified": "2024-06-08T10:55:12.000Z",
            "date_published": "2024-06-07T03:00:10.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1034?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">I realised that <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2329736976\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51994\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51994/hovercard\" href=\"https://github.com/rails/rails/pull/51994\">#51994</a> was producing a deprecation warning while running the Active Record tests (I actually thought we'd made that fail CI, but I must be mis-remembering).</p>\n<p dir=\"auto\">While we could just explicitly opt in to the new setting within our test suite(s), I wanted to see if we could save similar callers [i.e. those that aren't particularly concerned with time zones] from having to know about / act upon the change at all.</p>\n<p dir=\"auto\">Mostly that comes down to the fact that for <code class=\"notranslate\">Time#to_time</code>, if the value is already a local time, there's no difference in behaviour, and so no need to warn.</p>\n<p dir=\"auto\">Correspondingly, I've avoided calling <code class=\"notranslate\">to_time</code> in the handful of places we were using it internally: it's easy to do, and we know we don't care about the zone, so again won't be affected by the change.</p>\n<p dir=\"auto\">I'm hoping this will mean that people who do see the deprecation are likely to actually be affected [or at least be genuinely at risk of being affected] by the change, thus justifying the disruption.</p>\n<p dir=\"auto\">It's worth noting that I currently have <em>not</em> changed <code class=\"notranslate\">ActiveSupport::TimeWithZone#to_time</code>: even when its zone matches local (including the most common case where both are UTC), we will still warn. That felt like the right choice at the time, though I'm now less sure... <code class=\"notranslate\">3.days.ago.to_time</code> seems like a pretty reasonable and ordinary thing to be doing, and (in the absence of any zone-related configuration) I believe it should be perfectly safe. 🤔</p>",
            "url": "https://github.com/rails/rails/pull/52031",
            "title": "Don't emit to_time deprecations in known-safe contexts",
            "date_modified": "2024-06-11T14:30:19.000Z",
            "date_published": "2024-06-06T09:16:27.000Z",
            "author": {
                "name": "matthewd",
                "url": "https://github.com/matthewd"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1034?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Alternate take on <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2332727777\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52016\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52016/hovercard\" href=\"https://github.com/rails/rails/pull/52016\">#52016</a></p>\n<p dir=\"auto\">Instead of a proxy object representing the always-instantaneous transaction state, here I'm going the other way, and giving the user an object that will always reference the <em>current</em> state of the then-current transaction at the time of creation.</p>\n<p dir=\"auto\">That means it will behave reasonably even if they do something thoroughly unreasonable, like add a callback after the transaction has already committed / rolled back.</p>\n<p dir=\"auto\">Definitely needs some tidying to be mergeable: at minimum I've lost the callback docs by moving them into a nodoc class -- and I haven't added tests that show the ways this differs from current HEAD behaviour.</p>",
            "url": "https://github.com/rails/rails/pull/52017",
            "title": "Allow users to add transaction callbacks after commit etc",
            "date_modified": "2024-06-04T19:21:41.000Z",
            "date_published": "2024-06-04T07:58:28.000Z",
            "author": {
                "name": "matthewd",
                "url": "https://github.com/matthewd"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14981592?u=11406fb0121b15a93b3305388377a57b4d9c96f9&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Followup to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2326434456\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51959\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51959/hovercard\" href=\"https://github.com/rails/rails/pull/51959\">#51959</a>. The test I added in that PR can be improved by actually checking that the runner does what the expected behaviour is.</p>\n<p dir=\"auto\">Since support for minitest/spec should not be implied (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2326434456\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51959\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51959/hovercard?comment_id=1621385796&amp;comment_type=review_comment\" href=\"https://github.com/rails/rails/pull/51959#discussion_r1621385796\">#51959 (comment)</a>) I also slightly modified the test above</p>",
            "url": "https://github.com/rails/rails/pull/52002",
            "title": "Add a proper test for running tests by line with custom method",
            "date_modified": "2024-06-03T10:28:09.000Z",
            "date_published": "2024-06-03T10:28:04.000Z",
            "author": {
                "name": "Earlopain",
                "url": "https://github.com/Earlopain"
            }
        }
    ]
}