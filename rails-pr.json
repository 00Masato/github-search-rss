{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/3535?u=6d56cccdc01d83cca3ac0b12468aa1c0d9c3ba0b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Running <code class=\"notranslate\">bin/rails app:update</code> with Rails 7.2.0 adds <code class=\"notranslate\">bin/brakeman</code> even if it's not in the Gemfile already.</p>\n<p dir=\"auto\">This checks whether brakeman is in the bundle (can be required), otherwise skips brakeman for the application generator.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52576.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2460745098\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52576\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52576/hovercard\" href=\"https://github.com/rails/rails/issues/52576\">#52576</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Repro repository:<br>\n<a href=\"https://github.com/etiennebarrie/rails-app/tree/bin-brakeman\">https://github.com/etiennebarrie/rails-app/tree/bin-brakeman</a><br>\nwe can see <code class=\"notranslate\">bin/brakeman</code> gets added: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/etiennebarrie/rails-app/commit/4adad1519da8f7334ffd9dee0d89d7a67dcd1187/hovercard\" href=\"https://github.com/etiennebarrie/rails-app/commit/4adad1519da8f7334ffd9dee0d89d7a67dcd1187\">etiennebarrie/rails-app@<tt>4adad15</tt></a></p>\n<p dir=\"auto\">With the fix applied on top of to 7.2.0:<br>\n<a href=\"https://github.com/etiennebarrie/rails-app/tree/bin-brakeman-fixed-not-added\">https://github.com/etiennebarrie/rails-app/tree/bin-brakeman-fixed-not-added</a> <code class=\"notranslate\">bin/brakeman</code> is not added in <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/etiennebarrie/rails-app/commit/01f6ea5ab8c8cb7d65aeb69164ce846ee496440a/hovercard\" href=\"https://github.com/etiennebarrie/rails-app/commit/01f6ea5ab8c8cb7d65aeb69164ce846ee496440a\">etiennebarrie/rails-app@<tt>01f6ea5</tt></a><br>\nbut it's still added if it's in the Gemfile:<br>\n<strong>Edit:</strong> with neither <code class=\"notranslate\">bin/brakeman</code> nor <code class=\"notranslate\">bin/rubocop</code> added:<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/etiennebarrie/rails-app/commit/39c8543c38f223747dc37c4bfd4ec496645599fd/hovercard\" href=\"https://github.com/etiennebarrie/rails-app/commit/39c8543c38f223747dc37c4bfd4ec496645599fd\">etiennebarrie/rails-app@<tt>39c8543</tt></a><br>\n<a href=\"https://github.com/etiennebarrie/rails-app/tree/bin-brakeman-fixed-added\">https://github.com/etiennebarrie/rails-app/tree/bin-brakeman-fixed-added</a> in<br>\n<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/etiennebarrie/rails-app/commit/fab069a0a9c28555fde004e3289ef0e41ef20e11/hovercard\" href=\"https://github.com/etiennebarrie/rails-app/commit/fab069a0a9c28555fde004e3289ef0e41ef20e11\">etiennebarrie/rails-app@<tt>fab069a</tt></a></p>\n<h3 dir=\"auto\">Additional information</h3>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52578",
            "title": "Don't add `bin/brakeman` if brakeman is not in bundle",
            "date_modified": "2024-08-12T13:16:17.000Z",
            "date_published": "2024-08-12T12:24:49.000Z",
            "author": {
                "name": "etiennebarrie",
                "url": "https://github.com/etiennebarrie"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/617116?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Some jobs such as <code class=\"notranslate\">ActiveStorage::PurgeJob</code> are set to retry on <code class=\"notranslate\">ActiveRecord::Deadlocked</code> by default.<br>\nI think it makes more sense to raise <code class=\"notranslate\">ActiveRecord::Deadlocked</code> instead of <code class=\"notranslate\">ActiveRecord::StatementInvalid</code> when SQLite3 raises a <code class=\"notranslate\">SQLite3::BusyException</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request translates the <code class=\"notranslate\">SQLite3::BusyException</code> into a <code class=\"notranslate\">ActiveRecord::Deadlocked</code> exception.</p>",
            "url": "https://github.com/rails/rails/pull/52577",
            "title": "handle SQLite3::BusyException to raise ActiveRecord::Deadlocked",
            "date_modified": "2024-08-12T12:03:00.000Z",
            "date_published": "2024-08-12T12:02:56.000Z",
            "author": {
                "name": "n-studio",
                "url": "https://github.com/n-studio"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">If you have a form that contains includes a rich text field that's optional, you can end up with lots of <code class=\"notranslate\">ActionText::RichText</code> records in the database with empty values. See <a href=\"https://stackoverflow.com/questions/64580428/is-it-possible-to-prevent-empty-action-text-entries\" rel=\"nofollow\">https://stackoverflow.com/questions/64580428/is-it-possible-to-prevent-empty-action-text-entries</a> for an example of folks trying to avoid this. To me this seems like something we could handle at the framework level.</p>\n<p dir=\"auto\">This PR introduces a store_if_blank<code class=\"notranslate\">option on</code>has_rich_text<code class=\"notranslate\">. It defaults to </code>true<code class=\"notranslate\">(the current behaviour); if you pass</code>false<code class=\"notranslate\">, AT won't create </code>ActionText::RichText` records when saving with a blank value.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Message\n  has_rich_text :content, store_if_blank: false\nend\n\nMessage.create(content: &quot;hi&quot;) # creates an ActionText::RichText\nMessage.create(content: &quot;&quot;) # does not create an ActionText::RichText\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Message</span>\n  <span class=\"pl-en\">has_rich_text</span> <span class=\"pl-pds\">:content</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">store_if_blank</span>: <span class=\"pl-c1\">false</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-v\">Message</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">content</span>: <span class=\"pl-s\">\"hi\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># creates an ActionText::RichText</span>\n<span class=\"pl-v\">Message</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">content</span>: <span class=\"pl-s\">\"\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># does not create an ActionText::RichText</span></pre></div>",
            "url": "https://github.com/rails/rails/pull/52573",
            "title": "Add `store_if_blank` option to `has_rich_text`",
            "date_modified": "2024-08-12T01:38:24.000Z",
            "date_published": "2024-08-12T01:38:20.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/617116?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #38755.\">Fixes</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"582941692\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/38755\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/38755/hovercard\" href=\"https://github.com/rails/rails/issues/38755\">#38755</a></p>\n<p dir=\"auto\">Similar to how Solid Queue and Solid Cache are configured:<br>\n<a href=\"https://github.com/rails/solid_queue/blob/main/app/models/solid_queue/record.rb\">https://github.com/rails/solid_queue/blob/main/app/models/solid_queue/record.rb</a><br>\n<a href=\"https://github.com/rails/solid_cache/blob/main/app/models/solid_cache/record.rb\">https://github.com/rails/solid_cache/blob/main/app/models/solid_cache/record.rb</a></p>",
            "url": "https://github.com/rails/rails/pull/52569",
            "title": "Add support for multiple databases for Active Storage/Action Text/Action Mailbox",
            "date_modified": "2024-08-11T21:56:18.000Z",
            "date_published": "2024-08-11T21:56:14.000Z",
            "author": {
                "name": "n-studio",
                "url": "https://github.com/n-studio"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/93578?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">According MDN, value for <code class=\"notranslate\">&lt;input type=\"date\" /&gt;</code> should be in format \"yyyy-mm-dd\".</p>\n<p dir=\"auto\">For references:</p>\n<ol dir=\"auto\">\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date\" rel=\"nofollow\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date</a></li>\n<li><a href=\"https://www.w3schools.com/html/html_form_input_types.asp\" rel=\"nofollow\">https://www.w3schools.com/html/html_form_input_types.asp</a></li>\n</ol>",
            "url": "https://github.com/rails/rails/pull/52567",
            "title": "Fix date_field_tag examples. [ci skip]",
            "date_modified": "2024-08-11T10:27:31.000Z",
            "date_published": "2024-08-11T10:19:44.000Z",
            "author": {
                "name": "biow0lf",
                "url": "https://github.com/biow0lf"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/10229505?u=2871863a7667f0f4103aebc38dc1cb1835b9a632&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><code class=\"notranslate\">bundle install --without</code> is still shown in <a href=\"https://guides.rubyonrails.org/development_dependencies_install.html#installing-gem-dependencies\" rel=\"nofollow\">Installing Rails Core Development Dependencies</a> dev guide.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request replace <code class=\"notranslate\">--without</code> option with <code class=\"notranslate\">config set</code> sub-command on <code class=\"notranslate\">bundle install</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<ul dir=\"auto\">\n<li><a href=\"https://guides.rubyonrails.org/development_dependencies_install.html#installing-gem-dependencies\" rel=\"nofollow\">https://guides.rubyonrails.org/development_dependencies_install.html#installing-gem-dependencies</a>\n<ul dir=\"auto\">\n<li><a href=\"https://guides.rubyonrails.org/v7.2/development_dependencies_install.html#installing-gem-dependencies\" rel=\"nofollow\">https://guides.rubyonrails.org/v7.2/development_dependencies_install.html#installing-gem-dependencies</a></li>\n</ul>\n</li>\n<li>With <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2459466073\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52563\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52563/hovercard\" href=\"https://github.com/rails/rails/pull/52563\">#52563</a> and this PR, <code class=\"notranslate\">--without</code> option for <code class=\"notranslate\">bundle install</code> would be expelled 🎉</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[n/a] Tests are added or updated if you fix a bug or add a feature.</li>\n<li>[n/a] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52564",
            "title": "Replace --without option with config set command on bundle install",
            "date_modified": "2024-08-11T07:42:53.000Z",
            "date_published": "2024-08-11T07:41:05.000Z",
            "author": {
                "name": "tnir",
                "url": "https://github.com/tnir"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/10229505?u=2871863a7667f0f4103aebc38dc1cb1835b9a632&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">bundle install --without</code> was deprecated years ago, so we would like to avoid to use it but it is still described in <a href=\"https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#translating-rails-guides\" rel=\"nofollow\">4 Translating Rails Guides</a>.</li>\n<li>Listing <code class=\"notranslate\">WITHOUT</code> group parameters bothers dev-guide maintainers.</li>\n</ul>\n<p dir=\"auto\">This Pull Request has been created because we should use the current option on building translated guides.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes to use <code class=\"notranslate\">BUNDLE_ONLY</code> variable to install required dependencies instead of <code class=\"notranslate\">bundle install --without ...</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<ul dir=\"auto\">\n<li>Edge: <a href=\"https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#translating-rails-guides\" rel=\"nofollow\">https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#translating-rails-guides</a>\n<ul dir=\"auto\">\n<li>(or v7.2: <a href=\"https://guides.rubyonrails.org/v7.2/contributing_to_ruby_on_rails.html#translating-rails-guides\" rel=\"nofollow\">https://guides.rubyonrails.org/v7.2/contributing_to_ruby_on_rails.html#translating-rails-guides</a>)</li>\n</ul>\n</li>\n<li>With <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2459469511\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52564\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52564/hovercard\" href=\"https://github.com/rails/rails/pull/52564\">#52564</a> and this PR, <code class=\"notranslate\">--without</code> option for <code class=\"notranslate\">bundle install</code> would be expelled 🎉</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[n/a] Tests are added or updated if you fix a bug or add a feature.</li>\n<li>[n/a] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> <code class=\"notranslate\">cp -r guides/{source,it-IT} &amp;&amp; mv guides/it-IT guides/source &amp;&amp; BUNDLE_ONLY=default:doc bundle install &amp;&amp; cd guides &amp;&amp; BUNDLE_ONLY=default:doc bundle exec rake guides:generate:html GUIDES_LANGUAGE=it-IT</code> looks good.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52563",
            "title": "guide(dev): use BUNDLE_ONLY variable to install required deps",
            "date_modified": "2024-08-11T07:43:03.000Z",
            "date_published": "2024-08-11T07:30:08.000Z",
            "author": {
                "name": "tnir",
                "url": "https://github.com/tnir"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/30030?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">There are three cases for error handling:</p>\n<p dir=\"auto\">1/ Normal job submission, and the job executes successfully.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"::ActiveJob::Base.execute(GoodJob.new.serialize)\"><pre class=\"notranslate\">::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">GoodJob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">serialize</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">2/ Normal job submission, but the job fails, and there is no appropriate error handler (<code class=\"notranslate\">retry_on</code>). The job is discarded as expected, and the error is logged, but this method still raises an exception.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"::ActiveJob::Base.execute(BadJob.new.serialize)\"><pre class=\"notranslate\">::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">BadJob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">serialize</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">3/ Bad job submission (or other internal error). The job is not processed, an error is raised, but there is no log.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"::ActiveJob::Base.execute({})\"><pre class=\"notranslate\">::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">The problem is, the error raised by (2) is logged, but the error raised by (3) is not.</p>\n<p dir=\"auto\">A job server may wrap <code class=\"notranslate\">ActiveJob::Base.execute</code> like so:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Execute the given job.\nwhile job = read_job\n\tbegin\n\t\t::ActiveJob::Base.execute(job)\n\trescue =&gt; error\n\t\tlog_error(error)\n\tend\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># Execute the given job.</span>\n<span class=\"pl-k\">while</span> <span class=\"pl-s1\">job</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">read_job</span>\n\t<span class=\"pl-k\">begin</span>\n\t\t::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">job</span><span class=\"pl-kos\">)</span>\n\t<span class=\"pl-k\">rescue</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-en\">error</span>\n\t\t<span class=\"pl-en\">log_error</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">error</span><span class=\"pl-kos\">)</span>\n\t<span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">In case (2) above, this will lead to two log messages being emitted for the failure, one from ActiveJob and one from the Job runner. This is not ideal from a usability point of view, ideally only one log message should be emitted.</p>\n<p dir=\"auto\">One way to solve the problem is this:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Execute the given job.\nwhile job = read_job\n\tbegin\n\t\t::ActiveJob::Base.execute(job)\n\trescue =&gt; error\n\t\t# Ignore errors, logged by ActiveJob.\n\tend\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># Execute the given job.</span>\n<span class=\"pl-k\">while</span> <span class=\"pl-s1\">job</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">read_job</span>\n\t<span class=\"pl-k\">begin</span>\n\t\t::<span class=\"pl-v\">ActiveJob</span>::<span class=\"pl-v\">Base</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">execute</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">job</span><span class=\"pl-kos\">)</span>\n\t<span class=\"pl-k\">rescue</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-en\">error</span>\n\t\t<span class=\"pl-c\"># Ignore errors, logged by ActiveJob.</span>\n\t<span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Now ActiveJob is fully responsible for logging. However, there are some situations as shown in case (3) where <code class=\"notranslate\">ActiveJob::Base.execute</code> can raise errors which are not logged. That is problematic as that would result in a silent failure which is a very bad user experience.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This proposal changes case (2) to not re-raise the exception if the job is not retried. The error is still logged by ActiveJob, but the error is not propagated up, as it's normal and expected that the job is discarded in that case.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52557",
            "title": "If a job fails due to an error, it is discarded, and don't re-raise.",
            "date_modified": "2024-08-11T07:43:47.000Z",
            "date_published": "2024-08-09T23:29:35.000Z",
            "author": {
                "name": "ioquatix",
                "url": "https://github.com/ioquatix"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">It's currently unclear when to use <code class=\"notranslate\">NOTE</code>, <code class=\"notranslate\">TIP</code> or <code class=\"notranslate\">WARNING</code>.<br>\nThis tries to document it's usage.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52553",
            "title": "Document `NOTE`, `TIP` and `WARNING` guidelines [ci-skip]",
            "date_modified": "2024-08-12T10:41:20.000Z",
            "date_published": "2024-08-09T09:43:04.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/18750194?u=b9de1a643c567a41ea55895f624a1a136482b97e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds few missing notable changes to railities</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52552",
            "title": "Add notable changes to railities [ci skip]",
            "date_modified": "2024-08-12T09:20:33.000Z",
            "date_published": "2024-08-09T04:49:09.000Z",
            "author": {
                "name": "apoorv1316",
                "url": "https://github.com/apoorv1316"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/142498048?u=ef62fa9962bb2e26413478ff05f28a98a59d9b9d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52530.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2453364344\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52530\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52530/hovercard\" href=\"https://github.com/rails/rails/issues/52530\">#52530</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request addresses an issue where adding a merge with an <code class=\"notranslate\">or</code> condition to a scope in ActiveRecord could unintentionally widen the scope if the scope contains raw SQL strings. The fix ensures that scopes behave as expected, returning only the records that match the intended query criteria.</p>\n<h3 dir=\"auto\">Details</h3>\n<p dir=\"auto\">This Pull Request includes changes to the <code class=\"notranslate\">merger.rb</code> file to properly handle the merging of scopes that involve raw SQL strings. Specifically, the logic was updated as follows:</p>\n<ul dir=\"auto\">\n<li><strong>Conditional Check for Raw SQL</strong>:\n<ul dir=\"auto\">\n<li>Added a check to determine if either of the <code class=\"notranslate\">where</code> clauses being merged contains raw SQL using the <code class=\"notranslate\">raw_sql_involved?</code> method.</li>\n</ul>\n</li>\n<li><strong>Proper Handling of <code class=\"notranslate\">or</code> Merging</strong>:\n<ul dir=\"auto\">\n<li>When raw SQL is involved, the merge is handled with the <code class=\"notranslate\">merge_with_proper_or_handling</code> method, which ensures that the conditions are grouped correctly and the scope is not widened unintentionally.</li>\n</ul>\n</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52550",
            "title": "Added changes in the merger.rb file for merge logic",
            "date_modified": "2024-08-12T06:46:42.000Z",
            "date_published": "2024-08-08T19:26:59.000Z",
            "author": {
                "name": "Demon-Sheriff",
                "url": "https://github.com/Demon-Sheriff"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/617116?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I recently encountered the issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2388390669\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/mission_control-jobs/issues/136\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/mission_control-jobs/issues/136/hovercard\" href=\"https://github.com/rails/mission_control-jobs/issues/136\">rails/mission_control-jobs#136</a> on mission control and I realized that Rails didn't have a way to localize the word <code class=\"notranslate\">ago</code> out of the box.</p>\n<p dir=\"auto\"><del>This PR will break a lot of projects but I think it's a valuable add, and the update is pretty straightforward.</del></p>\n<p dir=\"auto\">EDIT: added <code class=\"notranslate\">config.action_view.include_prefix_or_suffix_to_time_ago_in_words</code> to keep retro-compatibility.</p>\n<h3 dir=\"auto\">Details</h3>\n<p dir=\"auto\">Before:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"#   time_ago_in_words(3.minutes.from_now)                 # =&gt; 3 minutes\n#   time_ago_in_words(3.minutes.ago)                      # =&gt; 3 minutes\"><pre class=\"notranslate\"><span class=\"pl-c\">#   time_ago_in_words(3.minutes.from_now)                 # =&gt; 3 minutes</span>\n<span class=\"pl-c\">#   time_ago_in_words(3.minutes.ago)                      # =&gt; 3 minutes</span></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"#   time_ago_in_words(3.minutes.from_now)                 # =&gt; in 3 minutes\n#   time_ago_in_words(3.minutes.ago)                      # =&gt; 3 minutes ago\"><pre class=\"notranslate\"><span class=\"pl-c\">#   time_ago_in_words(3.minutes.from_now)                 # =&gt; in 3 minutes</span>\n<span class=\"pl-c\">#   time_ago_in_words(3.minutes.ago)                      # =&gt; 3 minutes ago</span></pre></div>\n<p dir=\"auto\">Example of localization:</p>\n<div class=\"highlight highlight-source-yaml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"ja:\n  datetime:\n    distance_in_words:\n      ago: &quot;%{time}前&quot;\n      from_now: &quot;%{time}後&quot;\nes:\n  datetime:\n    distance_in_words:\n      ago: &quot;hace %{time}&quot;\n      from_now: &quot;en %{time}&quot;\nfr:\n  datetime:\n    distance_in_words:\n      ago: &quot;il y a %{time}&quot;\n      from_now: &quot;dans %{time}&quot;\"><pre class=\"notranslate\"><span class=\"pl-ent\">ja</span>:\n  <span class=\"pl-ent\">datetime</span>:\n    <span class=\"pl-ent\">distance_in_words</span>:\n      <span class=\"pl-ent\">ago</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>%{time}前<span class=\"pl-pds\">\"</span></span>\n      <span class=\"pl-ent\">from_now</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>%{time}後<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-ent\">es</span>:\n  <span class=\"pl-ent\">datetime</span>:\n    <span class=\"pl-ent\">distance_in_words</span>:\n      <span class=\"pl-ent\">ago</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>hace %{time}<span class=\"pl-pds\">\"</span></span>\n      <span class=\"pl-ent\">from_now</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>en %{time}<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-ent\">fr</span>:\n  <span class=\"pl-ent\">datetime</span>:\n    <span class=\"pl-ent\">distance_in_words</span>:\n      <span class=\"pl-ent\">ago</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>il y a %{time}<span class=\"pl-pds\">\"</span></span>\n      <span class=\"pl-ent\">from_now</span>: <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>dans %{time}<span class=\"pl-pds\">\"</span></span></pre></div>",
            "url": "https://github.com/rails/rails/pull/52547",
            "title": "Add ago/in words to time_ago_in_words",
            "date_modified": "2024-08-10T11:30:29.000Z",
            "date_published": "2024-08-08T16:00:34.000Z",
            "author": {
                "name": "n-studio",
                "url": "https://github.com/n-studio"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/97030518?u=44f65a79575affbfae38d5a4e75393694efa9d6c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request improves the wording of the <code class=\"notranslate\">config.assets.quiet</code> configuration option.<br>\n<code class=\"notranslate\">development.rb</code> =&gt; <code class=\"notranslate\">config/environments/development.rb</code></p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52546",
            "title": "Improve documentation of `config.assets.quiet` [ci skip]",
            "date_modified": "2024-08-08T12:54:31.000Z",
            "date_published": "2024-08-08T12:52:17.000Z",
            "author": {
                "name": "Uaitt",
                "url": "https://github.com/Uaitt"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/97030518?u=44f65a79575affbfae38d5a4e75393694efa9d6c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because the documentation for the <code class=\"notranslate\">config.assets.debug</code> configuration option is incorrect.</p>\n<p dir=\"auto\">Fixes issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2280577750\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51747\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51747/hovercard\" href=\"https://github.com/rails/rails/issues/51747\">#51747</a> and closes PR <a href=\"https://github.com/rails/rails/pull/51845\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51845/hovercard\">#51845</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request fixes the <code class=\"notranslate\">config.assets.debug</code> documentation and makes it correct.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52544",
            "title": "Fix wrong `config.assets.debug` documentation [ci skip]",
            "date_modified": "2024-08-12T08:23:51.000Z",
            "date_published": "2024-08-08T12:25:42.000Z",
            "author": {
                "name": "Uaitt",
                "url": "https://github.com/Uaitt"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes pull request #52501.\">Fix</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2446689893\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52501\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52501/hovercard\" href=\"https://github.com/rails/rails/pull/52501\">#52501</a></p>\n<p dir=\"auto\">Since MySQL require to set the isolation level as a statement before the <code class=\"notranslate\">BEGIN</code>, if the <code class=\"notranslate\">begin</code> statement fails and we retry it we're opening a transaction with the default level.</p>\n<p dir=\"auto\">To handle this we can send both statement at once so that if we retry both are sent.</p>\n<p dir=\"auto\">A much simpler alternative would be to just disallow retrying <code class=\"notranslate\">BEGIN</code> when opening an isolated DB transaction.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/kirs/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/kirs\">@kirs</a></p>\n<p dir=\"auto\">Also cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a> as I'd love your opinion on this. In the future I'd really like to leverage batches more to save on roundtrips as explained in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2335181050\" data-permission-text=\"Title is private\" data-url=\"https://github.com/trilogy-libraries/trilogy/issues/189\" data-hovercard-type=\"issue\" data-hovercard-url=\"/trilogy-libraries/trilogy/issues/189/hovercard\" href=\"https://github.com/trilogy-libraries/trilogy/issues/189\">trilogy-libraries/trilogy#189</a>, but right now it's actually worse because instead of 2 roundtrips we're doing 3:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">set_server_options OPTION_MULTI_STATEMENTS_ON</code></li>\n<li><code class=\"notranslate\">query \"SET TRANSACTION ISOLATION LEVEL...; BEGIN;</code></li>\n<li><code class=\"notranslate\">set_server_options OPTION_MULTI_STATEMENTS_OFF</code></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52529",
            "title": "Preserve isolation level when retrying MySQL transactions",
            "date_modified": "2024-08-07T13:57:54.000Z",
            "date_published": "2024-08-07T10:10:30.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2786819?u=722b21f1f48dc9a97c9494aba04c4f657d31e941&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Update the Active Record Association Documentation.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The images used to show the relationships of the different types of associations have both the table declarations, as well as a code sample, but the code sample is also in the guide. We could probably simplify the images by cutting off the code samples from them and leaving them in the guide code.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> belongs_to section mentions bi-directional association and links to it within the same guide, but doesn't do the same for has_one and has_many, mentioned right after in the same paragraph.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> There's a note about using bigint :supplier_id in the section between belongs_to and has_one, but up until that point it's always been using belongs_to in migrations... it's probably something that doesn't need to be in this area of the guide.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The has_many :through vs has_and_belongs_to_many section ends with a composite keys mention, we could link to the new guide there.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Associations between models with composite PKs may be simplified.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> One example in bi-directional associations mentions Book belongs_to :writer, but then uses book.author a few lines below, which is incorrect.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> STI section could be expanded, it's very useful in certain situations.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Add more info and make it clear</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Group sections better</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Amend the References section to be integrated with associations</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Abstract and remove duplications for options and scopes</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52523",
            "title": "[RF-DOCS]Active Record Associations Guide [ci-skip]",
            "date_modified": "2024-08-06T21:56:23.000Z",
            "date_published": "2024-08-06T20:48:18.000Z",
            "author": {
                "name": "Ridhwana",
                "url": "https://github.com/Ridhwana"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1966473?u=fe117732163d3610f051fca80df4e04c1b91335d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request is for updating and improving the \"Rails Routing from the Outside In\" Rails Guide documentation.</p>\n<h3 dir=\"auto\">Testing</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Run <code class=\"notranslate\">guides:generate</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Run <code class=\"notranslate\">guides:lint</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Run rubocop on code samples</li>\n</ul>\n<h3 dir=\"auto\">Details</h3>\n<p dir=\"auto\">Here are some of the things addressed from this Guide.</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> We mention Rack application right away, good place to link to the <a href=\"https://edgeguides.rubyonrails.org/rails_on_rack.html\" rel=\"nofollow\">Rack guide</a>.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Would it make sense to link \"CRUD operation\" to something like the <a href=\"https://edgeguides.rubyonrails.org/active_record_basics.html#crud-reading-and-writing-data\" rel=\"nofollow\">AR Basics CRUD</a> section? We don't <em>always</em> need to tie CRUD to database, it's more about the concept.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under Path and URL helpers, it might make sense to turn that list into a table to make it easier to scan?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Singular resources starts with examples of using get, maybe it should be specific to resource and leave get to Non-Resourceful Routes section? That section doesn't start with \"simple\" examples.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> \"Because you might want to use the same controller for a singular route (/account) and a plural route (/accounts/45), singular resources map to plural controllers.\" =&gt; I've never seen this be the case, I think this can be reworded to explain that singular resources map to plural controllers, without this idea of \"use the same controller\".</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under shallow nesting, there's a long example with three child resources to demonstrante that \"all get the same shallow behavior\"... maybe that'd be better with just 2 so that the table doesn't get so big/long.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under creating paths and URLs from objects, it explains how to create paths from objects (i.e. polymorphic routing), that may be a good segway to show that it uses the route key / singular route key from ActiveModel::Naming to figure that out. (could be a note/tip of sorts for example, just thought it'd be good to make that connection somewhere) Also ActiveModel::Conversion#to_param would be used to convert the IDs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> member and collection are explained under \"Adding more RESTful actions\", but there's not a good clarification of what the terms represent, i.e. that member refers to routes acting on a single element, much like show/update/destroy, and collection referes to routes acting on multiple (or a collection of) elements like index. Is it worth clarifying further?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Consider: Constraints could be a main section rather than live under non-resourceful routes, because generally speaking, they can be applied anywhere, even for resources. The only specific one would be match...via:<br>\n--&gt; Good point. Tried to move the 3 or 4 sub-sections related to constraints, but couldn't decide where they fit, after non-resource routes or before, and how to transition into them...leaving it as is for now.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Under Route Globbing and Wildcard Segments there's a waning about passing format: false related to \"old 3.0.x behavior\" which can either be explained better (what's the meaning of passing format: false), and/or potentially removed (at least the mention to \"3.0.x behavior\" could be removed)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> When explaining about using draw to break down very large route files, that subsection could be a caution/warning of sorts to call more attention to the fact that most people shouldn't need it.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> We could explain how to check routes via console with Rails.application.routes.url_helpers under inspecting routes.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Document the somewhat recent <code class=\"notranslate\">--unused</code> option to rails routes. (<a href=\"https://github.com/rails/rails/pull/51316#issuecomment-1994428608\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51316/hovercard\">Reference</a>)</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52521",
            "title": "[RF-DOCS] Rails Routing Guide [ci-skip]",
            "date_modified": "2024-08-08T20:36:16.000Z",
            "date_published": "2024-08-06T19:40:58.000Z",
            "author": {
                "name": "bhumi1102",
                "url": "https://github.com/bhumi1102"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1709692?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The current implementation does not respect the layout parameter in case of mixed collections.</p>\n<p dir=\"auto\">This commit fixes the issue by ensuring that the code path for mixed collections render the partial inside the provided layout.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49590.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1938859635\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49590\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49590/hovercard\" href=\"https://github.com/rails/rails/issues/49590\">#49590</a></p>\n<p dir=\"auto\">The current implementation of <code class=\"notranslate\">render_collection_derive_partial</code> ignores the layout parameter in case of mixed collections.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes<code class=\"notranslate\">render_collection_derive_partial</code> to call a new <code class=\"notranslate\">render_collection_with_no_partial</code> method which renders the partial inside the specified layout.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This is my second attempt at fixing it. I have double checked that there are no negative side effects.</p>\n<ol dir=\"auto\">\n<li>Benchmark between rendering with a layout vs rendering without a layout:</li>\n</ol>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ruby 3.3.2 (2024-05-30 revision e5a195edf6) [aarch64-linux]\nWarming up --------------------------------------\n           no layout   436.000 i/100ms\n         with layout   350.000 i/100ms\nCalculating -------------------------------------\n           no layout      4.313k (± 3.4%) i/s -     21.800k in   5.061356s\n         with layout      3.999k (± 3.9%) i/s -     20.300k in   5.083979s\n\nComparison:\n           no layout:     4312.6 i/s\n         with layout:     3999.4 i/s - 1.08x  slower\"><pre class=\"notranslate\"><code class=\"notranslate\">ruby 3.3.2 (2024-05-30 revision e5a195edf6) [aarch64-linux]\nWarming up --------------------------------------\n           no layout   436.000 i/100ms\n         with layout   350.000 i/100ms\nCalculating -------------------------------------\n           no layout      4.313k (± 3.4%) i/s -     21.800k in   5.061356s\n         with layout      3.999k (± 3.9%) i/s -     20.300k in   5.083979s\n\nComparison:\n           no layout:     4312.6 i/s\n         with layout:     3999.4 i/s - 1.08x  slower\n</code></pre></div>\n<ol start=\"2\" dir=\"auto\">\n<li>No generation of multiple layout templates</li>\n</ol>\n<p dir=\"auto\">The layout template is generated only once in <code class=\"notranslate\">render_collection_with_multiple_partials</code>.</p>\n<ol start=\"3\" dir=\"auto\">\n<li>Generation of partial templates is no different</li>\n</ol>\n<p dir=\"auto\">The generation is the partial templates happen in the same way as in main and it's not affected by this change.</p>",
            "url": "https://github.com/rails/rails/pull/52515",
            "title": "Render Partial Collection with a layout parameter",
            "date_modified": "2024-08-08T08:50:40.000Z",
            "date_published": "2024-08-06T07:42:10.000Z",
            "author": {
                "name": "cmaruz",
                "url": "https://github.com/cmaruz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><a href=\"https://guides.rubyonrails.org/active_storage_overview.html#authenticated-controllers\" rel=\"nofollow\">https://guides.rubyonrails.org/active_storage_overview.html#authenticated-controllers</a> discusses how to secure the Active Storage rendering controllers (potentially of interest: <a href=\"https://github.com/rails/rails/pull/52388\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52388/hovercard\">my PR</a> that improves the docs). These controllers are easy to secure becuase most of the functionality is extracted to modules so they're easy enough to re-implement.</p>\n<p dir=\"auto\">The same isn't true for <code class=\"notranslate\">DirectUploadsController</code>. But you should secure that controller too. If you don't, then unauthenticated users can create <code class=\"notranslate\">ActiveStorage::Blob</code> records in your database, and get secured URLs they can use to directly upload files into your S3 (etc) bucket.</p>\n<p dir=\"auto\">This PR makes it easier to secure the controller:</p>\n<ul dir=\"auto\">\n<li>Functionality is extracted to a module.</li>\n<li>Docs are updated to point you in the right direction.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52505",
            "title": "Make it possible to secure `ActiveStorage::DirectUploadsController`",
            "date_modified": "2024-08-05T01:45:42.000Z",
            "date_published": "2024-08-05T01:28:41.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/522155?u=2e71ed2ab56545207a94b885fafc434ee7350cf1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">ActiveRecord provides a way to set isolation level per transaction:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.transaction(isolation: :read_committed) do\n  ...\nend\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">transaction</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">isolation</span>: <span class=\"pl-pds\">:read_committed</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  ...\n<span class=\"pl-en\">end</span></pre></div>\n<p dir=\"auto\">Underneath, that ends up calling:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"def begin_isolated_db_transaction(isolation) # :nodoc:\n  internal_execute(&quot;SET TRANSACTION ISOLATION LEVEL #{transaction_isolation_levels.fetch(isolation)}&quot;, &quot;TRANSACTION&quot;, allow_retry: true, materialize_transactions: false)\n  begin_db_transaction\nend\"><pre class=\"notranslate\"><code class=\"notranslate\">def begin_isolated_db_transaction(isolation) # :nodoc:\n  internal_execute(\"SET TRANSACTION ISOLATION LEVEL #{transaction_isolation_levels.fetch(isolation)}\", \"TRANSACTION\", allow_retry: true, materialize_transactions: false)\n  begin_db_transaction\nend\n</code></pre></div>\n<p dir=\"auto\">However, it's possible that <code class=\"notranslate\">BEGIN</code> triggered by <code class=\"notranslate\">begin_db_transaction</code> would fail for connectivity reasons. ActiveRecord's behaviour it to reestablish the connection and to retry the <code class=\"notranslate\">BEGIN</code>.</p>\n<p dir=\"auto\">But that means any <code class=\"notranslate\">SET ISOLATION LEVEL ...</code> that happened prior to it would be lost.</p>\n<p dir=\"auto\">Rather than try building isolation level awareness into reconnects, I think it's a lot more reliable to have a separate connection pool, one that runs <code class=\"notranslate\">SET SESSION TRANSACTION ISOLATION LEVEL ...</code> every time it connects to the DB.</p>\n<p dir=\"auto\">This PR allows to introduce that setting on connection config.</p>",
            "url": "https://github.com/rails/rails/pull/52501",
            "title": "Allow to set isolation level on AR connection config",
            "date_modified": "2024-08-07T10:12:30.000Z",
            "date_published": "2024-08-04T01:05:12.000Z",
            "author": {
                "name": "kirs",
                "url": "https://github.com/kirs"
            }
        }
    ]
}