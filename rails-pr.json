{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39735028?u=91330295c614cf3cec0b64bf242a14fc2ceb358f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In Rails 7.2, new apps will be generated with a Dev Container already set up. We also introduced the <a href=\"https://github.com/rails/rails-new\">rails-new</a> tool which allows an app to be generated a machine that does not have Rails, or even Ruby, installed.</p>\n<p dir=\"auto\">This PR updates the Getting Started with Rails guide to account for rails-new and working with Dev Containers in VS Code.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">I updated the \"Installing Rails\" section of this guide to instead give instructions for installing Docker, VScode and rails-new. The \"Creating the Blog Application\" has also been updated to show usage of <code class=\"notranslate\">rails-new</code> instead of the <code class=\"notranslate\">rails new</code> command. And, I added a section about opening the app in a dev container within VSCode.</p>\n<p dir=\"auto\">I moved the old section about installing rails and ruby locally to it's own guide, Installing Rails. That guide then links back to the getting started guide's \"Hello, Rails!\" section so someone ready that guide can continue with the getting started guide once they have Rails installed.</p>\n<p dir=\"auto\">The other option was to keep both sets of instructions (rails local install vs. dev container), but I found it a bit awkward since the \"Creating the Blog Application\" has is slightly different, and the instructions for opening the container need to come after that. So it was hard to structure it without introducing a bunch of duplication, or adding links between sections of the guide. So the separate guide for installing Rails seemed better, but I am open to feedback.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51637",
            "title": "Update Getting Start With Rails guide to account for Dev Containers",
            "date_modified": "2024-04-22T22:36:32.000Z",
            "date_published": "2024-04-22T16:54:05.000Z",
            "author": {
                "name": "andrewn617",
                "url": "https://github.com/andrewn617"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/4019924?u=d3d5c675637878c6f51b144c3ece1d9aa4d6ef57&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because it is not clear what method should be implemented to override the migration number.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes:</p>\n<ul dir=\"auto\">\n<li>Reference the method name as it in the code</li>\n<li>Replace version for number everywhere to avoid confusion)</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51635",
            "title": "[ci skip] Improve migration.rb documentation consistency",
            "date_modified": "2024-04-22T15:49:15.000Z",
            "date_published": "2024-04-22T15:49:11.000Z",
            "author": {
                "name": "silva96",
                "url": "https://github.com/silva96"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/564142?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51582.\">fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2247680139\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51582\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51582/hovercard\" href=\"https://github.com/rails/rails/issues/51582\">#51582</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes to override<code class=\"notranslate\">ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Cidr#changed?</code>.<br>\nIt added to compare address prefix of IPAddr class.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">Iâ€™m proposing to fix <code class=\"notranslate\">IPAddr#==</code> comparing address prefix for the cause of this problem.<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2251020039\" data-permission-text=\"Title is private\" data-url=\"https://github.com/ruby/ipaddr/issues/69\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/ruby/ipaddr/pull/69/hovercard\" href=\"https://github.com/ruby/ipaddr/pull/69\">ruby/ipaddr#69</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51633",
            "title": "Fix PostgreSQL `Cidr#change?` to compare with address prefix",
            "date_modified": "2024-04-22T14:28:11.000Z",
            "date_published": "2024-04-22T14:28:07.000Z",
            "author": {
                "name": "taketo1113",
                "url": "https://github.com/taketo1113"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/44280450?u=5d0b7f0d7535c39131a9d2d513cbf4691236b6e4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request add <code class=\"notranslate\">hexBinary</code> parser in XML. <code class=\"notranslate\">hexBinary</code> is one of the primitive data type in XML <a href=\"https://www.w3.org/TR/xmlschema-2/#hexBinary\" rel=\"nofollow\">https://www.w3.org/TR/xmlschema-2/#hexBinary</a>. But rails does not support that type now.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request add hex binary parser on <code class=\"notranslate\">ActiveSupport::XmlMini</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<ul dir=\"auto\">\n<li><a href=\"https://www.w3.org/TR/xmlschema-2/#hexBinary\" rel=\"nofollow\">https://www.w3.org/TR/xmlschema-2/#hexBinary</a></li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51631",
            "title": "Support hexBinary type in XML",
            "date_modified": "2024-04-22T13:35:00.000Z",
            "date_published": "2024-04-22T13:22:21.000Z",
            "author": {
                "name": "heka1024",
                "url": "https://github.com/heka1024"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39980734?u=d74e4445138b4753c03c1b9f5f086d3f9eafec13&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51623.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2255095202\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51623\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51623/hovercard\" href=\"https://github.com/rails/rails/issues/51623\">#51623</a></p>\n<p dir=\"auto\"><a href=\"https://github.com/rails/rails/blob/284baa18c2c62abec170b61e285aefbd9604f675/activerecord/lib/active_record/connection_adapters/sqlite3_adapter.rb#L112-L122\">ActiveRecord::ConnectionAdapters::SQLite3Adapter#initialize</a> will check if a sqlite3 database file path exists, and if not it will attempt to create the directory using Dir.mkdir. However, Dir.mkdir cannot create all parent directories like FileUtils.mkdir_p. Thus an No such file or directory @ dir_s_mkdir - does/not/exist/yet (Errno::ENOENT) will be raised if one of the parent-parent directories of the sqlite3 database file do not exist yet.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes:<br>\nActiveRecord::ConnectionAdapters::SQLite3Adapter#initialize</p>\n<p dir=\"auto\">Replaced the <code class=\"notranslate\">Dir.mkdir(dirname)</code> with <code class=\"notranslate\">FileUtils.mkdir_p(dirname)</code> to create the directory for the parent directories in the path if they don't exists.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #51623 ]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51628",
            "title": "[FIX] Sqlite3 Should create db for missing parent directories as well",
            "date_modified": "2024-04-22T08:43:42.000Z",
            "date_published": "2024-04-22T08:02:31.000Z",
            "author": {
                "name": "maniSHarma7575",
                "url": "https://github.com/maniSHarma7575"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/17778649?u=acebb0a7d605ee2ab35e5484e41605079e551415&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51524.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2233401435\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51524\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51524/hovercard\" href=\"https://github.com/rails/rails/issues/51524\">#51524</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<ul dir=\"auto\">\n<li>Update <code class=\"notranslate\">ActiveRecord::Calculations#pluck</code>  to raise an error or log on a strict loading violation.</li>\n<li>Update the <code class=\"notranslate\">ActiveRecord::Associations::Association#violates_strict_loading?</code> make preloaded association won't violates strict loading</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This PR will conflict with <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2046359172\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50389\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50389/hovercard\" href=\"https://github.com/rails/rails/pull/50389\">#50389</a> as we are fixing a similar issue in a different scenario.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51627",
            "title": "[Fix #51524] Fix `strict_loading` violations ignored when using `pluck`",
            "date_modified": "2024-04-22T05:58:06.000Z",
            "date_published": "2024-04-22T04:25:59.000Z",
            "author": {
                "name": "shes50103",
                "url": "https://github.com/shes50103"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Inspired by <a href=\"https://railsatscale.com/2024-01-25-catching-assertionless-tests/\" rel=\"nofollow\">https://railsatscale.com/2024-01-25-catching-assertionless-tests/</a>.</p>\n<p dir=\"auto\">It is very easy to write a \"false positive\" broken test (as can be seen from the linked article) that actually tests nothing (or can become such in the future). A simple example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"def test_active\n  active_users = User.active.to_a\n  active_users.each do |user|\n    assert user.active?\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">def</span> <span class=\"pl-en\">test_active</span>\n  <span class=\"pl-s1\">active_users</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_a</span>\n  <span class=\"pl-s1\">active_users</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">user</span>|\n    <span class=\"pl-en\">assert</span> <span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active?</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">We have some assertions used in the test case, so, looks good? But if we change the scope and it will now return 0 records, this test will still pass and none of the assertions will be run. For this test to be more robust, we need at least to test that <code class=\"notranslate\">active_users</code> contains any records.</p>\n<p dir=\"auto\">This PR now allows to easily detect such tests.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# config/environments/test.rb\nconfig.active_support.assertionless_tests_behavior = :raise # also available :ignore and :log\"><pre class=\"notranslate\"><span class=\"pl-c\"># config/environments/test.rb</span>\n<span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_support</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">assertionless_tests_behavior</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:raise</span> <span class=\"pl-c\"># also available :ignore and :log</span></pre></div>\n<p dir=\"auto\">With this configuration, assertionless tests we will now be marked as failed and not silently pass.</p>\n<p dir=\"auto\">Currently, this feature is configured to <code class=\"notranslate\">:ignore</code> such tests by default, but we can rollout it to eventually <code class=\"notranslate\">:log</code> and then <code class=\"notranslate\">:raise</code> in the future.</p>\n<p dir=\"auto\">Some of such problematic tests were already fixed before, like in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1683920985\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48065\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48065/hovercard\" href=\"https://github.com/rails/rails/pull/48065\">#48065</a>.</p>\n<p dir=\"auto\">As a follow up to this PR, I would like to enable <code class=\"notranslate\">:raise</code> behavior for all the frameworks. Currently there are a few offences fixing which will make this PR bigger than is needed.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/nvasilevski/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nvasilevski\">@nvasilevski</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a> (interested in your thoughts about this)</p>",
            "url": "https://github.com/rails/rails/pull/51625",
            "title": "Allow assertionless tests to be reported",
            "date_modified": "2024-04-22T13:15:51.000Z",
            "date_published": "2024-04-21T18:53:16.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14981592?u=11406fb0121b15a93b3305388377a57b4d9c96f9&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Followup to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2107745328\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50923\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50923/hovercard\" href=\"https://github.com/rails/rails/pull/50923\">#50923</a>. On Ruby 3.4 with rails main I get a bunch of deprecation warnings that look like this:</p>\n<blockquote>\n<p dir=\"auto\">... If automatic inference is not intended, you can silence this warning by defining the association with <code class=\"notranslate\">inverse_of: nil</code>. (called from Array#each at internal:array:54)</p>\n</blockquote>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This test fails for me locally on 3.4 without this change:</p>\n<blockquote>\n<p dir=\"auto\">Expected \"DEPRECATION WARNING: You are using deprecated behavior which will be removed from the next major or minor release. (called from Array#each at internal:array:54)\" to not include \"internal\".</p>\n</blockquote>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51619",
            "title": "Filter internal frames in deprecation warnings for Ruby 3.4",
            "date_modified": "2024-04-20T13:37:45.000Z",
            "date_published": "2024-04-20T13:37:41.000Z",
            "author": {
                "name": "Earlopain",
                "url": "https://github.com/Earlopain"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/33099255?u=a09ef31037b7383aac8510ce616bbd09b8ad3a42&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because to fix valid Mime::Type parsing of media range parameters <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2249773236\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51594\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51594/hovercard\" href=\"https://github.com/rails/rails/issues/51594\">#51594</a> .</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">Mime::Type.lookup</code> (indirectly <code class=\"notranslate\">Mime::Type.parse</code>) to strip out custom media range parameters before falling back to default type creation.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">It looks like the break was initially introduced in 7.1 from <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1741521786\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48397\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48397/hovercard\" href=\"https://github.com/rails/rails/pull/48397\">#48397</a> .</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51616",
            "title": "Fix `Mime::Type.parse` for HTTP Accept with parameters",
            "date_modified": "2024-04-22T14:12:38.000Z",
            "date_published": "2024-04-20T11:18:09.000Z",
            "author": {
                "name": "notchairmk",
                "url": "https://github.com/notchairmk"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because apps with lots of routes take a long time to boot. A developer could boot an app for reasons that don't involve routes at all (like running unit tests, migrations, rake tasks, etc.) so I think this should be deferred in dev and test.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes engine and app route sets to a <code class=\"notranslate\">Rails::Engine::RouteSet</code>, which knows about the current Rails application. The default middleware stack has also changed to include a <code class=\"notranslate\">ActionDispatch::Once</code> middleware that loads routes if needed. This PR loads routes under the following circumstances:</p>\n<p dir=\"auto\">In dev/test:</p>\n<ul dir=\"auto\">\n<li>The first request via middleware</li>\n<li>When application or engine <code class=\"notranslate\">url_helpers.some_path</code> is called via <code class=\"notranslate\">method_missing?</code></li>\n<li>When application or engine <code class=\"notranslate\">url_helpers.respond_to?(:some_path)</code> is called via <code class=\"notranslate\">respond_to_missing?</code></li>\n</ul>\n<p dir=\"auto\">In production:</p>\n<ul dir=\"auto\">\n<li>In the finisher eagerly, which is the previous behaviour</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This is loosely inspired by <a href=\"https://github.com/amatsuda/routes_lazy_routes\">https://github.com/amatsuda/routes_lazy_routes</a></p>\n<p dir=\"auto\">I'm a bit concerned this is too much of a hack, but I think the speed benefit might be worth it. In an app with 2000 routes:</p>\n<p dir=\"auto\">Before:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"% time bin/rails runner &quot;&quot;\nbin/rails runner &quot;&quot;  0.66s user 0.33s system 95% cpu 1.036 total\"><pre class=\"notranslate\"><code class=\"notranslate\">% time bin/rails runner \"\"\nbin/rails runner \"\"  0.66s user 0.33s system 95% cpu 1.036 total\n</code></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"% time bin/rails runner &quot;&quot;\nbin/rails runner &quot;&quot;  0.47s user 0.32s system 98% cpu 0.791 total\"><pre class=\"notranslate\"><code class=\"notranslate\">% time bin/rails runner \"\"\nbin/rails runner \"\"  0.47s user 0.32s system 98% cpu 0.791 total\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51614",
            "title": "Defer route drawing to the first request, or when url_helpers called",
            "date_modified": "2024-04-20T07:44:33.000Z",
            "date_published": "2024-04-19T21:42:17.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2223?u=01d20ee07241d135f5b4f55bec2930dc41399d07&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/2223/324107502-853e26ac-3245-485c-b2fe-8f5f5410325c.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM4MjcxOTIsIm5iZiI6MTcxMzgyNjg5MiwicGF0aCI6Ii8yMjIzLzMyNDEwNzUwMi04NTNlMjZhYy0zMjQ1LTQ4NWMtYjJmZS04ZjVmNTQxMDMyNWMuanBlZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MjIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDIyVDIzMDEzMlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTkxMzllZDQxZjdlYzMxNzYzZGU4NDcwNjM3ZmFmYjAxNDE5MTdiNzYyZTFiMmRlMjc0N2E3MzNkMTM5Nzc3ZTEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.ymhW3N3eQal6vXnYEGPSJj8JN0M1GHiHN_9hFAb2IdY\"><img src=\"https://private-user-images.githubusercontent.com/2223/324107502-853e26ac-3245-485c-b2fe-8f5f5410325c.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTM4MjcxOTIsIm5iZiI6MTcxMzgyNjg5MiwicGF0aCI6Ii8yMjIzLzMyNDEwNzUwMi04NTNlMjZhYy0zMjQ1LTQ4NWMtYjJmZS04ZjVmNTQxMDMyNWMuanBlZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA0MjIlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNDIyVDIzMDEzMlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTkxMzllZDQxZjdlYzMxNzYzZGU4NDcwNjM3ZmFmYjAxNDE5MTdiNzYyZTFiMmRlMjc0N2E3MzNkMTM5Nzc3ZTEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.ymhW3N3eQal6vXnYEGPSJj8JN0M1GHiHN_9hFAb2IdY\" alt=\"rtl_example\" style=\"max-width: 100%;\"></a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This PR provides improved RTL language support, specifically focused on Arabic (MSA), Farsi, and Hebrew languages, including custom fonts for those languages, a javascript to detect auto-translation and shift the <code class=\"notranslate\">dir</code> attribute, and other cleanup based on volunteer feedback.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51613",
            "title": "RTL Rendering for Guides",
            "date_modified": "2024-04-22T19:47:30.000Z",
            "date_published": "2024-04-19T16:32:17.000Z",
            "author": {
                "name": "jathayde",
                "url": "https://github.com/jathayde"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/384364?u=4fc3824b37944fc752160718eee736cecde57a67&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">As <a href=\"https://github.com/rails/rails/blob/1428ef984e8be2e301c562c01b34f8d8c90bd4cf/actionpack/lib/action_dispatch/middleware/remote_ip.rb#L25-L32\">pointed out</a> in the documentation, using <code class=\"notranslate\">RemoteIp</code> while accessible without a reverse proxy opens you to IP spoofing. Returning <code class=\"notranslate\">REMOTE_ADDR</code> when that is not considered a trusted proxy should make that less likely.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The current implementation of <code class=\"notranslate\">RemoteIp</code> assumes the Rails server is only directly accessible through a trusted reverse-proxy and requires users to filter the header or remove the middleware when that is not the case.</p>\n<p dir=\"auto\">While such misconfigurations are unlikely, it is also somewhat of an unsafe fallback mode, and returning <code class=\"notranslate\">REMOTE_ADDR</code> instead of trusting <code class=\"notranslate\">X-Forwarded-For</code> from an untrusted client should be better.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">In the test suite, there are cases where <code class=\"notranslate\">REMOTE_ADDR</code> is unset. I don't know in which real-life situations this could happen, but if it does, the code essentially falls back to the old behavior of trusting the last <code class=\"notranslate\">X-Forwarded-For</code>.</p>\n<p dir=\"auto\">An alternative might be to raise an error when <code class=\"notranslate\">REMOTE_ADDR</code> does not match one of the trusted proxies, as is done when <code class=\"notranslate\">Client-Ip</code> and <code class=\"notranslate\">X-Forwarded-For</code> are mismatched.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51610",
            "title": "Change `ActionDispatch::RemoteIp` to not use `HTTP_X_FORWARDED_FOR` when `REMOTE_ADDR` is not a trusted proxy",
            "date_modified": "2024-04-19T13:47:18.000Z",
            "date_published": "2024-04-19T13:12:47.000Z",
            "author": {
                "name": "ClearlyClaire",
                "url": "https://github.com/ClearlyClaire"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/111995?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51602.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2251712040\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51602\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51602/hovercard\" href=\"https://github.com/rails/rails/issues/51602\">#51602</a>, whereby select prompts are shown for <code class=\"notranslate\">false</code> boolean attributes, when that should be reserved for when they're <code class=\"notranslate\">nil</code>.</p>\n<p dir=\"auto\">I wasn't sure whether to put it in the CHANGELOG, so I haven't.</p>",
            "url": "https://github.com/rails/rails/pull/51605",
            "title": "Stop showing select prompts for false attributes",
            "date_modified": "2024-04-19T02:14:29.000Z",
            "date_published": "2024-04-19T02:14:25.000Z",
            "author": {
                "name": "mrj",
                "url": "https://github.com/mrj"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/384364?u=4fc3824b37944fc752160718eee736cecde57a67&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">While Rails 7.1 has added support for writing Common Table Expressions, this support does not extend to recursive CTEs.</p>\n<p dir=\"auto\">This PR adds a <code class=\"notranslate\">QueryMethods#with_recursive</code> construct to enable recursive CTEs.</p>\n<p dir=\"auto\">In addition, it enables passing arrays of queries as <code class=\"notranslate\">with</code> hash values, as recursive CTEs are generally only useful with <code class=\"notranslate\">UNION</code> or <code class=\"notranslate\">UNION ALL</code>, which, to my knowledge, are currently not exposed outside of Arel.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a <code class=\"notranslate\">WithChain</code> placeholder object to chain <code class=\"notranslate\">with</code> and <code class=\"notranslate\">recursive</code>, in the manner of <code class=\"notranslate\">where.not</code>. Calling <code class=\"notranslate\">QueryMethods#with_recursive</code> returns a scope with a <code class=\"notranslate\">with_is_recursive</code> flag turned on, which is then used in <code class=\"notranslate\">build_with</code> to pass <code class=\"notranslate\">:recursive</code> to Arel.</p>\n<p dir=\"auto\">The Pull Request also changes <code class=\"notranslate\">build_with_value_from_hash</code> to allow arrays of values as queries, in which case the subqueries are joined with <code class=\"notranslate\">UNION ALL</code>.</p>\n<p dir=\"auto\">This enables writing queries such as:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.with_recursive(\n  post_and_replies: [\n    Post.where(id: 42),\n    Post.joins('JOIN post_and_replies ON posts.in_reply_to_id = post_and_replies.id'),\n  ]\n)\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">with_recursive</span><span class=\"pl-kos\">(</span>\n  <span class=\"pl-pds\">post_and_replies</span>: <span class=\"pl-kos\">[</span>\n    <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">id</span>: <span class=\"pl-c1\">42</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n    <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">joins</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'JOIN post_and_replies ON posts.in_reply_to_id = post_and_replies.id'</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n  <span class=\"pl-kos\">]</span>\n<span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">Generating the following SQL:</p>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"WITH RECURSIVE &quot;post_and_replies&quot; AS (\n  (SELECT &quot;posts&quot;.* FROM &quot;posts&quot; WHERE &quot;posts&quot;.&quot;id&quot; = 42)\n  UNION ALL\n  (SELECT &quot;posts&quot;.* FROM &quot;posts&quot; JOIN post_and_replies ON posts.in_reply_to_id = post_and_replies.id)\n)\nSELECT &quot;posts&quot;.* FROM &quot;posts&quot;\"><pre class=\"notranslate\">WITH RECURSIVE <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>post_and_replies<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">AS</span> (\n  (<span class=\"pl-k\">SELECT</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-k\">*</span> <span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">WHERE</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>id<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">42</span>)\n  <span class=\"pl-k\">UNION ALL</span>\n  (<span class=\"pl-k\">SELECT</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-k\">*</span> <span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">JOIN</span> post_and_replies <span class=\"pl-k\">ON</span> <span class=\"pl-c1\">posts</span>.<span class=\"pl-c1\">in_reply_to_id</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">post_and_replies</span>.<span class=\"pl-c1\">id</span>)\n)\n<span class=\"pl-k\">SELECT</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span>.<span class=\"pl-k\">*</span> <span class=\"pl-k\">FROM</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>posts<span class=\"pl-pds\">\"</span></span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Several syntaxes have previously been discussed to support recursive CTEs, as well as unions.</p>\n<ul dir=\"auto\">\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"536810238\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/37944\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/37944/hovercard?comment_id=565796643&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/pull/37944#issuecomment-565796643\">#37944 (comment)</a> proposes <code class=\"notranslate\">.with(:recursive, â€¦)</code></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"536810238\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/37944\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/37944/hovercard?comment_id=565803484&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/pull/37944#issuecomment-565803484\">#37944 (comment)</a> also suggests <code class=\"notranslate\">.with.recursive(â€¦)</code> (which this PR implements) and <code class=\"notranslate\">.with_recursive(â€¦)</code></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1583198310\" data-permission-text=\"Title is private\" data-url=\"https://github.com/vlado/activerecord-cte/issues/16\" data-hovercard-type=\"issue\" data-hovercard-url=\"/vlado/activerecord-cte/issues/16/hovercard?comment_id=1433043310&amp;comment_type=issue_comment\" href=\"https://github.com/vlado/activerecord-cte/issues/16#issuecomment-1433043310\">vlado/activerecord-cte#16 (comment)</a> suggests <code class=\"notranslate\">.with_recursive(cte_name, base_case, recursive_case)</code></li>\n</ul>\n<p dir=\"auto\">I took a lot of inspiration from that last monkey-patch, but the API felt significantly at odds with the existing <code class=\"notranslate\">QueryMethods#with</code>, so I decided to go with the <code class=\"notranslate\">.with_recursive</code> approach and extend that interface to offer to <code class=\"notranslate\">UNION ALL</code> sub-queries.</p>\n<p dir=\"auto\">I have decided to put both the array support and the <code class=\"notranslate\">.with_recursive</code> support in the same PR, as they are closely related, but I can split it into two PRs if preferred.</p>\n<p dir=\"auto\">Tests are updated accordingly, but don't actually test inherently recursive queries, as I'm not sure there are existing fixtures lending themselves to that.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51601",
            "title": "Add support for recursive CTEs in ActiveRecord",
            "date_modified": "2024-04-22T13:49:28.000Z",
            "date_published": "2024-04-18T17:32:40.000Z",
            "author": {
                "name": "ClearlyClaire",
                "url": "https://github.com/ClearlyClaire"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/622516?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">When using the following code you'd expect that you can pass <code class=\"notranslate\">expire_in</code> as you can with rendering individual partials.</p>\n<div class=\"highlight highlight-text-html-erb notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"&lt;%= render(collection: @posts, partial: 'post', cached: true, expires_in: 1.hour) %&gt;\"><pre class=\"notranslate\"><span class=\"pl-k\">&lt;%=</span> render(collection: @posts, partial: 'post', cached: true, expires_in: 1.hour) <span class=\"pl-k\">%&gt;</span><span class=\"pl-en\"></span><span class=\"pl-kos\"></span><span class=\"pl-pds\"></span><span class=\"pl-c1\"></span><span class=\"pl-kos\"></span><span class=\"pl-pds\"></span><span class=\"pl-s\"></span><span class=\"pl-kos\"></span><span class=\"pl-pds\"></span><span class=\"pl-c1\"></span><span class=\"pl-kos\"></span><span class=\"pl-pds\"></span><span class=\"pl-c1\"></span><span class=\"pl-kos\"></span><span class=\"pl-en\"></span><span class=\"pl-kos\"></span></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<ul dir=\"auto\">\n<li>Pass <code class=\"notranslate\">expires_in</code> to <code class=\"notranslate\">write_multi</code> so the cache key is written with the expiration.</li>\n<li>Added tests.</li>\n<li>Added documentation.</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51579",
            "title": "Add support for `expires_in:` when using `render` with `collection:`",
            "date_modified": "2024-04-17T14:04:55.000Z",
            "date_published": "2024-04-16T17:28:40.000Z",
            "author": {
                "name": "jclusso",
                "url": "https://github.com/jclusso"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6097?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">&gt;= AND &lt;=</code> is bad</li>\n<li><code class=\"notranslate\">&gt;= AND &lt;</code> is good</li>\n</ul>\n<p dir=\"auto\"><a href=\"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_BETWEEN_.28especially_with_timestamps.29\" rel=\"nofollow\">https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_BETWEEN_.28especially_with_timestamps.29</a></p>\n<h2 dir=\"auto\">Why is it okay to change this behavior?</h2>\n<blockquote>\n<p dir=\"auto\">I doubt anyone actually wants the possibility of being infinite points of precision away from tomorrow<br>\nâ€” <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/natematykiewicz/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/natematykiewicz\">@natematykiewicz</a></p>\n</blockquote>\n<h2 dir=\"auto\">ToDo</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> tests for new methods</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> DRY new methods?</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51575",
            "title": "Use exact date spans instead of multi-nine approximations for `all_day`, `all_week`, etc. methods",
            "date_modified": "2024-04-16T13:39:45.000Z",
            "date_published": "2024-04-15T21:01:05.000Z",
            "author": {
                "name": "jjb",
                "url": "https://github.com/jjb"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5512772?u=bbae6d87b3499e6b3662664cf4be0e84cc40f6d2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This PR adds a deprecation warning for the <code class=\"notranslate\">query_constraints:</code> association option. This option will change behavior in the future versions of Rails and applications are encouraged to switch to <code class=\"notranslate\">foreign_key:</code> to preserve the current behavior.</p>\n<p dir=\"auto\">Related to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1947207719\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49671\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49671/hovercard?comment_id=1997955187&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/issues/49671#issuecomment-1997955187\">#49671 (comment)</a></p>\n<h3 dir=\"auto\">Deprecation location</h3>\n<p dir=\"auto\">Currently Rails will issue a deprecation during boot but there is an option to move it and only warn on runtime when a reflection with <code class=\"notranslate\">query_constraints</code> is used.<br>\nI chose to put it in the <code class=\"notranslate\">initialize</code> just because it's the simplest available solution and moving it to runtime will require a bit of renaming.<br>\nLet me know if you think there is a reason to have this deprecation issued in runtime or if we should have both.</p>\n<h3 dir=\"auto\">Test models</h3>\n<p dir=\"auto\">To avoid having this deprecation in tests I migrated all models to <code class=\"notranslate\">foreign_key:</code> but the long term intention is for <code class=\"notranslate\">Sharded::</code> namespace models to use the new behavior of <code class=\"notranslate\">query_constrainsts</code> and <code class=\"notranslate\">Cpk::</code> to keep using <code class=\"notranslate\">foreign_key</code></p>\n<p dir=\"auto\">Also passing CI is an assurance that <code class=\"notranslate\">foreign_key</code> is indeed a safe substitution for <code class=\"notranslate\">query_constraints:</code></p>",
            "url": "https://github.com/rails/rails/pull/51571",
            "title": "Warn about changing `query_constraints:` behavior",
            "date_modified": "2024-04-17T14:40:10.000Z",
            "date_published": "2024-04-15T16:03:42.000Z",
            "author": {
                "name": "nvasilevski",
                "url": "https://github.com/nvasilevski"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/17678162?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This is my first PR to rails, I couldn't locate any similar or identical issues documented or discussed.</p>\n<p dir=\"auto\">The backtrace of errors starts exhibiting the following output post the Rails 7.08 =&gt; Rails 7.1 update:<br>\nThe last attempt I made was to create a new database migration, which hasn't been migrated yet. An error occurred, indicating 'You have 1 pending migration.' The error traceback is as follows when I tried to fetch kaminari paginated page from api:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Puma caught this error: undefined method `built_templates' for #&lt;ActionView::FileSystemResolver:0x000000011b4f9540 @unbound_templates=#&lt;Concurrent::Map:0x000000011b4f94a0 entries=0 default_proc=nil&gt;, @path_parser=#&lt;ActionView::Resolver::PathParser:0x00000001283b1748&gt;, @path=&quot;/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/kaminari-core-1.2.2/app/views&quot;&gt; (NoMethodError)\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:269:in `block in build_backtrace'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:268:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:268:in `build_backtrace'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:56:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:35:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:35:in `rescue in call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:37:in `call_app'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:24:in `block in call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:135:in `block in tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:39:in `tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:135:in `tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/broadcast_logger.rb:240:in `method_missing'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:24:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/sprockets-rails-3.4.2/lib/sprockets/rails/quiet_assets.rb:13:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/remote_ip.rb:92:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/request_store-1.5.1/lib/request_store/middleware.rb:19:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/request_id.rb:28:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/method_override.rb:28:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/runtime.rb:24:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/executor.rb:14:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/static.rb:25:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/sendfile.rb:114:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/host_authorization.rb:141:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/rack-cors-2.0.2/lib/rack/cors.rb:102:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/engine.rb:536:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/configuration.rb:272:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/request.rb:100:in `block in handle_request'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:378:in `with_force_shutdown'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/request.rb:99:in `handle_request'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/server.rb:464:in `process_client'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/server.rb:245:in `block in run'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:155:in `block in spawn_thread'\"><pre class=\"notranslate\"><code class=\"notranslate\">Puma caught this error: undefined method `built_templates' for #&lt;ActionView::FileSystemResolver:0x000000011b4f9540 @unbound_templates=#&lt;Concurrent::Map:0x000000011b4f94a0 entries=0 default_proc=nil&gt;, @path_parser=#&lt;ActionView::Resolver::PathParser:0x00000001283b1748&gt;, @path=\"/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/kaminari-core-1.2.2/app/views\"&gt; (NoMethodError)\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:269:in `block in build_backtrace'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:268:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:268:in `build_backtrace'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:56:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `block in wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:291:in `causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `each'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `map'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:295:in `wrapped_causes_for'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/exception_wrapper.rb:51:in `initialize'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:35:in `new'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:35:in `rescue in call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:37:in `call_app'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:24:in `block in call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:135:in `block in tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:39:in `tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/tagged_logging.rb:135:in `tagged'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/activesupport-7.1.3.2/lib/active_support/broadcast_logger.rb:240:in `method_missing'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/rack/logger.rb:24:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/sprockets-rails-3.4.2/lib/sprockets/rails/quiet_assets.rb:13:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/remote_ip.rb:92:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/request_store-1.5.1/lib/request_store/middleware.rb:19:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/request_id.rb:28:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/method_override.rb:28:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/runtime.rb:24:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/executor.rb:14:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/static.rb:25:in `call'\n/Users/user/.gem/ruby/3.2.0/gems/rack-3.0.10/lib/rack/sendfile.rb:114:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/actionpack-7.1.3.2/lib/action_dispatch/middleware/host_authorization.rb:141:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/rack-cors-2.0.2/lib/rack/cors.rb:102:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/railties-7.1.3.2/lib/rails/engine.rb:536:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/configuration.rb:272:in `call'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/request.rb:100:in `block in handle_request'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:378:in `with_force_shutdown'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/request.rb:99:in `handle_request'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/server.rb:464:in `process_client'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/server.rb:245:in `block in run'\n/Users/user/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:155:in `block in spawn_thread'\n</code></pre></div>\n<p dir=\"auto\">This error isn't exclusive to Kaminari. I've attempted to isolate the issue by removing gems individually, but each time, I encounter the same backtrace, albeit with a different gem's view route (such as Active Admin or Devise).</p>\n<p dir=\"auto\">There could be other gems interfering with the middleware, but I'm uncertain what's necessary to establish a backtrace at the initialization stage.</p>\n<p dir=\"auto\">This Pull Request has been created because, I believe it resolves the initialization backtrace error, thereby resolving the main issue at hand.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes ActionDispatch ExeptionWrapper class, and removes backtrace attribute to be set on initializing stage.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">N/A</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51568",
            "title": "ExceptionWrapper take out backtrace setter from initialize stage",
            "date_modified": "2024-04-18T18:03:35.000Z",
            "date_published": "2024-04-15T10:46:50.000Z",
            "author": {
                "name": "erimicel",
                "url": "https://github.com/erimicel"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2291064?u=9d30765b16bbc19b3fbd3a160a262e8044ed42ab&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">â€¦ association instead of authors because has_many associations uses 2 queries with eager_load while belongs_to uses 1 query</p>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because because the eager_load example in active record query uses 1 query while it is mentioned in the doc that it uses 2 queries.</p>\n<p dir=\"auto\">This PR changes the example to use reviews <code class=\"notranslate\">has_many</code> association which uses 2 queries when using eager_load. <code class=\"notranslate\">belongs_to</code> relationship uses 1 query with eager_load.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">eager_load</code> example given in <code class=\"notranslate\">guides/source/active_record_querying.md</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The books author example uses only 1 query, I've noticed that it happens with <code class=\"notranslate\">belongs_to</code> association:</p>\n<h4 dir=\"auto\">books author example</h4>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"books = Book.eager_load(:author).limit(10)\n  SQL (0.4ms)  SELECT &quot;books&quot;.&quot;id&quot; AS t0_r0, &quot;books&quot;.&quot;title&quot; AS t0_r1, ...\n   FROM &quot;books&quot; LEFT OUTER JOIN &quot;authors&quot; ON &quot;authors&quot;.&quot;id&quot; = &quot;books&quot;.&quot;author_id&quot; LIMIT 10\"><pre class=\"notranslate\"><code class=\"notranslate\">books = Book.eager_load(:author).limit(10)\n  SQL (0.4ms)  SELECT \"books\".\"id\" AS t0_r0, \"books\".\"title\" AS t0_r1, ...\n   FROM \"books\" LEFT OUTER JOIN \"authors\" ON \"authors\".\"id\" = \"books\".\"author_id\" LIMIT 10\n</code></pre></div>\n<h4 dir=\"auto\">fetching books supplier which is also a <code class=\"notranslate\">belongs_to</code> relationship</h4>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"3.2.3 :004 &gt; books = Book.eager_load(:supplier).limit(10)\n  SQL (0.2ms)  SELECT &quot;books&quot;.&quot;id&quot; AS t0_r0, &quot;books&quot;.&quot;title&quot; AS t0_r1,...\n  FROM &quot;books&quot; LEFT OUTER JOIN &quot;suppliers&quot; ON &quot;suppliers&quot;.&quot;id&quot; = &quot;books&quot;.&quot;supplier_id&quot; LIMIT 10\"><pre class=\"notranslate\"><code class=\"notranslate\">3.2.3 :004 &gt; books = Book.eager_load(:supplier).limit(10)\n  SQL (0.2ms)  SELECT \"books\".\"id\" AS t0_r0, \"books\".\"title\" AS t0_r1,...\n  FROM \"books\" LEFT OUTER JOIN \"suppliers\" ON \"suppliers\".\"id\" = \"books\".\"supplier_id\" LIMIT 10\n</code></pre></div>\n<p dir=\"auto\">While for a <code class=\"notranslate\">has_many</code> association, <code class=\"notranslate\">eager_load</code> requires 2 queries:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"books = Book.eager_load(:reviews).limit(10)\n  SQL (0.4ms)  SELECT DISTINCT &quot;books&quot;.&quot;id&quot; FROM &quot;books&quot; LEFT OUTER JOIN &quot;reviews&quot; ON &quot;reviews&quot;.&quot;book_id&quot; = &quot;books&quot;.&quot;id&quot; LIMIT 10\n  SQL (0.2ms)  SELECT &quot;books&quot;.&quot;id&quot; AS t0_r0, &quot;books&quot;.&quot;title&quot; AS t0_r1, ...\n    FROM &quot;books&quot; LEFT OUTER JOIN &quot;reviews&quot; ON &quot;reviews&quot;.&quot;book_id&quot; = &quot;books&quot;.&quot;id&quot; WHERE &quot;books&quot;.&quot;id&quot; IN (1,2,3,4,5,6)\"><pre class=\"notranslate\"><code class=\"notranslate\">books = Book.eager_load(:reviews).limit(10)\n  SQL (0.4ms)  SELECT DISTINCT \"books\".\"id\" FROM \"books\" LEFT OUTER JOIN \"reviews\" ON \"reviews\".\"book_id\" = \"books\".\"id\" LIMIT 10\n  SQL (0.2ms)  SELECT \"books\".\"id\" AS t0_r0, \"books\".\"title\" AS t0_r1, ...\n    FROM \"books\" LEFT OUTER JOIN \"reviews\" ON \"reviews\".\"book_id\" = \"books\".\"id\" WHERE \"books\".\"id\" IN (1,2,3,4,5,6)\n</code></pre></div>\n<h4 dir=\"auto\">Alternate Suggestions</h4>\n<ol dir=\"auto\">\n<li>We can also use the same books author example and specify that it uses 1 query. However, it might be better to also cover the <code class=\"notranslate\">has_many</code> association example so readers don't assume that <code class=\"notranslate\">eager_loads</code> uses only 1 query.</li>\n<li>I was thinking about changing the example for all previous associations to make things consistent but I thought about discussing it first since that will be a relatively larger change.</li>\n</ol>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51566",
            "title": "[ci skip] doc: updated the eager load query example to use reviews asâ€¦",
            "date_modified": "2024-04-14T08:18:35.000Z",
            "date_published": "2024-04-14T08:18:31.000Z",
            "author": {
                "name": "ashish91",
                "url": "https://github.com/ashish91"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5913106?u=b6d2266389cde0ac89e38f3bde69a10459e27de5&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">We noticed when making our own cache store that options were not being passed correctly to writes in some cases. Upon further investigation the <code class=\"notranslate\">handle_expired_entry</code> method calls <code class=\"notranslate\">write_entry</code> during the <code class=\"notranslate\">race_condition_ttl</code> period. However, this call to <code class=\"notranslate\">write_entry</code> does not pass along the correct options meaning that in some cases (like the test case I provided with compression) does not correctly write the data.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">handle_expired_entry</code> method to use options when writing the key back with a <code class=\"notranslate\">race_condition_ttl</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I am unsure of the implications of this for uses of this. It could be implicitly breaking as now options are used when they weren't being used before in this niche case.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51557",
            "title": "[Bugfix] Pass options along to write_entry in handle_expired_entry method",
            "date_modified": "2024-04-12T14:07:36.000Z",
            "date_published": "2024-04-12T14:07:31.000Z",
            "author": {
                "name": "grcooper",
                "url": "https://github.com/grcooper"
            }
        }
    ]
}