{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2651240?u=97e6903620ef2874e2231cee9eb2654b7811d750&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #47335.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1577755446\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47335\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/47335/hovercard\" href=\"https://github.com/rails/rails/issues/47335\">#47335</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48362",
            "title": "Fix polymorphic association subquery",
            "date_modified": "2023-06-01T06:00:59.000Z",
            "date_published": "2023-06-01T06:00:54.000Z",
            "author": {
                "name": "lazaronixon",
                "url": "https://github.com/lazaronixon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1539610?u=3ac4052a0bf7ff1f6bfb6e1684b8784383e6b328&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48359.\">closes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1735058154\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48359\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48359/hovercard\" href=\"https://github.com/rails/rails/issues/48359\">#48359</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request add a rails way to get foreign_keys method from a model</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48360",
            "title": "Add foreign_keys method to Model",
            "date_modified": "2023-05-31T22:20:52.000Z",
            "date_published": "2023-05-31T21:33:57.000Z",
            "author": {
                "name": "victorlcampos",
                "url": "https://github.com/victorlcampos"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/11556013?u=ee0a9a98d8edb36d08c7d4c7f28c30897c21eced&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because moving an ActiveRecord class makes previously generated signed ids invalid.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes what base purpose is chosen for a signed id and uses <code class=\"notranslate\">base_class.polymorphic_name</code> instead of <code class=\"notranslate\">base_class.name</code>.<br>\nThe rationale behind this proposal would be that <code class=\"notranslate\">polymorphic_name</code> is the representation of the class/table in external systems.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I am not 100% sure <code class=\"notranslate\">polymorphic_name</code> is the best fit, it is convenient because overriding it would solve multiple issues at once (polymorphic relations, signed ids) when having to move an ActiveRecord class.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48358",
            "title": "Signed id with polymorphic name purpose",
            "date_modified": "2023-05-31T20:19:07.000Z",
            "date_published": "2023-05-31T20:17:36.000Z",
            "author": {
                "name": "alxckn",
                "url": "https://github.com/alxckn"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because belongs_to associations with composite primary keys are broken.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Raises <code class=\"notranslate\">ActiveRecord::CompositePrimaryKeyMismatchError</code> when <code class=\"notranslate\">belongs_to</code> foreign key and primary key don't have the same length.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This fixes an issue where autosave fails to update foreign key attributes here: </p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/ced5e77936292cd557d71dadaf85c4cb0cf83df2/activerecord/lib/active_record/autosave_association.rb#L511-L515\">rails/activerecord/lib/active_record/autosave_association.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 511 to 515\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/ced5e77936292cd557d71dadaf85c4cb0cf83df2\">ced5e77</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L511\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"511\"></td>\n          <td id=\"LC511\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">primary_key_foreign_key_pairs</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">primary_key</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">zip</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">foreign_key</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L512\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"512\"></td>\n          <td id=\"LC512\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">primary_key_foreign_key_pairs</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">primary_key</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">foreign_key</span>| </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L513\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"513\"></td>\n          <td id=\"LC513\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-s1\">association_id</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">_read_attribute</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">primary_key</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L514\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"514\"></td>\n          <td id=\"LC514\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-smi\">self</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">foreign_key</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">association_id</span> <span class=\"pl-k\">unless</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">[</span><span class=\"pl-s1\">foreign_key</span><span class=\"pl-kos\">]</span> == <span class=\"pl-s1\">association_id</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L515\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"515\"></td>\n          <td id=\"LC515\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">I'm not sure if my fix is the best way to fix this problem, there might be an easier way around this than introducing an error and additional validation check. From my perspective, if a model has a composite primary key, its associations need query constraints to spell out the foreign key columns Active Record should use. Let me know what you think!</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48357",
            "title": "Add composite primary key validity check on belongs_to associations.",
            "date_modified": "2023-05-31T20:52:04.000Z",
            "date_published": "2023-05-31T20:10:26.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/90790555?u=d879791fb9d64d1e385f31fd59b6a94c705ceffd&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">At this pull request I implemented a back-to-top button on guides</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">guides/assets/javascripts/guides.js<br>\nguides/assets/stylesheets/main.css<br>\nguides/assets/images/up_white_arrow.png<br>\nguides/CHANGELOG.md</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[ #48277 ]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48354",
            "title": "Adding the button using JS and styling with CSS and Image [ #48277 ]",
            "date_modified": "2023-05-31T20:39:47.000Z",
            "date_published": "2023-05-31T17:44:59.000Z",
            "author": {
                "name": "ally1002",
                "url": "https://github.com/ally1002"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Preview (<a href=\"https://bbe6dd3e.zzak-rails.pages.dev\" rel=\"nofollow\">link</a>)</p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/277819/242134684-6cedecc4-f8c8-4677-9496-f57139743f4d.png\"><img src=\"https://user-images.githubusercontent.com/277819/242134684-6cedecc4-f8c8-4677-9496-f57139743f4d.png\" alt=\"Screenshot 2023-05-31 at 10 26 38\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">How to test:</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"export GITHUB_SERVER_URL=&quot;https://github.com&quot;\nexport GITHUB_REPOSITORY=&quot;zzak/rails&quot;\nexport GITHUB_REF_NAME=&quot;cf-pages&quot;\nexport GITHUB_SHA=&quot;45efdc016e00a79861527a87e341a2d57badee55&quot;\nexport GITHUB_RUN_ID=&quot;5127901781&quot;\nexport GITHUB_ACTOR=&quot;zzak&quot;\n\nbundle exec rake preview_docs\"><pre class=\"notranslate\"><span class=\"pl-k\">export</span> GITHUB_SERVER_URL=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>https://github.com<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> GITHUB_REPOSITORY=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>zzak/rails<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> GITHUB_REF_NAME=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>cf-pages<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> GITHUB_SHA=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>45efdc016e00a79861527a87e341a2d57badee55<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> GITHUB_RUN_ID=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>5127901781<span class=\"pl-pds\">\"</span></span>\n<span class=\"pl-k\">export</span> GITHUB_ACTOR=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>zzak<span class=\"pl-pds\">\"</span></span>\n\nbundle <span class=\"pl-c1\">exec</span> rake preview_docs</pre></div>",
            "url": "https://github.com/rails/rails/pull/48349",
            "title": "📜 Preview Docs with Cloudflare Pages ☁️ ",
            "date_modified": "2023-05-31T09:03:08.000Z",
            "date_published": "2023-05-31T01:43:07.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/44640?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Ref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1729468067\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48322\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48322/hovercard\" href=\"https://github.com/rails/rails/pull/48322\">#48322</a></p>\n<p dir=\"auto\">The patch didn't apply cleanly, so just making sure nothing is broken.</p>\n<p dir=\"auto\">FYI: <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/fatkodima/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/fatkodima\">@fatkodima</a></p>",
            "url": "https://github.com/rails/rails/pull/48342",
            "title": "Backport the optimistic locking and counter cache fix",
            "date_modified": "2023-05-30T08:37:53.000Z",
            "date_published": "2023-05-30T07:56:07.000Z",
            "author": {
                "name": "byroot",
                "url": "https://github.com/byroot"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5104186?u=c6802aa87b5de2965f8269a3798d468a08a2843b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">We use ActiveStorage attachments via Direct Uploads, which set the attachment value to an ActiveStorage::Blob signed id. We also have the ability to remove an attachment (such as an avatar) in the UI via a \"clear\" button. This button simply sets the attachment to an empty string (via a hidden field tag), since a form cannot send a nil param. However, we found that this causes an <code class=\"notranslate\">ActiveSupport::MessageVerifier::InvalidSignature: mismatched digest</code> error to be raised, because it's being treated as a signed blob id.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR changes the <code class=\"notranslate\">#{attachment}=</code> ActiveRecord method to treat an empty string just like it treats a nil, and use <code class=\"notranslate\">ActiveStorage::Attached::Changes::DeleteOne</code> instead of <code class=\"notranslate\">ActiveStorage::Attached::Changes::CreateOne</code>.</p>\n<p dir=\"auto\">Now these two are treated the same:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"User.first.update!(avatar: nil)\nUser.first.update!(avatar: &quot;&quot;)\"><pre class=\"notranslate\"><span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">first</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">update!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">avatar</span>: <span class=\"pl-c1\">nil</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">first</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">update!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">avatar</span>: <span class=\"pl-s\">\"\"</span><span class=\"pl-kos\">)</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Without this change, you have to do things like this in all of your controllers that accept direct uploads, which is quite tedious:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"def user_params\n  params\n    .require(:user)\n    .permit(:first_name, :last_name, :avatar).tap do |permitted|\n      permitted[:avatar] = nil if permitted[:avatar] == ''\n    end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">def</span> <span class=\"pl-en\">user_params</span>\n  <span class=\"pl-en\">params</span>\n    <span class=\"pl-kos\">.</span><span class=\"pl-en\">require</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:user</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-kos\">.</span><span class=\"pl-en\">permit</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:first_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:last_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:avatar</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">tap</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">permitted</span>|\n      <span class=\"pl-s1\">permitted</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:avatar</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">nil</span> <span class=\"pl-k\">if</span> <span class=\"pl-s1\">permitted</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:avatar</span><span class=\"pl-kos\">]</span> == <span class=\"pl-s\">''</span>\n    <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">When adding tests, I simply copy/pasted the tests that test assigning <code class=\"notranslate\">nil</code>, and modified them to be <code class=\"notranslate\">\"\"</code> tests.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48339",
            "title": "Allow an ActiveStorage attachment to be removed via a form post",
            "date_modified": "2023-05-30T04:15:37.000Z",
            "date_published": "2023-05-30T04:10:51.000Z",
            "author": {
                "name": "natematykiewicz",
                "url": "https://github.com/natematykiewicz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/36955431?u=66a3370484ae568c17167e7a029fcb2ab17138b3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<p dir=\"auto\">Hello contibutors <g-emoji class=\"g-emoji\" alias=\"raised_back_of_hand\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f91a.png\">🤚</g-emoji> thank you for your efforts to keep the project alive.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">When I use <code class=\"notranslate\">as_json</code> method to make the body of the response, There was one inconvenience.<br>\nAs per Ruby's convention I usually put a question mark in the name of a method. (ex: has_value?)<br>\nIt's not a problem inside Ruby, but it causes problems when used in other applications accessing the rails server.<br>\nTo solve this, I had to manipulate the hash returned by <code class=\"notranslate\">as_json</code>, which wasn't very clean.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">To solve the above problem I add a new option called <code class=\"notranslate\">rename</code> to the <code class=\"notranslate\">serializable_hash</code> method.<br>\nIt can be used when you want to rename attributes or methods.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48338",
            "title": "Add rename option to serializable_hash method",
            "date_modified": "2023-05-31T01:31:31.000Z",
            "date_published": "2023-05-30T03:07:36.000Z",
            "author": {
                "name": "dongcheolpark",
                "url": "https://github.com/dongcheolpark"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">When working on <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1730091371\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48327\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48327/hovercard\" href=\"https://github.com/rails/rails/pull/48327\">#48327</a>, I noticed the comment for this class references a method which has moved to the <a href=\"https://github.com/heartcombo/responders\">responders gem</a>. Nothing else in Rails uses it internally, so I think we can move it to that gem and deprecate it from Rails.</p>\n<p dir=\"auto\">I've opened a PR to move it in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1730121732\" data-permission-text=\"Title is private\" data-url=\"https://github.com/heartcombo/responders/issues/245\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/heartcombo/responders/pull/245/hovercard\" href=\"https://github.com/heartcombo/responders/pull/245\">heartcombo/responders#245</a>.</p>\n<p dir=\"auto\">Inspiration for the constant deprecation path came from <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/3e2552db899160266f175f2fda61e44be258aecd/hovercard\" href=\"https://github.com/rails/rails/commit/3e2552db899160266f175f2fda61e44be258aecd\"><tt>3e2552d</tt></a> but LMK if there is a better way! <g-emoji class=\"g-emoji\" alias=\"bow\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f647.png\">🙇</g-emoji></p>",
            "url": "https://github.com/rails/rails/pull/48328",
            "title": "Deprecate ActionController::MissingRenderer",
            "date_modified": "2023-05-30T19:34:48.000Z",
            "date_published": "2023-05-29T05:59:17.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/984854?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Following on the Arel work in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1717924373\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48261\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48261/hovercard\" href=\"https://github.com/rails/rails/pull/48261\">#48261</a>, this commit adds the ability to provide a materialization hint to a CTE in ActiveRecord. To support the hint, a more verbose syntax for CTE values is introduced:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.with(posts_with_comments: { query: Post.where(&quot;comments_count &gt; ?&quot;, 0), materialized: true })\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">with</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">posts_with_comments</span>: <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">query</span>: <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"comments_count &gt; ?\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">0</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">materialized</span>: <span class=\"pl-c1\">true</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">The CTE value is described as a hash that contains a required <code class=\"notranslate\">:query</code> key and an optional <code class=\"notranslate\">:materialized</code> key. The set of available options could be expanded in the future to accommodate, for example, postgres's various options for recursive CTEs.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I don't know whether there's any appetite within the core team to expose this functionality in AR's public API. But if there is, this approach seemed like the most plausible choice, given the current <code class=\"notranslate\">#with</code> interface. That said, I'm more than happy to talk about alternatives.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48305",
            "title": "Add syntax for CTE materialization hint to ActiveRecord",
            "date_modified": "2023-05-26T12:59:57.000Z",
            "date_published": "2023-05-26T00:35:36.000Z",
            "author": {
                "name": "97jaz",
                "url": "https://github.com/97jaz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Continuation of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1723747653\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48288\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48288/hovercard\" href=\"https://github.com/rails/rails/pull/48288\">#48288</a></p>\n<p dir=\"auto\">This covers the following cases:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">&lt;tt&gt;config/application.rb&lt;/tt&gt;</code> -&gt; <code class=\"notranslate\">+config/application.rb+</code></li>\n<li><code class=\"notranslate\">&lt;tt&gt;test/mailers/previews&lt;/tt&gt;</code> -&gt; <code class=\"notranslate\">+test/mailers/previews+</code></li>\n<li><code class=\"notranslate\">&lt;tt&gt;foo!&lt;/tt&gt;</code> -&gt; <code class=\"notranslate\">+foo!+</code></li>\n<li><code class=\"notranslate\">&lt;tt&gt;foo*&lt;/tt&gt;</code> -&gt; <code class=\"notranslate\">+foo*+</code></li>\n<li><code class=\"notranslate\">&lt;tt&gt;foo?&lt;/tt&gt;</code> -&gt; <code class=\"notranslate\">+foo?+</code></li>\n<li><code class=\"notranslate\">&lt;tt&gt;keyword&lt;/tt&gt;</code> -&gt; <code class=\"notranslate\">+keyword+</code></li>\n<li><code class=\"notranslate\">&lt;tt&gt;:symbol&lt;/tt&gt;</code> -&gt; <code class=\"notranslate\">+:symbol+</code></li>\n<li><code class=\"notranslate\">&lt;tt&gt;default_options=&lt;/tt&gt;</code> -&gt; <code class=\"notranslate\">+default_options=+</code></li>\n<li><code class=\"notranslate\">&lt;tt&gt;Time.zone=&lt;/tt&gt;</code> -&gt; <code class=\"notranslate\">+Time.zone=+</code></li>\n<li><code class=\"notranslate\">&lt;tt&gt;activemodel.errors.models.MODEL.attributes.ATTRIBUTE.MESSAGE&lt;/tt&gt;</code> -&gt; <code class=\"notranslate\">+activemodel.errors.models.MODEL.attributes.ATTRIBUTE.MESSAGE+</code></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48296",
            "title": "Use short-form fixed-width RDoc form for symbols",
            "date_modified": "2023-05-25T00:05:40.000Z",
            "date_published": "2023-05-25T00:03:08.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/20481048?u=d1e9cc98c3219014f761a14cb56e40aacd4939e3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">While investigating database-related errors at GitHub we found ourselves consistently digging through the code to find out more information about the connection, like the cluster or role.</p>\n<p dir=\"auto\">The goal of this PR is to store the <code class=\"notranslate\">connection_pool</code> associated with any exceptions raised from an adapter so the application can easily access it and send it along to an exception tracking system.<br>\nWe believe that's an appropriate feature given Rails supports multiple databases.</p>\n<p dir=\"auto\">Anytime <sup><a href=\"#user-content-fn-almost-b13a14493d144f16478487258379befe\" id=\"user-content-fnref-almost-b13a14493d144f16478487258379befe\" data-footnote-ref=\"\" aria-describedby=\"footnote-label\">1</a></sup> an exception is raised from an adapter we now provide a <code class=\"notranslate\">connection_pool</code> along for the application to further debug what went wrong. This is an important feature when running a multi-database Rails application.</p>\n<p dir=\"auto\">We chose to provide the <code class=\"notranslate\">connection_pool</code> as it has relevant context like connection, role and shard. We wanted to avoid providing the <code class=\"notranslate\">connection</code> directly as it might accidentally be used after it's returned to the pool and been handed to another thread.<br>\nThe <code class=\"notranslate\">ConnectionAdapters::PoolConfig</code> would also have been a reasonable option except it's <code class=\"notranslate\">:nodoc:</code>.</p>\n<section data-footnotes=\"\" class=\"footnotes\"><h2 id=\"footnote-label\" class=\"sr-only\" dir=\"auto\">Footnotes</h2>\n<ol dir=\"auto\">\n<li id=\"user-content-fn-almost-b13a14493d144f16478487258379befe\">\n<p dir=\"auto\">There's one exception I caught: sqlite3's adapter raises an <code class=\"notranslate\">ArgumentError</code> if no database file is specified. I didn't think it was appropriate to change that exception to include the connection pool <a href=\"https://github.com/rails/rails/blob/02df5fe1e77c38f8086ec45e349ba3d1b25605a0/activerecord/lib/active_record/connection_adapters/sqlite3_adapter.rb#L106\">https://github.com/rails/rails/blob/02df5fe1e77c38f8086ec45e349ba3d1b25605a0/activerecord/lib/active_record/connection_adapters/sqlite3_adapter.rb#L106</a> <a href=\"#user-content-fnref-almost-b13a14493d144f16478487258379befe\" data-footnote-backref=\"\" aria-label=\"Back to reference 1\" class=\"data-footnote-backref\"><g-emoji class=\"g-emoji\" alias=\"leftwards_arrow_with_hook\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/21a9.png\">↩</g-emoji></a></p>\n</li>\n</ol>\n</section>",
            "url": "https://github.com/rails/rails/pull/48295",
            "title": "Store `connection_pool` in database-related exceptions",
            "date_modified": "2023-05-31T18:35:12.000Z",
            "date_published": "2023-05-24T20:31:58.000Z",
            "author": {
                "name": "luanzeba",
                "url": "https://github.com/luanzeba"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/93276?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This change is necessary to address a potential issue that could arise when a button or an input of type submit contains child elements, such as spans, icons, or other HTML elements.</p>\n<p dir=\"auto\">Currently, ActiveStorage's <code class=\"notranslate\">didClick</code> event listener checks the target of the click event to determine if a submit button was clicked. The target property of the event refers to the specific HTML element that was clicked.</p>\n<p dir=\"auto\">In cases where a submit button contains child elements, and one of these child elements is the element that actually gets clicked, the target would refer to this child element, not the button itself.</p>\n<p dir=\"auto\">Since the <code class=\"notranslate\">didClick</code> function checks if the target is a button or an input of type submit, this check would fail, and the button wouldn't be stored in <code class=\"notranslate\">submitButtonsByForm</code>.</p>\n<p dir=\"auto\">As a result, if the form is then submitted after a direct upload, the first submit button in the form could be incorrectly used to submit the form, even if a different button was originally clicked. This could cause unexpected behavior, as different submit buttons might be intended to trigger different actions on form submission.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">By using the <code class=\"notranslate\">Element.closest()</code> method to find the nearest ancestor of the clicked element that is a button or an input of type submit, we ensure that the correct button is stored in <code class=\"notranslate\">submitButtonsByForm</code>, even if the click event was triggered by a child element of the button. This addresses the issue and ensures that the correct button is used to submit the form after a direct upload.</p>",
            "url": "https://github.com/rails/rails/pull/48290",
            "title": "Support nested elements inside <button>",
            "date_modified": "2023-05-24T15:22:12.000Z",
            "date_published": "2023-05-24T15:19:15.000Z",
            "author": {
                "name": "marckohlbrugge",
                "url": "https://github.com/marckohlbrugge"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/52599949?u=3a3e6f882db1807067702b1fee03636e352d3a3d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Currently, when<code class=\"notranslate\">invert_where</code> is called without any existing where conditions, it throws an error with invalid query.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Post.invert_where.to_sql\n#=&gt; SELECT &quot;posts&quot;.* FROM &quot;posts&quot; WHERE NOT ()\"><pre class=\"notranslate\"><code class=\"notranslate\">Post.invert_where.to_sql\n#=&gt; SELECT \"posts\".* FROM \"posts\" WHERE NOT ()\n</code></pre></div>\n<p dir=\"auto\">modified the <code class=\"notranslate\">invert_where</code> to return the receiver as is when there are no <code class=\"notranslate\">where</code> conditions to invert.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Post.order(:id).invert_where.to_sql\n#=&gt;  &quot;SELECT \\&quot;posts\\&quot;.* FROM \\&quot;posts\\&quot; ORDER BY \\&quot;posts\\&quot;.\\&quot;id\\&quot; ASC&quot;\"><pre class=\"notranslate\"><code class=\"notranslate\">Post.order(:id).invert_where.to_sql\n#=&gt;  \"SELECT \\\"posts\\\".* FROM \\\"posts\\\" ORDER BY \\\"posts\\\".\\\"id\\\" ASC\"\n</code></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">When the method chain of <code class=\"notranslate\">ActiveRecord_Relation</code> includes an unintentional method such as <code class=\"notranslate\">unscope(:where)</code> and I use invert_where after that, unexpected errors occur.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"relation = Post.where(id: 2)\nrelation = relation.unscope(:where)\nrelation.invert_where\"><pre class=\"notranslate\"><code class=\"notranslate\">relation = Post.where(id: 2)\nrelation = relation.unscope(:where)\nrelation.invert_where\n</code></pre></div>\n<p dir=\"auto\">Also, this change has some kind of consistency with how <code class=\"notranslate\">unscope(:where)</code> behaves when there are no scopes defined, I think <g-emoji class=\"g-emoji\" alias=\"bowing_woman\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f647-2640.png\">🙇‍♀️</g-emoji></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Post.order(:id).unscope(:where)\n#=&gt; &quot;SELECT \\&quot;posts\\&quot;.* FROM \\&quot;posts\\&quot; ORDER BY \\&quot;posts\\&quot;.\\&quot;id\\&quot; ASC&quot;\"><pre class=\"notranslate\"><code class=\"notranslate\">Post.order(:id).unscope(:where)\n#=&gt; \"SELECT \\\"posts\\\".* FROM \\\"posts\\\" ORDER BY \\\"posts\\\".\\\"id\\\" ASC\"\n</code></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48284",
            "title": "Fixing invert_where method to handle empty where conditions",
            "date_modified": "2023-05-25T14:49:38.000Z",
            "date_published": "2023-05-23T13:35:39.000Z",
            "author": {
                "name": "a5-stable",
                "url": "https://github.com/a5-stable"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">In my experience, to enable efficient handling of exceptions, network clients must clearly categorize their exceptions in two categories:</p>\n<ul dir=\"auto\">\n<li>\n<p dir=\"auto\">Network/Connection errors: whenever we didn't actually get a response from the server and perhaps the issue is transient and retrying now or later will work. e.g. Timeout, authentication error, DNS error, etc.</p>\n</li>\n<li>\n<p dir=\"auto\">Client errors: when the client did something wrong, and it's likely a bug in the user code and they should fix something. e.g. SQL Syntax error, unkown column, etc.</p>\n</li>\n</ul>\n<p dir=\"auto\">Such categorization allows for better automated handling of exceptions, like retrying or not, sending the exception to a reporting service or just emitting a health metric, etc.</p>\n<p dir=\"auto\">Historically Active Record was quite bad at translating the underlying adapter errors into clean errors of its own, and lots of network related errors were translated into <code class=\"notranslate\">SatementInvalid</code> as a big catch all.</p>\n<p dir=\"auto\">In 2019 we started better tranlating these errors (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"468823980\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/36692\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/36692/hovercard\" href=\"https://github.com/rails/rails/pull/36692\">#36692</a>, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"468847665\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/36694\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/36694/hovercard\" href=\"https://github.com/rails/rails/pull/36694\">#36694</a>) but for backward compatibility reasons these new errors still inherited from <code class=\"notranslate\">StatementInvalid</code>.</p>\n<p dir=\"auto\">I think now would be a good time to consider fixing this historical cruft.</p>\n<p dir=\"auto\">Note: opening as a draft as this PR isn't necessarily exactly what I want to change, I'm more interested in gathering thoughts from interested parties.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/eileencodes/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/eileencodes\">@eileencodes</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a> any opinions?</p>",
            "url": "https://github.com/rails/rails/pull/48280",
            "title": "ActiveRecord: make query timeout errors inherit from the base connection error",
            "date_modified": "2023-05-23T10:57:55.000Z",
            "date_published": "2023-05-23T08:35:46.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/75765648?u=1dc3ffb2f347af44627baa665b1b2dff0abd7dd1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Currently, when using the in_batches method on a model with composite primary keys (id_1, id_2), if :asc(:desc) is specified for the order argument, the values are returned with both id_1 and id_2 sorted in ascending (descending) order.<br>\nAllow selection of ascending or descending order for each key in composite primary key.</p>\n<p dir=\"auto\">EXAMPLE</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"class Order &lt; ActiveRecord::Base\n  self.primary_key = [:id_1, :id_2]\nend\nOrder.find_each(order: [:asc, :desc])\"><pre class=\"notranslate\"><code class=\"notranslate\">class Order &lt; ActiveRecord::Base\n  self.primary_key = [:id_1, :id_2]\nend\nOrder.find_each(order: [:asc, :desc])\n</code></pre></div>\n<p dir=\"auto\">In the above code, id_1 is sorted in ascending order, id_2 in descending</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes [REPLACE ME]</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48268",
            "title": "Support batching using composite primary keys and multiple column ordering",
            "date_modified": "2023-06-01T00:25:56.000Z",
            "date_published": "2023-05-21T08:49:23.000Z",
            "author": {
                "name": "TakuyaKurimoto",
                "url": "https://github.com/TakuyaKurimoto"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/75765648?u=1dc3ffb2f347af44627baa665b1b2dff0abd7dd1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Fixed incorrect sorting using order keyword in in_batches method</p>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">Fix incorrect sorting using order keyword in in_batches method.</p>\n<p dir=\"auto\">example (posts table has id as the primary key)</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Post.in_batches(order: :desc, use_ranges: false).first.pluck(:id)\n:actual =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]\n:expected  =&gt; [11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1]\"><pre class=\"notranslate\"><code class=\"notranslate\">Post.in_batches(order: :desc, use_ranges: false).first.pluck(:id)\n:actual =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]\n:expected  =&gt; [11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1]\n</code></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">if use_ranges keyword is true, the sorting does not work either, but I am not sure if this is the expected behavior</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48267",
            "title": "FIX correctly sort records with the in_batches method",
            "date_modified": "2023-05-21T06:18:07.000Z",
            "date_published": "2023-05-21T06:17:51.000Z",
            "author": {
                "name": "TakuyaKurimoto",
                "url": "https://github.com/TakuyaKurimoto"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/419086?u=d0fe8d6b68a77ff6fc46bd57cbc2a37db85a6d34&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In migrations, the <code class=\"notranslate\">up_only</code> helper and the <code class=\"notranslate\">reverting?</code> predicate allow constraining operations in either direction. Adding <code class=\"notranslate\">down_only</code> and <code class=\"notranslate\">migrating?</code> allows defining blocks that need to run when reverting, or running one-liners when migrating without using double negatives. Plus, you no longer need to remember which ones exist and which ones don't.</p>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48245.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1713995776\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48245\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48245/hovercard\" href=\"https://github.com/rails/rails/issues/48245\">#48245</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds <code class=\"notranslate\">down_only</code> and <code class=\"notranslate\">migrating?</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature. (Original methods are not tested)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48263",
            "title": "Add down only and migrating helpers to migration",
            "date_modified": "2023-05-22T13:40:31.000Z",
            "date_published": "2023-05-20T12:27:00.000Z",
            "author": {
                "name": "goulvench",
                "url": "https://github.com/goulvench"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22918438?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Certain applications (e.g. Shopify, GitHub), retry all database queries and have been patching <code class=\"notranslate\">#execute</code> / <code class=\"notranslate\">#raw_execute</code> to change the <code class=\"notranslate\">allow_retry</code> kwarg to true. This is brittle. Enabling retries globally should be an option for apps that are willing to accept the risks.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Wondering if it's safe to retry transaction-related db methods (e.g. <code class=\"notranslate\">#commit_db_transaction</code>, <code class=\"notranslate\">#exec_restart_db_transaction</code>). As it stands, Shopify's retry patch <em>will</em> retry all of these queries, but our retry patch used to be transaction-aware. Should we stick to avoiding retries, even if the the application has configured retries globally, with these methods or are they fine to retry?</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/eileencodes/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/eileencodes\">@eileencodes</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a></p>",
            "url": "https://github.com/rails/rails/pull/48247",
            "title": "Introduce Active Record config to enable database queries to be retried",
            "date_modified": "2023-05-22T16:04:21.000Z",
            "date_published": "2023-05-17T15:26:51.000Z",
            "author": {
                "name": "adrianna-chang-shopify",
                "url": "https://github.com/adrianna-chang-shopify"
            }
        }
    ]
}