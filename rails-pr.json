{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2786819?u=722b21f1f48dc9a97c9494aba04c4f657d31e941&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created to provide more clarity and update the Active Record Migrations documentation.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Some initial thoughts to get started:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> We talk about transactions and how to disable them early on, as part of the first few paragraphs, that could be a subsection to add separation.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The guide goes into reversible early, before even talking about generating migrations and other basic stuff, and then later talks more about it. I think it's important to lay the foundation of change vs up/down, and the fact that migrations should always try to be able to be rolled back, but maybe we can do that without going into reversible that early in the guide, which complicates things further.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> We mention bin/rails generate --help to look for more details, but we could mention specific generators also offer help too, e.g. bin/rails generate model --help or bin/rails generate migration --help</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> There's a small section about composite PKs, but there's also <a href=\"https://edgeguides.rubyonrails.org/active_record_composite_primary_keys.html\" rel=\"nofollow\">a whole guide on it</a>, we can add a link to it from the migrations guide at least for more info on the topic.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The section that talks about execute shows an example of a specific model Product.connection.execute, but we can call execute directly within a migration, that might be simpler to show.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> We talk about \"seed data \" in setup &amp; preparing sections, but never mention it before, or explain what seed data is. There's a section about seed data later in the guide, perhaps we can link to it to facilitate.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> In \"running specific migrations\", bin/rails db:migrate VERSION=zomg actually raises a different error: Invalid format of target version: <code class=\"notranslate\">VERSION=zomg</code>... might need a different example there for the unknown migration version error. (no need to show this invalid format one)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> The section about referential integrity can likely be better explained, in particular I think it's worth mentioning that even though the \"AR method/way\" (the pattern, I mean) doesn't think such \"intelligence\" belongs to the database, foreign keys and unique indexes are generally safer at the database level. (and should likely have their counterparts explicitly added in code with associations and validations). I just don't want to convey that someone shouldn't be adding FKs &amp; unique constraints, because not adding these can definitely bite you.</li>\n</ul>\n<p dir=\"auto\">Other changes:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Moved sections around</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Added a section about \"Rails Migration Version Control\"</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Added a section about \"Using UUIDs instead of IDs for Primary Keys\"</li>\n</ul>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51928",
            "title": "[RF-DOCS] Active Record Migration Documentation",
            "date_modified": "2024-05-27T22:33:47.000Z",
            "date_published": "2024-05-27T13:22:18.000Z",
            "author": {
                "name": "Ridhwana",
                "url": "https://github.com/Ridhwana"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/90962?u=19ad2f7c52efcfffc70b1829289366c3bdabf184&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Documentation of authenticate_or_request_with_http_token is incorrect and this may also have security implications.</p>\n<p dir=\"auto\"><strong>Based on the current documentation, if you return false (which is non-nil), login procedure will be considered successful.</strong></p>\n<p dir=\"auto\"><strong>But that is not what happens!</strong></p>\n<p dir=\"auto\">If you return false, the login procedure is considered UNSUCCESSFUL.</p>\n<p dir=\"auto\">This pull request fixes the documentation.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This pull request clarifies what happens if you return <code class=\"notranslate\">false</code> in the login procedure.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51927",
            "title": "Clarify documentation of authenticate_or_request_with_http_token [fix #51908] [ci skip]",
            "date_modified": "2024-05-27T12:32:20.000Z",
            "date_published": "2024-05-27T12:32:16.000Z",
            "author": {
                "name": "collimarco",
                "url": "https://github.com/collimarco"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes pull request #51395.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2203250382\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51395\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51395/hovercard\" href=\"https://github.com/rails/rails/pull/51395\">#51395</a></p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/277819/334072610-6a5cda51-955c-4ee5-9022-538be79f912f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTY4NTEyMDUsIm5iZiI6MTcxNjg1MDkwNSwicGF0aCI6Ii8yNzc4MTkvMzM0MDcyNjEwLTZhNWNkYTUxLTk1NWMtNGVlNS05MDIyLTUzOGJlNzlmOTEyZi5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwNTI3JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDUyN1QyMzAxNDVaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT00ODA5ZTdjODQzMTFkMzIwMjA0ZGVlOTkzYmI3YzY2MzZlODE0ZjlkZjU3OTFkNDI0MzViZDFkNGIyNGM1ZGZkJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.xIVGS05dp2mpivbXqDH-AebZOWVLLvspOH0AniIFG1A\"><img src=\"https://private-user-images.githubusercontent.com/277819/334072610-6a5cda51-955c-4ee5-9022-538be79f912f.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTY4NTEyMDUsIm5iZiI6MTcxNjg1MDkwNSwicGF0aCI6Ii8yNzc4MTkvMzM0MDcyNjEwLTZhNWNkYTUxLTk1NWMtNGVlNS05MDIyLTUzOGJlNzlmOTEyZi5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwNTI3JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDUyN1QyMzAxNDVaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT00ODA5ZTdjODQzMTFkMzIwMjA0ZGVlOTkzYmI3YzY2MzZlODE0ZjlkZjU3OTFkNDI0MzViZDFkNGIyNGM1ZGZkJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.xIVGS05dp2mpivbXqDH-AebZOWVLLvspOH0AniIFG1A\" alt=\"Screenshot from 2024-05-27 19-46-53\" style=\"max-width: 100%;\"></a></p>",
            "url": "https://github.com/rails/rails/pull/51925",
            "title": "Make CollectionProxy#proxy_association public API",
            "date_modified": "2024-05-27T22:47:56.000Z",
            "date_published": "2024-05-27T10:48:21.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This guide explains major concurrency and performance principles for Puma and CRuby.</p>\n<p dir=\"auto\">This is a reworked version of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2114653503\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50949\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50949/hovercard\" href=\"https://github.com/rails/rails/pull/50949\">#50949</a>.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes pull request #50949.\">Closes</span>: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2114653503\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50949\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50949/hovercard\" href=\"https://github.com/rails/rails/pull/50949\">#50949</a></p>\n<p dir=\"auto\">FYI: <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a></p>",
            "url": "https://github.com/rails/rails/pull/51924",
            "title": "Add a Rails Guide called \"Tuning Performance for Deployment\" (second version)",
            "date_modified": "2024-05-27T19:48:34.000Z",
            "date_published": "2024-05-27T10:10:46.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14007?u=29d3bfbcb93f21ab58b6f05946b0a1882b513480&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51745.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2280431140\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51745\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51745/hovercard\" href=\"https://github.com/rails/rails/issues/51745\">#51745</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Suppose you have a PG <code class=\"notranslate\">tsrange</code> column named <code class=\"notranslate\">my_range</code>. If you create a record with <code class=\"notranslate\">my_range: (Time.current..)</code> (inclusive), PG will insert the record with <code class=\"notranslate\">[my_range,]</code>, but behind the scenes it'll <a href=\"https://www.postgresql.org/docs/current/rangetypes.html#RANGETYPES-INFINITE\" rel=\"nofollow\">convert it</a> to <code class=\"notranslate\">[my_range,)</code>, making it exclusive.</p>\n<p dir=\"auto\">The problem is when you <code class=\"notranslate\">reload</code> or retrieve the record, it'll be <code class=\"notranslate\">my_range: (Time.current...)</code> (exclusive).</p>\n<p dir=\"auto\">You can \"force\" inclusivity by using the timestamp value of <code class=\"notranslate\">infinity</code> on insertion: <code class=\"notranslate\">[my_range, infinity]</code></p>\n<p dir=\"auto\">And that's what this change does.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51920",
            "title": "Support PG unbounded inclusive date/time range",
            "date_modified": "2024-05-27T07:24:49.000Z",
            "date_published": "2024-05-27T07:19:47.000Z",
            "author": {
                "name": "justinko",
                "url": "https://github.com/justinko"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51757.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2283433150\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51757\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51757/hovercard\" href=\"https://github.com/rails/rails/issues/51757\">#51757</a>.</p>\n<p dir=\"auto\">When we have <code class=\"notranslate\">database_tasks: false</code> on primary and we have 2 databases, we fall into the <code class=\"notranslate\">if db_configs.size == 1</code> branch, which tries to run migrations on the primary database, which is not correct.</p>",
            "url": "https://github.com/rails/rails/pull/51916",
            "title": "Fix running migrations on other databases when `database_tasks: false` on primary",
            "date_modified": "2024-05-26T19:17:19.000Z",
            "date_published": "2024-05-26T12:42:58.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6097?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">attempting to debug <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1967223028\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49841\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49841/hovercard\" href=\"https://github.com/rails/rails/issues/49841\">#49841</a></p>",
            "url": "https://github.com/rails/rails/pull/51895",
            "title": "timeouts for debugging",
            "date_modified": "2024-05-23T20:12:12.000Z",
            "date_published": "2024-05-23T18:59:35.000Z",
            "author": {
                "name": "jjb",
                "url": "https://github.com/jjb"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/182880?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">I discovered that <code class=\"notranslate\">pretty_print</code> does not call <code class=\"notranslate\">attribute_for_inspect</code>.</p>\n<p dir=\"auto\">With this Pull Request I make the behaviour of <code class=\"notranslate\">pretty_print</code> match that of <code class=\"notranslate\">inspect</code> in the sense that it calls <code class=\"notranslate\">attribute_for_inspect</code> (which can be overridden by the developer in their model class), instead of using the \"raw\" attribute.</p>\n<p dir=\"auto\">The relevant test that covers the behaviour is: <code class=\"notranslate\">test_pretty_print_with_overridden_attribute_for_inspect</code></p>\n<p dir=\"auto\">For completeness I added a similar test for <code class=\"notranslate\">inspect</code>, but that passed even before the code change: <code class=\"notranslate\">test_inspect_with_overridden_attribute_for_inspect</code></p>\n<p dir=\"auto\">I also had to update some other tests to reflect the new behaviour. I find this is <em>good</em> because now the behaviour of <code class=\"notranslate\">pretty_print</code> is similar to <code class=\"notranslate\">inspect</code> (for example <code class=\"notranslate\">[FILTERED]</code> is now printed the same by both, without any quotes).</p>\n<p dir=\"auto\">Date objects are now also printed using the same format by both <code class=\"notranslate\">inspect</code> and <code class=\"notranslate\">pretty_print</code>.</p>",
            "url": "https://github.com/rails/rails/pull/51892",
            "title": "Make `pretty_print` behave more similar to `inspect`.",
            "date_modified": "2024-05-24T15:57:39.000Z",
            "date_published": "2024-05-23T16:25:36.000Z",
            "author": {
                "name": "florin555",
                "url": "https://github.com/florin555"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Follow up to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"930290143\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/42604\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/42604/hovercard\" href=\"https://github.com/rails/rails/pull/42604\">#42604</a>.</p>\n<p dir=\"auto\">We recently ran across this issue, but for <code class=\"notranslate\">db:setup</code> task this time.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/eileencodes/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/eileencodes\">@eileencodes</a></p>",
            "url": "https://github.com/rails/rails/pull/51889",
            "title": "Fix migration ordering for `bin/rails db:prepare` across databases",
            "date_modified": "2024-05-23T11:41:15.000Z",
            "date_published": "2024-05-23T11:40:44.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/929886?u=20e7647deec019e86c7d64fd94148ede89abb64c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This pull request has been created to (1) align documentation with conventional practice, (2) prefer continuity by maintaining names from previous code blocks, and (3) clear up other potential sources of confusion.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">A search on GitHub reveals that, typically, custom Railtie classes are named <code class=\"notranslate\">Railtie</code>, with Rails itself embracing this convention (perhaps even fostering it). If we named the class in the docs to align with this practice, learners can supplement the material with what they find on GitHub and within Rails itself.</p>\n<p dir=\"auto\">Secondly, the first time we introduce a custom Railtie class, it's called <code class=\"notranslate\">Railtie</code>. Unfortunately, in subsequent code examples, <code class=\"notranslate\">MyRailtie</code> is introduced. In the first code block, we indicate the file path where the class is/could be defined <a href=\"https://github.com/rails/rails/blob/692f25a9254c58c64b138770e6b604e73de38620/railties/lib/rails/railtie.rb#L39\">(<code class=\"notranslate\">lib/my_gem/railtie.rb</code>)</a>. In the subsequent blocks we don't. I think this could also be a little confusing. If we were to keep the old class name, it might be easy for a learner to infer that we're developing the same class we created in the first code block.</p>\n<p dir=\"auto\">The other changes replace <code class=\"notranslate\">MyRailtie</code> and substitute it with <code class=\"notranslate\">MyGem</code>. Reason is, the custom Railtie doesn't seem to be the appropriate place for those functions given that they are very specific to the gem. I think what we want to encourage there that the Railtie lets you specify what code to run for every hook. Your gem, not the custom Railtie, hold the code. For example, I was very confused by <a href=\"https://github.com/rails/rails/blob/692f25a9254c58c64b138770e6b604e73de38620/railties/lib/rails/railtie.rb#L84\"><code class=\"notranslate\">MyRailtie.setup!</code></a>. I wondered where the <code class=\"notranslate\">setup!</code> method came from and whether it could have been inherited from the <code class=\"notranslate\">Rails::Railtie</code> parent. So I replaced <code class=\"notranslate\">MyRailtie</code> with <code class=\"notranslate\">MyGem</code> to make the arbitrariness of that code more obvious.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51873",
            "title": "[ci skip] Align documentation with conventional practice",
            "date_modified": "2024-05-23T16:44:02.000Z",
            "date_published": "2024-05-21T08:34:43.000Z",
            "author": {
                "name": "yawboakye",
                "url": "https://github.com/yawboakye"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/915130?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">GCS has an option on buckets to make them a \"Requester Pays\" type of bucket: <a href=\"https://cloud.google.com/storage/docs/requester-pays\" rel=\"nofollow\">https://cloud.google.com/storage/docs/requester-pays</a>. In short, this allows tracing of who/what is actually requesting an upload/download to be able to allocate the costs to the project used.</p>\n<p dir=\"auto\">To query a bucket where \"requester pays\" is enabled, the <code class=\"notranslate\">userProject</code> needs to be added in the URL. The GCS Ruby library provides this as an optional <code class=\"notranslate\">user_project</code> keyword argument to <code class=\"notranslate\">Project#bucket</code>: <a href=\"https://github.com/googleapis/google-cloud-ruby/blob/google-cloud-storage/v1.11.0/google-cloud-storage/lib/google/cloud/storage/project.rb#L87-L99\">https://github.com/googleapis/google-cloud-ruby/blob/google-cloud-storage/v1.11.0/google-cloud-storage/lib/google/cloud/storage/project.rb#L87-L99</a> (took v1.11 explicitly here as this is the current version requirement on Rails.)</p>\n<p dir=\"auto\">When this is not passed, an error is thrown when listing/uploading files in a requester-pays bucket: <code class=\"notranslate\">Bucket is a requester pays bucket but no user project provided. (Google::Cloud::InvalidArgumentError)</code></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit adds support for \"requester pays\"-buckets by accepting a <code class=\"notranslate\">user_project</code> parameter (defaults to <code class=\"notranslate\">nil</code>) on the GCS service bucket call, set by a variable in the config <code class=\"notranslate\">config.fetch(:user_project, nil)</code>:<br>\n</p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/cd31b164b1975abfe6adb9af8e0edc8bea7ce1b0/activestorage/lib/active_storage/service/gcs_service.rb#L192\">rails/activestorage/lib/active_storage/service/gcs_service.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 192\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/cd31b164b1975abfe6adb9af8e0edc8bea7ce1b0\">cd31b16</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L192\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"192\"></td>\n          <td id=\"LC192\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c1\">@bucket</span> ||= <span class=\"pl-en\">client</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">bucket</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">fetch</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:bucket</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">skip_lookup</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51869",
            "title": "Support passing `user_project` argument to GCS bucket to support GCS buckets with “Requester pays” enabled",
            "date_modified": "2024-05-21T14:27:25.000Z",
            "date_published": "2024-05-20T17:01:53.000Z",
            "author": {
                "name": "TomNaessens",
                "url": "https://github.com/TomNaessens"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/29010172?u=b22422071c289f4126829f8c3f71015caf915154&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because of an issue with JSON columns not having default values when using ActiveRecord::Store. The issue occurs when the column is non-nullable, causing a <code class=\"notranslate\">NotNullViolation</code> error if the attribute is not explicitly set.<br>\n\"<span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50960.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2116888349\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50960\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50960/hovercard\" href=\"https://github.com/rails/rails/issues/50960\">#50960</a> \"</p>\n<h3 dir=\"auto\">Detail</h3>\n<ul dir=\"auto\">\n<li>Modified <code class=\"notranslate\">store.rb</code> to set a default value of an empty hash <code class=\"notranslate\">{}</code> for JSON columns.</li>\n<li>Added test cases to <code class=\"notranslate\">store_test.rb</code> to ensure the default values are applied correctly for both nullable and non-nullable JSON columns.</li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #50960 ]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51864",
            "title": "Fix issue with JSON column default values and add corresponding tests",
            "date_modified": "2024-05-19T13:06:08.000Z",
            "date_published": "2024-05-19T11:24:20.000Z",
            "author": {
                "name": "Dmoment",
                "url": "https://github.com/Dmoment"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6901651?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The <code class=\"notranslate\">.devcontainer/*</code> template files (introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2106594568\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50914\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50914/hovercard\" href=\"https://github.com/rails/rails/pull/50914\">#50914</a> ) were not included in the <code class=\"notranslate\">railties</code> gem, resulting in a failure to create a new project (<code class=\"notranslate\">rails new foo</code>).</p>\n<p dir=\"auto\">The error was <code class=\"notranslate\">Could not find \".devcontainer/devcontainer.json\" in any of your source paths.</code></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The <code class=\"notranslate\">.devcontainer/*</code> template files were not included in the <code class=\"notranslate\">railties</code> gem, because the old file pattern didn't match files in hidden directories, only hidden files.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The issue was observed with <code class=\"notranslate\">ruby 3.3.0 (2023-12-25 revision 5124f9ac75) [x86_64-linux]</code></p>\n<p dir=\"auto\">Gem contents for <code class=\"notranslate\">devcontainer</code> <strong>before</strong> the change:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/6901651/331859333-08f6ce8e-d2e1-4e5b-860a-3c72992be155.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTY4NTEyMDUsIm5iZiI6MTcxNjg1MDkwNSwicGF0aCI6Ii82OTAxNjUxLzMzMTg1OTMzMy0wOGY2Y2U4ZS1kMmUxLTRlNWItODYwYS0zYzcyOTkyYmUxNTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDUyNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA1MjdUMjMwMTQ1WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YzBlYTdiNzk3MmI4ZjY1OGE0MDI3MjAwZmZjYzZiMThjODkyNGYxOWZhZTI2MTAzODRkOGE3MWI4ZGJlZWUwOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.oJrFWcNzuuAOYLU7eVhEie6-ADpAsrNucCV_Pu1Kej8\"><img src=\"https://private-user-images.githubusercontent.com/6901651/331859333-08f6ce8e-d2e1-4e5b-860a-3c72992be155.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTY4NTEyMDUsIm5iZiI6MTcxNjg1MDkwNSwicGF0aCI6Ii82OTAxNjUxLzMzMTg1OTMzMy0wOGY2Y2U4ZS1kMmUxLTRlNWItODYwYS0zYzcyOTkyYmUxNTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDUyNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA1MjdUMjMwMTQ1WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YzBlYTdiNzk3MmI4ZjY1OGE0MDI3MjAwZmZjYzZiMThjODkyNGYxOWZhZTI2MTAzODRkOGE3MWI4ZGJlZWUwOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.oJrFWcNzuuAOYLU7eVhEie6-ADpAsrNucCV_Pu1Kej8\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">Gem contents <strong>after</strong> the change:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/6901651/331859356-edaa36d5-177c-45ac-a314-9a58112d7d0a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTY4NTEyMDUsIm5iZiI6MTcxNjg1MDkwNSwicGF0aCI6Ii82OTAxNjUxLzMzMTg1OTM1Ni1lZGFhMzZkNS0xNzdjLTQ1YWMtYTMxNC05YTU4MTEyZDdkMGEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDUyNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA1MjdUMjMwMTQ1WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjZmYWViNmJkMjlkMGUzZTJiNThkNzhiYTdkZmE2ODY4YzkzODYxMmNlN2MzNGUxODQwY2E0ZTg1ZDk3NDQyNCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.XHvZrFWo8WliqFB5CHYNnK178AYO1gWvDNvl20GsZ0c\"><img src=\"https://private-user-images.githubusercontent.com/6901651/331859356-edaa36d5-177c-45ac-a314-9a58112d7d0a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTY4NTEyMDUsIm5iZiI6MTcxNjg1MDkwNSwicGF0aCI6Ii82OTAxNjUxLzMzMTg1OTM1Ni1lZGFhMzZkNS0xNzdjLTQ1YWMtYTMxNC05YTU4MTEyZDdkMGEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDUyNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA1MjdUMjMwMTQ1WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjZmYWViNmJkMjlkMGUzZTJiNThkNzhiYTdkZmE2ODY4YzkzODYxMmNlN2MzNGUxODQwY2E0ZTg1ZDk3NDQyNCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.XHvZrFWo8WliqFB5CHYNnK178AYO1gWvDNvl20GsZ0c\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<p dir=\"auto\">File diff between the two:<br>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/6901651/331859365-f9f84724-e588-412c-824b-4c0739638922.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTY4NTEyMDUsIm5iZiI6MTcxNjg1MDkwNSwicGF0aCI6Ii82OTAxNjUxLzMzMTg1OTM2NS1mOWY4NDcyNC1lNTg4LTQxMmMtODI0Yi00YzA3Mzk2Mzg5MjIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDUyNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA1MjdUMjMwMTQ1WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YzVjYzI0NDZjYTdiZWEzOTg5MTgzNGJhODAyNzBiZWZkZGFkMTA5MzM2NjZjYWI3YzA1MmNjYThkMmFiNTM5OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.A02qxiAY9kye3J2H5sii86Fv0O6ANelpko6waZcQ_fY\"><img src=\"https://private-user-images.githubusercontent.com/6901651/331859365-f9f84724-e588-412c-824b-4c0739638922.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTY4NTEyMDUsIm5iZiI6MTcxNjg1MDkwNSwicGF0aCI6Ii82OTAxNjUxLzMzMTg1OTM2NS1mOWY4NDcyNC1lNTg4LTQxMmMtODI0Yi00YzA3Mzk2Mzg5MjIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDUyNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA1MjdUMjMwMTQ1WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YzVjYzI0NDZjYTdiZWEzOTg5MTgzNGJhODAyNzBiZWZkZGFkMTA5MzM2NjZjYWI3YzA1MmNjYThkMmFiNTM5OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.A02qxiAY9kye3J2H5sii86Fv0O6ANelpko6waZcQ_fY\" alt=\"image\" style=\"max-width: 100%;\"></a></p>\n<h4 dir=\"auto\">Alternative pattern</h4>\n<p dir=\"auto\">An alternative could be</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Dir[..., &quot;exe/**/*&quot;, &quot;lib/{**,**/.[a-z]*/**}/{*,.[a-z]*}&quot;])\"><pre class=\"notranslate\"><span class=\"pl-v\">Dir</span><span class=\"pl-kos\">[</span>...<span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"exe/**/*\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"lib/{**,**/.[a-z]*/**}/{*,.[a-z]*}\"</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span></pre></div>\n<p dir=\"auto\">but I think it is harder to read.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul dir=\"auto\">\n<li>[*] This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li>[*] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[*] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51863",
            "title": "Add templates from hidden directories",
            "date_modified": "2024-05-19T09:02:58.000Z",
            "date_published": "2024-05-19T09:02:54.000Z",
            "author": {
                "name": "tochev",
                "url": "https://github.com/tochev"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14007?u=29d3bfbcb93f21ab58b6f05946b0a1882b513480&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51830.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2296461332\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51830\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51830/hovercard\" href=\"https://github.com/rails/rails/issues/51830\">#51830</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This is just additional changes that would've been included in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1413798412\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46270\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46270/hovercard\" href=\"https://github.com/rails/rails/pull/46270\">#46270</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">When running multiple db rake tasks in a single command, we should restore to the original \"db config\" in between each task.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51862",
            "title": "More restore original db config in db rake tasks",
            "date_modified": "2024-05-21T12:09:38.000Z",
            "date_published": "2024-05-19T02:33:27.000Z",
            "author": {
                "name": "justinko",
                "url": "https://github.com/justinko"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/36887394?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because the Rails documentation currently states that <code class=\"notranslate\">config.assets.debug</code> is enabled by default in the development environment. However, as of Rails 7.0 (commit <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/adec7e7ba87e3d268149d0020d54dc211eb02ada/hovercard\" href=\"https://github.com/rails/rails/commit/adec7e7ba87e3d268149d0020d54dc211eb02ada\"><tt>adec7e7</tt></a> on Aug 10, 2021), this setting is not included by default in the <code class=\"notranslate\">development.rb</code> file. This discrepancy can lead to confusion for developers relying on outdated documentation. Updating this will provide clearer guidance and reflect the actual current behavior of Rails applications in development. <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51747.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2280577750\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51747\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51747/hovercard\" href=\"https://github.com/rails/rails/issues/51747\">#51747</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51845",
            "title": "Update config.assets.debug documentation to reflect actual defaults [ci-skip]  #51747",
            "date_modified": "2024-05-16T09:59:37.000Z",
            "date_published": "2024-05-15T20:38:08.000Z",
            "author": {
                "name": "devikasugathan",
                "url": "https://github.com/devikasugathan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1380104?u=31e2e5f4843b2850387af04bc7400712d86112c6&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h2 dir=\"auto\">Triggers Callbacks when an attachment has been uploaded</h2>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because during our migration process from <strong>paperclip</strong> to ActiveStorage we couldn't find any straightforward mechanism to notify our system exactly when the attachment was uploaded.</p>\n<p dir=\"auto\">Our use case was very particular but long story short, we needed to run a process that validated some uploaded files after they were attached.</p>\n<p dir=\"auto\">The lack of this feature made this effort extremely painful as we needed to execute several rake tasks to re-process hundreds of files that were uploaded incorrectly.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">ActiveStorage::Blob#upload_without_unfurling</code> and adds some helpers to <code class=\"notranslate\">ActiveStorage::Attachment</code> to invoke a specific method <code class=\"notranslate\">:before</code> and <code class=\"notranslate\">:after</code> uploading to the configured service.<br>\nThis is achieved by checking if the active record model <code class=\"notranslate\">respond_to?</code> a method with the following signature pattern:</p>\n<ul dir=\"auto\">\n<li><code class=\"notranslate\">before_{attachment_name}_attached</code> or <code class=\"notranslate\">after_{attachment_name}_attached</code></li>\n<li><code class=\"notranslate\">before_{attachment_name}_variant_attached</code> or <code class=\"notranslate\">after_{attachment_name}_variant_attached</code></li>\n</ul>\n<blockquote>\n<p dir=\"auto\">It also passes the processed <code class=\"notranslate\">blob</code> object to the method in order to do any required post-processing on it.</p>\n</blockquote>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The development of this feature started during RailsConf 2024 during the HackDay Workshop with the Rails Core Team.<br>\nContributors and participating members of this process were:</p>\n<ul dir=\"auto\">\n<li><a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/tenderlove/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/tenderlove\">@tenderlove</a></li>\n<li><a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/mattboldt/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mattboldt\">@mattboldt</a></li>\n<li><a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/garyhtou/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/garyhtou\">@garyhtou</a></li>\n</ul>\n<p dir=\"auto\">(Thanks for the help!, great working with you! 🙌🏻 )</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51814",
            "title": "Trigger before and after callbacks when Attachments are uploaded.",
            "date_modified": "2024-05-24T03:24:29.000Z",
            "date_published": "2024-05-14T05:31:23.000Z",
            "author": {
                "name": "rapito",
                "url": "https://github.com/rapito"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/43936240?u=7130066eeca24a7a93cf0b9867da279a7c8a6406&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51679.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2267574463\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51679\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51679/hovercard\" href=\"https://github.com/rails/rails/issues/51679\">#51679</a>, a bug that appears when working with time field and timezones.</p>\n<p dir=\"auto\">Basically, the bug occurs when ActiveRecord deserialized time field's day in other day but not the default one (01-01-2000), and it impacts validations and comparisons.</p>\n<p dir=\"auto\">More details from the bug in the issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2267574463\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51679\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51679/hovercard\" href=\"https://github.com/rails/rails/issues/51679\">#51679</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the deserialized method <code class=\"notranslate\">TimeZoneConverter</code> to always set the day for  (01-01-2000) when we are working with the default time field.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">For alternative solutions, we have some options thanks to <a href=\"https://github.com/mkbehbehani\">mkbehbehani</a> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2267574463\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51679\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51679/hovercard?comment_id=2083414034&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/issues/51679#issuecomment-2083414034\">#51679 (comment)</a></p>\n<ul dir=\"auto\">\n<li>Using the ToD :time_only <a href=\"https://github.com/JackC/tod?tab=readme-ov-file#activerecord-attribute-support\">ActiveRecord attribute</a> for Time of Day representation in application logic</li>\n<li>In Postgres, using the time column type.</li>\n<li>Timezone config for both Rails and Postgres set to UTC and performing changes into desired local timezone before read/write/comparison using .in_time_zone(location_timezone).</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51797",
            "title": "[ActiveRecord] Fixes wrong time field's default day with timezone",
            "date_modified": "2024-05-12T18:32:15.000Z",
            "date_published": "2024-05-12T18:32:11.000Z",
            "author": {
                "name": "PedroAugustoRamalhoDuarte",
                "url": "https://github.com/PedroAugustoRamalhoDuarte"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22231095?u=4b9ed50e760e192f3d22f1327a15326e70eb5ed4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #41811.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"846815677\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/41811\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/41811/hovercard\" href=\"https://github.com/rails/rails/issues/41811\">#41811</a></p>\n<p dir=\"auto\">Addresses the issue with bi-directional accepts_nested_attributes where validation of a collection fails due to only the last record being considered. This occurs because each child item triggers a valid? call on the parent record, which overwrites previous validation errors.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Post &lt; ActiveRecord::Base\n  has_many :comments, inverse_of: :post\n  accepts_nested_attributes_for :comments\n\n  validates :title, presence: true\nend\n\nclass Comment &lt; ActiveRecord::Base\n  belongs_to :post, inverse_of: :comments\n  accepts_nested_attributes_for :post\n\n  validates :body, presence: true\nend\n\nclass BugTest &lt; Minitest::Test\n  # currently fails\n  def test_invalid_attributes\n    post = Post.new(title: &quot;foo&quot;, comments_attributes: [{ body: &quot;body 1&quot; }, { body: nil }, { body: &quot;body 3&quot; }])\n\n    refute post.valid?\n    refute post.errors.empty?\n  end\n\n  # currently passes\n  def test_invalid_attributes_end_of_list\n    post = Post.new(title: &quot;foo&quot;, comments_attributes: [{ body: &quot;bar&quot; }, { body: &quot;baz&quot; }, { body: nil }])\n\n    refute post.valid?\n    refute post.errors.empty?\n  end\n\n  # currently passes\n  def test_invalid_attributes_one_attribute\n    post = Post.new(title: &quot;foo&quot;, comments_attributes: [{ body: nil }])\n\n    refute post.valid?\n    refute post.errors.empty?\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Post</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:comments</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">inverse_of</span>: <span class=\"pl-pds\">:post</span>\n  <span class=\"pl-en\">accepts_nested_attributes_for</span> <span class=\"pl-pds\">:comments</span>\n\n  <span class=\"pl-en\">validates</span> <span class=\"pl-pds\">:title</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">presence</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Comment</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">belongs_to</span> <span class=\"pl-pds\">:post</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">inverse_of</span>: <span class=\"pl-pds\">:comments</span>\n  <span class=\"pl-en\">accepts_nested_attributes_for</span> <span class=\"pl-pds\">:post</span>\n\n  <span class=\"pl-en\">validates</span> <span class=\"pl-pds\">:body</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">presence</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">BugTest</span> &lt; <span class=\"pl-v\">Minitest</span>::<span class=\"pl-v\">Test</span>\n  <span class=\"pl-c\"># currently fails</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_invalid_attributes</span>\n    <span class=\"pl-s1\">post</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"foo\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">comments_attributes</span>: <span class=\"pl-kos\">[</span><span class=\"pl-kos\">{</span> <span class=\"pl-pds\">body</span>: <span class=\"pl-s\">\"body 1\"</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">body</span>: <span class=\"pl-c1\">nil</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">body</span>: <span class=\"pl-s\">\"body 3\"</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n\n    <span class=\"pl-en\">refute</span> <span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valid?</span>\n    <span class=\"pl-en\">refute</span> <span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">errors</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">empty?</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-c\"># currently passes</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_invalid_attributes_end_of_list</span>\n    <span class=\"pl-s1\">post</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"foo\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">comments_attributes</span>: <span class=\"pl-kos\">[</span><span class=\"pl-kos\">{</span> <span class=\"pl-pds\">body</span>: <span class=\"pl-s\">\"bar\"</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">body</span>: <span class=\"pl-s\">\"baz\"</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">body</span>: <span class=\"pl-c1\">nil</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n\n    <span class=\"pl-en\">refute</span> <span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valid?</span>\n    <span class=\"pl-en\">refute</span> <span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">errors</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">empty?</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-c\"># currently passes</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_invalid_attributes_one_attribute</span>\n    <span class=\"pl-s1\">post</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"foo\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">comments_attributes</span>: <span class=\"pl-kos\">[</span><span class=\"pl-kos\">{</span> <span class=\"pl-pds\">body</span>: <span class=\"pl-c1\">nil</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n\n    <span class=\"pl-en\">refute</span> <span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">valid?</span>\n    <span class=\"pl-en\">refute</span> <span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">errors</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">empty?</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR is followup of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"853285432\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/41878\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/41878/hovercard\" href=\"https://github.com/rails/rails/pull/41878\">#41878</a> which done by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/intrip/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/intrip\">@intrip</a> in 2 years back, additionally I've a added minor change for initialising the variable. This fix involves tracking the current record under validation and avoiding cyclic valid? calls.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<p dir=\"auto\">cc/ <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a></p>",
            "url": "https://github.com/rails/rails/pull/51795",
            "title": "Fix: bi-direction accepts_nested_attributes_for validation.",
            "date_modified": "2024-05-24T13:02:43.000Z",
            "date_published": "2024-05-12T11:55:53.000Z",
            "author": {
                "name": "akhilgkrishnan",
                "url": "https://github.com/akhilgkrishnan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Prior to this commit, models that inherit from<br>\n<a href=\"https://edgeapi.rubyonrails.org/classes/ActiveModel/AttributeAssignment.html\" rel=\"nofollow\">ActiveModel::AttributeAssignment</a> (either directly or through including <a href=\"https://edgeapi.rubyonrails.org/classes/ActiveModel/API.html\" rel=\"nofollow\">ActiveModel::API</a>) lose their ability to override the attribute assignment utilized during calls to<br>\n<a href=\"https://edgeapi.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-from_json\" rel=\"nofollow\">ActiveModel::Serializers::JSON#from_json</a>.</p>\n<p dir=\"auto\">Incidentally, <code class=\"notranslate\">#from_json</code> calls <code class=\"notranslate\">#attributes=</code> (instead of <code class=\"notranslate\">#assign_attributes</code>), whereas models that inherit from <code class=\"notranslate\">ActiveModel::AttributeAssignment</code> have <code class=\"notranslate\">#attributes=</code> <a href=\"https://github.com/rails/rails/blob/be0cb4e8f9aa0b105ddd035061202a5d23491b5a/activemodel/lib/active_model/attribute_assignment.rb#L37\">automatically aliased to <code class=\"notranslate\">#assign_attributes</code></a>.</p>\n<p dir=\"auto\">This has two unintended side effects:</p>\n<ol dir=\"auto\">\n<li>\n<p dir=\"auto\">calls to <code class=\"notranslate\">#from_json</code> will never invoke <code class=\"notranslate\">#assign_attributes</code> overrides, since they invoke <code class=\"notranslate\">#attributes=</code> directly</p>\n</li>\n<li>\n<p dir=\"auto\">overrides to <code class=\"notranslate\">#assign_attributes</code> won't have any effects on <code class=\"notranslate\">#attributes=</code>, since that alias is defined on the original implementation</p>\n</li>\n</ol>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit attempts to remedy that issue by attempting to call <code class=\"notranslate\">#assign_attributes</code> first before falling back to <code class=\"notranslate\">#attributes=</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">A change-free solution would be to encourage (through documentation) a corresponding <code class=\"notranslate\">alias :attributes= assign_attributes</code> line any time models override <code class=\"notranslate\">assign_attributes</code>.</p>\n<p dir=\"auto\">Alternatively, the <code class=\"notranslate\">ActiveModel::AttributeAssignment#assign_attributes</code> method could be defined as <code class=\"notranslate\">#attributes=</code> instead (with a complementary <code class=\"notranslate\">alias assign_attributes attributes=</code> call). This is likely a backwards-incompatible change.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51781",
            "title": "Make `ActiveModel::Serializers::JSON#from_json` compatible with `#assign_attributes`",
            "date_modified": "2024-05-16T17:16:23.000Z",
            "date_published": "2024-05-10T22:18:47.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/15008564?u=7b8600ee57984adadeb05aaee08e5764d437f516&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Ensuring the correctness of validations in Rails models is a fundamental aspect of robust testing. However, the current approach to such validations can often lead to cluttered and less readable test code. For instance, manually asserting validation errors requires multiple lines of code, detracting from the clarity of the test suite. This PR addresses this issue by introducing a streamlined solution that enhances readability and conciseness in model testing.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"test &quot;name cannot be blank&quot; do\n    user = users(:one)\n    \n   user.validate\n   refute_empty user.errors.where(:name, :blank)\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">test</span> <span class=\"pl-s\">\"name cannot be blank\"</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">users</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:one</span><span class=\"pl-kos\">)</span>\n    \n   <span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">validate</span>\n   <span class=\"pl-en\">refute_empty</span> <span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">errors</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:blank</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">or</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"test &quot;name cannot be blank&quot; do\n    user = users(:one)\n    \n   user.validate\n   assert user.errors.added? :name, :blank\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">test</span> <span class=\"pl-s\">\"name cannot be blank\"</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">users</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:one</span><span class=\"pl-kos\">)</span>\n    \n   <span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">validate</span>\n   <span class=\"pl-en\">assert</span> <span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">errors</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">added?</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:blank</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR introduces a new assertion method, <code class=\"notranslate\">assert_error</code> and <code class=\"notranslate\">assert_invalid</code>, designed to simplify the validation testing process. With them developers can now verify the presence of specific validation errors with a single, expressive line of code. This enhancement not only improves the readability of tests but also promotes better understanding and maintenance of the validation logic within Rails models.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"test &quot;name cannot be blank&quot; do\n    user = users(:one)\n    \n   assert_not_valid :name, :blank, user\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">test</span> <span class=\"pl-s\">\"name cannot be blank\"</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">users</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:one</span><span class=\"pl-kos\">)</span>\n    \n   <span class=\"pl-en\">assert_not_valid</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:blank</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">user</span>\n<span class=\"pl-k\">end</span></pre></div>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"test &quot;name cannot be blank&quot; do\n    user = users(:one)\n    user.validate\n    \n   assert_error :name, :blank, user\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">test</span> <span class=\"pl-s\">\"name cannot be blank\"</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">users</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:one</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">validate</span>\n    \n   <span class=\"pl-en\">assert_error</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:blank</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">user</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">In the same way the validation <code class=\"notranslate\">assert_valid</code> and <code class=\"notranslate\">assert_no_error</code> ensures that the model has no errors for a specific field</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"test &quot;name is not blank&quot; do\n    user = users(:one)\n    \n   assert_no_error :name, :blank, user\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">test</span> <span class=\"pl-s\">\"name is not blank\"</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">users</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:one</span><span class=\"pl-kos\">)</span>\n    \n   <span class=\"pl-en\">assert_no_error</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:blank</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">user</span>\n<span class=\"pl-k\">end</span></pre></div>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"test &quot;name is not blank&quot; do\n    user = users(:one)\n    \n   assert_valid :name, :blank, user\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">test</span> <span class=\"pl-s\">\"name is not blank\"</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">users</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:one</span><span class=\"pl-kos\">)</span>\n    \n   <span class=\"pl-en\">assert_valid</span> <span class=\"pl-pds\">:name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:blank</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">user</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/51774",
            "title": "Adds `assert_error` and `assert_no_error`",
            "date_modified": "2024-05-18T10:56:39.000Z",
            "date_published": "2024-05-09T22:12:09.000Z",
            "author": {
                "name": "DanielaVelasquez",
                "url": "https://github.com/DanielaVelasquez"
            }
        }
    ]
}