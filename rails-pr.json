{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Was bitten by what I think is a bug in <code class=\"notranslate\">CurrentAttributes</code>.</p>\n<p dir=\"auto\">We use sidekiq with reliable push feature. Basically sidekiq pushes jobs into the redis, but when redis is temporarily unavailable, it stores job payloads in a in-memory queue and pushes them when it is back up again. As part of the job payloads it stores what was <code class=\"notranslate\">Current.attributes</code> at the the time the job was enqueued. But since currently <code class=\"notranslate\">Current.attributes</code> is a kinda global object (it is always the same object in memory), when new objects were pushed with different <code class=\"notranslate\">Current.set</code> values, old references (in the mentioned in memory queue) were mutated and contained incorrect values ðŸ˜±</p>\n<p dir=\"auto\">Of course, this can be fixed by <code class=\"notranslate\">Current.attributes.dup</code> on the calling side, but this behaviour is surprising and people will forget to do so (like in the sidekiq codebase). I think this should be fixed on the rails side and this PR does this.</p>\n<p dir=\"auto\">I also found another surprising behavior of <code class=\"notranslate\">CurrentAttributes</code>.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Current.attributes # =&gt; {}\nCurrent.set(foo: 1) { }\nCurrent.attributes # =&gt; { foo: nil }   &lt;-----\"><pre class=\"notranslate\"><span class=\"pl-v\">Current</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attributes</span> <span class=\"pl-c\"># =&gt; {}</span>\n<span class=\"pl-v\">Current</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">set</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">foo</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> <span class=\"pl-kos\">}</span>\n<span class=\"pl-v\">Current</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attributes</span> <span class=\"pl-c\"># =&gt; { foo: nil }   &lt;-----</span></pre></div>\n<p dir=\"auto\">Probably not a bug, but at least unexpected and people might rely on the presence/absence of the key or just having <code class=\"notranslate\">nil</code> value (instead of absence of the key) can lead to some unexpected behavior. Can also fix this, if agreed.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a></p>",
            "url": "https://github.com/rails/rails/pull/53440",
            "title": "Fix `CurrentAttributes#attributes` to return new object each time",
            "date_modified": "2024-10-24T16:47:28.000Z",
            "date_published": "2024-10-24T16:47:23.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/73684?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This pull request disables UNLOGGED option for partitioned tables used in Active Record unit tests.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1599298150\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47499\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47499/hovercard\" href=\"https://github.com/rails/rails/pull/47499\">#47499</a> configures the following option to use UNLOGGED tables to make unit test faster.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"ActiveRecord::ConnectionAdapters::PostgreSQLAdapter.create_unlogged_tables\"><pre class=\"notranslate\"><span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">ConnectionAdapters</span>::<span class=\"pl-v\">PostgreSQLAdapter</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create_unlogged_tables</span></pre></div>\n<p dir=\"auto\">PostgreSQL 18 is being developed and it removes support unlogged option on partitioned table.</p>\n<ul dir=\"auto\">\n<li>Remove support for unlogged on partitioned tables <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/postgres/postgres/commit/e2bab2d7920/hovercard\" href=\"https://github.com/postgres/postgres/commit/e2bab2d7920\">postgres/postgres@<tt>e2bab2d7920</tt></a></li>\n</ul>\n<p dir=\"auto\">According to this change Active Record unit tests gets the \"partitioned tables cannot be unlogged\" error.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"$ cd activerecord\n$ ARCONN=postgresql bin/test test/cases/adapters/postgresql/partitions_test.rb -n test_partitions_table_exists\nUsing postgresql\nRun options: -n test_partitions_table_exists --seed 35335\n\nE\n\nError:\nPostgreSQLPartitionsTest#test_partitions_table_exists:\nActiveRecord::StatementInvalid: PG::FeatureNotSupported: ERROR:  partitioned tables cannot be unlogged\n\n    lib/active_record/connection_adapters/postgresql/database_statements.rb:160:in `exec'\n    lib/active_record/connection_adapters/postgresql/database_statements.rb:160:in `perform_query'\n    lib/active_record/connection_adapters/abstract/database_statements.rb:556:in `block (2 levels) in raw_execute'\n    lib/active_record/connection_adapters/abstract_adapter.rb:1011:in `block in with_raw_connection'\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\n    lib/active_record/connection_adapters/abstract_adapter.rb:983:in `with_raw_connection'\n    lib/active_record/connection_adapters/abstract/database_statements.rb:555:in `block in raw_execute'\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'\n    lib/active_record/connection_adapters/abstract_adapter.rb:1129:in `log'\n    lib/active_record/connection_adapters/abstract/database_statements.rb:554:in `raw_execute'\n    lib/active_record/connection_adapters/abstract/database_statements.rb:591:in `internal_execute'\n    lib/active_record/connection_adapters/abstract/database_statements.rb:137:in `execute'\n    lib/active_record/connection_adapters/abstract/query_cache.rb:27:in `execute'\n    lib/active_record/connection_adapters/postgresql/database_statements.rb:40:in `execute'\n    lib/active_record/connection_adapters/abstract/schema_statements.rb:309:in `create_table'\n    test/cases/adapters/postgresql/partitions_test.rb:16:in `test_partitions_table_exists'\n\"><pre class=\"notranslate\">$ <span class=\"pl-en\">cd</span> <span class=\"pl-en\">activerecord</span>\n$ <span class=\"pl-c1\">ARCONN</span><span class=\"pl-c1\">=</span><span class=\"pl-en\">postgresql</span> <span class=\"pl-en\">bin</span>/<span class=\"pl-en\">test</span> <span class=\"pl-en\">test</span>/<span class=\"pl-en\">cases</span>/<span class=\"pl-en\">adapters</span>/<span class=\"pl-en\">postgresql</span>/<span class=\"pl-en\">partitions_test</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rb</span> -<span class=\"pl-en\">n</span> <span class=\"pl-en\">test_partitions_table_exists</span>\n<span class=\"pl-en\">Using</span> <span class=\"pl-en\">postgresql</span>\n<span class=\"pl-en\">Run</span> <span class=\"pl-pds\">options</span>: -<span class=\"pl-en\">n</span> <span class=\"pl-en\">test_partitions_table_exists</span> --<span class=\"pl-en\">seed</span> <span class=\"pl-c1\">35335</span>\n\n<span class=\"pl-c1\">E</span>\n\n<span class=\"pl-v\">Error</span>:\n<span class=\"pl-v\">PostgreSQLPartitionsTest</span><span class=\"pl-c\">#test_partitions_table_exists:</span>\n<span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-en\">StatementInvalid</span>: <span class=\"pl-c1\">PG</span>::<span class=\"pl-en\">FeatureNotSupported</span>: <span class=\"pl-pds\">ERROR</span>:  <span class=\"pl-en\">partitioned</span> <span class=\"pl-en\">tables</span> <span class=\"pl-en\">cannot</span> <span class=\"pl-en\">be</span> <span class=\"pl-en\">unlogged</span>\n\n    <span class=\"pl-en\">lib</span>/<span class=\"pl-en\">active_record</span>/<span class=\"pl-en\">connection_adapters</span>/<span class=\"pl-en\">postgresql</span>/<span class=\"pl-en\">database_statements</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rb</span>:<span class=\"pl-c1\">160</span><span class=\"pl-pds\">:in</span> <span class=\"pl-s\">`exec'</span>\n<span class=\"pl-s\">    lib/active_record/connection_adapters/postgresql/database_statements.rb:160:in `</span><span class=\"pl-en\">perform_query</span><span class=\"pl-s\">'</span>\n<span class=\"pl-s\">    lib/active_record/connection_adapters/abstract/database_statements.rb:556:in `block (2 levels) in raw_execute'</span>\n    <span class=\"pl-en\">lib</span>/<span class=\"pl-en\">active_record</span>/<span class=\"pl-en\">connection_adapters</span>/<span class=\"pl-en\">abstract_adapter</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rb</span>:<span class=\"pl-c1\">1011</span><span class=\"pl-pds\">:in</span> <span class=\"pl-s\">`block in with_raw_connection'</span>\n<span class=\"pl-s\">    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `</span><span class=\"pl-en\">handle_interrupt</span><span class=\"pl-s\">'</span>\n<span class=\"pl-s\">    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'</span>\n    <span class=\"pl-sr\">/home/yahonda</span>/<span class=\"pl-en\">src</span>/<span class=\"pl-en\">github</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">com</span>/<span class=\"pl-en\">rails</span>/<span class=\"pl-en\">rails</span>/<span class=\"pl-en\">activesupport</span>/<span class=\"pl-en\">lib</span>/<span class=\"pl-en\">active_support</span>/<span class=\"pl-en\">concurrency</span>/<span class=\"pl-en\">load_interlock_aware_monitor</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rb</span>:<span class=\"pl-c1\">19</span><span class=\"pl-pds\">:in</span> <span class=\"pl-s\">`handle_interrupt'</span>\n<span class=\"pl-s\">    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `</span><span class=\"pl-en\">synchronize</span><span class=\"pl-s\">'</span>\n<span class=\"pl-s\">    lib/active_record/connection_adapters/abstract_adapter.rb:983:in `with_raw_connection'</span>\n    <span class=\"pl-en\">lib</span>/<span class=\"pl-en\">active_record</span>/<span class=\"pl-en\">connection_adapters</span>/<span class=\"pl-en\">abstract</span>/<span class=\"pl-en\">database_statements</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rb</span>:<span class=\"pl-c1\">555</span><span class=\"pl-pds\">:in</span> <span class=\"pl-s\">`block in raw_execute'</span>\n<span class=\"pl-s\">    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `</span><span class=\"pl-en\">instrument</span><span class=\"pl-s\">'</span>\n<span class=\"pl-s\">    lib/active_record/connection_adapters/abstract_adapter.rb:1129:in `log'</span>\n    <span class=\"pl-en\">lib</span>/<span class=\"pl-en\">active_record</span>/<span class=\"pl-en\">connection_adapters</span>/<span class=\"pl-en\">abstract</span>/<span class=\"pl-en\">database_statements</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rb</span>:<span class=\"pl-c1\">554</span><span class=\"pl-pds\">:in</span> <span class=\"pl-s\">`raw_execute'</span>\n<span class=\"pl-s\">    lib/active_record/connection_adapters/abstract/database_statements.rb:591:in `</span><span class=\"pl-en\">internal_execute</span><span class=\"pl-s\">'</span>\n<span class=\"pl-s\">    lib/active_record/connection_adapters/abstract/database_statements.rb:137:in `execute'</span>\n    <span class=\"pl-en\">lib</span>/<span class=\"pl-en\">active_record</span>/<span class=\"pl-en\">connection_adapters</span>/<span class=\"pl-en\">abstract</span>/<span class=\"pl-en\">query_cache</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rb</span>:<span class=\"pl-c1\">27</span><span class=\"pl-pds\">:in</span> <span class=\"pl-s\">`execute'</span>\n<span class=\"pl-s\">    lib/active_record/connection_adapters/postgresql/database_statements.rb:40:in `</span><span class=\"pl-en\">execute</span><span class=\"pl-s\">'</span>\n<span class=\"pl-s\">    lib/active_record/connection_adapters/abstract/schema_statements.rb:309:in `create_table'</span>\n    <span class=\"pl-en\">test</span>/<span class=\"pl-en\">cases</span>/<span class=\"pl-en\">adapters</span>/<span class=\"pl-en\">postgresql</span>/<span class=\"pl-en\">partitions_test</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rb</span>:<span class=\"pl-c1\">16</span><span class=\"pl-pds\">:in</span> `<span class=\"pl-en\">test_partitions_table_exists</span><span class=\"pl-s\">'</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<ul dir=\"auto\">\n<li>SQL executed without this fix</li>\n</ul>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"CREATE UNLOGGED TABLE &quot;partitioned_events&quot; (&quot;issued_at&quot; timestamp) partition by range (issued_at)\"><pre class=\"notranslate\">CREATE UNLOGGED TABLE <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>partitioned_events<span class=\"pl-pds\">\"</span></span> (<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>issued_at<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">timestamp</span>) partition by range (issued_at)</pre></div>\n<ul dir=\"auto\">\n<li>SQL executed with this fix</li>\n</ul>\n<div class=\"highlight highlight-source-sql notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"CREATE TABLE &quot;partitioned_events&quot; (&quot;issued_at&quot; timestamp) partition by range (issued_at)\"><pre class=\"notranslate\"><span class=\"pl-k\">CREATE</span> <span class=\"pl-k\">TABLE</span> \"<span class=\"pl-en\">partitioned_events</span>\" (<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>issued_at<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">timestamp</span>) partition by range (issued_at)</pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53439",
            "title": "PostgreSQL 18devel does not support unlogged option on partitioned tables",
            "date_modified": "2024-10-24T16:28:50.000Z",
            "date_published": "2024-10-24T14:52:04.000Z",
            "author": {
                "name": "yahonda",
                "url": "https://github.com/yahonda"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/12071435?u=d6a1895985ab5a88d3f3ae745aaeced1500e23ba&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52511.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2449254021\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52511\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52511/hovercard\" href=\"https://github.com/rails/rails/issues/52511\">#52511</a><br>\nWhen uploading the same email from source twice in development, the second time fails with an 500 error not able to redirect to the mail as <code class=\"notranslate\">create_and_extract_message_id!</code> returns nil.</p>\n<p dir=\"auto\">This fix re-renders the form and displays an error message.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request checks if inbound email was created and redirects or renders new form if failed.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53438",
            "title": "Fixes #52511 Display error message when uploading same email source",
            "date_modified": "2024-10-24T14:29:44.000Z",
            "date_published": "2024-10-24T14:29:39.000Z",
            "author": {
                "name": "AlphonseSantoro",
                "url": "https://github.com/AlphonseSantoro"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Document <code class=\"notranslate\">action_cable.allow_same_origin_as_host</code> and <code class=\"notranslate\">action_cable.allowed_request_origins</code> configs.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53437",
            "title": "Document missing action_cable host configs in Guides [ci-skip]",
            "date_modified": "2024-10-24T14:23:52.000Z",
            "date_published": "2024-10-24T14:23:42.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1251082?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #53435.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2611535311\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/53435\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/53435/hovercard\" href=\"https://github.com/rails/rails/issues/53435\">#53435</a></p>\n<p dir=\"auto\">This Pull Request has been created because values returned from the databases need to be deserialized as they may use a different format, such as PostgreSQL bytea \"hex\" format.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request replaces <code class=\"notranslate\">#write_from_user</code> with <code class=\"notranslate\">#write_from_database</code> when assigning the auto populated values returned by the database.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I don't like the fact that we access <code class=\"notranslate\">@attributes</code> directly, but <code class=\"notranslate\">#reload</code> does it too and it's the simplest solution.</p>\n<p dir=\"auto\">Alternatives considered:</p>\n<ul dir=\"auto\">\n<li>Adding an ad-hoc <code class=\"notranslate\">_write_attribute_from_database</code> method somewhere (<code class=\"notranslate\">ActiveRecord::AttributeMethods::Write</code>?).</li>\n<li>Deserializing the value using <code class=\"notranslate\">attributes_builder.types[column].deserialize(value)</code>.</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53436",
            "title": "Deserialize auto populated columns on Active Record object creation",
            "date_modified": "2024-10-24T13:40:19.000Z",
            "date_published": "2024-10-24T13:40:13.000Z",
            "author": {
                "name": "baarde",
                "url": "https://github.com/baarde"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/929886?u=20e7647deec019e86c7d64fd94148ede89abb64c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">It appears that <code class=\"notranslate\">bin/rails generate action_text:install</code> is the only viable way to install ActionText. I followed the guides and tried <code class=\"notranslate\">bin/rails action_text:install</code>. Didn't work. Then I confirmed that <a href=\"https://github.com/rails/rails/blob/main/actiontext/lib/generators/action_text/install/install_generator.rb\">installer is indeed a generator</a>. Ran <code class=\"notranslate\">bin/rails g action_text:install</code> and it was smooth sailing.</p>\n<p dir=\"auto\">This Pull Request updates the guide to instruct readers to run <code class=\"notranslate\">bin/rails generate action_text:install</code> instead of <code class=\"notranslate\">bin/rails action_text:install</code>. There seems to more occurrence of <code class=\"notranslate\">bin/rails generate</code> over <code class=\"notranslate\">bin/rails g</code>, so even though I prefer and use the <code class=\"notranslate\">g</code> alias I've opted for the full command here.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53427",
            "title": "[ci-skip] ActionText is installed via generate command",
            "date_modified": "2024-10-24T09:10:53.000Z",
            "date_published": "2024-10-24T09:10:50.000Z",
            "author": {
                "name": "yawboakye",
                "url": "https://github.com/yawboakye"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/131752?u=32ddf1119b1d189c9bd241a721b36ea01c29f61e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This adds the commits from the recent security releases for the main branch. I will also backport this to 8-0-stable.</p>\n<p dir=\"auto\">These aren't a security concern for the 8-0-stable or main branches, as Ruby 3.2, which is now required, runs these regular expressions in linear time. However it's best to keep these branches in sync.</p>",
            "url": "https://github.com/rails/rails/pull/53426",
            "title": "Security release forward ports to newer branches",
            "date_modified": "2024-10-24T00:37:02.000Z",
            "date_published": "2024-10-24T00:36:57.000Z",
            "author": {
                "name": "jhawthorn",
                "url": "https://github.com/jhawthorn"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2731572?u=3624097a3d9548cf611ab4cc843a39e08353b764&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">When joining a scoped association, certain query methods are silently ignored.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Post &lt; ApplicationRecord\n  has_many :comments, -&gt; { from('comments_view comments') }, class_name: 'Comment'\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Post</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">has_many</span> <span class=\"pl-pds\">:comments</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">-&gt;</span> <span class=\"pl-kos\">{</span> <span class=\"pl-en\">from</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'comments_view comments'</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">class_name</span>: <span class=\"pl-s\">'Comment'</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\"><code class=\"notranslate\">Post.joins(:comment)</code> will completely disregard the <code class=\"notranslate\">from</code> clause. The only query methods that apply to a join are <code class=\"notranslate\">where</code> and other <code class=\"notranslate\">joins</code>. Even more confusingly, these query methods are not ignored when <code class=\"notranslate\">Post#comments</code> is called.</p>\n<p dir=\"auto\">Here's a snippet to summarize:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"post = Post.find(1)\n# SELECT &quot;posts&quot;.* FROM &quot;posts&quot; ORDER BY &quot;posts&quot;.&quot;id&quot; ASC LIMIT ?\n\npost.comments\n# SELECT &quot;comments&quot;.* FROM comments_view comments WHERE &quot;comments&quot;.&quot;post_id&quot; = 1\n\nPost.joins(:comments) # Surprise!\n# SELECT &quot;posts&quot;.* FROM &quot;posts&quot; INNER JOIN &quot;comments&quot; ON &quot;comments&quot;.&quot;post_id&quot; = &quot;posts&quot;.&quot;id&quot;\"><pre class=\"notranslate\"><span class=\"pl-s1\">post</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">find</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\"># SELECT \"posts\".* FROM \"posts\" ORDER BY \"posts\".\"id\" ASC LIMIT ?</span>\n\n<span class=\"pl-s1\">post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">comments</span>\n<span class=\"pl-c\"># SELECT \"comments\".* FROM comments_view comments WHERE \"comments\".\"post_id\" = 1</span>\n\n<span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">joins</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:comments</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\"># Surprise!</span>\n<span class=\"pl-c\"># SELECT \"posts\".* FROM \"posts\" INNER JOIN \"comments\" ON \"comments\".\"post_id\" = \"posts\".\"id\"</span></pre></div>\n<p dir=\"auto\">By joining a subquery, we can make the behavior of scoped associations more consistent.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes how joins are constructed in <code class=\"notranslate\">JoinAssociation</code>. If the scoped association has a <code class=\"notranslate\">select</code>, <code class=\"notranslate\">group</code>, <code class=\"notranslate\">from</code>, <code class=\"notranslate\">with</code>, <code class=\"notranslate\">limit</code>, or <code class=\"notranslate\">offset</code>, we'll join a subquery.</p>\n<p dir=\"auto\"><code class=\"notranslate\">from</code> clauses could probably be supported without restoring to a subquery, but a query can have multiple from expressions (e.g. <code class=\"notranslate\">from('a, b, c')</code>).</p>\n<p dir=\"auto\">You'll notice that <code class=\"notranslate\">order</code> isn't included in that list. An <code class=\"notranslate\">ORDER BY</code> expression in a subquery doesn't do anything by itself. An <code class=\"notranslate\">ORDER BY</code> expression can change the behavior of a subquery in certain situations, for example, when used in combination with a limit.</p>\n<p dir=\"auto\"><code class=\"notranslate\">order</code> is probably the most common footgun with regard to joining scoped associations. Maybe <code class=\"notranslate\">order</code> expressions in scoped associations should be hoisted to the top-level query? At the very least, it might be helpful to emit a warning when someone attempts to join a scoped association with an order.</p>\n<p dir=\"auto\">When someone attempts to join a a scoped association with one of these clauses, maybe we should emit a warning? Should this subquery functionality require you to add an option like <code class=\"notranslate\">join_using_subquery: true</code> to the association?</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53424",
            "title": "Scoped associations should use a subquery join when necessary",
            "date_modified": "2024-10-24T00:36:13.000Z",
            "date_published": "2024-10-23T22:12:00.000Z",
            "author": {
                "name": "rzane",
                "url": "https://github.com/rzane"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/48097622?u=0f5215ec096873b7ddfe2f431d11437a04fac995&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n This pull request removes storage entries when active_storage is skipped and database is not sqlite3 and <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #53413.\">fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2607107968\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/53413\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/53413/hovercard\" href=\"https://github.com/rails/rails/issues/53413\">#53413</a> \n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes railties/lib/rails/generators/rails/app/templates/gitignore.tt</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53417",
            "title": "Remove storage from gitignore if skip_active_storage and database is not sqlite3",
            "date_modified": "2024-10-23T12:53:29.000Z",
            "date_published": "2024-10-23T12:30:52.000Z",
            "author": {
                "name": "vinibispo",
                "url": "https://github.com/vinibispo"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2779422?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Default headers are added to ActionDispatch::Response in the <code class=\"notranslate\">.create</code><br>\nmethod, not in <code class=\"notranslate\">#initialize</code>. The <code class=\"notranslate\">make_response!</code> method in<br>\nActionController::Live calls <code class=\"notranslate\">Live::Response.new</code> rather than<br>\n<code class=\"notranslate\">Live::Response.create</code>, which bypasses the merging of default headers.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #53402.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2603000097\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/53402\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/53402/hovercard\" href=\"https://github.com/rails/rails/issues/53402\">#53402</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53403",
            "title": "Include default headers in ActionController::Live responses.",
            "date_modified": "2024-10-21T16:00:58.000Z",
            "date_published": "2024-10-21T15:59:55.000Z",
            "author": {
                "name": "afn",
                "url": "https://github.com/afn"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/122436?u=ec54cf625a213bbe6cf0ed04a3d14551dac7875d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Specifying <code class=\"notranslate\">value: nil</code> for <code class=\"notranslate\">date_field</code> doesn't overwrite the model attribute value, while any other non-nil value does.<br>\nAlso, <code class=\"notranslate\">value: nil</code> takes the priority for other field types like <code class=\"notranslate\">text_field</code> or <code class=\"notranslate\">select</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<div class=\"highlight highlight-text-haml notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"= form_with(model: Post.new(written_on: Time.now) do |f|\n  = f.date_field :written_on, value: nil\"><pre class=\"notranslate\">=<span class=\"pl-sre\"> form_with(model: Post.new(written_on: Time.now) do |f<span class=\"pl-s1\">|</span></span>\n  =<span class=\"pl-sre\"> f.date_field :written_on, value: nil</span></pre></div>\n<p dir=\"auto\">Extected:</p>\n<div class=\"highlight highlight-text-html-basic notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"&lt;input id=&quot;post_written_on&quot; name=&quot;post[written_on]&quot; type=&quot;date&quot;/&gt;\"><pre class=\"notranslate\"><span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">input</span> <span class=\"pl-c1\">id</span>=\"<span class=\"pl-s\">post_written_on</span>\" <span class=\"pl-c1\">name</span>=\"<span class=\"pl-s\">post[written_on]</span>\" <span class=\"pl-c1\">type</span>=\"<span class=\"pl-s\">date</span>\"/&gt;</pre></div>\n<p dir=\"auto\">Actual:</p>\n<div class=\"highlight highlight-text-html-basic notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"&lt;input id=&quot;post_written_on&quot; name=&quot;post[written_on]&quot; type=&quot;date&quot; value=&quot;2024-10-20&quot;/&gt;\"><pre class=\"notranslate\"><span class=\"pl-kos\">&lt;</span><span class=\"pl-ent\">input</span> <span class=\"pl-c1\">id</span>=\"<span class=\"pl-s\">post_written_on</span>\" <span class=\"pl-c1\">name</span>=\"<span class=\"pl-s\">post[written_on]</span>\" <span class=\"pl-c1\">type</span>=\"<span class=\"pl-s\">date</span>\" <span class=\"pl-c1\">value</span>=\"<span class=\"pl-s\">2024-10-20</span>\"/&gt;</pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Rails version: 7.2.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53387",
            "title": "[Bug] Fix inline value nil priority for date_field form builder",
            "date_modified": "2024-10-20T10:04:29.000Z",
            "date_published": "2024-10-20T10:04:26.000Z",
            "author": {
                "name": "bogdan",
                "url": "https://github.com/bogdan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/290596?u=540421a98370416f74bf2b08043d7fc80ddd5742&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">When using test_unit and running <code class=\"notranslate\">rails generate</code>, then the following test_unit generators show:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"TestUnit:\n  test_unit:authentication\n  test_unit:channel\n  test_unit:generator\n  test_unit:mailbox\n  test_unit:plugin\"><pre class=\"notranslate\"><code class=\"notranslate\">TestUnit:\n  test_unit:authentication\n  test_unit:channel\n  test_unit:generator\n  test_unit:mailbox\n  test_unit:plugin\n</code></pre></div>\n<p dir=\"auto\">When using another framework (rspec, minitest), even more test_unit generators are visible:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"TestUnit:\n  test_unit:authentication\n  test_unit:channel\n  test_unit:controller\n  test_unit:generator\n  test_unit:helper\n  test_unit:integration\n  test_unit:job\n  test_unit:mailbox\n  test_unit:mailer\n  test_unit:model\n  test_unit:plugin\n  test_unit:scaffold\n  test_unit:system \"><pre class=\"notranslate\"><code class=\"notranslate\">TestUnit:\n  test_unit:authentication\n  test_unit:channel\n  test_unit:controller\n  test_unit:generator\n  test_unit:helper\n  test_unit:integration\n  test_unit:job\n  test_unit:mailbox\n  test_unit:mailer\n  test_unit:model\n  test_unit:plugin\n  test_unit:scaffold\n  test_unit:system \n</code></pre></div>\n<p dir=\"auto\">This PR hides all of test_unit for the latter case.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53384",
            "title": "Hide test_unit generators when using other test framework",
            "date_modified": "2024-10-19T22:44:56.000Z",
            "date_published": "2024-10-19T22:44:52.000Z",
            "author": {
                "name": "eval",
                "url": "https://github.com/eval"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14981592?u=11406fb0121b15a93b3305388377a57b4d9c96f9&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Using <code class=\"notranslate\">unprocessable_entity</code> will emit a warning on Rack 3.2</p>\n<p dir=\"auto\">This to me seems like the least invasive change and is also how headers are currently handled.</p>\n<p dir=\"auto\">There's some code in jbuilder that will need a similar change. <a href=\"https://github.com/search?q=org%3Arails+unprocessable_entity+-repo%3Arails%2Frails&amp;type=code\">https://github.com/search?q=org%3Arails+unprocessable_entity+-repo%3Arails%2Frails&amp;type=code</a>. I will take a look if this is accepted.</p>\n<p dir=\"auto\"><strong>Question:</strong> Should <code class=\"notranslate\">ActionDispatch::Constants</code> be nodoc? I think it should be but can that just be done now after it's been availale for a year?</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/ioquatix/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ioquatix\">@ioquatix</a></p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">There have been various PRs in the past for this:</p>\n<ul dir=\"auto\">\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2385041238\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52252\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52252/hovercard\" href=\"https://github.com/rails/rails/pull/52252\">#52252</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2367816055\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52192\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52192/hovercard\" href=\"https://github.com/rails/rails/pull/52192\">#52192</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2345919668\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52087\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52087/hovercard\" href=\"https://github.com/rails/rails/pull/52087\">#52087</a></li>\n<li><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2347618665\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52097\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52097/hovercard\" href=\"https://github.com/rails/rails/pull/52097\">#52097</a></li>\n</ul>\n<p dir=\"auto\">Maybe this will be the one.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53383",
            "title": "Handle Rack 3.2 `unprocessable_{entity,content}`",
            "date_modified": "2024-10-19T17:00:53.000Z",
            "date_published": "2024-10-19T17:00:48.000Z",
            "author": {
                "name": "Earlopain",
                "url": "https://github.com/Earlopain"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5188983?u=f20d0367085b29d9b2fbae87f85c1892ff8e0368&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #53380.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2599253889\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/53380\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/53380/hovercard\" href=\"https://github.com/rails/rails/issues/53380\">#53380</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">When reflection scope has a where clause, source reflection is included. Hence source_preloaders already have all records already loaded, and thus keeps the same order than its records (ie middle_records).</p>\n<p dir=\"auto\">Though middle_records were computed by flattening records grouped by owner, this grouping breaks the global order between all records. By computing middle_records directly from preloaded_records, we conserve the global order, hence fix the order in source_preloaders.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53382",
            "title": "Respect order in Preloader::ThroughAssociation when scoped",
            "date_modified": "2024-10-19T17:13:43.000Z",
            "date_published": "2024-10-19T16:39:39.000Z",
            "author": {
                "name": "Hugo-Hache",
                "url": "https://github.com/Hugo-Hache"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8207?u=b696c885624fac0e15405b8713a770e888f26a96&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2593365975\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/53348\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/53348/hovercard\" href=\"https://github.com/rails/rails/issues/53348\">#53348</a> describes an issue where, after adding Solid Cache to an application, running db:prepare in production re-loaded the seeds, potentially leading to data loss.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #53348.\">Closes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2593365975\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/53348\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/53348/hovercard\" href=\"https://github.com/rails/rails/issues/53348\">#53348</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR introduces a new database config property <code class=\"notranslate\">seeds</code> to control whether seeds are loaded during <code class=\"notranslate\">db:prepare</code> which defaults to <code class=\"notranslate\">true</code> for primary database configs and <code class=\"notranslate\">false</code> otherwise.</p>\n<p dir=\"auto\">Previously, the <code class=\"notranslate\">db:prepare</code> task would load seeds whenever a new database is created, leading to potential loss of data if a database is added to an existing environment.</p>\n<p dir=\"auto\">Also, update the Active Record Migrations guide to more accurately describe what the <code class=\"notranslate\">db:prepare</code> task does, correcting some misinformation introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1925377979\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49480\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49480/hovercard\" href=\"https://github.com/rails/rails/pull/49480\">#49480</a> along the way.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">See previous rejected proposal at <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2595323475\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/53354\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/53354/hovercard\" href=\"https://github.com/rails/rails/pull/53354\">#53354</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53379",
            "title": "`db:prepare` no longer loads seed when non-primary db is created",
            "date_modified": "2024-10-24T14:28:26.000Z",
            "date_published": "2024-10-19T14:09:01.000Z",
            "author": {
                "name": "flavorjones",
                "url": "https://github.com/flavorjones"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14988?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">We have thousands of <code class=\"notranslate\">Blob</code> records, each with a large number of attachments (from 70-100,000) ðŸ˜…. The after_update callback <code class=\"notranslate\">touch_attachments</code> causes performance problems in such a system due to iterating through and <code class=\"notranslate\">touch</code>ing a very large number of records. We've been monkey-patching this functionality to disable it since it was introduced.</p>\n<p dir=\"auto\">The <code class=\"notranslate\">touch_attachment_records</code> option was added in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1954829143\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49723\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49723/hovercard\" href=\"https://github.com/rails/rails/pull/49723\">#49723</a> but disabling this option still means that updates to a <code class=\"notranslate\">Blob</code> touches all the associated attachments (just not the associated records).</p>\n<p dir=\"auto\">A new option <em>could</em> be added (e.g. <code class=\"notranslate\">touch_attachments</code>), and I'm open to that, but I couldn't think of a scenario where you would want to touch a blob's attachments but <em>not</em> the associated records.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR changes the behaviour of the <code class=\"notranslate\">touch_attachment_records</code> option as so:</p>\n<ul dir=\"auto\">\n<li>When disabled, it will not touch the attachments or the associated records.</li>\n</ul>\n<p dir=\"auto\">The existing behaviour is unchanged when this option is enabled: when a <code class=\"notranslate\">Blob</code> is updated, it will touch all attachments and associated records.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I couldn't find any tests for <code class=\"notranslate\">touch_attachments</code> so I haven't added them but open to doing so.</p>\n<p dir=\"auto\">The performance of <code class=\"notranslate\">touch_attachments</code> could be improved by using <code class=\"notranslate\">touch_all</code> on the attachments, though it might be harder to touch_all on the associated records without grouping per record type. However, I'm not sure it's worth the complexity for general usage (typically one blob, one attachment) and larger usage such as our would probably still prefer to disable this feature entirely.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53370",
            "title": "Disabling touch_attachment_records should prevent touching attachments too",
            "date_modified": "2024-10-19T04:15:26.000Z",
            "date_published": "2024-10-18T20:09:57.000Z",
            "author": {
                "name": "ideasasylum",
                "url": "https://github.com/ideasasylum"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/46014?u=ada22f75c3a41f5a766cb474addae9bc54a67052&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Summary</h3>\n<p dir=\"auto\">Optimistic locking raises <code class=\"notranslate\">NoMethodError: undefined method '+' for nil</code> on an attempt to <code class=\"notranslate\">#update</code> the lock column (eg <code class=\"notranslate\">lock_version</code>) to <code class=\"notranslate\">nil</code> (and the model has no validation to prevent it).</p>\n<p dir=\"auto\">This PR proposes to handle this situation more gracefully, by raising a more helpful error where appropriate.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This was happening in an app where a bug was causing an <code class=\"notranslate\">#update</code> attempt with <code class=\"notranslate\">lock_version: nil</code>. The model had no validations on the <code class=\"notranslate\">lock_version</code> column. The raised error was not particularly helpful:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"NoMethodError: undefined method `+' for nil\n    lib/active_record/locking/optimistic.rb:104:in `_update_row'\n    lib/active_record/persistence.rb:907:in `_update_record'\n    ...\"><pre class=\"notranslate\"><code class=\"notranslate\">NoMethodError: undefined method `+' for nil\n    lib/active_record/locking/optimistic.rb:104:in `_update_row'\n    lib/active_record/persistence.rb:907:in `_update_record'\n    ...\n</code></pre></div>\n<p dir=\"auto\">Hence, I thought a more useful error message would be nice, since it is possible that an app might contain a model whose lock has no AR validations on the lock version column. Also, other cases where the lock column has no default say are handled gracefully already by the implementation.</p>\n<p dir=\"auto\">The proposal is to raise before attempting to increment the version, with a suggestion to check if there is a missing a validation. For example:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"For optimistic locking, 'lock_version' should not be set to `nil`/`NULL`. Are you missing a default value or validation on 'lock_version'?\"><pre class=\"notranslate\"><code class=\"notranslate\">For optimistic locking, 'lock_version' should not be set to `nil`/`NULL`. Are you missing a default value or validation on 'lock_version'?\n</code></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Consider the model (taken from the ActiveRecord test suite)</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"create_table :lock_without_defaults, force: true do |t|\n  t.column :title, :string\n  t.column :lock_version, :integer\n  t.timestamps null: true\nend\"><pre class=\"notranslate\"><code class=\"notranslate\">create_table :lock_without_defaults, force: true do |t|\n  t.column :title, :string\n  t.column :lock_version, :integer\n  t.timestamps null: true\nend\n</code></pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"class LockWithoutDefault &lt; ActiveRecord::Base; end\"><pre class=\"notranslate\"><code class=\"notranslate\">class LockWithoutDefault &lt; ActiveRecord::Base; end\n</code></pre></div>\n<p dir=\"auto\">One can <a href=\"https://github.com/rails/rails/blob/ee661852313ff697d5f3a73a68aab99101ea3ead/activerecord/test/cases/locking_test.rb#L280\">create a record</a> without any initial value for the <code class=\"notranslate\">lock_version</code> column. If one accidentally attempts to <code class=\"notranslate\">update</code> the <code class=\"notranslate\">lock_version</code> to <code class=\"notranslate\">nil</code>, it raises.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"t1 = LockWithoutDefault.create!(title: &quot;title1&quot;)\nt1.update(lock_version: nil)\"><pre class=\"notranslate\"><code class=\"notranslate\">t1 = LockWithoutDefault.create!(title: \"title1\")\nt1.update(lock_version: nil)\n</code></pre></div>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"NoMethodError: undefined method `+' for nil\n    lib/active_record/locking/optimistic.rb:104:in `_update_row'\n    lib/active_record/persistence.rb:907:in `_update_record'\n    ...\"><pre class=\"notranslate\"><code class=\"notranslate\">NoMethodError: undefined method `+' for nil\n    lib/active_record/locking/optimistic.rb:104:in `_update_row'\n    lib/active_record/persistence.rb:907:in `_update_record'\n    ...\n</code></pre></div>\n<p dir=\"auto\">After the proposed change, the error will instead be</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"RuntimeError: For optimistic locking, 'lock_version' should not be set to `nil`/`NULL`. Are you missing a default value or validation on 'lock_version'?\n    lib/active_record/locking/optimistic.rb:105:in `_update_row'\n    lib/active_record/persistence.rb:907:in `_update_record'\n    ...\"><pre class=\"notranslate\"><code class=\"notranslate\">RuntimeError: For optimistic locking, 'lock_version' should not be set to `nil`/`NULL`. Are you missing a default value or validation on 'lock_version'?\n    lib/active_record/locking/optimistic.rb:105:in `_update_row'\n    lib/active_record/persistence.rb:907:in `_update_record'\n    ...\n</code></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The error I chose is a <code class=\"notranslate\">RuntimeError</code>, following what is generated by <a href=\"https://github.com/stevegeek/rails/blob/2d1ec4bf09381af24a336f0e1923369eb050864a/activerecord/lib/active_record/locking/pessimistic.rb#L72\">pessimistic locking here</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<hr>\n<p dir=\"auto\">Let me know if this is something that might be considered useful and what other changes might be needed.</p>\n<p dir=\"auto\">Thanks for all your work on Rails!</p>",
            "url": "https://github.com/rails/rails/pull/53364",
            "title": "Improve error handling on attempt to update optimistic lock version to `nil`",
            "date_modified": "2024-10-18T10:46:45.000Z",
            "date_published": "2024-10-18T10:46:41.000Z",
            "author": {
                "name": "stevegeek",
                "url": "https://github.com/stevegeek"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19192189?u=dd60737844a9db7f1475bab21fc3e5258a405e15&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">No longer supporting it will allow us to evolve the internal representation of Active Record objects without breaking compatibility.</p>\n<p dir=\"auto\">Unfortunately I don't see any realistic solution for emitting deprecation warnings if the format is still in use by an application.</p>\n<p dir=\"auto\">For now loading 6.1 record will still work, so I left the associated tests, but we might break it at any point when evolving the various <code class=\"notranslate\">Attribute</code> / <code class=\"notranslate\">AttributeSet</code> private APIs.</p>",
            "url": "https://github.com/rails/rails/pull/53362",
            "title": "Remove support for Rails 6.1 Active Record Marshal format",
            "date_modified": "2024-10-18T12:46:35.000Z",
            "date_published": "2024-10-18T08:31:25.000Z",
            "author": {
                "name": "casperisfine",
                "url": "https://github.com/casperisfine"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Considering a schema like the following:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"ActiveRecord::Schema.define do\n  create_table :posts, force: true do |t|\n    t.boolean :published, null: false, default: true\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Schema</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">define</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:posts</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-c1\">true</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n    <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">boolean</span> <span class=\"pl-pds\">:published</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-c1\">true</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Creating a Post with an explicitly set <code class=\"notranslate\">published: nil</code> raises an exception:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Post.create! published: nil # =&gt; raises ActiveRecord::NotNullViolation: SQLite3::ConstraintException: NOT NULL constraint failed: posts.published\"><pre class=\"notranslate\"><code class=\"notranslate\">Post.create! published: nil # =&gt; raises ActiveRecord::NotNullViolation: SQLite3::ConstraintException: NOT NULL constraint failed: posts.published\n</code></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\"><a href=\"https://github.com/rails/rails/pull/53352\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/53352/hovercard\">#53352</a> aimed to change that behavior, but was rejected. This change aims to document both Active Record and Active Model's behavior when assigning <code class=\"notranslate\">nil</code> to attributes with a <code class=\"notranslate\">default</code> value (and a column with both <code class=\"notranslate\">null: false</code> and a <code class=\"notranslate\">default</code> option).</p>",
            "url": "https://github.com/rails/rails/pull/53355",
            "title": "Document how `nil` overrides an attribute default [ci skip]",
            "date_modified": "2024-10-18T13:21:28.000Z",
            "date_published": "2024-10-17T19:32:14.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Commits <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/0f43feda04d45aec064aedc312d265a529e4915d/hovercard\" href=\"https://github.com/rails/rails/commit/0f43feda04d45aec064aedc312d265a529e4915d\"><tt>0f43fed</tt></a> and <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/adec7e7ba87e3d268149d0020d54dc211eb02ada/hovercard\" href=\"https://github.com/rails/rails/commit/adec7e7ba87e3d268149d0020d54dc211eb02ada\"><tt>adec7e7</tt></a> removed setting <code class=\"notranslate\">config.assets.quiet</code> and <code class=\"notranslate\">config.assets.debug</code> to <code class=\"notranslate\">true</code> in <code class=\"notranslate\">config/environments/development.rb</code>.<br>\nThe guide has been updated to reflect that.</p>\n<p dir=\"auto\">The defaults for other <code class=\"notranslate\">config.assets</code> configs are set by either <code class=\"notranslate\">propshaft</code> or <code class=\"notranslate\">sprocket-rails</code>. So the guides should mention that.</p>\n<ul dir=\"auto\">\n<li>propshaft <a href=\"https://github.com/rails/propshaft/blob/993c67d843cd544927cce150cddc160b9c5607e3/lib/propshaft/railtie.rb\">https://github.com/rails/propshaft/blob/993c67d843cd544927cce150cddc160b9c5607e3/lib/propshaft/railtie.rb</a></li>\n<li>sprocket-rails <a href=\"https://github.com/rails/sprockets-rails/blob/2c04236faaacd021b7810289cbac93e962ff14da/lib/sprockets/railtie.rb\">https://github.com/rails/sprockets-rails/blob/2c04236faaacd021b7810289cbac93e962ff14da/lib/sprockets/railtie.rb</a></li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/53351",
            "title": "Update `config.assets` documentation in Configuring guide [ci-skip]",
            "date_modified": "2024-10-18T11:51:54.000Z",
            "date_published": "2024-10-17T12:30:57.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        }
    ]
}