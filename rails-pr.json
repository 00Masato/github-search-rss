{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/159?u=36438d464451d200a47a38f51180656aeb9a44d5&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I came across this code while using memory_profiler on my test suite.</p>\n<p dir=\"auto\">The current implementation creates 2 Arrays and 1 Set. Looking more closely, it seemed like it should be possible to do all the operations starting with an initial Set, and keep adding to that rather than creating extra copies of Arrays.</p>\n<p dir=\"auto\">I ran some benchmarks comparing the original implementation and this new one, and I wasn't surprised to see less allocated memory, but I was shocked by how much faster faster it was... some 508x!</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Comparison:\n          refactored:       7704 allocated\n            original:       8352 allocated - 1.08x more\nWarming up --------------------------------------\n            original     2.293k i/100ms\n          refactored     1.189M i/100ms\nCalculating -------------------------------------\n            original     23.489k (± 1.0%) i/s -    119.236k in   5.076701s\n          refactored     11.951M (± 0.6%) i/s -     60.640M in   5.074167s\n\nComparison:\n            original:    23489.3 i/s\n          refactored: 11951077.0 i/s - 508.79x  faster\"><pre class=\"notranslate\"><code class=\"notranslate\">Comparison:\n          refactored:       7704 allocated\n            original:       8352 allocated - 1.08x more\nWarming up --------------------------------------\n            original     2.293k i/100ms\n          refactored     1.189M i/100ms\nCalculating -------------------------------------\n            original     23.489k (± 1.0%) i/s -    119.236k in   5.076701s\n          refactored     11.951M (± 0.6%) i/s -     60.640M in   5.074167s\n\nComparison:\n            original:    23489.3 i/s\n          refactored: 11951077.0 i/s - 508.79x  faster\n</code></pre></div>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the implementation of AbstractController::Base#action_methods to be more memory efficient and faster.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I used this for benchmarking:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# frozen_string_literal: true\nrequire 'action_controller'\nrequire 'benchmark/ips'\nrequire 'benchmark/memory'\n\nmodule Actions\n  def foo\n  end\n\n  def bar\n  end\n\n  def baz\n  end\nend\n\nclass Current &lt; ActionController::Base\n  include Actions\n  def action_methods\n    @action_methods ||= begin\n      # All public instance methods of this class, including ancestors\n      methods = (public_instance_methods(true) -\n        # Except for public instance methods of Base and its ancestors\n        internal_methods +\n        # Be sure to include shadowed public instance methods of this class\n        public_instance_methods(false))\n\n      methods.map!(&amp;:to_s)\n\n      methods.to_set\n    end\n  end\nend\n\nclass Refactored2 &lt; ActionController::Base\n  include Actions\n\n  class &lt;&lt; self\n      def action_methods\n        @action_methods ||= begin\n                              Set.new(public_instance_methods(true))\n                                .subtract(internal_methods)\n                                .merge(public_instance_methods(false))\n                                .map!(&amp;:to_s)\n        end\n      end\n  end\nend\n\nBenchmark.memory do |x|\n  x.report(&quot;original&quot;) do\n    Current.clear_action_methods!\n    Current.action_methods\n  end\n\n  x.report(&quot;refactored&quot;) do\n    Current.clear_action_methods!\n    Refactored2.action_methods\n  end\n\n  x.compare!\nend\n\nBenchmark.ips do |x|\n  x.report(&quot;original&quot;) do\n    Current.clear_action_methods!\n    Current.action_methods\n  end\n\n  x.report(&quot;refactored&quot;) do\n    Current.clear_action_methods!\n    Refactored2.action_methods\n  end\n\n  x.compare! order: :baseline\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># frozen_string_literal: true</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">'action_controller'</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">'benchmark/ips'</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">'benchmark/memory'</span>\n\n<span class=\"pl-k\">module</span> <span class=\"pl-v\">Actions</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">foo</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">bar</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">baz</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Current</span> &lt; <span class=\"pl-v\">ActionController</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">include</span> <span class=\"pl-v\">Actions</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">action_methods</span>\n    <span class=\"pl-c1\">@action_methods</span> ||= <span class=\"pl-k\">begin</span>\n      <span class=\"pl-c\"># All public instance methods of this class, including ancestors</span>\n      <span class=\"pl-s1\">methods</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">(</span><span class=\"pl-en\">public_instance_methods</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> -\n        <span class=\"pl-c\"># Except for public instance methods of Base and its ancestors</span>\n        <span class=\"pl-en\">internal_methods</span> +\n        <span class=\"pl-c\"># Be sure to include shadowed public instance methods of this class</span>\n        <span class=\"pl-en\">public_instance_methods</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">false</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n\n      <span class=\"pl-s1\">methods</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">map!</span><span class=\"pl-kos\">(</span>&amp;<span class=\"pl-pds\">:to_s</span><span class=\"pl-kos\">)</span>\n\n      <span class=\"pl-s1\">methods</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_set</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Refactored2</span> &lt; <span class=\"pl-v\">ActionController</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">include</span> <span class=\"pl-v\">Actions</span>\n\n  <span class=\"pl-k\">class</span> &lt;&lt; <span class=\"pl-smi\">self</span>\n      <span class=\"pl-k\">def</span> <span class=\"pl-en\">action_methods</span>\n        <span class=\"pl-c1\">@action_methods</span> ||= <span class=\"pl-k\">begin</span>\n                              <span class=\"pl-v\">Set</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">public_instance_methods</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n                                <span class=\"pl-kos\">.</span><span class=\"pl-en\">subtract</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">internal_methods</span><span class=\"pl-kos\">)</span>\n                                <span class=\"pl-kos\">.</span><span class=\"pl-en\">merge</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">public_instance_methods</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">false</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n                                <span class=\"pl-kos\">.</span><span class=\"pl-en\">map!</span><span class=\"pl-kos\">(</span>&amp;<span class=\"pl-pds\">:to_s</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">end</span>\n      <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-v\">Benchmark</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">memory</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">x</span>|\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"original\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-v\">Current</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">clear_action_methods!</span>\n    <span class=\"pl-v\">Current</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">action_methods</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"refactored\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-v\">Current</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">clear_action_methods!</span>\n    <span class=\"pl-v\">Refactored2</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">action_methods</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">compare!</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-v\">Benchmark</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ips</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">x</span>|\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"original\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-v\">Current</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">clear_action_methods!</span>\n    <span class=\"pl-v\">Current</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">action_methods</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">report</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"refactored\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n    <span class=\"pl-v\">Current</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">clear_action_methods!</span>\n    <span class=\"pl-v\">Refactored2</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">action_methods</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-s1\">x</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">compare!</span> <span class=\"pl-pds\">order</span>: <span class=\"pl-pds\">:baseline</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Results are included above.</p>\n<p dir=\"auto\">I tried at least one other implementation, where I started with a new Set, but the final result was marginally faster:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"                              methods = Set.new\n                              methods.merge(public_instance_methods(true))\n                              methods.subtract(internal_methods)\n                              methods.merge(public_instance_methods(false))\n                              methods.map!(&amp;:to_s)\n\"><pre class=\"notranslate\">                              <span class=\"pl-s1\">methods</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Set</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n                              <span class=\"pl-s1\">methods</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">merge</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">public_instance_methods</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n                              <span class=\"pl-s1\">methods</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">subtract</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">internal_methods</span><span class=\"pl-kos\">)</span>\n                              <span class=\"pl-s1\">methods</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">merge</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">public_instance_methods</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">false</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n                              <span class=\"pl-s1\">methods</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">map!</span><span class=\"pl-kos\">(</span>&amp;<span class=\"pl-pds\">:to_s</span><span class=\"pl-kos\">)</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49016",
            "title": "Improve performance of AbstractController::Base#action_methods",
            "date_modified": "2023-08-23T15:58:00.000Z",
            "date_published": "2023-08-23T15:43:54.000Z",
            "author": {
                "name": "technicalpickles",
                "url": "https://github.com/technicalpickles"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5512772?u=bbae6d87b3499e6b3662664cf4be0e84cc40f6d2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">In <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1765797832\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48533\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48533/hovercard\" href=\"https://github.com/rails/rails/pull/48533\">#48533</a> Rails changed the target<br>\nwhere alias attribute methods are defined. It lead to<br>\n<code class=\"notranslate\">undefine_attribute_methods</code> to clean alias attribute methods along with<br>\nthe attribute methods. It was an intended behavior change but it wasn't<br>\nproperly documented and tested. This commit clarifies the new behavior<br>\nin the Active Model changelog along with covering the behavior with tests.</p>",
            "url": "https://github.com/rails/rails/pull/49015",
            "title": "Add new behavior of `undefine_attribute_methods` to CHANGELOG",
            "date_modified": "2023-08-23T14:44:12.000Z",
            "date_published": "2023-08-23T14:44:07.000Z",
            "author": {
                "name": "nvasilevski",
                "url": "https://github.com/nvasilevski"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Ref <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1862445939\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49011\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49011/hovercard\" href=\"https://github.com/rails/rails/pull/49011\">#49011</a></p>\n<p dir=\"auto\">This is similar to a <a href=\"https://github.com/rails/rails/commit/16f8bd79444a512dfebf2d77bd2fd3075041475b\">previous commit</a> which ensures that versioned migrations always call <code class=\"notranslate\">super</code> in <code class=\"notranslate\">compatible_table_definition</code>. In this case, these methods are being pulled up to <code class=\"notranslate\">Current</code> so that all subclasses will use a <code class=\"notranslate\">TableDefinition</code> class and future developers do not have to remember to add all of these methods to new versioned classes when a new one is created.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49012",
            "title": "Ensure all migration versions use TableDefinition",
            "date_modified": "2023-08-23T06:04:46.000Z",
            "date_published": "2023-08-23T04:20:34.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This ended up requiring more backports to get fully working:</p>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1408460330\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46241\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46241/hovercard\" href=\"https://github.com/rails/rails/pull/46241\">#46241</a> - add <code class=\"notranslate\">compatible_table_definition</code> to <code class=\"notranslate\">Current</code><br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1620511274\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47648\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47648/hovercard\" href=\"https://github.com/rails/rails/pull/47648\">#47648</a> - ensure empty options aren't logged<br>\n<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1862540257\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49012\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49012/hovercard\" href=\"https://github.com/rails/rails/pull/49012\">#49012</a> - move <code class=\"notranslate\">*_table</code> methods up to <code class=\"notranslate\">Current</code> to prevent subclasses not implementing them</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">While working on <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1855555446\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48969\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48969/hovercard\" href=\"https://github.com/rails/rails/pull/48969\">#48969</a>, I found that some of the Compatibility test cases were not working correctly. The tests removed in this commit were never running the <code class=\"notranslate\">change_table</code> migration and so were not actually testing that <code class=\"notranslate\">change_table</code> works correctly. The issue is that the two migrations created in these tests both have <code class=\"notranslate\">nil</code> versions, and so the Migrator only runs the first one.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit refactors the tests so that its easier to test the behavior of each Migration class version (and I think the rest of the tests should be updated to use this strategy as well). Additionally, since the tests are fixed it exposed that <code class=\"notranslate\">t.change</code> in a <code class=\"notranslate\">change_table</code> is not behaving as expected so that is fixed as well.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Ref <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1857084305\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48974\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48974/hovercard\" href=\"https://github.com/rails/rails/pull/48974\">#48974</a><br>\n(manually backported to 7-0-stable because it did not apply cleanly)</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49011",
            "title": "Fix 6.1 change_table setting datetime precision [7-0-stable]",
            "date_modified": "2023-08-23T06:54:45.000Z",
            "date_published": "2023-08-23T02:24:51.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/430345?u=9b42c37dba4c7dc82b0ca34fd90b4291fe02934c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In the Getting Started guide, in the dropdown for an article or comment's status, there is a bug.  Pre-selecting <code class=\"notranslate\">public</code> will make <em>all</em> articles seem <code class=\"notranslate\">public,</code> even if their status is really something else -- even <code class=\"notranslate\">nil</code>.  The <code class=\"notranslate\">nil</code> case was reported in issue <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1226793960\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/45028\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/45028/hovercard\" href=\"https://github.com/rails/rails/issues/45028\">#45028</a>, but it also applies to articles with other statuses.</p>\n<p dir=\"auto\">Selecting <code class=\"notranslate\">article.status || 'public'</code> instead will fix this, in <em>most</em> cases.  Pre-existing articles with <code class=\"notranslate\">nil</code> status will still show up as <code class=\"notranslate\">public</code>, but if the form is submitted, they will indeed become <code class=\"notranslate\">public</code>.</p>\n<p dir=\"auto\">This commit makes that change, and adds text to explain why it is done.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #45028.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1226793960\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/45028\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/45028/hovercard\" href=\"https://github.com/rails/rails/issues/45028\">#45028</a> (mostly)</p>\n<p dir=\"auto\">This Pull Request has been created because I stumbled across the issue (while looking to see whether my other PR was redundant), verified the problem, and thought of a quick and easy solution for the majority of cases.  :-)  (And yes, verified that the fix works, at least On My Machine  ;-) )</p>\n<h3 dir=\"auto\">Checklist</h3>\n<ul dir=\"auto\">\n<li>[Yes ] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li>[Yes] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[ N/A] Tests are added or updated if you fix a bug or add a feature.</li>\n<li>[ N/A] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49010",
            "title": "select existing article status if any, in Getting Started Guide -- Fixes #45028 (mostly)",
            "date_modified": "2023-08-23T01:14:56.000Z",
            "date_published": "2023-08-23T01:14:53.000Z",
            "author": {
                "name": "davearonson",
                "url": "https://github.com/davearonson"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/430345?u=9b42c37dba4c7dc82b0ca34fd90b4291fe02934c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In Getting Started guide, in the article and comment status dropdowns, it repeats the literal list of valid statuses estabished in the Visible module.  In fact, it does so twice!  It would make the code DRYer, briefer, and more expressive, to use Visible::VALID_STATUSES instead.  This PR does so, and also adds a sentence explaining why, in the preceding text.</p>\n<p dir=\"auto\">This Pull Request has been created because it just bugged me to see it so horribly un-DRY, in something that (were it anything approaching a \"real\" app), would be very subject to change, such as by adding a \"deleted\" status.  This tiny change will help get/reinforce the idea of DRY in Rails-beginners' minds, without clubbing them over the head with it, nor (IMHO) taking it too far.  (After all, the constant was already there, convenient to use.)</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul dir=\"auto\">\n<li>[Yes] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li>[Yes] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[N/A] Tests are added or updated if you fix a bug or add a feature.</li>\n<li>[N/A] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49007",
            "title": "Replace repeated list literals in Getting Started guide w/ a constant",
            "date_modified": "2023-08-23T00:33:46.000Z",
            "date_published": "2023-08-23T00:33:43.000Z",
            "author": {
                "name": "davearonson",
                "url": "https://github.com/davearonson"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Both <code class=\"notranslate\">Nokogiri</code> and <code class=\"notranslate\">Minitest</code> have merged the PRs mentioned to integrate support for Ruby's Pattern matching<br>\n(<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1221915564\" data-permission-text=\"Title is private\" data-url=\"https://github.com/sparklemotion/nokogiri/issues/2523\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/sparklemotion/nokogiri/pull/2523/hovercard\" href=\"https://github.com/sparklemotion/nokogiri/pull/2523\">sparklemotion/nokogiri#2523</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1460655412\" data-permission-text=\"Title is private\" data-url=\"https://github.com/minitest/minitest/issues/936\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/minitest/minitest/pull/936/hovercard\" href=\"https://github.com/minitest/minitest/pull/936\">minitest/minitest#936</a>, respectively).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit adds coverage for those new assertions, and incorporates examples into the documentation for the <code class=\"notranslate\">response.parsed_body</code> method.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">In order to incorporate pattern-matching support for JSON responses, this commit changes the response parser to call <code class=\"notranslate\">JSON.parse</code> with <a href=\"https://docs.ruby-lang.org/en/3.2/JSON.html#module-JSON-label-Parsing+Options\" rel=\"nofollow\">object_class: ActiveSupport::HashWithIndifferentAccess</a>, since String instances for <code class=\"notranslate\">Hash</code> keys are incompatible with Ruby's syntactically pattern matching.</p>\n<p dir=\"auto\">For example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"irb(main):001:0&gt; json = {&quot;key&quot; =&gt; &quot;value&quot;}\n=&gt; {&quot;key&quot;=&gt;&quot;value&quot;}\nirb(main):002:0&gt; json in {key: /value/}\n=&gt; false\n\nirb(main):001:0&gt; json = {&quot;key&quot; =&gt; &quot;value&quot;}\n=&gt; {&quot;key&quot;=&gt;&quot;value&quot;}\nirb(main):002:0&gt; json in {&quot;key&quot; =&gt; /value/}\n.../3.2.0/lib/ruby/gems/3.2.0/gems/irb-1.7.4/lib/irb/workspace.rb:113:in `eval': (irb):2: syntax error, unexpected terminator, expecting literal content or tSTRING_DBEG or tSTRING_DVAR or tLABEL_END (SyntaxError)\njson in {&quot;key&quot; =&gt; /value/}\n             ^\n\n        .../ruby/3.2.0/lib/ruby/gems/3.2.0/gems/irb-1.7.4/exe/irb:9:in `&lt;top (required)&gt;'\n        .../ruby/3.2.0/bin/irb:25:in `load'\n        .../ruby/3.2.0/bin/irb:25:in `&lt;main&gt;'\"><pre class=\"notranslate\"><span class=\"pl-en\">irb</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">main</span><span class=\"pl-kos\">)</span>:<span class=\"pl-c1\">001</span><span class=\"pl-pds\">:0</span>&gt; <span class=\"pl-s1\">json</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"key\"</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-s\">\"value\"</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"key\"</span><span class=\"pl-c1\">=&gt;</span><span class=\"pl-s\">\"value\"</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-en\">irb</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">main</span><span class=\"pl-kos\">)</span>:<span class=\"pl-c1\">002</span><span class=\"pl-pds\">:0</span>&gt; <span class=\"pl-s1\">json</span> <span class=\"pl-k\">in</span> <span class=\"pl-kos\">{</span><span class=\"pl-pds\">key</span>: <span class=\"pl-sr\">/value/</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-c1\">=</span>&gt; <span class=\"pl-c1\">false</span>\n\n<span class=\"pl-en\">irb</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">main</span><span class=\"pl-kos\">)</span>:<span class=\"pl-c1\">001</span><span class=\"pl-pds\">:0</span>&gt; <span class=\"pl-s1\">json</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"key\"</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-s\">\"value\"</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"key\"</span><span class=\"pl-c1\">=&gt;</span><span class=\"pl-s\">\"value\"</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-en\">irb</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">main</span><span class=\"pl-kos\">)</span>:<span class=\"pl-c1\">002</span><span class=\"pl-pds\">:0</span>&gt; <span class=\"pl-s1\">json</span> <span class=\"pl-k\">in</span> <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"key\"</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-sr\">/value/</span><span class=\"pl-kos\">}</span>\n.../<span class=\"pl-c1\">3.2</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">0</span>/<span class=\"pl-en\">lib</span>/<span class=\"pl-en\">ruby</span>/<span class=\"pl-en\">gems</span>/<span class=\"pl-c1\">3.2</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">0</span>/<span class=\"pl-en\">gems</span>/<span class=\"pl-en\">irb</span>-<span class=\"pl-c1\">1.7</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">4</span>/<span class=\"pl-en\">lib</span>/<span class=\"pl-en\">irb</span>/<span class=\"pl-en\">workspace</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">rb</span>:<span class=\"pl-c1\">113</span><span class=\"pl-pds\">:in</span> <span class=\"pl-s\">`eval': (irb):2: syntax error, unexpected terminator, expecting literal content or tSTRING_DBEG or tSTRING_DVAR or tLABEL_END (SyntaxError)</span>\n<span class=\"pl-s\">json in {\"key\" =&gt; /value/}</span>\n<span class=\"pl-s\">             ^</span>\n<span class=\"pl-s\"></span>\n<span class=\"pl-s\">        .../ruby/3.2.0/lib/ruby/gems/3.2.0/gems/irb-1.7.4/exe/irb:9:in `</span>&lt;<span class=\"pl-en\">top</span> <span class=\"pl-kos\">(</span><span class=\"pl-en\">required</span><span class=\"pl-kos\">)</span>&gt;<span class=\"pl-s\">'</span>\n<span class=\"pl-s\">        .../ruby/3.2.0/bin/irb:25:in `load'</span>\n        .../<span class=\"pl-en\">ruby</span>/<span class=\"pl-c1\">3.2</span><span class=\"pl-kos\">.</span><span class=\"pl-c1\">0</span>/<span class=\"pl-en\">bin</span>/<span class=\"pl-en\">irb</span>:<span class=\"pl-c1\">25</span><span class=\"pl-pds\">:in</span> `&lt;<span class=\"pl-en\">main</span>&gt;<span class=\"pl-s\">'</span></pre></div>\n<p dir=\"auto\">When the Hash maps String keys to Symbol keys, it's able to be pattern matched:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"irb(main):005:0&gt; json = {&quot;key&quot; =&gt; &quot;value&quot;}.with_indifferent_access\n=&gt; {&quot;key&quot;=&gt;&quot;value&quot;}\nirb(main):006:0&gt; json in {key: /value/}\n=&gt; true\"><pre class=\"notranslate\"><span class=\"pl-en\">irb</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">main</span><span class=\"pl-kos\">)</span>:<span class=\"pl-c1\">005</span><span class=\"pl-pds\">:0</span>&gt; <span class=\"pl-s1\">json</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"key\"</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-s\">\"value\"</span><span class=\"pl-kos\">}</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">with_indifferent_access</span>\n<span class=\"pl-c1\">=&gt;</span> <span class=\"pl-kos\">{</span><span class=\"pl-s\">\"key\"</span><span class=\"pl-c1\">=&gt;</span><span class=\"pl-s\">\"value\"</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-en\">irb</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">main</span><span class=\"pl-kos\">)</span>:<span class=\"pl-c1\">006</span><span class=\"pl-pds\">:0</span>&gt; <span class=\"pl-s1\">json</span> <span class=\"pl-k\">in</span> <span class=\"pl-kos\">{</span><span class=\"pl-pds\">key</span>: <span class=\"pl-sr\">/value/</span><span class=\"pl-kos\">}</span>\n<span class=\"pl-c1\">=</span>&gt; <span class=\"pl-c1\">true</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49003",
            "title": "Ensure `response.parsed_body` support for pattern matching",
            "date_modified": "2023-08-22T21:12:38.000Z",
            "date_published": "2023-08-22T20:02:45.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Add notes for <a href=\"https://github.com/rails/rails/pull/47144\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47144/hovercard\">#47144</a> to the 7.1 Release Notes.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Additionally, in the time since that was merged, both Nokogiri and Minitest have merged the PRs mentioned to integrate support for Ruby's Pattern matching (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1221915564\" data-permission-text=\"Title is private\" data-url=\"https://github.com/sparklemotion/nokogiri/issues/2523\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/sparklemotion/nokogiri/pull/2523/hovercard\" href=\"https://github.com/sparklemotion/nokogiri/pull/2523\">sparklemotion/nokogiri#2523</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1460655412\" data-permission-text=\"Title is private\" data-url=\"https://github.com/minitest/minitest/issues/936\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/minitest/minitest/pull/936/hovercard\" href=\"https://github.com/minitest/minitest/pull/936\">minitest/minitest#936</a>, respectively).</p>\n<p dir=\"auto\">This commit adds coverage for those new assertions, and incorporates guidance into the release notes.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49001",
            "title": "Document `response.parsed_body` in 7.1 release notes",
            "date_modified": "2023-08-22T20:34:09.000Z",
            "date_published": "2023-08-22T19:00:09.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/42215?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because a <code class=\"notranslate\">NoMethodError: private method `process' called for #&lt;ActiveStorage::Variant</code> error is raised in <code class=\"notranslate\">ActiveStorage::TransformJob</code> when variant tracking is disabled. This prevents the ability to use preprocessed variants when variant tracking is disabled.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the call to <code class=\"notranslate\">process</code> in <code class=\"notranslate\">ActiveStorage::TransformJob</code> to the <code class=\"notranslate\">processed</code> method which is publicly available in both the <code class=\"notranslate\">ActiveStorage::VariantWithRecord</code> and <code class=\"notranslate\">ActiveStorage::Variant</code> classes.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">The following code snipped contains a working recreation of the issue with the current <code class=\"notranslate\">main</code> branch.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# frozen_string_literal: true\n\nrequire &quot;bundler/inline&quot;\n\ngemfile(true) do\n  source &quot;https://rubygems.org&quot;\n\n  git_source(:github) { |repo| &quot;https://github.com/#{repo}.git&quot; }\n\n  gem &quot;rails&quot;, github: &quot;rails/rails&quot;, branch: &quot;main&quot;\n  gem &quot;rack&quot;, &quot;~&gt; 2.0&quot;\n  gem &quot;sqlite3&quot;\n  gem 'image_processing', '~&gt; 1.2'\nend\n\nrequire &quot;active_record/railtie&quot;\nrequire &quot;active_storage/engine&quot;\nrequire &quot;tmpdir&quot;\n\nclass TestApp &lt; Rails::Application\n  config.root = __dir__\n  config.hosts &lt;&lt; &quot;example.org&quot;\n  config.eager_load = false\n  config.session_store :cookie_store, key: &quot;cookie_store_key&quot;\n  config.secret_key_base = &quot;secret_key_base&quot;\n\n  config.logger = Logger.new($stdout)\n  Rails.logger  = config.logger\n\n  config.active_storage.service = :local\n  config.active_storage.service_configurations = {\n    local: {\n      root: Dir.tmpdir,\n      service: &quot;Disk&quot;\n    }\n  }\n\n  config.active_storage.track_variants = false\nend\n\nENV[&quot;DATABASE_URL&quot;] = &quot;sqlite3::memory:&quot;\n\nRails.application.initialize!\n\nrequire ActiveStorage::Engine.root.join(&quot;db/migrate/20170806125915_create_active_storage_tables.rb&quot;).to_s\n\nActiveRecord::Schema.define do\n  CreateActiveStorageTables.new.change\n\n  create_table :users, force: true\nend\n\nclass User &lt; ActiveRecord::Base\n  has_one_attached :profile do |attachable|\n    attachable.variant :test, resize_to_limit: [100, 100], preprocessed: true\n  end\nend\n\nrequire &quot;minitest/autorun&quot;\n\nclass BugTest &lt; Minitest::Test\n  def test_upload_and_download\n    user = User.create!(\n      profile: {\n        content_type: &quot;image/jpeg&quot;,\n        filename: &quot;racecar.jpg&quot;,\n        io: Pathname.new(&quot;activestorage/test/fixtures/files/racecar.jpg&quot;).open,\n      }\n    )\n\n    assert_equal false, user.profile.variant(:test).send(:processed?)\n\n    user.profile.attachment.send(:named_variants).each do |_name, named_variant|\n      assert_raises(NoMethodError) do\n        ActiveStorage::TransformJob.perform_now(user.profile, named_variant.transformations)\n      end\n    end\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># frozen_string_literal: true</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"bundler/inline\"</span>\n\n<span class=\"pl-en\">gemfile</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">source</span> <span class=\"pl-s\">\"https://rubygems.org\"</span>\n\n  <span class=\"pl-en\">git_source</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:github</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">repo</span>| <span class=\"pl-s\">\"https://github.com/<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">repo</span><span class=\"pl-kos\">}</span></span>.git\"</span> <span class=\"pl-kos\">}</span>\n\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">github</span>: <span class=\"pl-s\">\"rails/rails\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">branch</span>: <span class=\"pl-s\">\"main\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"rack\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"~&gt; 2.0\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">\"sqlite3\"</span>\n  <span class=\"pl-en\">gem</span> <span class=\"pl-s\">'image_processing'</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">'~&gt; 1.2'</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_record/railtie\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_storage/engine\"</span>\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"tmpdir\"</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">TestApp</span> &lt; <span class=\"pl-v\">Rails</span>::<span class=\"pl-v\">Application</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">root</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">__dir__</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">hosts</span> &lt;&lt; <span class=\"pl-s\">\"example.org\"</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">eager_load</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">false</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">session_store</span> <span class=\"pl-pds\">:cookie_store</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">key</span>: <span class=\"pl-s\">\"cookie_store_key\"</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">secret_key_base</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">\"secret_key_base\"</span>\n\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span>$stdout<span class=\"pl-kos\">)</span>\n  <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span>  <span class=\"pl-c1\">=</span> <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span>\n\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_storage</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">service</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:local</span>\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_storage</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">service_configurations</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span>\n    <span class=\"pl-pds\">local</span>: <span class=\"pl-kos\">{</span>\n      <span class=\"pl-pds\">root</span>: <span class=\"pl-v\">Dir</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">tmpdir</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-pds\">service</span>: <span class=\"pl-s\">\"Disk\"</span>\n    <span class=\"pl-kos\">}</span>\n  <span class=\"pl-kos\">}</span>\n\n  <span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_storage</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">track_variants</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">false</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-c1\">ENV</span><span class=\"pl-kos\">[</span><span class=\"pl-s\">\"DATABASE_URL\"</span><span class=\"pl-kos\">]</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">\"sqlite3::memory:\"</span>\n\n<span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">application</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">initialize!</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">Engine</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">root</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">join</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"db/migrate/20170806125915_create_active_storage_tables.rb\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_s</span>\n\n<span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Schema</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">define</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-v\">CreateActiveStorageTables</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">change</span>\n\n  <span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:users</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-c1\">true</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">has_one_attached</span> <span class=\"pl-pds\">:profile</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">attachable</span>|\n    <span class=\"pl-s1\">attachable</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">variant</span> <span class=\"pl-pds\">:test</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">resize_to_limit</span>: <span class=\"pl-kos\">[</span><span class=\"pl-c1\">100</span><span class=\"pl-kos\">,</span> <span class=\"pl-c1\">100</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">preprocessed</span>: <span class=\"pl-c1\">true</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"minitest/autorun\"</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">BugTest</span> &lt; <span class=\"pl-v\">Minitest</span>::<span class=\"pl-v\">Test</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">test_upload_and_download</span>\n    <span class=\"pl-s1\">user</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create!</span><span class=\"pl-kos\">(</span>\n      <span class=\"pl-pds\">profile</span>: <span class=\"pl-kos\">{</span>\n        <span class=\"pl-pds\">content_type</span>: <span class=\"pl-s\">\"image/jpeg\"</span><span class=\"pl-kos\">,</span>\n        <span class=\"pl-pds\">filename</span>: <span class=\"pl-s\">\"racecar.jpg\"</span><span class=\"pl-kos\">,</span>\n        <span class=\"pl-pds\">io</span>: <span class=\"pl-v\">Pathname</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"activestorage/test/fixtures/files/racecar.jpg\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">open</span><span class=\"pl-kos\">,</span>\n      <span class=\"pl-kos\">}</span>\n    <span class=\"pl-kos\">)</span>\n\n    <span class=\"pl-en\">assert_equal</span> <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">profile</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">variant</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:test</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">send</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:processed?</span><span class=\"pl-kos\">)</span>\n\n    <span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">profile</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attachment</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">send</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:named_variants</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">named_variant</span>|\n      <span class=\"pl-en\">assert_raises</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">NoMethodError</span><span class=\"pl-kos\">)</span> <span class=\"pl-k\">do</span>\n        <span class=\"pl-v\">ActiveStorage</span>::<span class=\"pl-v\">TransformJob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">perform_now</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">profile</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">named_variant</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">transformations</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-k\">end</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48999",
            "title": "Fix NoMethodError in ActiveStorage::TransformJob for untracked variants.",
            "date_modified": "2023-08-22T17:12:54.000Z",
            "date_published": "2023-08-22T17:12:46.000Z",
            "author": {
                "name": "bryantraywick",
                "url": "https://github.com/bryantraywick"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/740289?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Based on an idea by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a> in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"806889240\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/41420\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/41420/hovercard?comment_id=1686745412&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/issues/41420#issuecomment-1686745412\">#41420 (comment)</a>.</p>\n<p dir=\"auto\">While BCrypt may be the desirable default password hashing algorithm in Rails for the foreseeable future, making the mechanism for hashing and verifying passwords in <code class=\"notranslate\">has_secure_password</code> extendable/modular is valuable.</p>\n<p dir=\"auto\">Developers may opt for different hashing algorithms and can now extend or plug in their own alongside BCrypt in a clean and maintainable way. From the referenced thread, there is discourse amongst people on what should be the <em>de facto</em> password algorithm and disagreement on whether Argon2 should be it. Rails should make it easier for the community to progress on best password hashing practices.</p>\n<p dir=\"auto\">This also unlocks Rails shipping with more than BCrypt as an available hashing algorithm.</p>\n<p dir=\"auto\">I <em>could</em> see a world where Rails offers PBKDF2 (for those wanting FIPS 140 compliance), BCrypt (the safe default), and Argon2 (since OWASP recommends it).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR takes BCrypt-specific code in <code class=\"notranslate\">ActiveModel::SecurePassword</code> and extracts it out into an object <code class=\"notranslate\">ActiveModel::SecurePassword::BCrypt</code>. The object adheres to a simple interface (<code class=\"notranslate\">ActiveModel::SecurePassword::Base</code>) so developers can supplement with different algorithms (or different libraries of the same underlying algo).</p>\n<p dir=\"auto\">A user of the Rails framework uses the newly added <code class=\"notranslate\">:algorithm</code> option in <code class=\"notranslate\">has_secure_password</code> to declare what password hashing algo should be used on a given attribute.</p>\n<p dir=\"auto\">Developers can write libraries or even initializers to add different password hashing algorithm support following a very clean interface.</p>\n<p dir=\"auto\">Below is an example of someone opting to use Argon2 using <code class=\"notranslate\">ruby-argon2</code>:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# config/initializers/add_argon2_to_activemodel_securepassword.rb\n\nrequire &quot;active_model/secure_password/base&quot;\n\nmodule ActiveModel\n  module SecurePassword\n    class Argon2id &lt; Base\n      def initialize\n        require &quot;argon2&quot;\n      rescue LoadError\n        warn &quot;You don't have argon2 installed in your application. Please add it to your Gemfile and run bundle install.&quot;\n        raise\n      end\n\n      def self.algorithm_name\n        :argon2id\n      end\n\n      def hash_password(unencrypted_password, options = {})\n        if options[:min_cost]\n          hasher = Argon2::Password.new(t_cost: 1, m_cost: 3, p_cost: 1)\n        else\n          hasher = Argon2::Password.new(t_cost: 2, m_cost: 19, p_cost: 1)  # Latest OWASP recommended values\n        end\n        hasher.create(unencrypted_password)\n      end\n\n      def verify_password(password, digest)\n        Argon2::Password.verify_password(password, digest)\n      end\n\n      def password_salt(digest)\n        Argon2::HashFormat.new(digest).salt\n      end\n    end\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># config/initializers/add_argon2_to_activemodel_securepassword.rb</span>\n\n<span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_model/secure_password/base\"</span>\n\n<span class=\"pl-k\">module</span> <span class=\"pl-v\">ActiveModel</span>\n  <span class=\"pl-k\">module</span> <span class=\"pl-v\">SecurePassword</span>\n    <span class=\"pl-k\">class</span> <span class=\"pl-v\">Argon2id</span> &lt; <span class=\"pl-v\">Base</span>\n      <span class=\"pl-k\">def</span> <span class=\"pl-en\">initialize</span>\n        <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"argon2\"</span>\n      <span class=\"pl-k\">rescue</span> <span class=\"pl-v\">LoadError</span>\n        <span class=\"pl-en\">warn</span> <span class=\"pl-s\">\"You don't have argon2 installed in your application. Please add it to your Gemfile and run bundle install.\"</span>\n        <span class=\"pl-en\">raise</span>\n      <span class=\"pl-k\">end</span>\n\n      <span class=\"pl-k\">def</span> <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">algorithm_name</span>\n        <span class=\"pl-pds\">:argon2id</span>\n      <span class=\"pl-k\">end</span>\n\n      <span class=\"pl-k\">def</span> <span class=\"pl-en\">hash_password</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">unencrypted_password</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">options</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">{</span><span class=\"pl-kos\">}</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">if</span> <span class=\"pl-s1\">options</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:min_cost</span><span class=\"pl-kos\">]</span>\n          <span class=\"pl-s1\">hasher</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Argon2</span>::<span class=\"pl-v\">Password</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">t_cost</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">m_cost</span>: <span class=\"pl-c1\">3</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">p_cost</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-k\">else</span>\n          <span class=\"pl-s1\">hasher</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Argon2</span>::<span class=\"pl-v\">Password</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">t_cost</span>: <span class=\"pl-c1\">2</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">m_cost</span>: <span class=\"pl-c1\">19</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">p_cost</span>: <span class=\"pl-c1\">1</span><span class=\"pl-kos\">)</span>  <span class=\"pl-c\"># Latest OWASP recommended values</span>\n        <span class=\"pl-k\">end</span>\n        <span class=\"pl-s1\">hasher</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">create</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">unencrypted_password</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-k\">end</span>\n\n      <span class=\"pl-k\">def</span> <span class=\"pl-en\">verify_password</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">password</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">digest</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-v\">Argon2</span>::<span class=\"pl-v\">Password</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">verify_password</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">password</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">digest</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-k\">end</span>\n\n      <span class=\"pl-k\">def</span> <span class=\"pl-en\">password_salt</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">digest</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-v\">Argon2</span>::<span class=\"pl-v\">HashFormat</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">digest</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">salt</span>\n      <span class=\"pl-k\">end</span>\n    <span class=\"pl-k\">end</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# app/models/user.rb\n\nclass User &lt; ActiveRecord::Base\n  has_secure_password :password, algorithm: :argon2\nend\"><pre class=\"notranslate\"><span class=\"pl-c\"># app/models/user.rb</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n  <span class=\"pl-en\">has_secure_password</span> <span class=\"pl-pds\">:password</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">algorithm</span>: <span class=\"pl-pds\">:argon2</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I'm a bit of a novice when it comes to making Rails aware of different files and how to \"register\" a series of subclasses (some of which could be defined in libraries or the initializers folder) to a part of Rails. Open to whatever pattern is the most appropriate.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48993",
            "title": "Make `has_secure_password` pluginable/extendable with different password hashing algorithms",
            "date_modified": "2023-08-22T15:29:13.000Z",
            "date_published": "2023-08-21T21:01:57.000Z",
            "author": {
                "name": "f3ndot",
                "url": "https://github.com/f3ndot"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #46509.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1451643704\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46509\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46509/hovercard\" href=\"https://github.com/rails/rails/issues/46509\">#46509</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes association autosave logic to decouple validation and save conditions, so that validations are always run (still taking into consideration options like <code class=\"notranslate\">validate: false</code>) regardless of whether or not the record is changing. This makes autosave validations consistent with direct persistence methods like <code class=\"notranslate\">save</code>, as shown in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1451643704\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46509\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46509/hovercard?comment_id=1322641993&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/issues/46509#issuecomment-1322641993\">#46509 (comment)</a> and the test I've added in this PR.</p>\n<p dir=\"auto\">This approach was inspired by the comments in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1551379967\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47088\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47088/hovercard\" href=\"https://github.com/rails/rails/pull/47088\">#47088</a>, which was an alternate approach to fixing the linked issue.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">None.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48986",
            "title": "[Fix #46509] Run autosave validations regardless of changes",
            "date_modified": "2023-08-20T07:14:19.000Z",
            "date_published": "2023-08-20T02:25:41.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/108208?u=31587544126ab4506d05644fcccb8621f893ef1b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1857065077\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48973\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48973/hovercard\" href=\"https://github.com/rails/rails/issues/48973\">#48973</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the requirement for <code class=\"notranslate\">webdrivers</code> gem.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48977",
            "title": "Fix `webdrivers` on `7-0-stable` branch for issue #48973.",
            "date_modified": "2023-08-23T07:43:18.000Z",
            "date_published": "2023-08-19T02:37:47.000Z",
            "author": {
                "name": "ruyrocha",
                "url": "https://github.com/ruyrocha"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6826778?u=f003e43af6f187f1ff48cfb577150c77a54f4138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">We ran into a few cases at GitHub where we were using <code class=\"notranslate\">alias_attribute</code> incorrectly to target non-attribute methods. Previously, this \"worked\", because <code class=\"notranslate\">alias_attribute</code> just forwarded the method call, but this is no longer the case.</p>\n<p dir=\"auto\">In most cases, this raised a deprecation warning, although the message was a bit unclear. The original deprecation warning was intended to look for manually defined alias methods that won't be forwarded in the future.</p>\n<p dir=\"auto\">If the target happens to be a generated attribute method, no deprecation is raised. For example, assuming a model has a <code class=\"notranslate\">title</code> attribute, <code class=\"notranslate\">alias_attribute :saved_title, :title_in_database</code> was using the new behavior, because we only raise the deprecation if the target method is not an attribute method.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a check to <code class=\"notranslate\">alias_attribute_method_definition</code> to ensure that you actually are targeting an attribute, and raises a deprecation warning if not. In the future, I think we should raise if you try to use <code class=\"notranslate\">alias_attribute</code> with a non-attribute method.</p>\n<p dir=\"auto\">Note that the following code will still behave correctly, because <code class=\"notranslate\">has_attribute?</code> will forward the aliases to the far target automatically.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Topic\n  alias_attribute :heading, :title\n  alias_attribute :subject, :heading\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Topic</span>\n  <span class=\"pl-en\">alias_attribute</span> <span class=\"pl-pds\">:heading</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:title</span>\n  <span class=\"pl-en\">alias_attribute</span> <span class=\"pl-pds\">:subject</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:heading</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">This correctly issues a deprecation warning for generated attribute methods, and also makes the warning for any non-attribute methods more clear.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">We originally tried to make this warning even more specific in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1847140470\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48929\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48929/hovercard\" href=\"https://github.com/rails/rails/pull/48929\">#48929</a>, but the logic got kind of complicated. Issuing one warning for this case felt like a good compromise.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48972",
            "title": "Ensure target is an attribute for `alias_attribute`",
            "date_modified": "2023-08-21T19:50:50.000Z",
            "date_published": "2023-08-18T17:09:56.000Z",
            "author": {
                "name": "ipc103",
                "url": "https://github.com/ipc103"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1709692?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48326.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1730003454\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48326\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48326/hovercard\" href=\"https://github.com/rails/rails/issues/48326\">#48326</a></p>\n<p dir=\"auto\">This Pull Request has been created to fix an issue where syntax errors generated inside an eval method cause an Internal Server Error due to a TypeError.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">In order to display the extraced source of a syntax error, we try to locate the node id for the backtrace location. The call to RubyVM::AbstractSyntaxTree.node_id_for_backtrace_location is expecting a Thread::Backtrace::Location object, but we are passing a SourceMapLocation instead.</p>\n<p dir=\"auto\">Once this is fixed, another issue then appears. The first location of the backtrace for an eval error does not include the filename of where eval is called, so we can't extract the source. This means that the development view fails to show the extracted source because it is hard-coded to show the source extracted for the first location.</p>\n<p dir=\"auto\">This commit does two things:</p>\n<ol dir=\"auto\">\n<li>it addresses the issue by making sure that we are always passing a Thread::Backtrace::Location instead</li>\n<li>it allows the development view to show the extracted source fragment by ensuring the first location of the backtrace for a syntax error coming from eval includes the name of the file where eval is called</li>\n</ol>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I have tried to keep the changes consistent with the approach introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1393581431\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46171\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46171/hovercard\" href=\"https://github.com/rails/rails/pull/46171\">#46171</a>.</p>",
            "url": "https://github.com/rails/rails/pull/48957",
            "title": "Better handle SyntaxError in Action View",
            "date_modified": "2023-08-23T14:24:37.000Z",
            "date_published": "2023-08-16T20:32:54.000Z",
            "author": {
                "name": "cmaruz",
                "url": "https://github.com/cmaruz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1518299?u=d3dda61ebb16317ded64f166b59e35e1e160b9b1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1723197770\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48287\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48287/hovercard\" href=\"https://github.com/rails/rails/pull/48287\">#48287</a> introduced auto loading fixtures in engines. All engines present in the root folder of the rails app would have their fixtures auto loaded. This caused tests to fail when gems were vendorized, because fixtures from the internal rails test suite would be loaded.</p>\n<p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1729552267\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48323\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48323/hovercard\" href=\"https://github.com/rails/rails/pull/48323\">#48323</a> Added a check to exclude the vendor folder.</p>\n<p dir=\"auto\">This PR extends the check introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1729552267\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48323\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48323/hovercard\" href=\"https://github.com/rails/rails/pull/48323\">#48323</a> to prevent loading fixtures from gem paths instead of just the vendor folder.</p>\n<p dir=\"auto\">Some tools like devenv install gems in the root of the app, but outside of the vendor folder (<code class=\"notranslate\">.devenv/state</code>).</p>\n<p dir=\"auto\">This change prevents automatically loading fixtures from gems instead of the vendor folder.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I run rails using devenv and after updating rails, my test suite started to complain about fixtures from rails internal tests.<br>\nThe current check doesn't fix the issue for all situations. This new check <em>should</em>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48933",
            "title": "Fix a regression preventing vendorizing gems outside of the vendor folder",
            "date_modified": "2023-08-19T23:04:06.000Z",
            "date_published": "2023-08-13T04:24:10.000Z",
            "author": {
                "name": "JoeDupuis",
                "url": "https://github.com/JoeDupuis"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/96156234?u=9ced8d6ac6128a8dea78e7f0d9233669ff0ffecf&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This branch allows a user to set <code class=\"notranslate\">self.table_alias</code> in the model to custom set a table alias.  It then accounts for the SQL needed for this in the AST.  It addresses <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1814805867\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48775\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48775/hovercard\" href=\"https://github.com/rails/rails/issues/48775\">#48775</a>.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This was motivated by the behavior shown in <a href=\"https://github.com/rails/rails/issues/48775\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48775/hovercard\">48775</a> and by a suggestion to implement it by <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/rafaelfranca/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/rafaelfranca\">@rafaelfranca</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request allows a user to set a SQL <code class=\"notranslate\">table_alias</code> in the model by using <code class=\"notranslate\">self.table_alias = \"alias\"</code>.  Once this is done it gets added to the <code class=\"notranslate\">Alias</code> node in the AST.  In order to account for this in the SQL created by the AST I have the <code class=\"notranslate\">Insert</code> statement using the original table name instead of the <code class=\"notranslate\">table_alias</code> when a <code class=\"notranslate\">table_alias</code> is present so that the SQL INSERT will function.</p>\n<p dir=\"auto\">With the <code class=\"notranslate\">Update</code> and <code class=\"notranslate\">Delete</code> methods I changed the default behavior of <code class=\"notranslate\">visit_Arel_Table</code> to use <code class=\"notranslate\">AS</code> when a <code class=\"notranslate\">table_alias</code> is present, <code class=\"notranslate\">table AS t</code> vs <code class=\"notranslate\">table t</code>.  One last adjustment was necessary in the <code class=\"notranslate\">Delete</code> method.  In order for MySQL to use the alias in the delete method I needed to add the <code class=\"notranslate\">table_alias</code> after <code class=\"notranslate\">DELETE </code>.  So the code checks for MySQL and if the Node is using a <code class=\"notranslate\">table_alias</code> it will then insert the alias  after <code class=\"notranslate\">DELETE </code>, <code class=\"notranslate\">DELETE t FROM table AS t</code> vs <code class=\"notranslate\">DELETE FROM table AS t</code>.</p>\n<p dir=\"auto\">With these adjustments in place one can now successfully use a <code class=\"notranslate\">table_alias</code> set from the model with the Public API.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48932",
            "title": "This branch allows a user to set self.table_alias in the model",
            "date_modified": "2023-08-17T16:15:13.000Z",
            "date_published": "2023-08-13T02:50:09.000Z",
            "author": {
                "name": "paulreece",
                "url": "https://github.com/paulreece"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/58582?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48922.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1845388034\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48922\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48922/hovercard\" href=\"https://github.com/rails/rails/issues/48922\">#48922</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">The helper <code class=\"notranslate\">encrypted_attribute?</code> currently delegates the check to the global default encryptor configured, cf</p>\n<p dir=\"auto\"></p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/e6d59cdebbd0ddaf88029a7b9f03f5d642780e0a/activerecord/lib/active_record/encryption/encryptable_record.rb#L141-L144\">rails/activerecord/lib/active_record/encryption/encryptable_record.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 141 to 144\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/e6d59cdebbd0ddaf88029a7b9f03f5d642780e0a\">e6d59cd</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L141\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"141\"></td>\n          <td id=\"LC141\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\"># Returns whether a given attribute is encrypted or not.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L142\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"142\"></td>\n          <td id=\"LC142\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">def</span> <span class=\"pl-en\">encrypted_attribute?</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">attribute_name</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L143\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"143\"></td>\n          <td id=\"LC143\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Encryption</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">encryptor</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">encrypted?</span> <span class=\"pl-en\">read_attribute_before_type_cast</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">attribute_name</span><span class=\"pl-kos\">)</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L144\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"144\"></td>\n          <td id=\"LC144\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">end</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">This Pull Requests delegates the check to the EncryptedAttributeType instance defined for the attribute. This attribute type properly applies context properties defined initially with <code class=\"notranslate\">encrypts</code>, such as a custom encryptor or message serializer.</p>\n<p dir=\"auto\">This fixes an issue where the <code class=\"notranslate\">encrypted_attribute?</code> helper would return erroneous results.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48923",
            "title": "[Fix #48922] Honour encrypted attribute context in encrypted_attribute?",
            "date_modified": "2023-08-10T15:23:12.000Z",
            "date_published": "2023-08-10T15:21:02.000Z",
            "author": {
                "name": "maximerety",
                "url": "https://github.com/maximerety"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/142914?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">If this looks good, I'll fill in the gaps in documentation and respond<br>\nto feedback in a timely manner.</p>\n<p dir=\"auto\">Is a simpler version of what's in<br>\n<a href=\"https://github.com/rails/rails/blob/7-0-stable/activerecord/lib/active_record/core.rb#L373-L396\">https://github.com/rails/rails/blob/7-0-stable/activerecord/lib/active_record/core.rb#L373-L396</a></p>\n<p dir=\"auto\">I'm using this in our application and thought I'd share back.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">We using ActiveModel::Model to build plain-old-ruby<br>\nobjects for things like API clients.  When I use<br>\nthe Attributes API to define secrets like <code class=\"notranslate\">attribute :api_key, :string</code><br>\nI don't want the <code class=\"notranslate\">api_key</code> to show up anywhere.</p>\n<p dir=\"auto\">This Pull Request has been created because ActiveModel::Model<br>\nis missing the <code class=\"notranslate\">filter_attributes</code> behavior present in<br>\nActiveRecord::Core.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes adds <code class=\"notranslate\">filter_attributes</code> to ActiveModel::API</p>\n<p dir=\"auto\">I added it to ActiveModel::API so that it does not interfere with<br>\nActiveRecord.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">We're using this in our app.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48921",
            "title": "feat: Add ActiveModel::Model.filter_attributes",
            "date_modified": "2023-08-13T16:33:55.000Z",
            "date_published": "2023-08-10T14:03:53.000Z",
            "author": {
                "name": "bf4",
                "url": "https://github.com/bf4"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22743?u=e50ea34a823df4b4f098a77e63c67b043847b06c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because it's not intuitive how we should match the arguments passed to an ActiveJob job when using keyword arguments.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit adds an example to the <code class=\"notranslate\">assert_enqueued_with</code> method documentation, demonstrating how to use it with keyword arguments. The example clarifies that keyword arguments should be specified as a hash inside an array, guiding developers to write tests for jobs that use keyword arguments.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48920",
            "title": "[docs] Update assert_enqueued_with documentation with keyword arguments example",
            "date_modified": "2023-08-11T07:55:37.000Z",
            "date_published": "2023-08-10T12:38:36.000Z",
            "author": {
                "name": "fidalgo",
                "url": "https://github.com/fidalgo"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Follow-up to <a href=\"https://github.com/rails/rails/pull/47420\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47420/hovercard\">#47420</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">With the changes made in <a href=\"https://github.com/rails/rails/pull/47420\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/47420/hovercard\">#47420</a>, <code class=\"notranslate\">has_secure_token</code> declarations can be configured to execute in an <code class=\"notranslate\">after_initialize</code> callback. This commit proposed a new Rails 7.1 default: generate all <code class=\"notranslate\">has_secure_token</code> values when their corresponding models are initialized.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">To preserve pre-7.1 behavior, applications can set <code class=\"notranslate\">config.active_record.generate_secure_token_on = :create</code>.</p>\n<p dir=\"auto\">By default, generate the value when the model is initialized:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User &lt; ApplicationRecord\n  has_secure_token\nend\n\nrecord = User.new\nrecord.token # =&gt; &quot;fwZcXX6SkJBJRogzMdciS7wf&quot;\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">has_secure_token</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">record</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n<span class=\"pl-s1\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">token</span> <span class=\"pl-c\"># =&gt; \"fwZcXX6SkJBJRogzMdciS7wf\"</span></pre></div>\n<p dir=\"auto\">With <code class=\"notranslate\">config.active_record.generate_secure_token_on = :create</code>, generate the<br>\nvalue when the model is created:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# config/application.rb\nconfig.active_record.generate_secure_token_on = :create\n\n# app/models/user.rb\nclass User &lt; ApplicationRecord\n  has_secure_token on: :create\nend\n\nrecord = User.new\nrecord.token # =&gt; nil\nrecord.save!\nrecord.token # =&gt; &quot;fwZcXX6SkJBJRogzMdciS7wf&quot;\"><pre class=\"notranslate\"><span class=\"pl-c\"># config/application.rb</span>\n<span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">generate_secure_token_on</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:create</span>\n\n<span class=\"pl-c\"># app/models/user.rb</span>\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">has_secure_token</span> <span class=\"pl-pds\">on</span>: <span class=\"pl-pds\">:create</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-s1\">record</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">User</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span>\n<span class=\"pl-s1\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">token</span> <span class=\"pl-c\"># =&gt; nil</span>\n<span class=\"pl-s1\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">save!</span>\n<span class=\"pl-s1\">record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">token</span> <span class=\"pl-c\"># =&gt; \"fwZcXX6SkJBJRogzMdciS7wf\"</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48912",
            "title": "Change `has_secure_token` default to `on: :initialize`",
            "date_modified": "2023-08-22T18:15:24.000Z",
            "date_published": "2023-08-09T14:23:11.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        }
    ]
}