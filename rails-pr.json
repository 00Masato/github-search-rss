{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Trying to debug <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1967223028\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49841\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49841/hovercard\" href=\"https://github.com/rails/rails/issues/49841\">#49841</a>.</p>",
            "url": "https://github.com/rails/rails/pull/50037",
            "title": "Debug CI flaky test",
            "date_modified": "2023-11-13T01:00:43.000Z",
            "date_published": "2023-11-13T00:22:44.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1371733?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Followup <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1987937005\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50006\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50006/hovercard\" href=\"https://github.com/rails/rails/pull/50006\">#50006</a> cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/jonathanhefner/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jonathanhefner\">@jonathanhefner</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/nicowenterodt/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/nicowenterodt\">@nicowenterodt</a></p>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because <code class=\"notranslate\">TransformJob</code> for previewable files only preprocess the preview image, but not the associated preview_image variant.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">ActiveStorage::TransformJob</code> to also trigger the preprocessing of the variant. It is also compatible with both previewable and variable records, as they both implement the <code class=\"notranslate\">#key</code> method</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">Every <code class=\"notranslate\">ActiveStorage::Blob</code> has a <code class=\"notranslate\">has_one_attached :preview_image</code> which is technically another AS blob.</p>\n<p dir=\"auto\">Right now <code class=\"notranslate\">ActiveStorage::Preview#processed</code> only generates the <code class=\"notranslate\">preview_image</code> blob, but not the variant that's associated with it (with transformations available in the <code class=\"notranslate\">@variation</code> instance variable)</p>\n<p dir=\"auto\">One way to solve this is to force the <code class=\"notranslate\">ActiveStorage::TransformJob</code> to preprocess the variant as well by calling <code class=\"notranslate\">ActiveStorage::Preview#key</code> ( or <code class=\"notranslate\">ActiveStorage::Variant#key</code> but it just calculates a key here)  this would return the key value that's inside the variant, which can be safely discarded in the context of <code class=\"notranslate\">ActiveStorage::TransformJob</code></p>\n<p dir=\"auto\">The <code class=\"notranslate\">ActiveStorage::Preview#processed</code> method can be subject to a refactor to handle multiple transformations depending on the <code class=\"notranslate\">@variation</code> instance variable ( which might require refactoring the <code class=\"notranslate\">#processed?</code> method )</p>\n<p dir=\"auto\">the <code class=\"notranslate\">ActiveStorage::Preview#key</code>, as well as <code class=\"notranslate\">ActiveStorage::Preview#url</code>, also can be refactored, because right now they perform two things:</p>\n<ol dir=\"auto\">\n<li>Generate a variant ( System and network calls )</li>\n<li>return the key or url</li>\n</ol>\n<p dir=\"auto\">Compared to the <code class=\"notranslate\">ActiveStorage::Variant#key</code> that simply calculates a key</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50026",
            "title": "[ActiveStorage] Fix TransformJob to preprocess preview image variant",
            "date_modified": "2023-11-13T09:01:17.000Z",
            "date_published": "2023-11-12T12:30:41.000Z",
            "author": {
                "name": "chaadow",
                "url": "https://github.com/chaadow"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/13457494?u=fb7971eda2d2680c27e7d2e5a4db7b430745f04d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50024.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1989345714\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50024\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50024/hovercard\" href=\"https://github.com/rails/rails/issues/50024\">#50024</a></p>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Correctly cast boolean values for mysql to handle boolean filtering in JSON queries.<br>\nMysql doesn't treat '0' or '1' as a boolean in the context of the JSON field. Reference: <a href=\"https://bugs.mysql.com/bug.php?id=90469\" rel=\"nofollow\">https://bugs.mysql.com/bug.php?id=90469</a></p>\n<p dir=\"auto\">Previously, rails used to cast boolean values as 'TRUE' or 'FALSE' but after change introduced in <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/1dc69cab761fbfd46142f70d8ea58a41c6a12c12/hovercard\" href=\"https://github.com/rails/rails/commit/1dc69cab761fbfd46142f70d8ea58a41c6a12c12\"><tt>1dc69ca</tt></a>, this behavior has changed, and boolean casted values are converted into '1' or '0'.</p>\n<p dir=\"auto\">This Pull Request has been created because [REPLACE ME]</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">After the PR, if the bound value is boolean it will be casted to 'TRUE' or 'FALSE'.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50025",
            "title": "[Fix #50024] Correctly cast boolean values for mysql to handle boolean filtering in JSON queries",
            "date_modified": "2023-11-12T10:49:30.000Z",
            "date_published": "2023-11-12T10:49:26.000Z",
            "author": {
                "name": "the-spectator",
                "url": "https://github.com/the-spectator"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/22231095?u=fc75f9764434943effe06d6c1dc48d40a5003b0c&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><code class=\"notranslate\">uglifier</code> is an outdated and not used in modernjs application instead of that it recommends to use <code class=\"notranslate\">terser</code>.<br>\nref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1049157852\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/43623\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/43623/hovercard\" href=\"https://github.com/rails/rails/pull/43623\">#43623</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request removes <code class=\"notranslate\">uglifier</code> from the guide and test.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50023",
            "title": "Remove uglifier from guide and test",
            "date_modified": "2023-11-13T06:42:27.000Z",
            "date_published": "2023-11-12T07:12:22.000Z",
            "author": {
                "name": "akhilgkrishnan",
                "url": "https://github.com/akhilgkrishnan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49926.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1977782020\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49926\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49926/hovercard\" href=\"https://github.com/rails/rails/issues/49926\">#49926</a>.</p>\n<p dir=\"auto\">Currently, <code class=\"notranslate\">ActiveRecord.dump_schemas</code> (introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"61916304\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/19347\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/19347/hovercard\" href=\"https://github.com/rails/rails/pull/19347\">#19347</a>) is only considered when dumping schema in a <code class=\"notranslate\">:sql</code> format. This PR fixes that by considering it also when dumping in a <code class=\"notranslate\">:ruby</code> format.</p>",
            "url": "https://github.com/rails/rails/pull/50020",
            "title": "Fix schema dumper to account for `ActiveRecord.dump_schemas` when dumping in `:ruby` format",
            "date_modified": "2023-11-11T19:51:52.000Z",
            "date_published": "2023-11-11T19:51:48.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/49003608?u=d6d2cb39cd6e439646f81385c732533a331433f1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to add a helper method to get a column's comment, instead of reading from <code class=\"notranslate\">columns_hash</code>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This pull request adds a new method <code class=\"notranslate\">column_comment(column_name)</code> to the <code class=\"notranslate\">model_schema.rb</code> that helps to fetch a column's comment text from the <code class=\"notranslate\">columns_hash</code>. The <code class=\"notranslate\">column_name</code> provided to this method must exist on the table. If it does not exist, an error gets raised.</p>\n<p dir=\"auto\">Currently, to get a column's comment, you'd need to do</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Model.columns_hash['column_name'].comment\"><pre class=\"notranslate\"><span class=\"pl-v\">Model</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">columns_hash</span><span class=\"pl-kos\">[</span><span class=\"pl-s\">'column_name'</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">comment</span></pre></div>\n<p dir=\"auto\">With the changes from this PR, you can now do</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Model.column_comment('column_name')\"><pre class=\"notranslate\"><span class=\"pl-v\">Model</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">column_comment</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'column_name'</span><span class=\"pl-kos\">)</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50019",
            "title": "Add column_comment method to model_schema.rb",
            "date_modified": "2023-11-11T20:09:41.000Z",
            "date_published": "2023-11-11T18:53:23.000Z",
            "author": {
                "name": "Tambiebarango",
                "url": "https://github.com/Tambiebarango"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/10229505?u=2871863a7667f0f4103aebc38dc1cb1835b9a632&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><a href=\"https://www.npmjs.com/package/karma\" rel=\"nofollow\">karma</a> npm package, used in actioncable and actionview, has been stale.</p>\n<p dir=\"auto\">karma 3.x was stable in 2018, but 6.x is now the latest.</p>\n<p dir=\"auto\">This Pull Request has been created because Rails developers are to use the latest karma and latest Node.js (20 LTS or 21).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request updates karma package from 3.1.4 to 6.4.2, which prevents from using <code class=\"notranslate\">chokidar@2</code> (or <code class=\"notranslate\">fsevents@1</code>).</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The package was introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"380461495\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/34440\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/34440/hovercard\" href=\"https://github.com/rails/rails/pull/34440\">#34440</a> and <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1400973915\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46206\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/46206/hovercard\" href=\"https://github.com/rails/rails/pull/46206\">#46206</a>. Also this change follows up <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1975819154\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49901\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49901/hovercard\" href=\"https://github.com/rails/rails/pull/49901\">#49901</a> (Node.js 20).</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[n/a] Tests are added or updated if you fix a bug or add a feature.</li>\n<li>[n/a] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50018",
            "title": "test: update karma npm from 3.1.4 to 6.4.2",
            "date_modified": "2023-11-11T15:16:03.000Z",
            "date_published": "2023-11-11T14:53:27.000Z",
            "author": {
                "name": "tnir",
                "url": "https://github.com/tnir"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6979737?u=e5fc89c5f1b12b1fb83f942c742af204df2d1ca1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #26295.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"173580677\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/26295\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/26295/hovercard\" href=\"https://github.com/rails/rails/issues/26295\">#26295</a>. It was closed due to the issue becoming stale, not because it was fixed. It never had a satisfactory fix.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request modifies the order of attribute assignments for associations, e.g. <code class=\"notranslate\">collection.build</code> and <code class=\"notranslate\">build_foo</code>. Previously, if you were to build a record from an association, the attributes derived from the scope would be applied last. This is problematic when a setter on the model expects those scope values to be present, since they were technically defined first. This has bitten me a few times in a multi-tenant application, requiring a workaround where you supply the scope attributes again in <code class=\"notranslate\">#build</code>.</p>\n<p dir=\"auto\">I've tried to make this backwards compatible, by first applying the attributes from the scope via <code class=\"notranslate\">#scope_for_create</code>, then applying the provided attributes to <code class=\"notranslate\">#build</code> minus foreign keys from <code class=\"notranslate\">#scope_for_create</code>, and then finally initializing the record normally.</p>\n<p dir=\"auto\">Here's a small reproduction script of the problem: <a href=\"https://gist.github.com/ezekg/5722f5af2b79061a4f945d49f3ce734b\">https://gist.github.com/ezekg/5722f5af2b79061a4f945d49f3ce734b</a> (modified from <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/heaven/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/heaven\">@heaven</a>'s original reproduction script: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"173580677\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/26295\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/26295/hovercard?comment_id=246189123&amp;comment_type=issue_comment\" href=\"https://github.com/rails/rails/issues/26295#issuecomment-246189123\">#26295 (comment)</a>)</p>\n<p dir=\"auto\">I've written tests that fail without the changes to the <code class=\"notranslate\">#build_record</code> method.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50014",
            "title": "Fix order of scope- vs user-derived attribute assignments",
            "date_modified": "2023-11-10T23:09:32.000Z",
            "date_published": "2023-11-10T23:09:28.000Z",
            "author": {
                "name": "ezekg",
                "url": "https://github.com/ezekg"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/41791?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because there is inconsistent behavior with dirty attributes in transaction callbacks when a record is updated multiple times inside of a transaction.</p>\n<p dir=\"auto\">Consider this case:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class User &lt; ApplicationRecord\n  after_commit :notify_email_changes, if: :email_changed?\n\n  def notify_email_changes\n    NotifyEmailChangesJob.perform_later(id)\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">User</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">after_commit</span> <span class=\"pl-pds\">:notify_email_changes</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">if</span>: <span class=\"pl-pds\">:email_changed?</span>\n\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">notify_email_changes</span>\n    <span class=\"pl-v\">NotifyEmailChangesJob</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">perform_later</span><span class=\"pl-kos\">(</span><span class=\"pl-en\">id</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">This breaks if a record is saved twice in a single transaction.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"user.transaction do\n  user.update!(email: params[:email])\n  if user.last_visited_at &lt; 1.day.ago\n    user.update!(last_visited_at: Time.now)\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">transaction</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">update!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">email</span>: <span class=\"pl-en\">params</span><span class=\"pl-kos\">[</span><span class=\"pl-pds\">:email</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">if</span> <span class=\"pl-en\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">last_visited_at</span> &lt; <span class=\"pl-c1\">1</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">day</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">ago</span>\n    <span class=\"pl-en\">user</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">update!</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">last_visited_at</span>: <span class=\"pl-v\">Time</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">now</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">In the case where we update the <code class=\"notranslate\">last_visited_at</code> field, the <code class=\"notranslate\">email_changed?</code> method will return false since the email address was not changed in the last save operation and <code class=\"notranslate\">notify_email_changes</code> method will not be called.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49898.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1974877238\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49898\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49898/hovercard\" href=\"https://github.com/rails/rails/issues/49898\">#49898</a>, <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1686385518\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48077\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48077/hovercard\" href=\"https://github.com/rails/rails/issues/48077\">#48077</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes how <code class=\"notranslate\">saved_changes</code> is calculated in transactions when a record is updated multiple times.</p>\n<p dir=\"auto\">After each save operation, the list of saved changes is pushed onto a list. <code class=\"notranslate\">saved_changes</code> in an <code class=\"notranslate\">after_save</code> callback is unaffected and will show only the changes for that save operation.</p>\n<p dir=\"auto\">Before a transaction is committed, the list of saved changes for all saves in the transaction are merged by reapplying them to the original attributes. Checking <code class=\"notranslate\">saved_changes</code> in an <code class=\"notranslate\">after_commit</code> callback will use the merged mutation tracker which includes all changes. Checking <code class=\"notranslate\">saved_changes</code> outside the transaction after it is committed will also include all changes.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50011",
            "title": "Aggregate saved changes for all updates inside of a transaction",
            "date_modified": "2023-11-10T22:07:55.000Z",
            "date_published": "2023-11-10T20:21:35.000Z",
            "author": {
                "name": "bdurand",
                "url": "https://github.com/bdurand"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Introduce Action Text bug report templates for contributors to reproduce issues with failing <code class=\"notranslate\">ActionDispatch::SystemTestCase</code> instances.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\"><strong>Currently, the template test case fails</strong></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Error:\nBugTest#test_Action_Text:\nNameError: undefined local variable or method `new_articles_path' for #&lt;BugTest:0x0000000135db1e48&gt;\n    /Users/seanpdoyle/.asdf/installs/ruby/3.2.0/lib/ruby/gems/3.2.0/bundler/gems/rails-fd20970d6539/actionpack/lib/action_dispatch/system_test_case.rb:185:in `method_missing'\n    guides/bug_report_templates/action_text_main.rb:96:in `block in &lt;class:BugTest&gt;'\"><pre class=\"notranslate\"><code class=\"notranslate\">Error:\nBugTest#test_Action_Text:\nNameError: undefined local variable or method `new_articles_path' for #&lt;BugTest:0x0000000135db1e48&gt;\n    /Users/seanpdoyle/.asdf/installs/ruby/3.2.0/lib/ruby/gems/3.2.0/bundler/gems/rails-fd20970d6539/actionpack/lib/action_dispatch/system_test_case.rb:185:in `method_missing'\n    guides/bug_report_templates/action_text_main.rb:96:in `block in &lt;class:BugTest&gt;'\n</code></pre></div>\n<p dir=\"auto\">I'm not sure why, but the routing helpers are unavailable to the test case.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50010",
            "title": "Add `actiontext` bug report template",
            "date_modified": "2023-11-12T18:28:33.000Z",
            "date_published": "2023-11-10T19:28:54.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1722965?u=48ec2cc360eddee4ae842724533c0c9d82543571&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Implement a :force option to delete cookies not present in the request.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This can be useful if you're trying to delete a cookie that has a path, from a different path, in which case it won't be present in the request and won't be deleted if the option is not passed.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49746.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1957056867\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49746\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49746/hovercard\" href=\"https://github.com/rails/rails/issues/49746\">#49746</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds a <code class=\"notranslate\">:force</code> option to <code class=\"notranslate\">cookies.delete</code> that skips checking if the cookie is present before marking it for removal.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I initially tried simply removing the guard condition altogether (I gave my rationale for this in the linked Issue), but this broke some <code class=\"notranslate\">cookies.clear</code> tests, so I though it should probably be an opt-in behavior through an option.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50007",
            "title": "Implement a `:force` option to delete cookies not present in the request",
            "date_modified": "2023-11-10T22:30:37.000Z",
            "date_published": "2023-11-10T18:09:30.000Z",
            "author": {
                "name": "zavan",
                "url": "https://github.com/zavan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/17757590?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><code class=\"notranslate\">ActiveRecord::Relation</code> <code class=\"notranslate\">where</code> has a nice hash-style interface for forming the <code class=\"notranslate\">where</code> clause.<br>\nThis PR enables a similar style for <code class=\"notranslate\">order</code>, while maintaining all existing functionality.</p>\n<p dir=\"auto\">ActiveRecord::Relation can take a hash where keys are table name, value is a hash of key (column name) and value (order direction). For example:</p>\n<p dir=\"auto\"><code class=\"notranslate\">Topic.includes(:posts).order(posts: { created_at: :desc })</code></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Order can be passed several different arguments today:</p>\n<p dir=\"auto\">a) <code class=\"notranslate\">Topic.includes(:posts).order('posts.created_at')</code><br>\nb) <code class=\"notranslate\">Topic.includes(:posts).order('posts.created_at': :asc)</code><br>\nc) <code class=\"notranslate\">Topic.includes(:posts).order('posts.created_at', { follower_count: :desc }, 'posts.user_id desc' )</code><br>\nd) <code class=\"notranslate\">Topic.includes(:posts).order('posts.user_id', Post.arel_table[:created_at].desc)</code></p>\n<p dir=\"auto\">Each can be written re-written as a more structured hash:</p>\n<p dir=\"auto\">a) <code class=\"notranslate\">Topic.includes(:posts).order(posts: { created_at: :asc })</code><br>\nb) <code class=\"notranslate\">Topic.includes(:posts).order(posts: { created_at: :asc })</code><br>\nc) <code class=\"notranslate\">Topic.includes(:posts).order({ posts: { created_at: :asc } }, { topics: { follower_count: :desc } }, { posts: { user_id: :desc } })</code><br>\nd) <code class=\"notranslate\">Topic.includes(:posts).order(posts: { user_id: :asc, created_at: :desc })</code></p>\n<p dir=\"auto\">Or written in combination with the other existing strategies:</p>\n<p dir=\"auto\">c) <code class=\"notranslate\">Topic.includes(:posts).order('posts.created_at', { follower_count: :desc }, posts: { user_id: :desc})</code><br>\nd) <code class=\"notranslate\">Topic.includes(:posts).order({ posts: { user_id: :asc }}, Post.arel_table[:created_at].desc)</code></p>\n<p dir=\"auto\">It will properly reference table-name keys and maintains checks for directional keywords.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50000",
            "title": "`ActiveRecord::Relation#order` supports hash like `ActiveRecord::Relation#where`",
            "date_modified": "2023-11-10T14:37:57.000Z",
            "date_published": "2023-11-10T13:08:53.000Z",
            "author": {
                "name": "mylesboone",
                "url": "https://github.com/mylesboone"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/259568?u=088346ff0867534d6f143c32b5486953e158a6e4&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This PR adds support for the WITH PARSER option when creating a fulltext index in MYSQL.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes activerecord in order to support passing a <code class=\"notranslate\">with_parser</code> option when creating an index.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49996",
            "title": "Add support for WITH PARSER for full text search indexes",
            "date_modified": "2023-11-10T11:56:43.000Z",
            "date_published": "2023-11-10T11:22:49.000Z",
            "author": {
                "name": "Nerian",
                "url": "https://github.com/Nerian"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/53355525?u=10a9e3a54c30ab19bac03c95acfb7ff211949b1b&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">While I was reading the documentation of ActiveRecord I noticed that the links are not working.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR addresses that issue and changes the links to the right page of the API documentation.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49995",
            "title": "Fix links for the ActiveRecord readme [ci-skip]",
            "date_modified": "2023-11-10T11:10:39.000Z",
            "date_published": "2023-11-10T10:53:06.000Z",
            "author": {
                "name": "laicuRoot",
                "url": "https://github.com/laicuRoot"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/16284954?u=8c37a497f0e2791bb329f93189a46ae4f784c5a5&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">this enhancement prevents an unintentional human error by developers.<br>\nthis change helps to avoid a problem column name shadowing when <code class=\"notranslate\">select('*')</code>with joined tables containing same column names.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">assume that you have models and records like this.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Post &lt; ApplicationRecord\n  scope :sort_by_station_matching, lambda { |near_station_ids|\n    select('*')\n      .select(&quot;(#{select_near_station_match_count_query(near_station_ids)}) AS near_station_match_count&quot;)\n  }\n  \n  def select_near_station_match_count_query(railway_station_ids = [])\n    return 'SELECT 0' if railway_station_ids.blank?\n  \n    &lt;&lt;~SQL.squish\n      SELECT COUNT(stations.id)\n      FROM stations\n      WHERE stations.railway_station_id IN (#{railway_station_ids.join(',')})\n    SQL\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Post</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">scope</span> <span class=\"pl-pds\">:sort_by_station_matching</span><span class=\"pl-kos\">,</span> <span class=\"pl-en\">lambda</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">near_station_ids</span>|\n    <span class=\"pl-en\">select</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">'*'</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-kos\">.</span><span class=\"pl-en\">select</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"(<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-en\">select_near_station_match_count_query</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">near_station_ids</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">}</span></span>) AS near_station_match_count\"</span><span class=\"pl-kos\">)</span>\n  <span class=\"pl-kos\">}</span>\n  \n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">select_near_station_match_count_query</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">railway_station_ids</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-k\">return</span> <span class=\"pl-s\">'SELECT 0'</span> <span class=\"pl-k\">if</span> <span class=\"pl-s1\">railway_station_ids</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">blank?</span>\n  \n    <span class=\"pl-s\">&lt;&lt;~SQL</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">squish</span><span class=\"pl-s\"></span>\n<span class=\"pl-s\">      SELECT COUNT(stations.id)</span>\n<span class=\"pl-s\">      FROM stations</span>\n<span class=\"pl-s\">      WHERE stations.railway_station_id IN (<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">railway_station_ids</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">join</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">','</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">}</span></span>)</span>\n<span class=\"pl-s\">    SQL</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">posts table</p>\n<table role=\"table\">\n<thead>\n<tr>\n<th>id</th>\n<th>created_at</th>\n<th>updated_at</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>2023-08-03 14:30:23.040019000</td>\n<td>2023-08-03 14:30:23.040019000</td>\n</tr>\n</tbody>\n</table>\n<p dir=\"auto\">comments table</p>\n<table role=\"table\">\n<thead>\n<tr>\n<th>id</th>\n<th>post_id</th>\n<th>created_at</th>\n<th>updated_at</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>2</td>\n<td>1</td>\n<td>2023-08-03 14:30:23.040019000</td>\n<td>2023-08-03 14:30:23.040019000</td>\n</tr>\n</tbody>\n</table>\n<p dir=\"auto\">then, the id field of the instance of post model got with joins method has unexpected value.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.joins(:comments).sort_by_station_matching.first\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">joins</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:comments</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">sort_by_station_matching</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">first</span></pre></div>\n<p dir=\"auto\">expected</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"#&lt;User:0x0000000114db6388\n id: 1,\n near_station_match_count: 3,\n created_at:\n  Thu, 03 Aug 2023 14:30:23.040019000 UTC +00:00,\n updated_at:\n  Thu, 03 Aug 2023 14:30:23.040019000 UTC +00:00&gt;\"><pre class=\"notranslate\"><code class=\"notranslate\">#&lt;User:0x0000000114db6388\n id: 1,\n near_station_match_count: 3,\n created_at:\n  Thu, 03 Aug 2023 14:30:23.040019000 UTC +00:00,\n updated_at:\n  Thu, 03 Aug 2023 14:30:23.040019000 UTC +00:00&gt;\n</code></pre></div>\n<p dir=\"auto\">actual</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"#&lt;User:0x0000000114db6388\n id: 2,\n near_station_match_count: 3,\n created_at:\n  Thu, 03 Aug 2023 14:30:23.040019000 UTC +00:00,\n updated_at:\n  Thu, 03 Aug 2023 14:30:23.040019000 UTC +00:00&gt;\"><pre class=\"notranslate\"><code class=\"notranslate\">#&lt;User:0x0000000114db6388\n id: 2,\n near_station_match_count: 3,\n created_at:\n  Thu, 03 Aug 2023 14:30:23.040019000 UTC +00:00,\n updated_at:\n  Thu, 03 Aug 2023 14:30:23.040019000 UTC +00:00&gt;\n</code></pre></div>\n<p dir=\"auto\">expected is <code class=\"notranslate\">id: 1</code> from posts record but actual is <code class=\"notranslate\">id: 2</code> from comments record .</p>\n<p dir=\"auto\">at first, I thought this is a bug.<br>\nbut, after more research understood that this is cause a column name shadowing.<br>\nthis warning will help other developers.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49992",
            "title": "Warn unclarity filed if joined table has multiple fields with same name.",
            "date_modified": "2023-11-10T05:28:42.000Z",
            "date_published": "2023-11-10T03:42:57.000Z",
            "author": {
                "name": "KessaPassa",
                "url": "https://github.com/KessaPassa"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/496367?u=e3a63a2f7db3bea0507f2a6bcc6650db58a96e6d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Wrapping code in a block is not always possible, this way it behaves more like stdlib Tempfile that can be unlinked manually.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Tempfile.create is recommended over Tempfile.new/open per the documentation: <a href=\"https://docs.ruby-lang.org/en/3.2/Tempfile.html\" rel=\"nofollow\">https://docs.ruby-lang.org/en/3.2/Tempfile.html</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49990",
            "title": "Let ActiveStorage::Blob#open return a tempfile for manual unlinking",
            "date_modified": "2023-11-09T19:19:31.000Z",
            "date_published": "2023-11-09T18:25:15.000Z",
            "author": {
                "name": "bdewater",
                "url": "https://github.com/bdewater"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Introduce Action View bug report templates for contributors to reproduce issues with failing <code class=\"notranslate\">ActionView::TestCase</code> instances.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">In addition to rendering ERB with the <code class=\"notranslate\">inline:</code> keyword, the sample tests also include a <code class=\"notranslate\">Helpers</code> module to demonstrate how to incorporate view helpers into the reproduction script.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49986",
            "title": "Add `actionview` bug report template",
            "date_modified": "2023-11-11T15:22:49.000Z",
            "date_published": "2023-11-09T15:13:01.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1558372?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created because Enum definition with symbol values are not correctly typed_casted<br>\nreported here: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1985437940\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49981\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49981/hovercard\" href=\"https://github.com/rails/rails/issues/49981\">#49981</a></p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49981.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1985437940\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49981\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49981/hovercard\" href=\"https://github.com/rails/rails/issues/49981\">#49981</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">When an enum is defined with symbol values<br>\n<code class=\"notranslate\">enum :status, { draft: :draft, published: :published }</code><br>\na warning or an exception could be raised to force fixing, same kind as invalid enum definition.<br>\nNot sure this is the correct approach since the value is correctly persisted.</p>\n<p dir=\"auto\">I'd expect the enum symbol value to be converted to string to allow correct type_cast.</p>\n<p dir=\"auto\"><strong>Actual behavior</strong></p>\n<p dir=\"auto\">the type_cast of a symbol value of an enum is always returning nil.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49982",
            "title": "Support enum definition with symbol values",
            "date_modified": "2023-11-09T15:44:24.000Z",
            "date_published": "2023-11-09T11:41:55.000Z",
            "author": {
                "name": "jean-francois-labbe",
                "url": "https://github.com/jean-francois-labbe"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This section describes replacing UJS attributes with Turbo.<br>\nFor example replacing <code class=\"notranslate\">method</code> with <code class=\"notranslate\">turbo_method</code>.<br>\nHowever, for <code class=\"notranslate\">button_to</code> <code class=\"notranslate\">method</code> should not be replaced with <code class=\"notranslate\">turbo_method</code>,<br>\nas it's unrelated to UJS.<br>\nThis could avoid some confusion.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49966",
            "title": "Add note for `method` argument in `button_to` in js guide",
            "date_modified": "2023-11-08T17:59:14.000Z",
            "date_published": "2023-11-08T11:01:42.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/19525237?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><ul dir=\"auto\">\n<li>how Minitest works and names tests</li>\n<li>how to use <code class=\"notranslate\">--name</code> and <code class=\"notranslate\">--exclude</code> in a Rails app</li>\n</ul>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because the testing guide isn't clear on how to filter Rails tests. Technically this is a minitest documentation issue but I've tried to tie it in with how Rails testing works.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> <del>Tests are added or updated if you fix a bug or add a feature</del></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> <del>CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature</del></li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/49964",
            "title": "Add info to Testing Guide on filtering Rails tests [ci skip]",
            "date_modified": "2023-11-10T21:03:48.000Z",
            "date_published": "2023-11-08T03:51:16.000Z",
            "author": {
                "name": "matt17r",
                "url": "https://github.com/matt17r"
            }
        }
    ]
}