{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This was removed along with the <a href=\"https://github.com/rails/rails/commit/0c76f17f2dbf0d7ad90c890e6f334743cacce41f\">deprecated secrets removal</a>, however there was no deprecation for using config.secret_key_base in non-local environments.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Add it back with a test</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52062",
            "title": "Restore support for config.secret_key_base in prod",
            "date_modified": "2024-06-08T15:02:00.000Z",
            "date_published": "2024-06-08T15:00:53.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/12777550?u=415303ec1c626279c440cf729435fc0ee833d1c9&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51817.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2295142022\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51817\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51817/hovercard\" href=\"https://github.com/rails/rails/issues/51817\">#51817</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Currently, Rails doesn't have a mechanism to allow the main record to efficiently access its <code class=\"notranslate\">has_one :through</code> associations via the middle record.</p>\n<p dir=\"auto\">When we define a <code class=\"notranslate\">has_one :through</code> association, Rails creates a <code class=\"notranslate\">HasOneThroughAssociation</code> object within that record. Like all other Association objects, <code class=\"notranslate\">HasOneThroughAssociation</code> works independently and doesn't check the loading status of other associations. If it doesn't find the record within the object itself, it simply queries the database. And this triggers an additional query even when all associated records are preloaded.</p>\n<p dir=\"auto\">On top of that, making another query for an already loaded association results in having two identical records in memory. This can confuse developers about which record is the single source of truth. When one record is updated, the other remains unchanged. Here is an example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"member.membership.club.name = 'New Club'\n\nmember.membership.club.name # =&gt; 'New Club'\nmember.club.name            # =&gt; 'Old Club'\"><pre class=\"notranslate\"><span class=\"pl-en\">member</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">membership</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">club</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'New Club'</span>\n\n<span class=\"pl-en\">member</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">membership</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">club</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span> <span class=\"pl-c\"># =&gt; 'New Club'</span>\n<span class=\"pl-en\">member</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">club</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">name</span>            <span class=\"pl-c\"># =&gt; 'Old Club'</span></pre></div>\n<p dir=\"auto\">The changes prevent the additional query and ensure there is a single source of truth.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I tried to apply the same approach to the <code class=\"notranslate\">has_many :through</code> association, but it is not as straightforward as the <code class=\"notranslate\">has_one :through</code> association. All the final records are stored in each middle record's association object. So, we need to find a better way to implement this. I will look into this more and create another PR if I find a solution.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52060",
            "title": "[Fix #51817] Allow a preloaded association to be accessed without querying the database",
            "date_modified": "2024-06-08T13:02:16.000Z",
            "date_published": "2024-06-08T11:11:29.000Z",
            "author": {
                "name": "Jay0921",
                "url": "https://github.com/Jay0921"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52051.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2341068288\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52051\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52051/hovercard\" href=\"https://github.com/rails/rails/issues/52051\">#52051</a> (see there for a problem description and lengthy discussion).</p>",
            "url": "https://github.com/rails/rails/pull/52059",
            "title": "Explicitly load Active Record associations related errors",
            "date_modified": "2024-06-08T11:37:58.000Z",
            "date_published": "2024-06-08T09:57:04.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This is a backport of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2317689269\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51916\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51916/hovercard\" href=\"https://github.com/rails/rails/pull/51916\">#51916</a> to <code class=\"notranslate\">7-1-stable</code>.<br>\ncc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/eileencodes/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/eileencodes\">@eileencodes</a></p>",
            "url": "https://github.com/rails/rails/pull/52057",
            "title": "Fix running migrations on other databases when `database_tasks: false` on primary",
            "date_modified": "2024-06-08T09:04:52.000Z",
            "date_published": "2024-06-08T09:04:48.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14007?u=7d74620cf38d2057b13e9cbb7ee8c6ae35c1d019&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #52000.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2330195177\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52000\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/52000/hovercard\" href=\"https://github.com/rails/rails/issues/52000\">#52000</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52054",
            "title": "Document TestFixtures#fixture",
            "date_modified": "2024-06-08T08:03:43.000Z",
            "date_published": "2024-06-08T02:38:32.000Z",
            "author": {
                "name": "justinko",
                "url": "https://github.com/justinko"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/11965368?u=7c85497dee3f07446e7f22f874367fa42f0e0650&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>",
            "url": "https://github.com/rails/rails/pull/52053",
            "title": "Add 'CSRF' as an abbreviation to be find better on page search",
            "date_modified": "2024-06-08T04:28:09.000Z",
            "date_published": "2024-06-08T02:18:40.000Z",
            "author": {
                "name": "majidalaeinia",
                "url": "https://github.com/majidalaeinia"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/83998?u=8bb33de7a19d113d9f589689f6d15bb622b132bd&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">There are many cases when using double quotes is necessary to properly identify type &amp; column names in PostgreSQL. This PR aims to address one subset of cases relating to Rails's support of PG Enums in <code class=\"notranslate\">schema.rb</code>.</p>\n<p dir=\"auto\">(If this change is accepted, I have additional cases I would propose in follow-up PRs, but I am focusing on one change at a time.)</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Note that I'm using <code class=\"notranslate\">.</code> here as an example, but there are other reasons why quote identifiers can be necessary, including case sensitivity.</p>\n<h4 dir=\"auto\">Before:</h4>\n<p dir=\"auto\"><em>Without</em> this PR's changes, the following migration:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"create_enum '&quot;my.status&quot;', %w[complete in_progress]\ncreate_table :things do |t|\n  t.enum :status, enum_type: '&quot;my.status&quot;', default: &quot;in_progress&quot;, null: false\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">create_enum</span> <span class=\"pl-s\">'\"my.status\"'</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">%w[</span><span class=\"pl-s\">complete</span> <span class=\"pl-s\">in_progress</span><span class=\"pl-kos\">]</span>\n<span class=\"pl-en\">create_table</span> <span class=\"pl-pds\">:things</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">enum</span> <span class=\"pl-pds\">:status</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">enum_type</span>: <span class=\"pl-s\">'\"my.status\"'</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-s\">\"in_progress\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Produces the following in the <code class=\"notranslate\">schema.rb</code> file:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"create_enum &quot;my.status&quot;, [&quot;complete&quot;, &quot;in_progress&quot;]\n\ncreate_table &quot;things&quot;, force: :cascade do |t|\n  t.enum &quot;status&quot;, default: &quot;in_progress&quot;, null: false, enum_type: &quot;&quot;my.status&quot;&quot;\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">create_enum</span> <span class=\"pl-s\">\"my.status\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">[</span><span class=\"pl-s\">\"complete\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"in_progress\"</span><span class=\"pl-kos\">]</span>\n\n<span class=\"pl-en\">create_table</span> <span class=\"pl-s\">\"things\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-pds\">:cascade</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">enum</span> <span class=\"pl-s\">\"status\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-s\">\"in_progress\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">enum_type</span>: <span class=\"pl-s\">\"\"</span><span class=\"pl-en\">my</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">status</span><span class=\"pl-s\">\"\"</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">🐛 Both the <code class=\"notranslate\">create_enum</code> statement and the <code class=\"notranslate\">:enum_type</code> option do not function as expected. The former produces a <code class=\"notranslate\">PG::InvalidSchemaName</code> error (because it assumes <code class=\"notranslate\">my.</code> is a PG schema), and the latter is not even valid Ruby.</p>\n<h4 dir=\"auto\">After:</h4>\n<p dir=\"auto\"><em>With</em> this PR's changes, <code class=\"notranslate\">schema.rb</code> contains the following:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"create_enum &quot;\\&quot;my.status\\&quot;&quot;, [&quot;complete&quot;, &quot;in_progress&quot;]\n\ncreate_table &quot;things&quot;, force: :cascade do |t|\n  t.enum &quot;status&quot;, default: &quot;in_progress&quot;, null: false, enum_type: &quot;\\&quot;my.status\\&quot;&quot;\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">create_enum</span> <span class=\"pl-s\">\"<span class=\"pl-cce\">\\\"</span>my.status<span class=\"pl-cce\">\\\"</span>\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-kos\">[</span><span class=\"pl-s\">\"complete\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"in_progress\"</span><span class=\"pl-kos\">]</span>\n\n<span class=\"pl-en\">create_table</span> <span class=\"pl-s\">\"things\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">force</span>: <span class=\"pl-pds\">:cascade</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">t</span>|\n  <span class=\"pl-s1\">t</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">enum</span> <span class=\"pl-s\">\"status\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">default</span>: <span class=\"pl-s\">\"in_progress\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">null</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">enum_type</span>: <span class=\"pl-s\">\"<span class=\"pl-cce\">\\\"</span>my.status<span class=\"pl-cce\">\\\"</span>\"</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">This should resolve cases where quote identifiers are necessary, without impacting cases where they are not <em>strictly</em> necessary.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52049",
            "title": "[ActiveRecord] Support PG enums with names that require quote-ident",
            "date_modified": "2024-06-07T21:27:08.000Z",
            "date_published": "2024-06-07T19:03:28.000Z",
            "author": {
                "name": "smudge",
                "url": "https://github.com/smudge"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This commit aims to clarify the types of arguments mentioned by the Association Callback documentation. In some cases, <code class=\"notranslate\">firm</code> arguments implied the object was a <code class=\"notranslate\">Firm</code>, but <code class=\"notranslate\">record</code> arguments did not imply any particular class.</p>\n<p dir=\"auto\">Similarly, the <code class=\"notranslate\">has_many</code> method documentation did not mention any of the Association Callback arguments (i.e. <code class=\"notranslate\">before_add</code>, <code class=\"notranslate\">after_add</code>, <code class=\"notranslate\">before_remove</code>, <code class=\"notranslate\">after_remove</code>). This commit includes those options in the list and links to the more thorough documentation under the Association Callbacks heading.</p>",
            "url": "https://github.com/rails/rails/pull/52047",
            "title": "Improve Active Record Association Callbacks docs [ci skip]",
            "date_modified": "2024-06-08T11:23:52.000Z",
            "date_published": "2024-06-07T17:51:03.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Based off the IRB tests: <a href=\"https://github.com/ruby/irb/blob/master/test/irb/helper.rb#L112-L120\">https://github.com/ruby/irb/blob/master/test/irb/helper.rb#L112-L120</a></p>\n<p dir=\"auto\">For example if you add this to your <code class=\"notranslate\">~/.irbrc</code>:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"IRB.conf[:PROMPT_MODE] = :SIMPLE\"><pre class=\"notranslate\"><code class=\"notranslate\">IRB.conf[:PROMPT_MODE] = :SIMPLE\n</code></pre></div>\n<p dir=\"auto\">This will result in the following test failures:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"F\n\nFailure:\nFullStackConsoleTest#test_prompt_allows_changing_irb_name [test/application/console_test.rb:32]:\n&quot;foo(test)&gt;&quot; expected, but got:\n\n&gt;&gt; a = 1\na = 1\n=&gt; ...\n&gt;&gt; .\nExpected &quot;&gt;&gt; a = 1\\r\\r\\na = 1\\r\\n=&gt; ...\\r\\n&gt;&gt; &quot; to include &quot;foo(test)&gt;&quot;.\n\nbin/test test/application/console_test.rb:120\n\n.............F\n\nFailure:\nFullStackConsoleTest#test_test_console_prompt [test/application/console_test.rb:32]:\n&quot;app-template(test)&gt; &quot; expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected &quot;\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; &quot; to include &quot;app-template(test)&gt; &quot;.\n\nbin/test test/application/console_test.rb:152\n\n...F\n\nFailure:\nFullStackConsoleTest#test_prompt_is_properly_set [test/application/console_test.rb:32]:\n&quot;app-template(test)&gt;&quot; expected, but got:\n\n&gt;&gt; a = 1\na = 1\n=&gt; ...\n&gt;&gt; .\nExpected &quot;&gt;&gt; a = 1\\r\\r\\na = 1\\r\\n=&gt; ...\\r\\n&gt;&gt; &quot; to include &quot;app-template(test)&gt;&quot;.\n\nbin/test test/application/console_test.rb:113\n\nF\n\nFailure:\nFullStackConsoleTest#test_production_console_prompt [test/application/console_test.rb:32]:\n&quot;app-template(prod)&gt;&quot; expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected &quot;\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; &quot; to include &quot;app-template(prod)&gt;&quot;.\n\nbin/test test/application/console_test.rb:138\n\n...F\n\nFailure:\nFullStackConsoleTest#test_development_console_prompt [test/application/console_test.rb:32]:\n&quot;app-template(dev)&gt; &quot; expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected &quot;\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; &quot; to include &quot;app-template(dev)&gt; &quot;.\n\nbin/test test/application/console_test.rb:145\n\nFinished in 137.655994s, 0.1743 runs/s, 1.8815 assertions/s.\n24 runs, 259 assertions, 5 failures, 0 errors, 0 skips\"><pre class=\"notranslate\"><code class=\"notranslate\">F\n\nFailure:\nFullStackConsoleTest#test_prompt_allows_changing_irb_name [test/application/console_test.rb:32]:\n\"foo(test)&gt;\" expected, but got:\n\n&gt;&gt; a = 1\na = 1\n=&gt; ...\n&gt;&gt; .\nExpected \"&gt;&gt; a = 1\\r\\r\\na = 1\\r\\n=&gt; ...\\r\\n&gt;&gt; \" to include \"foo(test)&gt;\".\n\nbin/test test/application/console_test.rb:120\n\n.............F\n\nFailure:\nFullStackConsoleTest#test_test_console_prompt [test/application/console_test.rb:32]:\n\"app-template(test)&gt; \" expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected \"\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; \" to include \"app-template(test)&gt; \".\n\nbin/test test/application/console_test.rb:152\n\n...F\n\nFailure:\nFullStackConsoleTest#test_prompt_is_properly_set [test/application/console_test.rb:32]:\n\"app-template(test)&gt;\" expected, but got:\n\n&gt;&gt; a = 1\na = 1\n=&gt; ...\n&gt;&gt; .\nExpected \"&gt;&gt; a = 1\\r\\r\\na = 1\\r\\n=&gt; ...\\r\\n&gt;&gt; \" to include \"app-template(test)&gt;\".\n\nbin/test test/application/console_test.rb:113\n\nF\n\nFailure:\nFullStackConsoleTest#test_production_console_prompt [test/application/console_test.rb:32]:\n\"app-template(prod)&gt;\" expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected \"\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; \" to include \"app-template(prod)&gt;\".\n\nbin/test test/application/console_test.rb:138\n\n...F\n\nFailure:\nFullStackConsoleTest#test_development_console_prompt [test/application/console_test.rb:32]:\n\"app-template(dev)&gt; \" expected, but got:\n\n112123&gt;&gt; 123\n=&gt; 123\n&gt;&gt; .\nExpected \"\\r\\n112123&gt;&gt; 123\\r\\r\\n=&gt; 123\\r\\n&gt;&gt; \" to include \"app-template(dev)&gt; \".\n\nbin/test test/application/console_test.rb:145\n\nFinished in 137.655994s, 0.1743 runs/s, 1.8815 assertions/s.\n24 runs, 259 assertions, 5 failures, 0 errors, 0 skips\n</code></pre></div>",
            "url": "https://github.com/rails/rails/pull/52045",
            "title": "Avoid running console tests against users IRB config",
            "date_modified": "2024-06-08T10:48:48.000Z",
            "date_published": "2024-06-07T11:21:08.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This PR replaces <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2335914495\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52026\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52026/hovercard\" href=\"https://github.com/rails/rails/pull/52026\">#52026</a> by fixing the <code class=\"notranslate\">caller_locations</code>.</p>\n<p dir=\"auto\">Before:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"(called from include at /home/wojtek/.asdf/installs/ruby/3.3.2/lib/ruby/gems/3.3.0/gems/railties-7.2.0.beta2/lib/rails/console/methods.rb:6)\"><pre class=\"notranslate\"><code class=\"notranslate\">(called from include at /home/wojtek/.asdf/installs/ruby/3.3.2/lib/ruby/gems/3.3.0/gems/railties-7.2.0.beta2/lib/rails/console/methods.rb:6)\n</code></pre></div>\n<p dir=\"auto\">After:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"(called from block in &lt;class:Engine&gt; at /home/zzak/.rbenv/versions/3.4.0/lib/ruby/gems/3.4.0+0/bundler/gems/mission_control-jobs-7295d75ed735/lib/mission_control/jobs/engine.rb:73)\"><pre class=\"notranslate\"><code class=\"notranslate\">(called from block in &lt;class:Engine&gt; at /home/zzak/.rbenv/versions/3.4.0/lib/ruby/gems/3.4.0+0/bundler/gems/mission_control-jobs-7295d75ed735/lib/mission_control/jobs/engine.rb:73)\n</code></pre></div>",
            "url": "https://github.com/rails/rails/pull/52040",
            "title": "Rails::ConsoleMethods deprecation warning should point to the source",
            "date_modified": "2024-06-08T10:55:12.000Z",
            "date_published": "2024-06-07T03:00:10.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/61323346?u=b7965607cca713974872395cca0b19f10730e8a2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">In our team we often discuss if it's better to pass a string or a proc to <code class=\"notranslate\">assert_difference</code>. In my opinion it's better to pass a proc because linters and IDEs can analyze the ruby code in the proc. However one disadvantage is that the error message is less clear when using a proc, because the message just prints the inspect-output of the <code class=\"notranslate\">Proc</code> object.</p>\n<p dir=\"auto\">To fix this, I propose this PR which prints the source of the proc instead.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the error message of <code class=\"notranslate\">assert_difference</code>, <code class=\"notranslate\">assert_no_difference</code>, <code class=\"notranslate\">assert_changes</code> and <code class=\"notranslate\">assert_no_changes</code> when using MRI and when passing a proc to those assertions. It leverages the <em>experimental</em> <code class=\"notranslate\">RubyVM::AbstractSyntaxTree</code> api to print the source code of the proc which makes it easier to spot why the test failed.</p>\n<p dir=\"auto\">For example consider the following test:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"test &quot;see proc output&quot; do\n  assert_difference -&gt; { 1 } do\n  end\nend\"><pre class=\"notranslate\"><span class=\"pl-en\">test</span> <span class=\"pl-s\">\"see proc output\"</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-en\">assert_difference</span> <span class=\"pl-c1\">-&gt;</span> <span class=\"pl-kos\">{</span> <span class=\"pl-c1\">1</span> <span class=\"pl-kos\">}</span> <span class=\"pl-k\">do</span>\n  <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">Previous output:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"#&lt;Proc:0x000074357846eae8 /home/richard/my-test-app/test/models/test.rb:21 (lambda)&gt; didn't change by 1, but by 0.\nExpected: 2\n  Actual: 1\n\"><pre class=\"notranslate\"><code class=\"notranslate\">#&lt;Proc:0x000074357846eae8 /home/richard/my-test-app/test/models/test.rb:21 (lambda)&gt; didn't change by 1, but by 0.\nExpected: 2\n  Actual: 1\n\n</code></pre></div>\n<p dir=\"auto\">Output with this change:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"&quot;-&gt; { 1 }&quot; didn't change by 1, but by 0.\nExpected: 2\n  Actual: 1\"><pre class=\"notranslate\"><code class=\"notranslate\">\"-&gt; { 1 }\" didn't change by 1, but by 0.\nExpected: 2\n  Actual: 1\n</code></pre></div>\n<p dir=\"auto\">Note that this only works in MRI because other ruby implementations do not implement the <code class=\"notranslate\">RubyVM::AbstractSyntaxTree</code> api.</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">I'm not sure if Rails wants to \"depend\" on an experimental api like <code class=\"notranslate\">RubyVM::AbstractSyntaxTree</code> because it might not be stable and change in the future. I think this change brings value to Rails but I understand if there is a policy about not using experimental ruby apis. In this case we can close this PR.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52036",
            "title": "Improve error message when passing a proc to `assert_difference` or `assert_changes`",
            "date_modified": "2024-06-08T07:30:37.000Z",
            "date_published": "2024-06-06T20:47:05.000Z",
            "author": {
                "name": "richardboehme",
                "url": "https://github.com/richardboehme"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/131752?u=32ddf1119b1d189c9bd241a721b36ea01c29f61e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">As of Ruby 2.6, <a href=\"https://bugs.ruby-lang.org/issues/14850\" rel=\"nofollow\">::Time supports rich timezone objects</a> and expects them to follow a similar API to tzinfo. Mostly we already do this with ActiveSupport::TimeZone, delegating to the underlying tzinfo object so this mostly already works.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"&gt;&gt; Time.new(2024, 9, 26, 10, in: ActiveSupport::TimeZone[&quot;America/Toronto&quot;])\n=&gt; 2024-09-26 10:00:00 -0400\"><pre class=\"notranslate\"><code class=\"notranslate\">&gt;&gt; Time.new(2024, 9, 26, 10, in: ActiveSupport::TimeZone[\"America/Toronto\"])\n=&gt; 2024-09-26 10:00:00 -0400\n</code></pre></div>\n<p dir=\"auto\">However we were missing <a href=\"https://ruby-doc.org/3.3.2/Time.html#class-Time-label-Timezone+Objects\" rel=\"nofollow\">two optional methods Ruby would like to have used</a>: <code class=\"notranslate\">abbr</code> and <code class=\"notranslate\">dist?</code>.</p>\n<p dir=\"auto\">Calling strftime with \"%Z\" will try the following on the timezone:</p>\n<ul dir=\"auto\">\n<li>zone.abbr(time)</li>\n<li>zone.strftime(\"%Z\", time)</li>\n<li>zone.name</li>\n</ul>\n<p dir=\"auto\">Because we previously only implemented name, a <code class=\"notranslate\">::Time</code> created with an <code class=\"notranslate\">ActiveSupport::TimeZone</code> would \"abbreviate\" awkwardly to the full tz identifier (like \"12:34:00 America/Vancouver\" instead of \"12:34:00 PDT\"). This PR implements abbr to make these Times format the same way as <code class=\"notranslate\">TimeWithZone</code>.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/jasonkim/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jasonkim\">@jasonkim</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a></p>",
            "url": "https://github.com/rails/rails/pull/52034",
            "title": "Improve support for using ActiveSupport::TimeZone as a ::Time object's timezone",
            "date_modified": "2024-06-08T03:28:01.000Z",
            "date_published": "2024-06-06T17:47:23.000Z",
            "author": {
                "name": "jhawthorn",
                "url": "https://github.com/jhawthorn"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1034?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">I realised that <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2329736976\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51994\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51994/hovercard\" href=\"https://github.com/rails/rails/pull/51994\">#51994</a> was producing a deprecation warning while running the Active Record tests (I actually thought we'd made that fail CI, but I must be mis-remembering).</p>\n<p dir=\"auto\">While we could just explicitly opt in to the new setting within our test suite(s), I wanted to see if we could save similar callers [i.e. those that aren't particularly concerned with time zones] from having to know about / act upon the change at all.</p>\n<p dir=\"auto\">Mostly that comes down to the fact that for <code class=\"notranslate\">Time#to_time</code>, if the value is already a local time, there's no difference in behaviour, and so no need to warn.</p>\n<p dir=\"auto\">Correspondingly, I've avoided calling <code class=\"notranslate\">to_time</code> in the handful of places we were using it internally: it's easy to do, and we know we don't care about the zone, so again won't be affected by the change.</p>\n<p dir=\"auto\">I'm hoping this will mean that people who do see the deprecation are likely to actually be affected [or at least be genuinely at risk of being affected] by the change, thus justifying the disruption.</p>\n<p dir=\"auto\">It's worth noting that I currently have <em>not</em> changed <code class=\"notranslate\">ActiveSupport::TimeWithZone#to_time</code>: even when its zone matches local (including the most common case where both are UTC), we will still warn. That felt like the right choice at the time, though I'm now less sure... <code class=\"notranslate\">3.days.ago.to_time</code> seems like a pretty reasonable and ordinary thing to be doing, and (in the absence of any zone-related configuration) I believe it should be perfectly safe. 🤔</p>",
            "url": "https://github.com/rails/rails/pull/52031",
            "title": "Don't emit to_time deprecations in known-safe contexts",
            "date_modified": "2024-06-06T09:16:31.000Z",
            "date_published": "2024-06-06T09:16:27.000Z",
            "author": {
                "name": "matthewd",
                "url": "https://github.com/matthewd"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1218868?u=2205d40bade58ddc23b3f2ee7ee42774376cfd8f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Sometimes in Rails application we want to forward a request elsewhere along with its original HTTP headers. There is no elegant way to do this currently, because all the header names are converted to env names in <code class=\"notranslate\">Http::Headers</code>.</p>\n<p dir=\"auto\">Here is a sample solution for the problem above prior to this change:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"request.headers.env\n  .select { |key, _value| key.start_with?(&quot;HTTP_&quot;) }\n  .transform_keys { |key| key.sub(/^HTTP_/, &quot;&quot;).split(&quot;_&quot;).map(&amp;:capitalize).join(&quot;-&quot;) }\"><pre class=\"notranslate\"><span class=\"pl-en\">request</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">headers</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">env</span>\n  <span class=\"pl-kos\">.</span><span class=\"pl-en\">select</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">key</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">_value</span>| <span class=\"pl-s1\">key</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">start_with?</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"HTTP_\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span>\n  <span class=\"pl-kos\">.</span><span class=\"pl-en\">transform_keys</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">key</span>| <span class=\"pl-s1\">key</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">sub</span><span class=\"pl-kos\">(</span><span class=\"pl-sr\">/^HTTP_/</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">split</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"_\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">map</span><span class=\"pl-kos\">(</span>&amp;<span class=\"pl-pds\">:capitalize</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">join</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"-\"</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">}</span></pre></div>\n<p dir=\"auto\">This method returns only HTTP headers. This is useful when you receive a request and want to forward it elsewhere, along with the original headers.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request implemented a method (<code class=\"notranslate\">Http::Headers#http</code>) that returns only the HTTP headers, converted back into their original format. This implementation hides the complexity further down, so the developers using the framework don't have to do it themselves.</p>\n<p dir=\"auto\">Sample solution with this implemented:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"request.headers.http\"><pre class=\"notranslate\"><span class=\"pl-en\">request</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">headers</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">http</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/52027",
            "title": "Implement Http::Headers#http",
            "date_modified": "2024-06-08T17:49:12.000Z",
            "date_published": "2024-06-05T15:08:16.000Z",
            "author": {
                "name": "matteeyah",
                "url": "https://github.com/matteeyah"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1034?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Alternate take on <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2332727777\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/52016\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/52016/hovercard\" href=\"https://github.com/rails/rails/pull/52016\">#52016</a></p>\n<p dir=\"auto\">Instead of a proxy object representing the always-instantaneous transaction state, here I'm going the other way, and giving the user an object that will always reference the <em>current</em> state of the then-current transaction at the time of creation.</p>\n<p dir=\"auto\">That means it will behave reasonably even if they do something thoroughly unreasonable, like add a callback after the transaction has already committed / rolled back.</p>\n<p dir=\"auto\">Definitely needs some tidying to be mergeable: at minimum I've lost the callback docs by moving them into a nodoc class -- and I haven't added tests that show the ways this differs from current HEAD behaviour.</p>",
            "url": "https://github.com/rails/rails/pull/52017",
            "title": "Allow users to add transaction callbacks after commit etc",
            "date_modified": "2024-06-04T19:21:41.000Z",
            "date_published": "2024-06-04T07:58:28.000Z",
            "author": {
                "name": "matthewd",
                "url": "https://github.com/matthewd"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/14981592?u=11406fb0121b15a93b3305388377a57b4d9c96f9&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Followup to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2326434456\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51959\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51959/hovercard\" href=\"https://github.com/rails/rails/pull/51959\">#51959</a>. The test I added in that PR can be improved by actually checking that the runner does what the expected behaviour is.</p>\n<p dir=\"auto\">Since support for minitest/spec should not be implied (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2326434456\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51959\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51959/hovercard?comment_id=1621385796&amp;comment_type=review_comment\" href=\"https://github.com/rails/rails/pull/51959#discussion_r1621385796\">#51959 (comment)</a>) I also slightly modified the test above</p>",
            "url": "https://github.com/rails/rails/pull/52002",
            "title": "Add a proper test for running tests by line with custom method",
            "date_modified": "2024-06-03T10:28:09.000Z",
            "date_published": "2024-06-03T10:28:04.000Z",
            "author": {
                "name": "Earlopain",
                "url": "https://github.com/Earlopain"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2853450?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #51995.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2329813988\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51995\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51995/hovercard\" href=\"https://github.com/rails/rails/issues/51995\">#51995</a></p>\n<p dir=\"auto\">Calling <code class=\"notranslate\">exists?</code> does not work with composite keys (<a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2179081656\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51295\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/51295/hovercard\" href=\"https://github.com/rails/rails/issues/51295\">#51295</a>) which is used internally for <code class=\"notranslate\">include?</code> here it zips the primary key values into a hash with the primary key keys, a format that is supported by <code class=\"notranslate\">exists?</code> so it does not raise and returns the expected result.</p>",
            "url": "https://github.com/rails/rails/pull/51996",
            "title": "Fix `include?` on composite key relations",
            "date_modified": "2024-06-03T08:15:16.000Z",
            "date_published": "2024-06-02T18:54:30.000Z",
            "author": {
                "name": "jackozi",
                "url": "https://github.com/jackozi"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/39144575?u=27bc8b51723fcd8f9a2de237a4082ecb370f0a59&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Following up <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/317465a4a8f8c0ebaf9534921350c4540584c03c/hovercard\" href=\"https://github.com/rails/rails/commit/317465a4a8f8c0ebaf9534921350c4540584c03c\"><tt>317465a</tt></a>.</p>",
            "url": "https://github.com/rails/rails/pull/51993",
            "title": "Fix test title mismatch",
            "date_modified": "2024-06-02T01:59:18.000Z",
            "date_published": "2024-06-02T01:59:14.000Z",
            "author": {
                "name": "wonda-tea-coffee",
                "url": "https://github.com/wonda-tea-coffee"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This is to mitigate errors like:<br>\n<a href=\"https://buildkite.com/rails/rails/builds/107403#018f9917-fd63-4701-9620-f9caf2caaf2d/1163-1195\" rel=\"nofollow\">https://buildkite.com/rails/rails/builds/107403#018f9917-fd63-4701-9620-f9caf2caaf2d/1163-1195</a></p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ERROR [karma-server]:\nError: [init({...}})] The environment you requested was unavailable.\"><pre class=\"notranslate\"><code class=\"notranslate\">ERROR [karma-server]:\nError: [init({...}})] The environment you requested was unavailable.\n</code></pre></div>\n<p dir=\"auto\">We can make buildkite-config retry this status and soft-fail on exit 3.</p>\n<p dir=\"auto\">For example,<br>\n<a href=\"https://buildkite.com/changelog/56-command-steps-can-now-be-made-to-soft-fail\" rel=\"nofollow\">https://buildkite.com/changelog/56-command-steps-can-now-be-made-to-soft-fail</a></p>\n<p dir=\"auto\">I <em>think</em> we can combine this with a retry policy on the exit status:<br>\n<a href=\"https://buildkite.com/docs/pipelines/command-step#retry-attributes-automatic-retry-attributes\" rel=\"nofollow\">https://buildkite.com/docs/pipelines/command-step#retry-attributes-automatic-retry-attributes</a></p>\n<p dir=\"auto\">/cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a></p>",
            "url": "https://github.com/rails/rails/pull/51990",
            "title": "Exit status 3 when Action Cable integration tests fail due to Saucelabs error",
            "date_modified": "2024-06-01T10:45:18.000Z",
            "date_published": "2024-06-01T10:44:54.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">I saw a few times <code class=\"notranslate\">.exists?</code>(instead of <code class=\"notranslate\">.any?</code>) being used on loaded relations.<br>\nSeems like there is no reason why we can't improve that method?</p>\n<p dir=\"auto\">This is a reworked <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2327575420\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/51966\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/51966/hovercard\" href=\"https://github.com/rails/rails/pull/51966\">#51966</a>.</p>\n<p dir=\"auto\">cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/byroot/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/byroot\">@byroot</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthewd/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthewd\">@matthewd</a></p>",
            "url": "https://github.com/rails/rails/pull/51987",
            "title": "Optimize `ActiveRecord::Relation#exists?` with no conditions for loaded relations",
            "date_modified": "2024-06-01T09:24:33.000Z",
            "date_published": "2024-06-01T09:24:29.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        }
    ]
}