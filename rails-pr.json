{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1709692?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">The current implementation does not respect the layout parameter in case of mixed collections.</p>\n<p dir=\"auto\">This commit fixes the issue by ensuring that the code path for mixed collections render the partial inside the provided layout.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #49590.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1938859635\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49590\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/49590/hovercard\" href=\"https://github.com/rails/rails/issues/49590\">#49590</a></p>\n<p dir=\"auto\">The current implementation of <code class=\"notranslate\">render_collection_derive_partial</code> ignores the layout parameter in case of mixed collections.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes<code class=\"notranslate\">render_collection_derive_partial</code> to call a new <code class=\"notranslate\">render_collection_with_no_partial</code> method which renders the partial inside the specified layout.</p>\n<h3 dir=\"auto\">Additional information</h3>\n",
            "url": "https://github.com/rails/rails/pull/50348",
            "title": "Render Partial Collection with a layout parameter",
            "date_modified": "2023-12-13T15:14:30.000Z",
            "date_published": "2023-12-13T14:08:48.000Z",
            "author": {
                "name": "cmaruz",
                "url": "https://github.com/cmaruz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/13816206?u=b3f1167e3181e3e4b093f443511446e576d13d9e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50346.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2039338756\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50346\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50346/hovercard\" href=\"https://github.com/rails/rails/issues/50346\">#50346</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR updates the method <a href=\"https://github.com/rails/rails/blob/main/activerecord/lib/active_record/reflection.rb#L785\">derive_fk_query_constraints</a> to return correct value when association id is part of query constraints.</p>\n<p dir=\"auto\">Context</p>\n<ul dir=\"auto\">\n<li>Model having Query constraints as <code class=\"notranslate\">[:associated_model_id, :id]</code></li>\n<li>Model having belong to association with <code class=\"notranslate\">associated_model</code></li>\n</ul>\n<p dir=\"auto\">Current Behaviour</p>\n<ul dir=\"auto\">\n<li>Derived foreign key value is <code class=\"notranslate\">[associated_model_id, associated_model_id]</code></li>\n</ul>\n<p dir=\"auto\">Updated Behaviour</p>\n<ul dir=\"auto\">\n<li>Derived foreign key value should be <code class=\"notranslate\">associated_model_id</code></li>\n</ul>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">Please refer to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2039338756\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50346\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50346/hovercard\" href=\"https://github.com/rails/rails/issues/50346\">#50346</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50347",
            "title": "Fix derived foreign key to return correctly when association id is part of query constraints",
            "date_modified": "2023-12-13T10:00:07.000Z",
            "date_published": "2023-12-13T10:00:03.000Z",
            "author": {
                "name": "iamradioactive",
                "url": "https://github.com/iamradioactive"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/42195321?u=810b1a1449a94590f2ff9e2f189d4c37f90691b3&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">In the rails contributors <a href=\"https://discord.com/channels/849034466856665118/974004968015155230/1129535848753406092\" rel=\"nofollow\">discord</a>, there was a discussion in the past about a Rails behavior that is somewhat unknown to Rails newbies (I am included in that list) where it showed that Rails can identify which relationship you define according to the scope of the model.</p>\n<p dir=\"auto\">I'm opening this PR for opinions on how this can be documented, as it seems to be something very interesting about Rails and which is only noticed if you have the correct intuition that Rails can do this.</p>\n<p dir=\"auto\"></p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/c9cdd800d30ec38f079b3df0772ab47f4ba4b11f/activerecord/lib/active_record/inheritance.rb#L241-L244\">rails/activerecord/lib/active_record/inheritance.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 241 to 244\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha Link--inTextBlock\" href=\"/rails/rails/commit/c9cdd800d30ec38f079b3df0772ab47f4ba4b11f\">c9cdd80</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L241\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"241\"></td>\n          <td id=\"LC241\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\"># Build a list of candidates to search for</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L242\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"242\"></td>\n          <td id=\"LC242\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">candidates</span> <span class=\"pl-c1\">=</span> <span class=\"pl-kos\">[</span><span class=\"pl-kos\">]</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L243\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"243\"></td>\n          <td id=\"LC243\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-en\">name</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">scan</span><span class=\"pl-kos\">(</span><span class=\"pl-sr\">/::|$/</span><span class=\"pl-kos\">)</span> <span class=\"pl-kos\">{</span> <span class=\"pl-s1\">candidates</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">unshift</span> <span class=\"pl-s\">\"<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span>$`<span class=\"pl-kos\">}</span></span>::<span class=\"pl-s1\"><span class=\"pl-kos\">#{</span><span class=\"pl-s1\">type_name</span><span class=\"pl-kos\">}</span></span>\"</span> <span class=\"pl-kos\">}</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L244\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"244\"></td>\n          <td id=\"LC244\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-s1\">candidates</span> &lt;&lt; <span class=\"pl-s1\">type_name</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50342",
            "title": "doc(active_record): adding more examples about scope control",
            "date_modified": "2023-12-13T01:44:27.000Z",
            "date_published": "2023-12-13T01:44:22.000Z",
            "author": {
                "name": "JohnAnon9771",
                "url": "https://github.com/JohnAnon9771"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">By the time an <code class=\"notranslate\">ActiveJob::Base#perform</code> method is invoked, Active Record instances are already deserialized and reified through GlobalID integration.</p>\n<p dir=\"auto\">Unfortunately, since end-users don't have a means of configuring that loading process, it's common for Active Job executions to raise be at conflict with the application's Active Record strict loading configuration. That can result in errors like:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"ActiveRecord::StrictLoadingViolationError: `Article` is marked for strict_loading. The Tag association named `:tags` cannot be lazily loaded.\"><pre class=\"notranslate\"><code class=\"notranslate\">ActiveRecord::StrictLoadingViolationError: `Article` is marked for strict_loading. The Tag association named `:tags` cannot be lazily loaded.\n</code></pre></div>\n<p dir=\"auto\">Fortunately, calls to <code class=\"notranslate\">GlobalID::Locator.locate</code> support an optional <code class=\"notranslate\">includes:</code> keyword argument that's incorporated into the Active Record query to fetch the record.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit introduces a rudimentary interface to provide <code class=\"notranslate\">ActiveJob::Base</code> descendants with a means of eager-loading associations to comply with strict loading.</p>\n<p dir=\"auto\">While it certainly isn't the public interface to ship, this change supports something in the realm of the following example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Article &lt; ApplicationRecord\n  self.strict_loading_by_default = true\n\n  has_and_belongs_to_many :tags\nend\n\nclass Tag &lt; ApplicationRecord\n  has_and_belongs_to_many :articles\nend\n\nclass PublishJob &lt; ApplicationJob\n  def perform(article)\n    article.tags.each { |tag| ... }\n  end\n\n  private\n    def options_for_global_id(model_class)\n      if model_class == Article\n        { includes: [:tags] }\n      else\n        super\n      end\n    end\nend\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Article</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">strict_loading_by_default</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">true</span>\n\n  <span class=\"pl-en\">has_and_belongs_to_many</span> <span class=\"pl-pds\">:tags</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">Tag</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n  <span class=\"pl-en\">has_and_belongs_to_many</span> <span class=\"pl-pds\">:articles</span>\n<span class=\"pl-k\">end</span>\n\n<span class=\"pl-k\">class</span> <span class=\"pl-v\">PublishJob</span> &lt; <span class=\"pl-v\">ApplicationJob</span>\n  <span class=\"pl-k\">def</span> <span class=\"pl-en\">perform</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">article</span><span class=\"pl-kos\">)</span>\n    <span class=\"pl-s1\">article</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">tags</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">each</span> <span class=\"pl-kos\">{</span> |<span class=\"pl-s1\">tag</span>| ... <span class=\"pl-kos\">}</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-k\">private</span>\n    <span class=\"pl-k\">def</span> <span class=\"pl-en\">options_for_global_id</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">model_class</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-k\">if</span> <span class=\"pl-s1\">model_class</span> == <span class=\"pl-v\">Article</span>\n        <span class=\"pl-kos\">{</span> <span class=\"pl-pds\">includes</span>: <span class=\"pl-kos\">[</span><span class=\"pl-pds\">:tags</span><span class=\"pl-kos\">]</span> <span class=\"pl-kos\">}</span>\n      <span class=\"pl-k\">else</span>\n        <span class=\"pl-smi\">super</span>\n      <span class=\"pl-k\">end</span>\n    <span class=\"pl-k\">end</span>\n<span class=\"pl-k\">end</span></pre></div>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">The interface proposed in the current diff is awkward and not particularly well-named. It aims to demonstrate the necessary layers of abstraction that need to be breached in order for a Job to specify how to load records of a given model class. I'm hoping to gather feedback and guidance to shape the developer-facing public interface to configure how <code class=\"notranslate\">GlobalID::Locator.locate</code> is invoked. <strong>All feedback is welcomed</strong>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50341",
            "title": "Help Active Job comply with Strict Loading",
            "date_modified": "2023-12-13T15:49:45.000Z",
            "date_published": "2023-12-13T00:02:07.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Support for the new <code class=\"notranslate\">action_dispatch.show_exceptions</code> values was introduced in <a href=\"https://github.com/rails/rails/commit/e28f147329330e7ae55606e62ecc3de328431f0b\">e28f147</a>. Alongside the change to introduce new values (like <code class=\"notranslate\">:all</code>, <code class=\"notranslate\">:rescuable</code>, <code class=\"notranslate\">:none</code>), the default behavior was changed.</p>\n<p dir=\"auto\">Prior to that commit, the default value was <code class=\"notranslate\">false</code> (introduced in <a href=\"https://github.com/rails/rails/commit/d898a4ba425a201827f07a5bb11c8c6bf85159b8\">d898a4b</a>) (which corresponds to the new <code class=\"notranslate\">:none</code> setting).</p>\n<p dir=\"auto\">The new default behavior has some unintended negative side effects that impact the feedback loop at the core of test-driven development. When errors are rescued and transformed into HTML pages, the context of the cause of failure is obscured by additional layers of information.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">First, this commit adds more prominent entries to the Upgrading and Configuring guides, as well as the 7.1 Release Notes.</p>\n<p dir=\"auto\">Next, this commit adds more documentation around the change in default behavior. To start, it mentions the new value in the sections for the affected test types: Controller, Integration, and System.</p>\n<p dir=\"auto\">Finally, changes the <code class=\"notranslate\">config/environments/test.rb</code> template file to emphasize what it'd take to restore the behavior prior to the change in default.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50339",
            "title": "Document developer-facing change to `config.action_dispatch.show_exceptions` default",
            "date_modified": "2023-12-13T00:10:54.000Z",
            "date_published": "2023-12-12T20:13:56.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/8122246?u=2dbe607a66a7616297b78647eeb4e0dbff657c3a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">ℹ️ To backport to 7-1 stable please 🙇</p>\n<hr>\n\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">If an application has configured a Broadcast Logger, setting the <code class=\"notranslate\">config.log_level</code> to any value has no effect:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# config/application.rb\n\nconfig.logger = ActiveSupport::BroadcastLogger.new(Logger.new(STDOUT))\nconfig.log_level = :warn\n\nputs Rails.logger.broadcasts.map(&amp;:level) #=&gt; [Logger::DEBUG]\"><pre class=\"notranslate\"><span class=\"pl-c\"># config/application.rb</span>\n\n<span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-v\">BroadcastLogger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDOUT</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log_level</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:warn</span>\n\n<span class=\"pl-en\">puts</span> <span class=\"pl-v\">Rails</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">broadcasts</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">map</span><span class=\"pl-kos\">(</span>&amp;<span class=\"pl-pds\">:level</span><span class=\"pl-kos\">)</span> <span class=\"pl-c\">#=&gt; [Logger::DEBUG]</span></pre></div>\n<p dir=\"auto\">This is a side effect of <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1941845267\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/49621\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/49621/hovercard\" href=\"https://github.com/rails/rails/pull/49621\">#49621</a> which tried to fix the <code class=\"notranslate\">log_level</code> default value overriding the whole broadcasts.</p>\n<h3 dir=\"auto\">Detail</h3>\n<h5 dir=\"auto\">Context</h5>\n<p dir=\"auto\">The <code class=\"notranslate\">log_level</code> default's value shouldn't apply to a Broadcast Logger, as otherwise it overrides whatever the application previously configured. While this behaviour is the same with a vanilla logger, at least we can workaround it:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"###############################\n# When using a vanilla logger #\n###############################\n\nconfig.logger = Logger.new(STDOUT, level: LOGGER::WARN)\n# Once the app boots, the level is overriden to DEBUG. We need to add the following line.\nconfig.log_level = :warn\n\n#################################\n# When using a broadcast logger #\n#################################\n\nstdout = Logger.new(STDOUT, level: Logger::INFO)\nstderr = Logger.new(STDERR, level: Logger::ERROR)\nconfig.logger = ActiveSupport::BroadcastLogger(stdout, stderr)\n\n# Once the app boots the whole broadcast level is overriden to DEBUG.\n# There is no way to workaround this as you can't fine grain the level of each\n# loggers with `config.log_level=`.\"><pre class=\"notranslate\"><span class=\"pl-c\">###############################</span>\n<span class=\"pl-c\"># When using a vanilla logger #</span>\n<span class=\"pl-c\">###############################</span>\n\n<span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDOUT</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">level</span>: <span class=\"pl-c1\">LOGGER</span>::<span class=\"pl-c1\">WARN</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\"># Once the app boots, the level is overriden to DEBUG. We need to add the following line.</span>\n<span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">log_level</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:warn</span>\n\n<span class=\"pl-c\">#################################</span>\n<span class=\"pl-c\"># When using a broadcast logger #</span>\n<span class=\"pl-c\">#################################</span>\n\n<span class=\"pl-s1\">stdout</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDOUT</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">level</span>: <span class=\"pl-v\">Logger</span>::<span class=\"pl-c1\">INFO</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-s1\">stderr</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Logger</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">(</span><span class=\"pl-c1\">STDERR</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">level</span>: <span class=\"pl-v\">Logger</span>::<span class=\"pl-c1\">ERROR</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">logger</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">ActiveSupport</span>::<span class=\"pl-en\">BroadcastLogger</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">stdout</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">stderr</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-c\"># Once the app boots the whole broadcast level is overriden to DEBUG.</span>\n<span class=\"pl-c\"># There is no way to workaround this as you can't fine grain the level of each</span>\n<span class=\"pl-c\"># loggers with `config.log_level=`.</span></pre></div>\n<h5 dir=\"auto\">Solution</h5>\n<p dir=\"auto\">This PR ignores the default <code class=\"notranslate\">log_level</code> value when using a Broadcast Logger, but ensure it gets used if an application manually sets it.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50324.\">Fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2035006965\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50324\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50324/hovercard\" href=\"https://github.com/rails/rails/issues/50324\">#50324</a><br>\ncc/ <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/ghiculescu/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/ghiculescu\">@ghiculescu</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50337",
            "title": "Fix `config.log_level` being ignored when using a Broadcast Logger",
            "date_modified": "2023-12-12T21:05:58.000Z",
            "date_published": "2023-12-12T14:59:02.000Z",
            "author": {
                "name": "Edouard-chin",
                "url": "https://github.com/Edouard-chin"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">In my gem, I extended <code class=\"notranslate\">SchemaDumper</code> with a small custom logic and when wrote tests for it (<a class=\"commit-link\" href=\"https://github.com/fatkodima/online_migrations/commit/39d2f1b0f19e95597e05e8d1ae4f0b1d71d4a06b#diff-cb07f4a9f75db580d9b7e7bb54c641cb2cab696ef90a9afd64f128fb002a79a7R42-R46\">fatkodima/online_migrations@<tt>39d2f1b</tt>#diff-cb07f4a9f75db580d9b7e7bb54c641cb2cab696ef90a9afd64f128fb002a79a7R42-R46</a>) was wondering why <code class=\"notranslate\">capture_io</code> is not working. Turned out, that is because <code class=\"notranslate\">.dump</code> accepts <code class=\"notranslate\">STDOUT</code> (instead of <code class=\"notranslate\">$stdout</code>) as a default output stream.</p>\n<p dir=\"auto\">I changed that method's signature to make it easier to test and also changed 2 test helpers to use that.</p>",
            "url": "https://github.com/rails/rails/pull/50336",
            "title": "Change `SchemaDumper.dump` default stream to `$stdout`",
            "date_modified": "2023-12-12T14:44:53.000Z",
            "date_published": "2023-12-12T14:44:49.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/13130705?u=c91ddc42cdbe8620020f2935052801734da051cf&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Follow-up to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2028264291\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50281\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50281/hovercard\" href=\"https://github.com/rails/rails/pull/50281\">#50281</a></p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I think <code class=\"notranslate\">assert_queries</code> and <code class=\"notranslate\">assert_no_queries</code> are so useful that I want to read the documentation for the assertions. This pull request adds the doc for them and updated the test case named <code class=\"notranslate\">test_assert_queries</code> to verify <code class=\"notranslate\">:matcher</code> works as expected.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I also changed <code class=\"notranslate\">assert_queries</code> to make sure the subscriber of <code class=\"notranslate\">\"sql.active_record\"</code> is unsubscribed without affecting other test cases. Without this change, some test cases fail because of execution of <code class=\"notranslate\">String#match</code>, which may cause <code class=\"notranslate\">ArgumentError: invalid byte sequence in UTF-8</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\n<ul dir=\"auto\">\n<li>This does not include behavior changes</li>\n</ul>\n</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50334",
            "title": "Add doc for `assert_queries` and `assert_no_queries`",
            "date_modified": "2023-12-12T09:15:16.000Z",
            "date_published": "2023-12-12T04:26:40.000Z",
            "author": {
                "name": "yykamei",
                "url": "https://github.com/yykamei"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The new, symbol, <code class=\"notranslate\">#enum</code> API recently <a href=\"https://github.com/rails/rails/commit/7c65a4b83b583f4f27f3f20a9fb078b35823d2fe\">gained</a> support for a new <code class=\"notranslate\">validate</code> option which replaces <code class=\"notranslate\">ArgumentErrors</code> with Active Model validation errors.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit adds <code class=\"notranslate\">_validate</code> to the old, keyword argument, <code class=\"notranslate\">#enum</code> API to keep the two APIs in sync.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50333",
            "title": "Support validation for old Enum API",
            "date_modified": "2023-12-12T04:25:01.000Z",
            "date_published": "2023-12-12T04:24:57.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">While <a href=\"https://stimulus.hotwired.dev\" rel=\"nofollow\">Stimulus</a> and <a href=\"https://turbo.hotwired.dev\" rel=\"nofollow\">Turbo</a> rely on values encoded into <code class=\"notranslate\">data</code>-prefixed HTML attributes present in the document, other frameworks like <a href=\"https://alpinejs.dev\" rel=\"nofollow\">Alpine.js</a> and <a href=\"https://htmx.org\" rel=\"nofollow\">htmx</a> rely on different prefixes (<code class=\"notranslate\">x</code> and <code class=\"notranslate\">hx</code>, respectively).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">To add support for those frameworks and others like them, this commit introduces the <code class=\"notranslate\">config.action_view.nest_html_attributes_within</code> value to expose a value for consumer applications to add to.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50320",
            "title": "Add `config.action_view.nest_html_attributes_within`",
            "date_modified": "2023-12-10T17:23:50.000Z",
            "date_published": "2023-12-10T17:17:03.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/277819?u=f88292414deeecfd67fee18ae9d7297bcc001138&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">As a contributor, changing a single line to test the desired version does not warrant a separate file for each type of report.</p>\n<p dir=\"auto\">The only argument I can see for keeping the gem versions is that users are likely reporting a bug for a specific version of Rails, typically during an upgrade. As few people are probably testing their applications against Rails main branch.</p>\n<p dir=\"auto\">Additionally, having the gem version templates means that we are testing both main and a stable release of Rails in CI, which has some benefit.</p>\n<p dir=\"auto\">IMO, the cost of separate files and the confusion it will create if we want to add more templates outweighs the benefits mentioned here.</p>\n<p dir=\"auto\">My motivation is that I want to add more report templates, like for additional adapters, and this list will grow to be unmanageable if we keep the gem versions.</p>\n<p dir=\"auto\">/cc <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/yahonda/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/yahonda\">@yahonda</a> <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/skipkayhil/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/skipkayhil\">@skipkayhil</a> as I think we've discussed this before</p>",
            "url": "https://github.com/rails/rails/pull/50317",
            "title": "Consolidate bug_report_templates and remove the gem versions",
            "date_modified": "2023-12-11T23:42:01.000Z",
            "date_published": "2023-12-09T23:33:14.000Z",
            "author": {
                "name": "zzak",
                "url": "https://github.com/zzak"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/60933602?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">If there's has many association between two tables. Let say, <code class=\"notranslate\">post</code> and <code class=\"notranslate\">comment</code>. Post has no comments but due to some issue, counter_cache is negative, then <code class=\"notranslate\">empty?</code>  method returns false. It should return true as the DB query would return true.</p>\n<p dir=\"auto\">This PR is related to <a href=\"https://github.com/rails/rails/issues/50311\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50311/hovercard\">Counter cache issue</a> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2033866460\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50311\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50311/hovercard\" href=\"https://github.com/rails/rails/issues/50311\">#50311</a></p>",
            "url": "https://github.com/rails/rails/pull/50314",
            "title": "Empty method issue fixed if counter cache negative",
            "date_modified": "2023-12-12T10:02:46.000Z",
            "date_published": "2023-12-09T18:11:53.000Z",
            "author": {
                "name": "Nadia-Ahsan",
                "url": "https://github.com/Nadia-Ahsan"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50311.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2033866460\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50311\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50311/hovercard\" href=\"https://github.com/rails/rails/issues/50311\">#50311</a>.</p>\n<p dir=\"auto\">Due to race conditions, it is possible to get a negative number of counter cache values.<br>\nWhen we are in this situation, we should actually query the association to check if there are any records.</p>",
            "url": "https://github.com/rails/rails/pull/50313",
            "title": "Ignore negative counter caches when checking for existence of the association",
            "date_modified": "2023-12-10T10:42:16.000Z",
            "date_published": "2023-12-09T16:19:47.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">While the ergonomics of calling <code class=\"notranslate\">button_to</code> match those of <code class=\"notranslate\">form_for</code>, <code class=\"notranslate\">form_with</code>, or even <code class=\"notranslate\">form_tag</code>, the implementation doesn't use much of those helper's existing infrastructure. There are chunks of logic repeated and re-implemented. For example:</p>\n<ul dir=\"auto\">\n<li>determining the <code class=\"notranslate\">[action]</code> and <code class=\"notranslate\">[method]</code> attributes for the <code class=\"notranslate\">&lt;form&gt;</code></li>\n<li>rendering an <code class=\"notranslate\">&lt;input type=\"hidden\" name=\"_method\"&gt;</code> for methods other than <code class=\"notranslate\">POST</code> or <code class=\"notranslate\">GET</code></li>\n<li>generating and rendering an authenticity token input</li>\n<li>content exfiltration</li>\n<li>encoding <code class=\"notranslate\">[data-remote]</code> for UJS integration</li>\n</ul>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit implements more of <code class=\"notranslate\">button_to</code> in terms of the <a href=\"https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag\" rel=\"nofollow\">form_tag</a> helper method defined in <code class=\"notranslate\">FormTagHelper</code>. That method handles responsibilities like determining <code class=\"notranslate\">[method]</code>, rendering <code class=\"notranslate\">&lt;input type=\"hidden\"&gt;</code>, etc.</p>\n<p dir=\"auto\">The only outward-facing changes (reflected in test suite cases) involve the order of the <code class=\"notranslate\">&lt;form&gt;</code> element's content, and the introduction of an <code class=\"notranslate\">[accept-charset=\"UTF-8\"]</code> attribute.</p>\n<p dir=\"auto\">The <code class=\"notranslate\">&lt;button&gt;</code> element will be rendered <strong>after</strong> hidden fields instead of <strong>before</strong> (the previous behavior).</p>\n<p dir=\"auto\">Similarly, the <code class=\"notranslate\">[accept-charset]</code> attribute wasn't being rendered before, but is rendered by <code class=\"notranslate\">form_tag</code>. The <code class=\"notranslate\">form_tag</code> helper doesn't currently expose a mechanism to skip that attribute (in the same way that <code class=\"notranslate\">:enforce_utf8</code> is being used here to skip the <code class=\"notranslate\">&lt;input type=\"hidden\"&gt;</code>.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">As part of these changes, this commit also excises the <code class=\"notranslate\">method_tag</code> and <code class=\"notranslate\">token_tag</code> private helpers out of the <code class=\"notranslate\">UrlHelper</code> module and into the <code class=\"notranslate\">FormTagHelper</code> module, since that's the only remaining call site. The previous implementation relied on the fact that both <code class=\"notranslate\">UrlHelper</code> and <code class=\"notranslate\">FormTagHelper</code> end up being mixed into an <code class=\"notranslate\">ActionView::Base</code> instance, so the cross-module <code class=\"notranslate\">private</code> boundary wasn't effective.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50312",
            "title": "Implement `button_to` in terms of `form_tag`",
            "date_modified": "2023-12-11T22:48:47.000Z",
            "date_published": "2023-12-09T15:47:44.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Storing attributes in database columns via the <code class=\"notranslate\">.store</code> and <code class=\"notranslate\">.store_accessor</code> class methods generates a collection of methods, including an attribute reader.</p>\n<p dir=\"auto\">The methods are similar to the ones generated from <code class=\"notranslate\">ActiveRecord::AttributeMethods</code> (and transitively <code class=\"notranslate\">ActiveModel::AttributeMethods</code>), but do not include a presence predicate method (like<br>\n<code class=\"notranslate\">ActiveModel::AttributeMethods#attribute_present?</code>).</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit generates an <code class=\"notranslate\">#{attribute}?</code> method that reads from the store attribute, then chains a <code class=\"notranslate\">#present?</code> predicate method on the return value.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50309",
            "title": "`ActiveRecord::Store`: define predicate attribute method",
            "date_modified": "2023-12-09T15:34:21.000Z",
            "date_published": "2023-12-09T05:03:34.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5657035?u=48dc5950e98b199e1ed1e8c5c3f1e4bfd2b39691&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">For <code class=\"notranslate\">.sort_by!</code> we avoid allocating an extra array and the code gets shorter and simpler.<br>\nFor <code class=\"notranslate\">.each_slice</code> the code is simpler and so easier to understand.</p>",
            "url": "https://github.com/rails/rails/pull/50308",
            "title": "Small refactoring of batching over loaded relation",
            "date_modified": "2023-12-08T23:57:12.000Z",
            "date_published": "2023-12-08T23:57:09.000Z",
            "author": {
                "name": "fatkodima",
                "url": "https://github.com/fatkodima"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/894561?u=4c52a73ff17f698d354319cb61b302d38ca4a923&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2007269377\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50145\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50145/hovercard\" href=\"https://github.com/rails/rails/pull/50145\">#50145</a> recently added logging of an exception's causes' messages, which is great as I was going to add that.</p>\n<p dir=\"auto\">However, the backtraces of the causes are not included in that PR.</p>\n<p dir=\"auto\">This PR adds the backtraces too, which can be helpful. Note that I also changed the \"header\" part from.</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"RuntimeError (Third error)\n\nCauses:\nRuntimeError (Second error)\nRuntimeError (First error)\"><pre class=\"notranslate\"><code class=\"notranslate\">RuntimeError (Third error)\n\nCauses:\nRuntimeError (Second error)\nRuntimeError (First error)\n</code></pre></div>\n<p dir=\"auto\">To:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"RuntimeError (Third error)\nCaused by: RuntimeError (Second error)\nCaused by: RuntimeError (First error)\"><pre class=\"notranslate\"><code class=\"notranslate\">RuntimeError (Third error)\nCaused by: RuntimeError (Second error)\nCaused by: RuntimeError (First error)\n</code></pre></div>\n<p dir=\"auto\">And I highlight that the first backtrace is from the \"main\" exception with this message:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Infos for: RuntimeError (Third error):\"><pre class=\"notranslate\"><code class=\"notranslate\">Infos for: RuntimeError (Third error):\n</code></pre></div>\n<p dir=\"auto\">Here is a truncated example:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"RuntimeError (Third error)\nCaused by: RuntimeError (Second error)\nCaused by: RuntimeError (First error)\n\nInfos for: RuntimeError (Third error):\n\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:53:in `rescue in rescue in raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:50:in `rescue in raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:47:in `raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:113:in `call'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:63:in `response'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:35:in `call'\n/and/way/more\n\nInfos for cause: RuntimeError (Second error):\n\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:51:in `rescue in raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:47:in `raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:113:in `call'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:63:in `response'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:35:in `call'\n/home/max/projects/rails/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:63:in `response'\n/and/way/more\n\nInfos for cause: RuntimeError (First error):\n\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:48:in `raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:113:in `call'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:63:in `response'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:35:in `call'\n/home/max/projects/rails/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:63:in `response'\n/and/way/more\"><pre class=\"notranslate\"><code class=\"notranslate\">RuntimeError (Third error)\nCaused by: RuntimeError (Second error)\nCaused by: RuntimeError (First error)\n\nInfos for: RuntimeError (Third error):\n\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:53:in `rescue in rescue in raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:50:in `rescue in raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:47:in `raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:113:in `call'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:63:in `response'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:35:in `call'\n/and/way/more\n\nInfos for cause: RuntimeError (Second error):\n\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:51:in `rescue in raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:47:in `raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:113:in `call'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:63:in `response'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:35:in `call'\n/home/max/projects/rails/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:63:in `response'\n/and/way/more\n\nInfos for cause: RuntimeError (First error):\n\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:48:in `raise_nested_exceptions'\n/home/max/projects/rails/actionpack/test/dispatch/debug_exceptions_test.rb:113:in `call'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:63:in `response'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:35:in `call'\n/home/max/projects/rails/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'\n/home/max/.rvm/gems/ruby-3.2.2/gems/rack-3.0.8/lib/rack/lint.rb:63:in `response'\n/and/way/more\n</code></pre></div>",
            "url": "https://github.com/rails/rails/pull/50305",
            "title": "Log trace of causes for unhandled exceptions",
            "date_modified": "2023-12-08T23:52:44.000Z",
            "date_published": "2023-12-08T16:24:59.000Z",
            "author": {
                "name": "MaxLap",
                "url": "https://github.com/MaxLap"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2575027?u=e7a9fe052c03fa59da09e064fdfacf2b1f627c2f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">First, add test coverage to ensure that the behavior supported by the private <code class=\"notranslate\">read_store_attribute</code> and <code class=\"notranslate\">write_store_attribute</code> doesn't change over time.</p>\n<p dir=\"auto\">Next, add method-level RubyDoc comments to describe how to override them correctly.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50304",
            "title": "Document how to transform keys with `ActiveRecord::Store`",
            "date_modified": "2023-12-09T01:07:07.000Z",
            "date_published": "2023-12-08T15:55:14.000Z",
            "author": {
                "name": "seanpdoyle",
                "url": "https://github.com/seanpdoyle"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Upgrading Rails to \"at least 2.1.1\" is outdated advice. Applications should run 7.0.Z or 7.1.Z.<br>\nAlso, RedCloth version 4 is from 2009, so I don't think it's that \"new\".</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50301",
            "title": "Remove some outdated security advice from Security guide [ci-skip]",
            "date_modified": "2023-12-08T23:34:08.000Z",
            "date_published": "2023-12-08T09:15:54.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/13816206?u=b3f1167e3181e3e4b093f443511446e576d13d9e&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #50256.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2022652760\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50256\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50256/hovercard\" href=\"https://github.com/rails/rails/issues/50256\">#50256</a></p>\n<p dir=\"auto\"><strong>Context :</strong></p>\n<ul dir=\"auto\">\n<li>A Model having query constraints and a belongs_to association.</li>\n<li>Associated record is loaded once.</li>\n</ul>\n<p dir=\"auto\"><strong>Action :</strong></p>\n<ul dir=\"auto\">\n<li>Update Foreign key for the belongs_to association.</li>\n<li>Call <code class=\"notranslate\">model.association</code> to refer to the associated object.</li>\n</ul>\n<p dir=\"auto\"><strong>Current Behaviour:</strong></p>\n<ul dir=\"auto\">\n<li>State is not changed and no reload is triggered.</li>\n<li>Association still points to the old record.</li>\n</ul>\n<p dir=\"auto\"><strong>Updated Behaviour:</strong></p>\n<ul dir=\"auto\">\n<li>State is updated and reload is triggered.</li>\n<li>Association points to the updated record.</li>\n</ul>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request updates <code class=\"notranslate\">stale_state</code> method in <code class=\"notranslate\">belongs_to association</code> to handle composite foreign keys</p>\n<h3 dir=\"auto\">Additional information</h3>\n\n<p dir=\"auto\">For Additional context Please refer to <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2022652760\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50256\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/50256/hovercard\" href=\"https://github.com/rails/rails/issues/50256\">#50256</a></p>\n<h3 dir=\"auto\">Dependency</h3>\n<ul dir=\"auto\">\n<li>This PR has a dependency on <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"2039356048\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/50347\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50347/hovercard\" href=\"https://github.com/rails/rails/pull/50347\">#50347</a> and is to be merged after those changes are approved and merged.</li>\n<li>It is an independent bug, however when the stale state is updated correctly it results in loss of information because of the bug to be fixed in the mentioned PR.</li>\n<li>Please refer to this <a href=\"https://github.com/rails/rails/pull/50297#issuecomment-1852817664\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/50297/hovercard\">comment</a> for additional description.</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/50297",
            "title": "[Fix #50256] stale state for composite foreign keys in belongs_to ass…",
            "date_modified": "2023-12-13T10:11:04.000Z",
            "date_published": "2023-12-07T18:36:17.000Z",
            "author": {
                "name": "iamradioactive",
                "url": "https://github.com/iamradioactive"
            }
        }
    ]
}