{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Previously, <code class=\"notranslate\">EncryptedConfiguration</code> was <a href=\"https://github.com/rails/rails/commit/a6a9fed1719a3cfe47eb1566ae4d6034374fd809\">updated</a> to use <code class=\"notranslate\">InheritableOptions</code> so that keys could be called like methods. It was later <a href=\"https://github.com/rails/rails/commit/80585daf2def5bf94854be69f81e24a16ce14c55\">updated again</a> to ensure that it behaved both like a <code class=\"notranslate\">Hash</code> and <code class=\"notranslate\">OrderedOptions</code>. In this second change, the <code class=\"notranslate\">InheritableOptions</code> instance was accidentally nested with another <code class=\"notranslate\">InheritableOptions</code> instance.</p>\n<p dir=\"auto\">This continued to mostly work as expected because <code class=\"notranslate\">InheritableOptions</code> will fall back to the inner <code class=\"notranslate\">InheritableOptions</code> when the outer one doesn't have a key. However, any methods that try to treat the outer <code class=\"notranslate\">InheritableOptions</code> like it should know about all of its keys will fail (for example, <code class=\"notranslate\">#keys</code>, <code class=\"notranslate\">#to_h</code>, <code class=\"notranslate\">#to_json</code>, etc.)</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit fixes the issue by removing the extraneous outer <code class=\"notranslate\">InheritableOptions</code> instance.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Ref <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1768869366\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48556\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48556/hovercard\" href=\"https://github.com/rails/rails/pull/48556\">#48556</a> didn't cherry-pick cleanly so I went ahead and opened this with the conflict resolved</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48557",
            "title": "Fix EncryptedConfiguration not behaving like Hash [7-0-stable]",
            "date_modified": "2023-06-22T03:40:40.000Z",
            "date_published": "2023-06-22T03:40:23.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48554.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1768820027\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48554\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48554/hovercard\" href=\"https://github.com/rails/rails/issues/48554\">#48554</a></p>\n<p dir=\"auto\">Previously, <code class=\"notranslate\">EncryptedConfiguration</code> was <a href=\"https://github.com/rails/rails/commit/a6a9fed1719a3cfe47eb1566ae4d6034374fd809\">updated</a> to use <code class=\"notranslate\">InheritableOptions</code> so that keys could be called like methods. It was later <a href=\"https://github.com/rails/rails/commit/80585daf2def5bf94854be69f81e24a16ce14c55\">updated again</a> to ensure that it behaved both like a <code class=\"notranslate\">Hash</code> and <code class=\"notranslate\">OrderedOptions</code>. In this second change, the <code class=\"notranslate\">InheritableOptions</code> instance was accidentally nested with another <code class=\"notranslate\">InheritableOptions</code> instance.</p>\n<p dir=\"auto\">This continued to mostly work as expected because <code class=\"notranslate\">InheritableOptions</code> will fall back to the inner <code class=\"notranslate\">InheritableOptions</code> when the outer one doesn't have a key. However, any methods that try to treat the outer <code class=\"notranslate\">InheritableOptions</code> like it should know about all of its keys will fail (for example, <code class=\"notranslate\">#keys</code>, <code class=\"notranslate\">#to_h</code>, <code class=\"notranslate\">#to_json</code>, etc.)</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit fixes the issue by removing the extraneous outer <code class=\"notranslate\">InheritableOptions</code> instance.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48556",
            "title": "Fix EncryptedConfiguration not behaving like Hash",
            "date_modified": "2023-06-22T05:59:56.000Z",
            "date_published": "2023-06-22T03:34:44.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1767455640\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48545\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48545/hovercard\" href=\"https://github.com/rails/rails/issues/48545\">#48545</a></p>\n<p dir=\"auto\">When <code class=\"notranslate\">to_s</code> was <a href=\"https://github.com/rails/rails/commit/f9fbfe0ab3cfc31f72663b9f06286ab32224b886\">deprecated</a> for <code class=\"notranslate\">to_fs</code>, warnings were added when explicit formats were passed to <code class=\"notranslate\">to_s</code>. To determine whether a format argument was passed, the method signature was changed from <code class=\"notranslate\">to_s(format = :default)</code> to <code class=\"notranslate\">to_s(format = EMPTY_OBJECT)</code>. While this enabled being able to warn on formats passed, it changed the behavior of not passing any format for applications that customized the <code class=\"notranslate\">:default</code> format for one of these classes.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit restores the previous behavior for <code class=\"notranslate\">:default</code> formats while keeping the existing warnings. Additionally, it will continue to not warn for applications using <code class=\"notranslate\">to_s</code> without arguments that haven't set a custom <code class=\"notranslate\">:default</code> format. However, for applications that have set a custom <code class=\"notranslate\">:default</code> format, it will now warn that those classes should be migrated to <code class=\"notranslate\">to_fs</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48555",
            "title": "Fix to_s not using :default format with no args",
            "date_modified": "2023-06-22T02:59:25.000Z",
            "date_published": "2023-06-22T02:54:48.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48517.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1762559591\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48517\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48517/hovercard\" href=\"https://github.com/rails/rails/issues/48517\">#48517</a></p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# will exclude header, even if config is enabled:\njavascript_include_tag(&quot;http://example.com/all.js&quot;, preload_links_header: false)\n\n# will include header, even if config is disabled:\nstylesheet_link_tag(&quot;http://example.com/all.css&quot;, preload_links_header: true)\"><pre class=\"notranslate\"><span class=\"pl-c\"># will exclude header, even if config is enabled:</span>\n<span class=\"pl-en\">javascript_include_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"http://example.com/all.js\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">preload_links_header</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-c\"># will include header, even if config is disabled:</span>\n<span class=\"pl-en\">stylesheet_link_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"http://example.com/all.css\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">preload_links_header</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span></pre></div>",
            "url": "https://github.com/rails/rails/pull/48553",
            "title": "Allow opting in/out of `Link preload` headers when calling `stylesheet_link_tag` or `javascript_include_tag`",
            "date_modified": "2023-06-22T02:16:02.000Z",
            "date_published": "2023-06-22T02:14:29.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because <code class=\"notranslate\">has_many</code> and <code class=\"notranslate\">has_one</code> with composite primary key <code class=\"notranslate\">through:</code> associations with unpersisted owner records don't currently work.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">ActiveRecord::Associations::HasManyThroughAssociation</code> and <code class=\"notranslate\">ActiveRecord::Associations:: ThroughAssociation</code> to support through reflections with array foreign keys.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Because of the unpersisted record, <code class=\"notranslate\">owner[through_reflection.foreign_key]</code> doesn't raise when the foreign key is an array. I wonder if that's a bug, because I don't think it should ever work. In persisted records, this raises later when we ask the database for an attribute with an array name.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48552",
            "title": "Add support for unpersisted CPK has_one/has_many through associations",
            "date_modified": "2023-06-22T00:20:53.000Z",
            "date_published": "2023-06-21T22:19:49.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/76848245?u=fbf230f4fe1bc9f7a0e3a404eeb20e2a333cbcfd&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Summary</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48548.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1767971401\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48548\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48548/hovercard\" href=\"https://github.com/rails/rails/issues/48548\">#48548</a></p>",
            "url": "https://github.com/rails/rails/pull/48549",
            "title": "Qualify association unscope values with table names",
            "date_modified": "2023-06-21T19:57:05.000Z",
            "date_published": "2023-06-21T16:24:58.000Z",
            "author": {
                "name": "philip-maina",
                "url": "https://github.com/philip-maina"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">ref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1757611245\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48477\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48477/hovercard\" href=\"https://github.com/rails/rails/issues/48477\">#48477</a></p>\n<p dir=\"auto\">Using forms inside emails is not common, but it's possible, and it's also possible to share views between controllers and mailers. Currently if a controller sets a <code class=\"notranslate\">default_form_builder</code> that's different from the global config, mailers that use the same views will not default to the same <code class=\"notranslate\">FormBuilder</code>. To fix this, this PR adds a <code class=\"notranslate\">default_form_builder</code> method for mailers that does the same thing as its controller sibling.</p>",
            "url": "https://github.com/rails/rails/pull/48542",
            "title": "Introduce `ActionMailer::FormBuilder`",
            "date_modified": "2023-06-21T08:20:47.000Z",
            "date_published": "2023-06-21T08:18:50.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">GlobalID is a dependency of Active Job and Action Text. It adds <code class=\"notranslate\">to_gid</code> and <code class=\"notranslate\">to_sgid</code> methods to Active Model and Active Record classes.</p>\n<p dir=\"auto\">Trying to find the documentation of these methods can be confusing as they are not present in the API docs.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">By symlinking the globalid gem from the Gemfile we can include it in the API documentation. After the <code class=\"notranslate\">rdoc</code> task has run we can remove the symlink. I'd prefer to remove to symlink in an <code class=\"notranslate\">ensure</code> block but that doesn't seem to be supported by Rake.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This could also be used to add all the <code class=\"notranslate\">turbo-rails</code> methods to the API docs, like <code class=\"notranslate\"> broadcast_append_to</code>  and <code class=\"notranslate\">turbo_stream_from</code> (that is used in video demo on <a href=\"https://rubyonrails.org/\" rel=\"nofollow\">https://rubyonrails.org/</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48541",
            "title": "Add GlobalID to the API docs",
            "date_modified": "2023-06-21T06:36:55.000Z",
            "date_published": "2023-06-21T06:29:25.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/100725?u=43e1f20c541088357f0cfc80d80063299892e394&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I've tested Rails 7.1 Dockerfile template in Rails 7.0 app with MRSK on GitHub Actions and found that a bit more optimization can be applied.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds minor optimization to dockerignore template.</p>\n<p dir=\"auto\">During the build process, the setup-ruby@v1 GitHub Action leaves artifacts in the ~/vendor/bundle folder, resulting in two full bundles in the final build: one in the default /usr/local/bundle directory specified in the Dockerfile template, and another in the /rails/vendor/bundle directory. By ignoring the /rails/vendor/bundle directory, we can significantly reduce the size of the final image.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48540",
            "title": "Added Dockerfile instructions to remove artifacts and node_modules",
            "date_modified": "2023-06-21T07:32:04.000Z",
            "date_published": "2023-06-21T06:16:44.000Z",
            "author": {
                "name": "igor-alexandrov",
                "url": "https://github.com/igor-alexandrov"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2651240?u=97e6903620ef2874e2231cee9eb2654b7811d750&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Support queries with regular expressions on supported databases. (PostgreSQL/MySQL)</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.where(title: /ThInKiNg/)\n#=&gt; SELECT * FROM posts WHERE title REGEXP 'ThInKiNg'; --MySQL\n#=&gt; SELECT * FROM posts WHERE title ~* 'ThInKiNg'; --PostgreSQL\n\nPost.where.not(title: /ThInKiNg/)\n#=&gt; SELECT * FROM posts WHERE title NOT REGEXP 'ThInKiNg'; --MySQL\n#=&gt; SELECT * FROM posts WHERE title !~* 'ThInKiNg'; --PostgreSQL    \"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-pds\">/ThInKiNg/</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE title REGEXP 'ThInKiNg'; --MySQL</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE title ~* 'ThInKiNg'; --PostgreSQL</span>\n\n<span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">not</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-pds\">/ThInKiNg/</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE title NOT REGEXP 'ThInKiNg'; --MySQL</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE title !~* 'ThInKiNg'; --PostgreSQL    </span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48538",
            "title": "Support queries with regular expressions",
            "date_modified": "2023-06-21T18:27:52.000Z",
            "date_published": "2023-06-21T03:57:38.000Z",
            "author": {
                "name": "lazaronixon",
                "url": "https://github.com/lazaronixon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5512772?u=bbae6d87b3499e6b3662664cf4be0e84cc40f6d2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This commit changes bodies of methods generated by <code class=\"notranslate\">alias_attribute</code> along with generating these methods lazily.</p>\n<p dir=\"auto\">Previously the body of the <code class=\"notranslate\">alias_attribute :new_title, :title</code> was <code class=\"notranslate\">def new_title; title; end</code>. This commit changes it to <code class=\"notranslate\">def new_title; attribute(\"title\"); end</code>.</p>\n<p dir=\"auto\">This allows for <code class=\"notranslate\">alias_attribute</code> to be used to alias attributes named with a reserved names like <code class=\"notranslate\">id</code>:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  class Topic &lt; ActiveRecord::Base\n    self.primary_key = :title\n    alias_attribute :id_value, :id\n  end\n\n  Topic.new.id_value # =&gt; 1\"><pre class=\"notranslate\">  <span class=\"pl-k\">class</span> <span class=\"pl-v\">Topic</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n    <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">primary_key</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:title</span>\n    <span class=\"pl-en\">alias_attribute</span> <span class=\"pl-pds\">:id_value</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:id</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-v\">Topic</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">id_value</span> <span class=\"pl-c\"># =&gt; 1</span></pre></div>\n<h2 dir=\"auto\">Implementation details</h2>\n<p dir=\"auto\"><code class=\"notranslate\">method_defined_within?</code> method has been moved from <code class=\"notranslate\">activerecord</code> to <code class=\"notranslate\">activemodel</code> so both can use it</p>\n<h3 dir=\"auto\">Body generation</h3>\n<p dir=\"auto\">Most of the methods for the alias attribute will now be generated by <code class=\"notranslate\">define_proxy_call</code> unless the model redefines the <code class=\"notranslate\">target_name</code> attribute method, for example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Post &lt; ApplicationRecord\n alias_attribute :subject, :title\n\n def title_was\n  ...\n end\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Post</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n <span class=\"pl-en\">alias_attribute</span> <span class=\"pl-pds\">:subject</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:title</span>\n\n <span class=\"pl-k\">def</span> <span class=\"pl-en\">title_was</span>\n  ...\n <span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">will issue a deprecation warning that asks for the <code class=\"notranslate\">subject_was</code> to be overridden as well since next version of Rails will not make <code class=\"notranslate\">subject_was</code> method to call into the <code class=\"notranslate\">title_was</code>. This is a very unlikely situation and I genuinely expect no applications to ever see the deprecation warning but still something that does require a deprecation cycle.</p>\n<p dir=\"auto\">When the deprecation is gone the <code class=\"notranslate\">alias_attribute</code> definition can become as simple as:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"      def alias_attribute(new_name, old_name)\n        self.attribute_aliases = attribute_aliases.merge(new_name.to_s =&gt; old_name.to_s)\n        define_attribute_method(old_name, as: new_name)\n      end\"><pre class=\"notranslate\">      <span class=\"pl-k\">def</span> <span class=\"pl-en\">alias_attribute</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">new_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">old_name</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attribute_aliases</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">attribute_aliases</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">merge</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">new_name</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_s</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-s1\">old_name</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_s</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-en\">define_attribute_method</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">old_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">as</span>: <span class=\"pl-s1\">new_name</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">where <code class=\"notranslate\">as:</code> will have to be added but semantically <code class=\"notranslate\">alias_attribute</code> will behave as \"define all the same as we define for the original attribute but now under a different name\"</p>\n<h3 dir=\"auto\">Lazy method generation</h3>\n<p dir=\"auto\"><code class=\"notranslate\">alias_attribute</code> used to generate all the methods eagerly but it doesn't allow us to have the full picture of <code class=\"notranslate\">self</code> in the context and check for methods being overridden. So we are changing to lazily define these attributes whenever the first instance of the class has been initialized. If application is booted in the <code class=\"notranslate\">EAGER_LOAD</code> mode a hook from initializer will iterate over dependants and force the attribute methods to be generated. This is very similar to how Active Record generates attributes based on schema.</p>\n<p dir=\"auto\"><code class=\"notranslate\">alias_attribute</code> now only registers the intention to define an alias in <code class=\"notranslate\">@attribute_aliases_to_generate</code> variable which will be used to define methods for all aliases later. <code class=\"notranslate\">generate_alias_attributes</code> pops values from  <code class=\"notranslate\">@attribute_aliases_to_generate</code> and generates attribute methods for each alias. <code class=\"notranslate\">generate_alias_attributes</code> also sets <code class=\"notranslate\">_alias_attributes_mass_generated</code> to <code class=\"notranslate\">true</code> so the next call to <code class=\"notranslate\">alias_attribute</code> will eagerly define all the methods. This is to support alias attribute definitions like <code class=\"notranslate\">MyModel.alias_attribute :new</code></p>\n<p dir=\"auto\">As a result it may slightly improve the boot time but it wasn't the initial goal.</p>\n<h4 dir=\"auto\">Concerns with lazy alias methods generation</h4>\n<p dir=\"auto\">Overall we are doing almost the same as what Active Record does to define attributes based on schema apart from one thing:<br>\n</p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/a543aee44f29abc966285ec3c5c30cfe2576fc8c/activerecord/lib/active_record/attribute_methods.rb#L58\">rails/activerecord/lib/active_record/attribute_methods.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 58\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/a543aee44f29abc966285ec3c5c30cfe2576fc8c\">a543aee</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L58\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"58\"></td>\n          <td id=\"LC58\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-en\">generated_attribute_methods</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">synchronize</span> <span class=\"pl-k\">do</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">Active Record uses mutex to ensure only one thread will be defining attributes. However at this moment I can't come up with a real-world scenario where multiple threads will attempt to define alias attributes so I decided not to use mutex until we have a clear understanding of the situation we are trying to prevent. I would appreciate any kind of insights on the need to use mutex for Active Record attributes generation</p>",
            "url": "https://github.com/rails/rails/pull/48533",
            "title": "Call proxy methods from `alias_attribute` generated methods",
            "date_modified": "2023-06-20T18:43:00.000Z",
            "date_published": "2023-06-20T17:00:43.000Z",
            "author": {
                "name": "nvasilevski",
                "url": "https://github.com/nvasilevski"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2651240?u=97e6903620ef2874e2231cee9eb2654b7811d750&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Fix unscope with multiple not conditions</p>\n<p dir=\"auto\">Before:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.where.not(body: &quot;hello&quot;, title: &quot;sti me&quot;).unscope(where: :title)\n#=&gt; SELECT * FROM posts WHERE NOT (body = 'hello' AND title = 'sti me')\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">not</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">body</span>: <span class=\"pl-s\">\"hello\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"sti me\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">unscope</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">where</span>: <span class=\"pl-pds\">:title</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE NOT (body = 'hello' AND title = 'sti me')</span></pre></div>\n<p dir=\"auto\">Later:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.where.not(body: &quot;hello&quot;, title: &quot;sti me&quot;).unscope(where: :title)\n#=&gt; SELECT * FROM posts WHERE NOT (body = 'hello')\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">not</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">body</span>: <span class=\"pl-s\">\"hello\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"sti me\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">unscope</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">where</span>: <span class=\"pl-pds\">:title</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE NOT (body = 'hello')</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48531",
            "title": "Fix unscope with multiple not conditions",
            "date_modified": "2023-06-21T14:59:52.000Z",
            "date_published": "2023-06-20T15:29:58.000Z",
            "author": {
                "name": "lazaronixon",
                "url": "https://github.com/lazaronixon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/129938?u=7637e813584057fbf1a3fa83dca8b4d444c16f79&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This adds a new Active Record encryption option to support previous data encrypted non-deterministically with a SHA1 hash digest.</p>\n<p dir=\"auto\">There is currently a problem with Active Record encryption for users updating from 7.0 to 7.1 Before <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1200151545\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/44873\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/44873/hovercard\" href=\"https://github.com/rails/rails/pull/44873\">#44873</a>, data encrypted with non-deterministic encryption was always using SHA-1. The reason is that <code class=\"notranslate\">ActiveSupport::KeyGenerator.hash_digest_class</code> was set in an <code class=\"notranslate\">after_initialize</code> block in the railtie config, but encryption config was running before that, so it was effectively using the previous default SHA1. That means that existing users are using SHA256 for non deterministic encryption, and SHA1 for deterministic encryption.</p>\n<p dir=\"auto\">This adds a new option <code class=\"notranslate\">support_sha1_for_non_deterministic_encryption</code> that users can enable to support for SHA1 and SHA256 when decrypting existing data.</p>\n<p dir=\"auto\">The new option will kick-in by default for versions prior to 7.1. The idea is that:</p>\n<ul dir=\"auto\">\n<li>Existing users updating from 7.0, won't have to set it, as it will get enabled by default.</li>\n<li>Users starting with 7.1 will have the option disabled.</li>\n</ul>\n<p dir=\"auto\">This also improves the initialization system for AR encryption to make it more robust. It will now happen after all the initializers have run, and the system to declare filtered attributes will work with different load orders.</p>\n<p dir=\"auto\">Big thanks to <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/duduribeiro/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/duduribeiro\">@duduribeiro</a> for the thorough investigation and debugging here, as he was the one identifying the issue and who explored alternatives to fix the problem (see <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1763776125\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48520\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48520/hovercard\" href=\"https://github.com/rails/rails/pull/48520\">#48520</a>). I added him as the co-author of the commit I ported from that PR.</p>\n<p dir=\"auto\">Pending:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Validate patch in real scenarios</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Update new framework default initializer</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Update CHANGELOG</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Update documentation</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Suite passing</li>\n</ul>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48204.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1707228995\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48204\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48204/hovercard\" href=\"https://github.com/rails/rails/issues/48204\">#48204</a>.<br>\n<span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes pull request #48520.\">Closes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1763776125\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48520\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/48520/hovercard\" href=\"https://github.com/rails/rails/pull/48520\">#48520</a>.</p>",
            "url": "https://github.com/rails/rails/pull/48530",
            "title": "Add a encryption option to support previous data encrypted non-deterministically with a SHA1 hash digest",
            "date_modified": "2023-06-21T20:34:24.000Z",
            "date_published": "2023-06-20T13:42:22.000Z",
            "author": {
                "name": "jorgemanrubia",
                "url": "https://github.com/jorgemanrubia"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/771411?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This commit changes the active_record_encryption.configuration to be set on an after initialize block. After PR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1200151545\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/44873\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/44873/hovercard\" href=\"https://github.com/rails/rails/pull/44873\">#44873</a>, we can configure now hash_digest_class that will be used on ActiveRecord::Encryption. But the docs said that we could change it via an initializer by setting<br>\nRails.application.config.active_record.encryption.hash_digest_class. This wasn't working because the railtie<br>\n\"active_record_encryption.configuration\" was being set before the initializer was loaded. This changes this behave to configure the active_record encryption after the initialize was loaded.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">I found this while debugging <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1707228995\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48204\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48204/hovercard\" href=\"https://github.com/rails/rails/issues/48204\">#48204</a> and I noticed that the PR <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1200151545\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/44873\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/44873/hovercard\" href=\"https://github.com/rails/rails/pull/44873\">#44873</a> added an option to configure the hash_class used to encrypt the attribute by setting the <code class=\"notranslate\">ActiveRecord::Encryption.config.hash_digest_class</code> on the initializer. But while debugging my issue, I found that the code to use this hash_digest_class wasn't using the different hash_digest_class that I set and I noticed that the ActiveRecord::Encryption was only configured only at the <code class=\"notranslate\">active_record</code> railtie before the custom initializers I have.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"    initializer &quot;active_record_encryption.configuration&quot; do |app|\n      ActiveRecord::Encryption.configure \\\n         primary_key: app.credentials.dig(:active_record_encryption, :primary_key),\n         deterministic_key: app.credentials.dig(:active_record_encryption, :deterministic_key),\n         key_derivation_salt: app.credentials.dig(:active_record_encryption, :key_derivation_salt),\n         **config.active_record.encryption\"><pre class=\"notranslate\">    <span class=\"pl-en\">initializer</span> <span class=\"pl-s\">\"active_record_encryption.configuration\"</span> <span class=\"pl-k\">do</span> |<span class=\"pl-s1\">app</span>|\n      <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Encryption</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">configure</span> \\\n         <span class=\"pl-pds\">primary_key</span>: <span class=\"pl-s1\">app</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">credentials</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">dig</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:active_record_encryption</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:primary_key</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n         <span class=\"pl-pds\">deterministic_key</span>: <span class=\"pl-s1\">app</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">credentials</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">dig</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:active_record_encryption</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:deterministic_key</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n         <span class=\"pl-pds\">key_derivation_salt</span>: <span class=\"pl-s1\">app</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">credentials</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">dig</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">:active_record_encryption</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:key_derivation_salt</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">,</span>\n         **<span class=\"pl-en\">config</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">active_record</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">encryption</span></pre></div>\n<p dir=\"auto\">and my <code class=\"notranslate\">new_framework_defaults_7_1</code> was loaded after that.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48520",
            "title": "Wrap active_record_encryption.configuration on an after initialize",
            "date_modified": "2023-06-21T18:45:25.000Z",
            "date_published": "2023-06-19T15:32:17.000Z",
            "author": {
                "name": "duduribeiro",
                "url": "https://github.com/duduribeiro"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/75765648?u=1dc3ffb2f347af44627baa665b1b2dff0abd7dd1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Currently, insert_all/upsert_all only accept array of hashes, so I want to make it accept array of models as well.<br>\nExample:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Book.insert_all([\n  Book.new(title: &quot;Rework&quot;, author: &quot;David&quot;),\n  Book.new(title: &quot;Eloquent Ruby&quot;, author: &quot;Russ&quot;)\n])\"><pre class=\"notranslate\"><code class=\"notranslate\">Book.insert_all([\n  Book.new(title: \"Rework\", author: \"David\"),\n  Book.new(title: \"Eloquent Ruby\", author: \"Russ\")\n])\n</code></pre></div>\n\n<h3 dir=\"auto\">Detail</h3>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">If you do not want timestamp values to be updated automatically, you must set record_timestamps to false.<br>\nExample:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Book.insert_all([Book.new(title: &quot;Rework&quot;, author: &quot;David&quot;)])\nBook.last.updated_at = '2023-05-23 20:37:10.97 UTC'\n\nBook.insert_all([Book.new(title: &quot;Rework&quot;, author: &quot;David&quot;)], record_timestamps: false)\nBook.last.updated_at = nil\"><pre class=\"notranslate\"><code class=\"notranslate\">Book.insert_all([Book.new(title: \"Rework\", author: \"David\")])\nBook.last.updated_at = '2023-05-23 20:37:10.97 UTC'\n\nBook.insert_all([Book.new(title: \"Rework\", author: \"David\")], record_timestamps: false)\nBook.last.updated_at = nil\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48513",
            "title": "Allow insert_all/upsert_all to use an array of models",
            "date_modified": "2023-06-21T12:08:18.000Z",
            "date_published": "2023-06-18T13:30:51.000Z",
            "author": {
                "name": "TakuyaKurimoto",
                "url": "https://github.com/TakuyaKurimoto"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48463.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1755595459\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48463\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48463/hovercard\" href=\"https://github.com/rails/rails/issues/48463\">#48463</a></p>\n<p dir=\"auto\">Since <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"998126151\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/43227\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/43227/hovercard\" href=\"https://github.com/rails/rails/pull/43227\">#43227</a>, the default CSP suggested in the initializer does not work with empty sessions. See <a href=\"https://github.com/rails/rails/pull/43227#issuecomment-1191692615\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/43227/hovercard\">this comment</a> for an example issue and workaround.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR just adds a fallback in case the session has not been loaded. I also updated the railties test to match the config in the default initializer.</p>",
            "url": "https://github.com/rails/rails/pull/48510",
            "title": "Allow default CSP setup to work with empty sessions",
            "date_modified": "2023-06-20T12:40:04.000Z",
            "date_published": "2023-06-18T07:50:25.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #47357.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1580073071\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47357\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/47357/hovercard\" href=\"https://github.com/rails/rails/issues/47357\">#47357</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request ensures that when using <code class=\"notranslate\">scoping</code> on update, delete and reload, scopes are only applied if <code class=\"notranslate\">all_queries: true</code> and only default scopes with <code class=\"notranslate\">all_queries: true</code> are applied. Because all default scopes are applied initially with the <code class=\"notranslate\">where</code> clause when scoping, my approach was to remove the unneeded scopes after the fact in these three scenarios.</p>\n<p dir=\"auto\">Except for the update and delete cases <strong>without</strong> <code class=\"notranslate\">scoping(all_queries: true)</code>, all other tests failed initially (4/6).</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Added <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/pjambet/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/pjambet\">@pjambet</a> as a co-author since they thoroughly documented all the expected and actual behaviour and tests.</p>\n<p dir=\"auto\">Unsure if this needs a CHANGELOG entry?</p>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48509",
            "title": "[Fix #47357] Inconsistent update, delete, reload behaviour with `#scoping` and default scopes",
            "date_modified": "2023-06-18T07:31:30.000Z",
            "date_published": "2023-06-17T14:33:33.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/11679928?u=cda9703c49801755597161a69ed96a87c27b4a0d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48486.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1759285533\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48486\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48486/hovercard\" href=\"https://github.com/rails/rails/issues/48486\">#48486</a></p>\n<p dir=\"auto\">Saving ranges with an empty range</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">Simply return if the string is empty, the same as it's being done for an \"empty\" string.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48507",
            "title": "Fix empty string saving for ranges",
            "date_modified": "2023-06-21T08:21:23.000Z",
            "date_published": "2023-06-16T19:10:35.000Z",
            "author": {
                "name": "szymonlipka",
                "url": "https://github.com/szymonlipka"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/142719?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">When eager_load is enabled and something (like the frozen_record gem) tries to load yaml files that use <code class=\"notranslate\">ActiveRecord::FixtureSet.identify(...)</code> we'll get an uninitialized constant error.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">With a new rails app, add the <code class=\"notranslate\">frozen_record</code> gem and two files:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ cat app/models/ice.rb\nclass Ice &lt; FrozenRecord::Base\n  self.base_path = Rails.root.join(&quot;db/data&quot;).to_s\nend\n$ cat db/data/ices.yml.erb\n- y: &lt;%= ActiveRecord::FixtureSet.identify(:fake) %&gt;\"><pre class=\"notranslate\"><code class=\"notranslate\">$ cat app/models/ice.rb\nclass Ice &lt; FrozenRecord::Base\n  self.base_path = Rails.root.join(\"db/data\").to_s\nend\n$ cat db/data/ices.yml.erb\n- y: &lt;%= ActiveRecord::FixtureSet.identify(:fake) %&gt;\n</code></pre></div>\n<p dir=\"auto\">Running <code class=\"notranslate\">CI=true bin/rails test</code> will abort with an uninitialized constant error:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"$ CI=1 bin/rails test\n(erb):1:in `&lt;main&gt;': uninitialized constant ActiveRecord::FixtureSet (NameError)\n\n_erbout = +''; _erbout.&lt;&lt; &quot;- y: &quot;.freeze; _erbout.&lt;&lt;(( ActiveRecord::FixtureSet.identify(:fake) ).to_s); _erbout.&lt;&lt; &quot;\\n&quot;.freeze\"><pre class=\"notranslate\"><code class=\"notranslate\">$ CI=1 bin/rails test\n(erb):1:in `&lt;main&gt;': uninitialized constant ActiveRecord::FixtureSet (NameError)\n\n_erbout = +''; _erbout.&lt;&lt; \"- y: \".freeze; _erbout.&lt;&lt;(( ActiveRecord::FixtureSet.identify(:fake) ).to_s); _erbout.&lt;&lt; \"\\n\".freeze\n</code></pre></div>\n<h3 dir=\"auto\">Notes</h3>\n<p dir=\"auto\">It may be worth noting that this file is already autoloaded in this module for a different constant:<br>\n</p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/df24e61cfb9a0e61f35989e35da487299d805e03/activerecord/lib/active_record.rb#L84\">rails/activerecord/lib/active_record.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n         Line 84\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/df24e61cfb9a0e61f35989e35da487299d805e03\">df24e61</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L84\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"84\"></td>\n          <td id=\"LC84\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-en\">autoload</span> <span class=\"pl-pds\">:TestFixtures</span><span class=\"pl-kos\">,</span> <span class=\"pl-s\">\"active_record/fixtures\"</span> </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<p dir=\"auto\">Simply adding the autoload line introduced a circular require<br>\n(fixtures.rb defines FixtureSet but before that it tries to load files beneath that namespace)<br>\nso I moved those requires down to after the class definition<br>\nas is done in<br>\n</p><div class=\"Box Box--condensed my-2\">\n  <div class=\"Box-header f6\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/rails/rails/blob/7dd67dc285fcdbb788cbdcdcaf53f6ce588bf7e5/activesupport/lib/active_support/deprecation.rb#L35-L54\">rails/activesupport/lib/active_support/deprecation.rb</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 35 to 54\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/rails/rails/commit/7dd67dc285fcdbb788cbdcdcaf53f6ce588bf7e5\">7dd67dc</a>\n    </p>\n  </div>\n  <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L35\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"35\"></td>\n          <td id=\"LC35\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">class</span> <span class=\"pl-v\">Deprecation</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L36\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"36\"></td>\n          <td id=\"LC36\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-c\"># active_support.rb sets an autoload for ActiveSupport::Deprecation.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L37\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"37\"></td>\n          <td id=\"LC37\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-c\">#</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L38\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"38\"></td>\n          <td id=\"LC38\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-c\"># If these requires were at the top of the file the constant would not be</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L39\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"39\"></td>\n          <td id=\"LC39\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-c\"># defined by the time their files were loaded. Since some of them reopen</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L40\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"40\"></td>\n          <td id=\"LC40\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-c\"># ActiveSupport::Deprecation its autoload would be triggered, resulting in</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L41\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"41\"></td>\n          <td id=\"LC41\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-c\"># a circular require warning for active_support/deprecation.rb.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L42\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"42\"></td>\n          <td id=\"LC42\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-c\">#</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L43\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"43\"></td>\n          <td id=\"LC43\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-c\"># So, we define the constant first, and load dependencies later.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L44\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"44\"></td>\n          <td id=\"LC44\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support/deprecation/instance_delegator\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L45\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"45\"></td>\n          <td id=\"LC45\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support/deprecation/behaviors\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L46\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"46\"></td>\n          <td id=\"LC46\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support/deprecation/reporting\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L47\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"47\"></td>\n          <td id=\"LC47\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support/deprecation/disallowed\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L48\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"48\"></td>\n          <td id=\"LC48\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support/deprecation/constant_accessor\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L49\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"49\"></td>\n          <td id=\"LC49\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support/deprecation/method_wrappers\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L50\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"50\"></td>\n          <td id=\"LC50\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support/deprecation/proxy_wrappers\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L51\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"51\"></td>\n          <td id=\"LC51\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support/deprecation/deprecators\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L52\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"52\"></td>\n          <td id=\"LC52\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"active_support/core_ext/module/deprecation\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L53\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"53\"></td>\n          <td id=\"LC53\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">   <span class=\"pl-en\">require</span> <span class=\"pl-s\">\"concurrent/atomic/thread_local_var\"</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L54\" class=\"blob-num border-0 px-3 py-0 color-bg-default\" data-line-number=\"54\"></td>\n          <td id=\"LC54\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n<p></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48506",
            "title": "Autoload ActiveRecord::FixtureSet",
            "date_modified": "2023-06-21T00:39:50.000Z",
            "date_published": "2023-06-16T18:45:25.000Z",
            "author": {
                "name": "rwstauner",
                "url": "https://github.com/rwstauner"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/45299?u=7d70bac77efa7641741857d155a3eb8d7941a35f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Make <code class=\"notranslate\">assert_changes</code> error messages show objects with <code class=\"notranslate\">.inspect</code> so that <code class=\"notranslate\">nil</code> is displayed as \"nil\" instead of an empty string, we can differentiate strings and symbols, etc.</p>\n<p dir=\"auto\">Make <code class=\"notranslate\">assert_no_changes</code> error messages surface the actual value.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>\n<p dir=\"auto\">Let me know if I should update the CHANGELOG as this is a minor change.</p>",
            "url": "https://github.com/rails/rails/pull/48482",
            "title": "Improve error messages of `assert_changes` and `assert_no_changes`",
            "date_modified": "2023-06-15T09:18:29.000Z",
            "date_published": "2023-06-15T09:18:25.000Z",
            "author": {
                "name": "pcreux",
                "url": "https://github.com/pcreux"
            }
        }
    ]
}