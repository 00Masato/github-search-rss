{
    "version": "https://jsonfeed.org/version/1",
    "title": "rails/rails pr",
    "home_page_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "feed_url": "https://00masato.github.io/github-search-rss/rails-pr.json",
    "description": "rails/rails pr on GitHub",
    "items": [
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/10928518?u=a900ef3a788abc81e4c0adf40c5c3c7de6762a3f&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been made to help make the Action View Helper Tags a little bit better. This is purely a refactoring PR and does not introduce any changes to the behaviour of tags.</p>\n<p dir=\"auto\">The reason I'm doing this is because I'm diving deep into these tags (<a href=\"https://dev.julianpinzon.com/unlocking-the-power-of-forms-in-rails\" rel=\"nofollow\">1</a>, <a href=\"https://dev.julianpinzon.com/diving-deep-action-view-form-helpers\" rel=\"nofollow\">2</a>) in order to find some sort of abstraction (<a href=\"https://dev.julianpinzon.com/the-potential-birth-of-attributebuilders\" rel=\"nofollow\">this</a> is one possible version) that might help make it easier to style form elements (input, select, label and text-area)</p>\n<p dir=\"auto\">In doing so, I've discovered that the <code class=\"notranslate\">Tags::Base</code> class is in need of some maintenance to make it easier to understand where the boundaries are drawn between different elements.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request:</p>\n<ul dir=\"auto\">\n<li>Simplifies some of the logic in the <code class=\"notranslate\">Tags::Base</code> class</li>\n<li>Creates a new <code class=\"notranslate\">SelectRenderer</code> module that contains three methods only used by <code class=\"notranslate\">&lt;select&gt;</code> tags.</li>\n<li>Includes the FormOptionsHelper module only in <code class=\"notranslate\">&lt;select&gt;</code> classes.</li>\n</ul>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48574",
            "title": "Extract Select rendering methods into SelectRenderer module and simplify Action View base helper logic",
            "date_modified": "2023-06-25T23:40:43.000Z",
            "date_published": "2023-06-25T12:36:13.000Z",
            "author": {
                "name": "pinzonjulian",
                "url": "https://github.com/pinzonjulian"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2651240?u=97e6903620ef2874e2231cee9eb2654b7811d750&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Add <code class=\"notranslate\">chronologically</code> and <code class=\"notranslate\">reverse_chronologically</code> scopes to <code class=\"notranslate\">ActiveRecord::Base</code>.</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Author.chronologically\n#=&gt; SELECT * FROM authors ORDER BY authors.id ASC\n\nAuthor.reverse_chronologically\n#=&gt; SELECT * FROM authors ORDER BY authors.id DESC\"><pre class=\"notranslate\"><span class=\"pl-v\">Author</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">chronologically</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM authors ORDER BY authors.id ASC</span>\n\n<span class=\"pl-v\">Author</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">reverse_chronologically</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM authors ORDER BY authors.id DESC</span></pre></div>\n<p dir=\"auto\">It uses the same logic as <code class=\"notranslate\">first</code> and <code class=\"notranslate\">last</code>, the order is defined based on <code class=\"notranslate\">implicit_order_column || query_constraints_list || primary_key</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48570",
            "title": "Implement default chronologically scopes",
            "date_modified": "2023-06-24T22:27:20.000Z",
            "date_published": "2023-06-24T18:55:05.000Z",
            "author": {
                "name": "lazaronixon",
                "url": "https://github.com/lazaronixon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/287640?v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Defaulted datetime-local to not use seconds</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Input of <code class=\"notranslate\">datetime-local</code> specifies that the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/datetime-local#value\" rel=\"nofollow\">value must be excluding seconds</a>.  Although Chrome supports seconds, safari will validate client-side that the value is <code class=\"notranslate\">not valid</code> and the form will not be submittable.</p>\n<p dir=\"auto\">This Pull Request has been created because the default for rails should not error out in a popular browser.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes the default for <code class=\"notranslate\">datetime-local</code> value conversion</p>\n<h3 dir=\"auto\">Additional information</h3>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/287640/248478525-917cf010-82fb-4f95-a2fc-54b85f6ab193.png\"><img width=\"770\" alt=\"Screenshot 2023-06-24 at 6 54 09 AM\" src=\"https://user-images.githubusercontent.com/287640/248478525-917cf010-82fb-4f95-a2fc-54b85f6ab193.png\" style=\"max-width: 100%;\"></a>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li>[] Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48569",
            "title": "Update datetime_local_field.rb",
            "date_modified": "2023-06-24T12:56:23.000Z",
            "date_published": "2023-06-24T12:56:20.000Z",
            "author": {
                "name": "chaffeqa",
                "url": "https://github.com/chaffeqa"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1097697?u=835d83d6580ff93347634c9116ab73dbe9f17deb&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">The <code class=\"notranslate\">~=</code> operator is available for 4 types point, box, polygon, circle, which represents the usual notion of equality. (other geometric data types, which are line, lseg, path, still work with <code class=\"notranslate\">IS NOT DISTINCT FROM</code> / = operator)</p>\n<p dir=\"auto\">A typical example of how <code class=\"notranslate\">~=</code> works is: box '((3,4),(5,5))' ~=  box '((3,4),(5,5))' -&gt; t; box '((3,4),(5,5))' ~=  box '((5,5),(3,4))' -&gt; t<br>\nRef <a href=\"https://www.postgresql.org/docs/15/functions-geometry.html\" rel=\"nofollow\">https://www.postgresql.org/docs/15/functions-geometry.html</a></p>\n<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://user-images.githubusercontent.com/1097697/248456719-0dd4b8c9-5096-4b5b-bcf8-8d726f09cafb.png\"><img width=\"1292\" alt=\"Screenshot 2023-06-24 at 16 09 58\" src=\"https://user-images.githubusercontent.com/1097697/248456719-0dd4b8c9-5096-4b5b-bcf8-8d726f09cafb.png\" style=\"max-width: 100%;\"></a>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48497.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1760229595\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48497\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48497/hovercard\" href=\"https://github.com/rails/rails/issues/48497\">#48497</a></p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48568",
            "title": "Use `~=` instead of `IS NOT DISTINCT FROM` for the PostgreSQL geometric data types",
            "date_modified": "2023-06-24T09:10:48.000Z",
            "date_published": "2023-06-24T04:24:06.000Z",
            "author": {
                "name": "thukim",
                "url": "https://github.com/thukim"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5162312?u=e1b3c0f7c6dc600253bf15c99f618b9b2d39c500&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">This Pull Request has been created because I think that our test models could be improved. Right now, we primary test composite primary key code with <code class=\"notranslate\">Cpk::Book</code> and related models. This model uses <code class=\"notranslate\">[:author_id, :number]</code> as a PK definition. In practice, most models (I think) would use <code class=\"notranslate\">[:some_id, :id]</code>, so I've changed <code class=\"notranslate\">cpk_books</code> to mirror this assumption.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request changes <code class=\"notranslate\">Cpk::Book</code> to use <code class=\"notranslate\">id</code> instead of <code class=\"notranslate\">number</code>, and as the second campsite key, and updated related tests. This also uncovered three bugs in our current implementation I've fixed as well.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Happy to introduce another model instead of doing this, but it seems much easier to model our test data closer to what we expect in the real world.</p>\n<p dir=\"auto\">The last commit (<a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/rails/rails/commit/70f3b3de1cbf761e67f527ed1525734882e08649/hovercard\" href=\"https://github.com/rails/rails/commit/70f3b3de1cbf761e67f527ed1525734882e08649\"><tt>70f3b3d</tt></a>), breaks a few attribute method test expectations. We might need to implement a special query method for ID dirty checking. WDYT?</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48564",
            "title": "Use id in composite primary key of cpk book and fix related bugs",
            "date_modified": "2023-06-23T20:48:41.000Z",
            "date_published": "2023-06-23T05:30:52.000Z",
            "author": {
                "name": "gmcgibbon",
                "url": "https://github.com/gmcgibbon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/15172605?u=c9831ccf188358c7be46eb4c634002b47ebb1068&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #46653.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1478822248\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/46653\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/46653/hovercard\" href=\"https://github.com/rails/rails/issues/46653\">#46653</a></p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\"><code class=\"notranslate\">becomes</code> is coping the <code class=\"notranslate\">@attributes</code> from the original instance but the defaults are not being applied from the target class during initialization. Following the comments from the linked issue this PR will apply the default value if an attribute is nil and hasn't been changed.</p>",
            "url": "https://github.com/rails/rails/pull/48562",
            "title": "[Fix #46653] `becomes` losing target class default value",
            "date_modified": "2023-06-22T21:38:22.000Z",
            "date_published": "2023-06-22T21:07:04.000Z",
            "author": {
                "name": "abaldwin88",
                "url": "https://github.com/abaldwin88"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/1080678?u=b6e211b7766e6aa01e794067f67dd65d419c0150&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">Fixes 2 bugs in parallel testing.</p>\n<p dir=\"auto\">The first bug was related to changes made in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1282858547\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/45450\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/45450/hovercard\" href=\"https://github.com/rails/rails/pull/45450\">#45450</a> which meant that we were no longer replacing the connection in parallel testing because the config object is equal (we simply merge a new db name but the object id of the config stays the same). This bug only manifested in mysql and sqlite3 interestingly. It would fail on the internal metadata tables because they were missing in the schema version check.</p>\n<p dir=\"auto\">To fix this I introduced a <code class=\"notranslate\">clobber: true</code> kwarg onto the connection handler that allowsus to bypass the functionality that won't make a new connection if the config is the same. This is an easy way to fall back to the old behavior from before this change.</p>\n<p dir=\"auto\">After implementing this fix I was still seeing failures in the mysql demo app I made due to the fact that <code class=\"notranslate\">purge</code> was not re-establishing the connection to a config that had a database defined. Neither sqlite3 or postgresql were missing this.</p>\n<p dir=\"auto\">I added a test for mysql2 so we don't have regressions in the future. I think this was missed because sqlite3 only demonstrates the bug if it was never successful on that worker and postgresql was fine.</p>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48547.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1767794424\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48547\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48547/hovercard\" href=\"https://github.com/rails/rails/issues/48547\">#48547</a></p>\n<p dir=\"auto\">cc/ <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/matthutchinson/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/matthutchinson\">@matthutchinson</a></p>",
            "url": "https://github.com/rails/rails/pull/48560",
            "title": "Fix parallel testing (issue #48547)",
            "date_modified": "2023-06-23T12:53:04.000Z",
            "date_published": "2023-06-22T14:54:18.000Z",
            "author": {
                "name": "eileencodes",
                "url": "https://github.com/eileencodes"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/15572959?u=524a32c40db55e38d5fd9b1e6920e2a157998a12&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This PR fixes <code class=\"notranslate\">AbstractController#action_methods</code> to include inherited shadowed internal methods.</p>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I tried enabling <a href=\"https://github.com/rails/rails/pull/43487\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/43487/hovercard\"><code class=\"notranslate\">raise_on_missing_callback_actions</code></a> and I found out that <code class=\"notranslate\">MyController#action_methods</code> is missing a method that <code class=\"notranslate\">MyController</code> actually defines. It only happens when a method is also defined by an ancestor abstract controller.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48559",
            "title": "fix AbstractController#action_methods ",
            "date_modified": "2023-06-23T09:30:18.000Z",
            "date_published": "2023-06-22T10:32:58.000Z",
            "author": {
                "name": "kamil-gwozdz",
                "url": "https://github.com/kamil-gwozdz"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/6014046?u=3972bfb97451f7f90e051df2e49fb7b8ee83e28d&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1767455640\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48545\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48545/hovercard\" href=\"https://github.com/rails/rails/issues/48545\">#48545</a></p>\n<p dir=\"auto\">When <code class=\"notranslate\">to_s</code> was <a href=\"https://github.com/rails/rails/commit/f9fbfe0ab3cfc31f72663b9f06286ab32224b886\">deprecated</a> for <code class=\"notranslate\">to_fs</code>, warnings were added when explicit formats were passed to <code class=\"notranslate\">to_s</code>. To determine whether a format argument was passed, the method signature was changed from <code class=\"notranslate\">to_s(format = :default)</code> to <code class=\"notranslate\">to_s(format = EMPTY_OBJECT)</code>. While this enabled being able to warn on formats passed, it changed the behavior of not passing any format for applications that customized the <code class=\"notranslate\">:default</code> format for one of these classes.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This commit restores the previous behavior for <code class=\"notranslate\">:default</code> formats while keeping the existing warnings. Additionally, it will continue to not warn for applications using <code class=\"notranslate\">to_s</code> without arguments that haven't set a custom <code class=\"notranslate\">:default</code> format. However, for applications that have set a custom <code class=\"notranslate\">:default</code> format, it will now warn that those classes should be migrated to <code class=\"notranslate\">to_fs</code>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48555",
            "title": "Fix to_s not using :default format with no args",
            "date_modified": "2023-06-22T02:59:25.000Z",
            "date_published": "2023-06-22T02:54:48.000Z",
            "author": {
                "name": "skipkayhil",
                "url": "https://github.com/skipkayhil"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48517.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1762559591\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48517\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48517/hovercard\" href=\"https://github.com/rails/rails/issues/48517\">#48517</a></p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# will exclude header, even if config is enabled:\njavascript_include_tag(&quot;http://example.com/all.js&quot;, preload_links_header: false)\n\n# will include header, even if config is disabled:\nstylesheet_link_tag(&quot;http://example.com/all.css&quot;, preload_links_header: true)\"><pre class=\"notranslate\"><span class=\"pl-c\"># will exclude header, even if config is enabled:</span>\n<span class=\"pl-en\">javascript_include_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"http://example.com/all.js\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">preload_links_header</span>: <span class=\"pl-c1\">false</span><span class=\"pl-kos\">)</span>\n\n<span class=\"pl-c\"># will include header, even if config is disabled:</span>\n<span class=\"pl-en\">stylesheet_link_tag</span><span class=\"pl-kos\">(</span><span class=\"pl-s\">\"http://example.com/all.css\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">preload_links_header</span>: <span class=\"pl-c1\">true</span><span class=\"pl-kos\">)</span></pre></div>",
            "url": "https://github.com/rails/rails/pull/48553",
            "title": "Allow opting in/out of `Link preload` headers when calling `stylesheet_link_tag` or `javascript_include_tag`",
            "date_modified": "2023-06-22T02:16:02.000Z",
            "date_published": "2023-06-22T02:14:29.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/76848245?u=fbf230f4fe1bc9f7a0e3a404eeb20e2a333cbcfd&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Summary</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48548.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1767971401\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48548\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48548/hovercard\" href=\"https://github.com/rails/rails/issues/48548\">#48548</a></p>",
            "url": "https://github.com/rails/rails/pull/48549",
            "title": "Qualify association unscope values with table names",
            "date_modified": "2023-06-25T21:21:18.000Z",
            "date_published": "2023-06-21T16:24:58.000Z",
            "author": {
                "name": "philip-maina",
                "url": "https://github.com/philip-maina"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">ref: <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1757611245\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48477\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48477/hovercard\" href=\"https://github.com/rails/rails/issues/48477\">#48477</a></p>\n<p dir=\"auto\">Using forms inside emails is not common, but it's possible, and it's also possible to share views between controllers and mailers. Currently if a controller sets a <code class=\"notranslate\">default_form_builder</code> that's different from the global config, mailers that use the same views will not default to the same <code class=\"notranslate\">FormBuilder</code>. To fix this, this PR adds a <code class=\"notranslate\">default_form_builder</code> method for mailers that does the same thing as its controller sibling.</p>",
            "url": "https://github.com/rails/rails/pull/48542",
            "title": "Introduce `ActionMailer::FormBuilder`",
            "date_modified": "2023-06-21T08:20:47.000Z",
            "date_published": "2023-06-21T08:18:50.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/28561?u=095779352a57f75e734987829f3f67a10e5780ed&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">GlobalID is a dependency of Active Job and Action Text. It adds <code class=\"notranslate\">to_gid</code> and <code class=\"notranslate\">to_sgid</code> methods to Active Model and Active Record classes.</p>\n<p dir=\"auto\">Trying to find the documentation of these methods can be confusing as they are not present in the API docs.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">By symlinking the globalid gem from the Gemfile we can include it in the API documentation. After the <code class=\"notranslate\">rdoc</code> task has run we can remove the symlink. I'd prefer to remove to symlink in an <code class=\"notranslate\">ensure</code> block but that doesn't seem to be supported by Rake.</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">This could also be used to add all the <code class=\"notranslate\">turbo-rails</code> methods to the API docs, like <code class=\"notranslate\"> broadcast_append_to</code>  and <code class=\"notranslate\">turbo_stream_from</code> (that is used in video demo on <a href=\"https://rubyonrails.org/\" rel=\"nofollow\">https://rubyonrails.org/</a>.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48541",
            "title": "Add GlobalID to the API docs",
            "date_modified": "2023-06-21T06:36:55.000Z",
            "date_published": "2023-06-21T06:29:25.000Z",
            "author": {
                "name": "p8",
                "url": "https://github.com/p8"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/100725?u=43e1f20c541088357f0cfc80d80063299892e394&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">I've tested Rails 7.1 Dockerfile template in Rails 7.0 app with MRSK on GitHub Actions and found that a bit more optimization can be applied.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request adds minor optimization to dockerignore template.</p>\n<p dir=\"auto\">During the build process, the setup-ruby@v1 GitHub Action leaves artifacts in the ~/vendor/bundle folder, resulting in two full bundles in the final build: one in the default /usr/local/bundle directory specified in the Dockerfile template, and another in the /rails/vendor/bundle directory. By ignoring the /rails/vendor/bundle directory, we can significantly reduce the size of the final image.</p>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48540",
            "title": "Added Dockerfile instructions to remove artifacts and node_modules",
            "date_modified": "2023-06-21T07:32:04.000Z",
            "date_published": "2023-06-21T06:16:44.000Z",
            "author": {
                "name": "igor-alexandrov",
                "url": "https://github.com/igor-alexandrov"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2651240?u=97e6903620ef2874e2231cee9eb2654b7811d750&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Support queries with regular expressions on supported databases. (PostgreSQL/MySQL/SQLite)</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.where(title: /ThInKiNg/)\n#=&gt; SELECT * FROM posts WHERE title REGEXP 'ThInKiNg'; --MySQL/SQLite\n#=&gt; SELECT * FROM posts WHERE title ~* 'ThInKiNg'; --PostgreSQL\n\nPost.where.not(title: /ThInKiNg/)\n#=&gt; SELECT * FROM posts WHERE title NOT REGEXP 'ThInKiNg'; --MySQL/SQLite\n#=&gt; SELECT * FROM posts WHERE title !~* 'ThInKiNg'; --PostgreSQL    \"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-pds\">/ThInKiNg/</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE title REGEXP 'ThInKiNg'; --MySQL/SQLite</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE title ~* 'ThInKiNg'; --PostgreSQL</span>\n\n<span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">not</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">title</span>: <span class=\"pl-pds\">/ThInKiNg/</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE title NOT REGEXP 'ThInKiNg'; --MySQL/SQLite</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE title !~* 'ThInKiNg'; --PostgreSQL    </span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48538",
            "title": "Support queries with regular expressions",
            "date_modified": "2023-06-22T06:37:41.000Z",
            "date_published": "2023-06-21T03:57:38.000Z",
            "author": {
                "name": "lazaronixon",
                "url": "https://github.com/lazaronixon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/5512772?u=bbae6d87b3499e6b3662664cf4be0e84cc40f6d2&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><p dir=\"auto\">This commit changes bodies of methods generated by <code class=\"notranslate\">alias_attribute</code> along with generating these methods lazily.</p>\n<p dir=\"auto\">Previously the body of the <code class=\"notranslate\">alias_attribute :new_title, :title</code> was <code class=\"notranslate\">def new_title; title; end</code>. This commit changes it to <code class=\"notranslate\">def new_title; attribute(\"title\"); end</code>.</p>\n<p dir=\"auto\">This allows for <code class=\"notranslate\">alias_attribute</code> to be used to alias attributes named with a reserved names like <code class=\"notranslate\">id</code>:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"  class Topic &lt; ActiveRecord::Base\n    self.primary_key = :title\n    alias_attribute :id_value, :id\n  end\n\n  Topic.new.id_value # =&gt; 1\"><pre class=\"notranslate\">  <span class=\"pl-k\">class</span> <span class=\"pl-v\">Topic</span> &lt; <span class=\"pl-v\">ActiveRecord</span>::<span class=\"pl-v\">Base</span>\n    <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">primary_key</span> <span class=\"pl-c1\">=</span> <span class=\"pl-pds\">:title</span>\n    <span class=\"pl-en\">alias_attribute</span> <span class=\"pl-pds\">:id_value</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:id</span>\n  <span class=\"pl-k\">end</span>\n\n  <span class=\"pl-v\">Topic</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">new</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">id_value</span> <span class=\"pl-c\"># =&gt; 1</span></pre></div>\n<h2 dir=\"auto\">Implementation details</h2>\n<p dir=\"auto\"><code class=\"notranslate\">method_defined_within?</code> method has been moved from <code class=\"notranslate\">activerecord</code> to <code class=\"notranslate\">activemodel</code> so both can use it</p>\n<h3 dir=\"auto\">Body generation</h3>\n<p dir=\"auto\">Most of the methods for the alias attribute will now be generated by <code class=\"notranslate\">define_proxy_call</code> unless the model redefines the <code class=\"notranslate\">target_name</code> attribute method, for example:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"class Post &lt; ApplicationRecord\n alias_attribute :subject, :title\n\n def title_was\n  ...\n end\"><pre class=\"notranslate\"><span class=\"pl-k\">class</span> <span class=\"pl-v\">Post</span> &lt; <span class=\"pl-v\">ApplicationRecord</span>\n <span class=\"pl-en\">alias_attribute</span> <span class=\"pl-pds\">:subject</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">:title</span>\n\n <span class=\"pl-k\">def</span> <span class=\"pl-en\">title_was</span>\n  ...\n <span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">will issue a deprecation warning that asks for the <code class=\"notranslate\">subject_was</code> to be overridden as well since next version of Rails will not make <code class=\"notranslate\">subject_was</code> method to call into the <code class=\"notranslate\">title_was</code>. This is a very unlikely situation and I genuinely expect no applications to ever see the deprecation warning but still something that does require a deprecation cycle.</p>\n<p dir=\"auto\">When the deprecation is gone the <code class=\"notranslate\">alias_attribute</code> definition can become as simple as:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"      def alias_attribute(new_name, old_name)\n        self.attribute_aliases = attribute_aliases.merge(new_name.to_s =&gt; old_name.to_s)\n        define_attribute_method(old_name, as: new_name)\n      end\"><pre class=\"notranslate\">      <span class=\"pl-k\">def</span> <span class=\"pl-en\">alias_attribute</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">new_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-s1\">old_name</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-smi\">self</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">attribute_aliases</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">attribute_aliases</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">merge</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">new_name</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_s</span> <span class=\"pl-c1\">=&gt;</span> <span class=\"pl-s1\">old_name</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">to_s</span><span class=\"pl-kos\">)</span>\n        <span class=\"pl-en\">define_attribute_method</span><span class=\"pl-kos\">(</span><span class=\"pl-s1\">old_name</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">as</span>: <span class=\"pl-s1\">new_name</span><span class=\"pl-kos\">)</span>\n      <span class=\"pl-k\">end</span></pre></div>\n<p dir=\"auto\">where <code class=\"notranslate\">as:</code> will have to be added but semantically <code class=\"notranslate\">alias_attribute</code> will behave as \"define all the same as we define for the original attribute but now under a different name\"</p>\n<h3 dir=\"auto\">Lazy method generation</h3>\n<p dir=\"auto\"><code class=\"notranslate\">alias_attribute</code> used to generate all the methods eagerly but it doesn't allow us to have the full picture of <code class=\"notranslate\">self</code> in the context and check for methods being overridden. So we are changing to lazily define these attributes whenever the first instance of the class has been initialized. If application is booted in the <code class=\"notranslate\">EAGER_LOAD</code> mode a hook from initializer will iterate over dependants and force the attribute methods to be generated. This is very similar to how Active Record generates attributes based on schema.</p>\n<p dir=\"auto\"><code class=\"notranslate\">alias_attribute</code> now only registers the intention to define an alias in <code class=\"notranslate\">attribute_aliases</code> variable which will be used to define methods for all aliases later. <code class=\"notranslate\">generate_alias_attributes</code> iterates over <code class=\"notranslate\">attribute_aliases</code> and generates attribute methods for each alias. <code class=\"notranslate\">generate_alias_attributes</code> also sets <code class=\"notranslate\">@alias_attributes_mass_generated</code> to <code class=\"notranslate\">true</code> so the next call to <code class=\"notranslate\">alias_attribute</code> will eagerly define all the methods. This is to support alias attribute definitions like <code class=\"notranslate\">MyModel.alias_attribute :new</code></p>\n<p dir=\"auto\">Previously alias attribute methods were generated directly on the class but now we are generating it on an included <code class=\"notranslate\">generated_alias_attribute_methods</code> module which we also use as a mutex</p>\n<p dir=\"auto\">As a result it may slightly improve the boot time but it wasn't the initial goal.</p>",
            "url": "https://github.com/rails/rails/pull/48533",
            "title": "Call proxy methods from `alias_attribute` generated methods",
            "date_modified": "2023-06-22T15:56:11.000Z",
            "date_published": "2023-06-20T17:00:43.000Z",
            "author": {
                "name": "nvasilevski",
                "url": "https://github.com/nvasilevski"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/2651240?u=97e6903620ef2874e2231cee9eb2654b7811d750&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Fix unscope with multiple not conditions</p>\n<p dir=\"auto\">Before:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.where.not(body: &quot;hello&quot;, title: &quot;sti me&quot;).unscope(where: :title)\n#=&gt; SELECT * FROM posts WHERE NOT (body = 'hello' AND title = 'sti me')\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">not</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">body</span>: <span class=\"pl-s\">\"hello\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"sti me\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">unscope</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">where</span>: <span class=\"pl-pds\">:title</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE NOT (body = 'hello' AND title = 'sti me')</span></pre></div>\n<p dir=\"auto\">Later:</p>\n<div class=\"highlight highlight-source-ruby notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Post.where.not(body: &quot;hello&quot;, title: &quot;sti me&quot;).unscope(where: :title)\n#=&gt; SELECT * FROM posts WHERE NOT (body = 'hello')\"><pre class=\"notranslate\"><span class=\"pl-v\">Post</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">where</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">not</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">body</span>: <span class=\"pl-s\">\"hello\"</span><span class=\"pl-kos\">,</span> <span class=\"pl-pds\">title</span>: <span class=\"pl-s\">\"sti me\"</span><span class=\"pl-kos\">)</span><span class=\"pl-kos\">.</span><span class=\"pl-en\">unscope</span><span class=\"pl-kos\">(</span><span class=\"pl-pds\">where</span>: <span class=\"pl-pds\">:title</span><span class=\"pl-kos\">)</span>\n<span class=\"pl-c\">#=&gt; SELECT * FROM posts WHERE NOT (body = 'hello')</span></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48531",
            "title": "Fix unscope with multiple not conditions",
            "date_modified": "2023-06-21T14:59:52.000Z",
            "date_published": "2023-06-20T15:29:58.000Z",
            "author": {
                "name": "lazaronixon",
                "url": "https://github.com/lazaronixon"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/75765648?u=1dc3ffb2f347af44627baa665b1b2dff0abd7dd1&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\">Currently, insert_all/upsert_all only accept array of hashes, so I want to make it accept array of models as well.<br>\nExample:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Book.insert_all([\n  Book.new(title: &quot;Rework&quot;, author: &quot;David&quot;),\n  Book.new(title: &quot;Eloquent Ruby&quot;, author: &quot;Russ&quot;)\n])\"><pre class=\"notranslate\"><code class=\"notranslate\">Book.insert_all([\n  Book.new(title: \"Rework\", author: \"David\"),\n  Book.new(title: \"Eloquent Ruby\", author: \"Russ\")\n])\n</code></pre></div>\n\n<h3 dir=\"auto\">Detail</h3>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">If you do not want timestamp values to be updated automatically, you must set record_timestamps to false.<br>\nExample:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Book.insert_all([Book.new(title: &quot;Rework&quot;, author: &quot;David&quot;)])\nBook.last.updated_at = '2023-05-23 20:37:10.97 UTC'\n\nBook.insert_all([Book.new(title: &quot;Rework&quot;, author: &quot;David&quot;)], record_timestamps: false)\nBook.last.updated_at = nil\"><pre class=\"notranslate\"><code class=\"notranslate\">Book.insert_all([Book.new(title: \"Rework\", author: \"David\")])\nBook.last.updated_at = '2023-05-23 20:37:10.97 UTC'\n\nBook.insert_all([Book.new(title: \"Rework\", author: \"David\")], record_timestamps: false)\nBook.last.updated_at = nil\n</code></pre></div>\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48513",
            "title": "Allow insert_all/upsert_all to use an array of models",
            "date_modified": "2023-06-22T11:23:06.000Z",
            "date_published": "2023-06-18T13:30:51.000Z",
            "author": {
                "name": "TakuyaKurimoto",
                "url": "https://github.com/TakuyaKurimoto"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/509837?u=697e4a265d5359363a5d57a24b07f9a79cb0b08a&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/><h3 dir=\"auto\">Motivation / Background</h3>\n<p dir=\"auto\"><span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #48463.\">Fixes</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1755595459\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/48463\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/48463/hovercard\" href=\"https://github.com/rails/rails/issues/48463\">#48463</a></p>\n<p dir=\"auto\">Since <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"998126151\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/43227\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/43227/hovercard\" href=\"https://github.com/rails/rails/pull/43227\">#43227</a>, the default CSP suggested in the initializer does not work with empty sessions. See <a href=\"https://github.com/rails/rails/pull/43227#issuecomment-1191692615\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/rails/rails/pull/43227/hovercard\">this comment</a> for an example issue and workaround.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This PR just adds a fallback in case the session has not been loaded. I also updated the railties test to match the config in the default initializer.</p>",
            "url": "https://github.com/rails/rails/pull/48510",
            "title": "Allow default CSP setup to work with empty sessions",
            "date_modified": "2023-06-20T12:40:04.000Z",
            "date_published": "2023-06-18T07:50:25.000Z",
            "author": {
                "name": "ghiculescu",
                "url": "https://github.com/ghiculescu"
            }
        },
        {
            "content_html": "<img src=\"https://avatars.githubusercontent.com/u/54629302?u=be8de5137bf940532cddd05aff823129ab8a39db&v=4\" width=\"64\" height=\"64\" alt=\"\"/><br/>\n<h3 dir=\"auto\">Motivation / Background</h3>\n\n<p dir=\"auto\">This Pull Request has been created to <span class=\"issue-keyword tooltipped tooltipped-se\" aria-label=\"This pull request closes issue #47357.\">fix</span> <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"1580073071\" data-permission-text=\"Title is private\" data-url=\"https://github.com/rails/rails/issues/47357\" data-hovercard-type=\"issue\" data-hovercard-url=\"/rails/rails/issues/47357/hovercard\" href=\"https://github.com/rails/rails/issues/47357\">#47357</a>.</p>\n<h3 dir=\"auto\">Detail</h3>\n<p dir=\"auto\">This Pull Request ensures that when using <code class=\"notranslate\">scoping</code> on update, delete and reload, scopes are only applied if <code class=\"notranslate\">all_queries: true</code> and only default scopes with <code class=\"notranslate\">all_queries: true</code> are applied. Because all default scopes are applied initially with the <code class=\"notranslate\">where</code> clause when scoping, my approach was to remove the unneeded scopes after the fact in these three scenarios.</p>\n<p dir=\"auto\">Except for the update and delete cases <strong>without</strong> <code class=\"notranslate\">scoping(all_queries: true)</code>, all other tests failed initially (4/6).</p>\n<h3 dir=\"auto\">Additional information</h3>\n<p dir=\"auto\">Added <a class=\"user-mention notranslate\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/pjambet/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/pjambet\">@pjambet</a> as a co-author since they thoroughly documented all the expected and actual behaviour and tests.</p>\n<p dir=\"auto\">Unsure if this needs a CHANGELOG entry?</p>\n\n<h3 dir=\"auto\">Checklist</h3>\n<p dir=\"auto\">Before submitting the PR make sure the following are checked:</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: <code class=\"notranslate\">[Fix #issue-number]</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> Tests are added or updated if you fix a bug or add a feature.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"\" disabled=\"\" class=\"task-list-item-checkbox\" checked=\"\"> CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.</li>\n</ul>",
            "url": "https://github.com/rails/rails/pull/48509",
            "title": "[Fix #47357] Inconsistent update, delete, reload behaviour with `#scoping` and default scopes",
            "date_modified": "2023-06-23T06:16:53.000Z",
            "date_published": "2023-06-17T14:33:33.000Z",
            "author": {
                "name": "joshuay03",
                "url": "https://github.com/joshuay03"
            }
        }
    ]
}